(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Fm(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const vt={},Wo=[],Fr=()=>{},RS=()=>!1,dd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Bm=t=>t.startsWith("onUpdate:"),Kt=Object.assign,Um=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},PS=Object.prototype.hasOwnProperty,ft=(t,e)=>PS.call(t,e),Fe=Array.isArray,Ko=t=>hd(t)==="[object Map]",gw=t=>hd(t)==="[object Set]",$e=t=>typeof t=="function",Et=t=>typeof t=="string",gs=t=>typeof t=="symbol",It=t=>t!==null&&typeof t=="object",pw=t=>(It(t)||$e(t))&&$e(t.then)&&$e(t.catch),vw=Object.prototype.toString,hd=t=>vw.call(t),xS=t=>hd(t).slice(8,-1),_w=t=>hd(t)==="[object Object]",$m=t=>Et(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ul=Fm(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fd=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},DS=/-(\w)/g,ir=fd(t=>t.replace(DS,(e,n)=>n?n.toUpperCase():"")),OS=/\B([A-Z])/g,ki=fd(t=>t.replace(OS,"-$1").toLowerCase()),md=fd(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ph=fd(t=>t?`on${md(t)}`:""),rs=(t,e)=>!Object.is(t,e),xh=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},yw=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},VS=t=>{const e=parseFloat(t);return isNaN(e)?t:e},LS=t=>{const e=Et(t)?Number(t):NaN;return isNaN(e)?t:e};let Rv;const gd=()=>Rv||(Rv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function pd(t){if(Fe(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Et(r)?BS(r):pd(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Et(t)||It(t))return t}const NS=/;(?![^(]*\))/g,MS=/:([^]+)/,FS=/\/\*[^]*?\*\//g;function BS(t){const e={};return t.replace(FS,"").split(NS).forEach(n=>{if(n){const r=n.split(MS);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function US(t){if(!t)return"";if(Et(t))return t;let e="";for(const n in t){const r=t[n];if(Et(r)||typeof r=="number"){const i=n.startsWith("--")?n:ki(n);e+=`${i}:${r};`}}return e}function oi(t){let e="";if(Et(t))e=t;else if(Fe(t))for(let n=0;n<t.length;n++){const r=oi(t[n]);r&&(e+=r+" ")}else if(It(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const $S="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",zS=Fm($S);function bw(t){return!!t||t===""}const ww=t=>!!(t&&t.__v_isRef===!0),Ye=t=>Et(t)?t:t==null?"":Fe(t)||It(t)&&(t.toString===vw||!$e(t.toString))?ww(t)?Ye(t.value):JSON.stringify(t,Tw,2):String(t),Tw=(t,e)=>ww(e)?Tw(t,e.value):Ko(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[Dh(r,s)+" =>"]=i,n),{})}:gw(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Dh(n))}:gs(e)?Dh(e):It(e)&&!Fe(e)&&!_w(e)?String(e):e,Dh=(t,e="")=>{var n;return gs(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let jn;class Ew{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=jn,!e&&jn&&(this.index=(jn.scopes||(jn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=jn;try{return jn=this,e()}finally{jn=n}}}on(){jn=this}off(){jn=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function jS(t){return new Ew(t)}function HS(){return jn}let _t;const Oh=new WeakSet;class Iw{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,jn&&jn.active&&jn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Oh.has(this)&&(Oh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Sw(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Pv(this),Aw(this);const e=_t,n=_r;_t=this,_r=!0;try{return this.fn()}finally{kw(this),_t=e,_r=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Hm(e);this.deps=this.depsTail=void 0,Pv(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Oh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Df(this)&&this.run()}get dirty(){return Df(this)}}let Cw=0,dl,hl;function Sw(t,e=!1){if(t.flags|=8,e){t.next=hl,hl=t;return}t.next=dl,dl=t}function zm(){Cw++}function jm(){if(--Cw>0)return;if(hl){let e=hl;for(hl=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;dl;){let e=dl;for(dl=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Aw(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function kw(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),Hm(r),qS(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function Df(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Rw(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Rw(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Rl))return;t.globalVersion=Rl;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Df(t)){t.flags&=-3;return}const n=_t,r=_r;_t=t,_r=!0;try{Aw(t);const i=t.fn(t._value);(e.version===0||rs(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{_t=n,_r=r,kw(t),t.flags&=-3}}function Hm(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)Hm(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function qS(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let _r=!0;const Pw=[];function ps(){Pw.push(_r),_r=!1}function vs(){const t=Pw.pop();_r=t===void 0?!0:t}function Pv(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=_t;_t=void 0;try{e()}finally{_t=n}}}let Rl=0;class GS{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class qm{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!_t||!_r||_t===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==_t)n=this.activeLink=new GS(_t,this),_t.deps?(n.prevDep=_t.depsTail,_t.depsTail.nextDep=n,_t.depsTail=n):_t.deps=_t.depsTail=n,xw(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=_t.depsTail,n.nextDep=void 0,_t.depsTail.nextDep=n,_t.depsTail=n,_t.deps===n&&(_t.deps=r)}return n}trigger(e){this.version++,Rl++,this.notify(e)}notify(e){zm();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{jm()}}}function xw(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)xw(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Of=new WeakMap,qs=Symbol(""),Vf=Symbol(""),Pl=Symbol("");function fn(t,e,n){if(_r&&_t){let r=Of.get(t);r||Of.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new qm),i.map=r,i.key=n),i.track()}}function ai(t,e,n,r,i,s){const o=Of.get(t);if(!o){Rl++;return}const a=l=>{l&&l.trigger()};if(zm(),e==="clear")o.forEach(a);else{const l=Fe(t),c=l&&$m(n);if(l&&n==="length"){const d=Number(r);o.forEach((f,m)=>{(m==="length"||m===Pl||!gs(m)&&m>=d)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(Pl)),e){case"add":l?c&&a(o.get("length")):(a(o.get(qs)),Ko(t)&&a(o.get(Vf)));break;case"delete":l||(a(o.get(qs)),Ko(t)&&a(o.get(Vf)));break;case"set":Ko(t)&&a(o.get(qs));break}}jm()}function Io(t){const e=ut(t);return e===t?e:(fn(e,"iterate",Pl),tr(t)?e:e.map(mn))}function vd(t){return fn(t=ut(t),"iterate",Pl),t}const WS={__proto__:null,[Symbol.iterator](){return Vh(this,Symbol.iterator,mn)},concat(...t){return Io(this).concat(...t.map(e=>Fe(e)?Io(e):e))},entries(){return Vh(this,"entries",t=>(t[1]=mn(t[1]),t))},every(t,e){return Jr(this,"every",t,e,void 0,arguments)},filter(t,e){return Jr(this,"filter",t,e,n=>n.map(mn),arguments)},find(t,e){return Jr(this,"find",t,e,mn,arguments)},findIndex(t,e){return Jr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Jr(this,"findLast",t,e,mn,arguments)},findLastIndex(t,e){return Jr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Jr(this,"forEach",t,e,void 0,arguments)},includes(...t){return Lh(this,"includes",t)},indexOf(...t){return Lh(this,"indexOf",t)},join(t){return Io(this).join(t)},lastIndexOf(...t){return Lh(this,"lastIndexOf",t)},map(t,e){return Jr(this,"map",t,e,void 0,arguments)},pop(){return qa(this,"pop")},push(...t){return qa(this,"push",t)},reduce(t,...e){return xv(this,"reduce",t,e)},reduceRight(t,...e){return xv(this,"reduceRight",t,e)},shift(){return qa(this,"shift")},some(t,e){return Jr(this,"some",t,e,void 0,arguments)},splice(...t){return qa(this,"splice",t)},toReversed(){return Io(this).toReversed()},toSorted(t){return Io(this).toSorted(t)},toSpliced(...t){return Io(this).toSpliced(...t)},unshift(...t){return qa(this,"unshift",t)},values(){return Vh(this,"values",mn)}};function Vh(t,e,n){const r=vd(t),i=r[e]();return r!==t&&!tr(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const KS=Array.prototype;function Jr(t,e,n,r,i,s){const o=vd(t),a=o!==t&&!tr(t),l=o[e];if(l!==KS[e]){const f=l.apply(t,s);return a?mn(f):f}let c=n;o!==t&&(a?c=function(f,m){return n.call(this,mn(f),m,t)}:n.length>2&&(c=function(f,m){return n.call(this,f,m,t)}));const d=l.call(o,c,r);return a&&i?i(d):d}function xv(t,e,n,r){const i=vd(t);let s=n;return i!==t&&(tr(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,mn(a),l,t)}),i[e](s,...r)}function Lh(t,e,n){const r=ut(t);fn(r,"iterate",Pl);const i=r[e](...n);return(i===-1||i===!1)&&Km(n[0])?(n[0]=ut(n[0]),r[e](...n)):i}function qa(t,e,n=[]){ps(),zm();const r=ut(t)[e].apply(t,n);return jm(),vs(),r}const YS=Fm("__proto__,__v_isRef,__isVue"),Dw=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(gs));function QS(t){gs(t)||(t=String(t));const e=ut(this);return fn(e,"has",t),e.hasOwnProperty(t)}class Ow{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?oA:Mw:s?Nw:Lw).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Fe(e);if(!i){let l;if(o&&(l=WS[n]))return l;if(n==="hasOwnProperty")return QS}const a=Reflect.get(e,n,nn(e)?e:r);return(gs(n)?Dw.has(n):YS(n))||(i||fn(e,"get",n),s)?a:nn(a)?o&&$m(n)?a:a.value:It(a)?i?Bw(a):Ct(a):a}}class Vw extends Ow{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=Qs(s);if(!tr(r)&&!Qs(r)&&(s=ut(s),r=ut(r)),!Fe(e)&&nn(s)&&!nn(r))return l?!1:(s.value=r,!0)}const o=Fe(e)&&$m(n)?Number(n)<e.length:ft(e,n),a=Reflect.set(e,n,r,nn(e)?e:i);return e===ut(i)&&(o?rs(r,s)&&ai(e,"set",n,r):ai(e,"add",n,r)),a}deleteProperty(e,n){const r=ft(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&ai(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!gs(n)||!Dw.has(n))&&fn(e,"has",n),r}ownKeys(e){return fn(e,"iterate",Fe(e)?"length":qs),Reflect.ownKeys(e)}}class XS extends Ow{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const JS=new Vw,ZS=new XS,eA=new Vw(!0);const Lf=t=>t,Oc=t=>Reflect.getPrototypeOf(t);function tA(t,e,n){return function(...r){const i=this.__v_raw,s=ut(i),o=Ko(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),d=n?Lf:e?Nf:mn;return!e&&fn(s,"iterate",l?Vf:qs),{next(){const{value:f,done:m}=c.next();return m?{value:f,done:m}:{value:a?[d(f[0]),d(f[1])]:d(f),done:m}},[Symbol.iterator](){return this}}}}function Vc(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function nA(t,e){const n={get(i){const s=this.__v_raw,o=ut(s),a=ut(i);t||(rs(i,a)&&fn(o,"get",i),fn(o,"get",a));const{has:l}=Oc(o),c=e?Lf:t?Nf:mn;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&fn(ut(i),"iterate",qs),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=ut(s),a=ut(i);return t||(rs(i,a)&&fn(o,"has",i),fn(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=ut(a),c=e?Lf:t?Nf:mn;return!t&&fn(l,"iterate",qs),a.forEach((d,f)=>i.call(s,c(d),c(f),o))}};return Kt(n,t?{add:Vc("add"),set:Vc("set"),delete:Vc("delete"),clear:Vc("clear")}:{add(i){!e&&!tr(i)&&!Qs(i)&&(i=ut(i));const s=ut(this);return Oc(s).has.call(s,i)||(s.add(i),ai(s,"add",i,i)),this},set(i,s){!e&&!tr(s)&&!Qs(s)&&(s=ut(s));const o=ut(this),{has:a,get:l}=Oc(o);let c=a.call(o,i);c||(i=ut(i),c=a.call(o,i));const d=l.call(o,i);return o.set(i,s),c?rs(s,d)&&ai(o,"set",i,s):ai(o,"add",i,s),this},delete(i){const s=ut(this),{has:o,get:a}=Oc(s);let l=o.call(s,i);l||(i=ut(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&ai(s,"delete",i,void 0),c},clear(){const i=ut(this),s=i.size!==0,o=i.clear();return s&&ai(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=tA(i,t,e)}),n}function Gm(t,e){const n=nA(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(ft(n,i)&&i in r?n:r,i,s)}const rA={get:Gm(!1,!1)},iA={get:Gm(!1,!0)},sA={get:Gm(!0,!1)};const Lw=new WeakMap,Nw=new WeakMap,Mw=new WeakMap,oA=new WeakMap;function aA(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function lA(t){return t.__v_skip||!Object.isExtensible(t)?0:aA(xS(t))}function Ct(t){return Qs(t)?t:Wm(t,!1,JS,rA,Lw)}function Fw(t){return Wm(t,!1,eA,iA,Nw)}function Bw(t){return Wm(t,!0,ZS,sA,Mw)}function Wm(t,e,n,r,i){if(!It(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=lA(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Yo(t){return Qs(t)?Yo(t.__v_raw):!!(t&&t.__v_isReactive)}function Qs(t){return!!(t&&t.__v_isReadonly)}function tr(t){return!!(t&&t.__v_isShallow)}function Km(t){return t?!!t.__v_raw:!1}function ut(t){const e=t&&t.__v_raw;return e?ut(e):t}function cA(t){return!ft(t,"__v_skip")&&Object.isExtensible(t)&&yw(t,"__v_skip",!0),t}const mn=t=>It(t)?Ct(t):t,Nf=t=>It(t)?Bw(t):t;function nn(t){return t?t.__v_isRef===!0:!1}function j(t){return Uw(t,!1)}function uA(t){return Uw(t,!0)}function Uw(t,e){return nn(t)?t:new dA(t,e)}class dA{constructor(e,n){this.dep=new qm,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ut(e),this._value=n?e:mn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||tr(e)||Qs(e);e=r?e:ut(e),rs(e,n)&&(this._rawValue=e,this._value=r?e:mn(e),this.dep.trigger())}}function yr(t){return nn(t)?t.value:t}const hA={get:(t,e,n)=>e==="__v_raw"?t:yr(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return nn(i)&&!nn(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function $w(t){return Yo(t)?t:new Proxy(t,hA)}class fA{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new qm(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Rl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&_t!==this)return Sw(this,!0),!0}get value(){const e=this.dep.track();return Rw(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function mA(t,e,n=!1){let r,i;return $e(t)?r=t:(r=t.get,i=t.set),new fA(r,i,n)}const Lc={},Ru=new WeakMap;let Ms;function gA(t,e=!1,n=Ms){if(n){let r=Ru.get(n);r||Ru.set(n,r=[]),r.push(t)}}function pA(t,e,n=vt){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,c=D=>i?D:tr(D)||i===!1||i===0?li(D,1):li(D);let d,f,m,g,_=!1,T=!1;if(nn(t)?(f=()=>t.value,_=tr(t)):Yo(t)?(f=()=>c(t),_=!0):Fe(t)?(T=!0,_=t.some(D=>Yo(D)||tr(D)),f=()=>t.map(D=>{if(nn(D))return D.value;if(Yo(D))return c(D);if($e(D))return l?l(D,2):D()})):$e(t)?e?f=l?()=>l(t,2):t:f=()=>{if(m){ps();try{m()}finally{vs()}}const D=Ms;Ms=d;try{return l?l(t,3,[g]):t(g)}finally{Ms=D}}:f=Fr,e&&i){const D=f,x=i===!0?1/0:i;f=()=>li(D(),x)}const b=HS(),C=()=>{d.stop(),b&&b.active&&Um(b.effects,d)};if(s&&e){const D=e;e=(...x)=>{D(...x),C()}}let y=T?new Array(t.length).fill(Lc):Lc;const A=D=>{if(!(!(d.flags&1)||!d.dirty&&!D))if(e){const x=d.run();if(i||_||(T?x.some((O,R)=>rs(O,y[R])):rs(x,y))){m&&m();const O=Ms;Ms=d;try{const R=[x,y===Lc?void 0:T&&y[0]===Lc?[]:y,g];l?l(e,3,R):e(...R),y=x}finally{Ms=O}}}else d.run()};return a&&a(A),d=new Iw(f),d.scheduler=o?()=>o(A,!1):A,g=D=>gA(D,!1,d),m=d.onStop=()=>{const D=Ru.get(d);if(D){if(l)l(D,4);else for(const x of D)x();Ru.delete(d)}},e?r?A(!0):y=d.run():o?o(A.bind(null,!0),!0):d.run(),C.pause=d.pause.bind(d),C.resume=d.resume.bind(d),C.stop=C,C}function li(t,e=1/0,n){if(e<=0||!It(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,nn(t))li(t.value,e,n);else if(Fe(t))for(let r=0;r<t.length;r++)li(t[r],e,n);else if(gw(t)||Ko(t))t.forEach(r=>{li(r,e,n)});else if(_w(t)){for(const r in t)li(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&li(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Xl(t,e,n,r){try{return r?t(...r):t()}catch(i){_d(i,e,n)}}function Er(t,e,n,r){if($e(t)){const i=Xl(t,e,n,r);return i&&pw(i)&&i.catch(s=>{_d(s,e,n)}),i}if(Fe(t)){const i=[];for(let s=0;s<t.length;s++)i.push(Er(t[s],e,n,r));return i}}function _d(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||vt;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const d=a.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](t,l,c)===!1)return}a=a.parent}if(s){ps(),Xl(s,null,10,[t,l,c]),vs();return}}vA(t,n,i,r,o)}function vA(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const Pn=[];let Lr=-1;const Qo=[];let Gi=null,Uo=0;const zw=Promise.resolve();let Pu=null;function qe(t){const e=Pu||zw;return t?e.then(this?t.bind(this):t):e}function _A(t){let e=Lr+1,n=Pn.length;for(;e<n;){const r=e+n>>>1,i=Pn[r],s=xl(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function Ym(t){if(!(t.flags&1)){const e=xl(t),n=Pn[Pn.length-1];!n||!(t.flags&2)&&e>=xl(n)?Pn.push(t):Pn.splice(_A(e),0,t),t.flags|=1,jw()}}function jw(){Pu||(Pu=zw.then(qw))}function yA(t){Fe(t)?Qo.push(...t):Gi&&t.id===-1?Gi.splice(Uo+1,0,t):t.flags&1||(Qo.push(t),t.flags|=1),jw()}function Dv(t,e,n=Lr+1){for(;n<Pn.length;n++){const r=Pn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Pn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Hw(t){if(Qo.length){const e=[...new Set(Qo)].sort((n,r)=>xl(n)-xl(r));if(Qo.length=0,Gi){Gi.push(...e);return}for(Gi=e,Uo=0;Uo<Gi.length;Uo++){const n=Gi[Uo];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Gi=null,Uo=0}}const xl=t=>t.id==null?t.flags&2?-1:1/0:t.id;function qw(t){try{for(Lr=0;Lr<Pn.length;Lr++){const e=Pn[Lr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Xl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Lr<Pn.length;Lr++){const e=Pn[Lr];e&&(e.flags&=-2)}Lr=-1,Pn.length=0,Hw(),Pu=null,(Pn.length||Qo.length)&&qw()}}let Nn=null,Gw=null;function xu(t){const e=Nn;return Nn=t,Gw=t&&t.type.__scopeId||null,e}function F(t,e=Nn,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&Gv(-1);const s=xu(e);let o;try{o=t(...i)}finally{xu(s),r._d&&Gv(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Wt(t,e){if(Nn===null)return t;const n=Td(Nn),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=vt]=e[i];s&&($e(s)&&(s={mounted:s,updated:s}),s.deep&&li(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function xs(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(ps(),Er(l,n,8,[t.el,a,t,e]),vs())}}const Ww=Symbol("_vte"),Kw=t=>t.__isTeleport,fl=t=>t&&(t.disabled||t.disabled===""),Ov=t=>t&&(t.defer||t.defer===""),Vv=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Lv=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Mf=(t,e)=>{const n=t&&t.to;return Et(n)?e?e(n):null:n},Yw={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:d,pc:f,pbc:m,o:{insert:g,querySelector:_,createText:T,createComment:b}}=c,C=fl(e.props);let{shapeFlag:y,children:A,dynamicChildren:D}=e;if(t==null){const x=e.el=T(""),O=e.anchor=T("");g(x,n,r),g(O,n,r);const R=(I,k)=>{y&16&&(i&&i.isCE&&(i.ce._teleportTarget=I),d(A,I,k,i,s,o,a,l))},v=()=>{const I=e.target=Mf(e.props,_),k=Qw(I,e,T,g);I&&(o!=="svg"&&Vv(I)?o="svg":o!=="mathml"&&Lv(I)&&(o="mathml"),C||(R(I,k),fu(e,!1)))};C&&(R(n,O),fu(e,!0)),Ov(e.props)?Rn(()=>{v(),e.el.__isMounted=!0},s):v()}else{if(Ov(e.props)&&!t.el.__isMounted){Rn(()=>{Yw.process(t,e,n,r,i,s,o,a,l,c),delete t.el.__isMounted},s);return}e.el=t.el,e.targetStart=t.targetStart;const x=e.anchor=t.anchor,O=e.target=t.target,R=e.targetAnchor=t.targetAnchor,v=fl(t.props),I=v?n:O,k=v?x:R;if(o==="svg"||Vv(O)?o="svg":(o==="mathml"||Lv(O))&&(o="mathml"),D?(m(t.dynamicChildren,D,I,i,s,o,a),Zm(t,e,!0)):l||f(t,e,I,k,i,s,o,a,!1),C)v?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Nc(e,n,x,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const E=e.target=Mf(e.props,_);E&&Nc(e,E,null,c,0)}else v&&Nc(e,O,R,c,1);fu(e,C)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:d,target:f,props:m}=t;if(f&&(i(c),i(d)),s&&i(l),o&16){const g=s||!fl(m);for(let _=0;_<a.length;_++){const T=a[_];r(T,e,n,g,!!T.dynamicChildren)}}},move:Nc,hydrate:bA};function Nc(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:d}=t,f=s===2;if(f&&r(o,e,n),(!f||fl(d))&&l&16)for(let m=0;m<c.length;m++)i(c[m],e,n,2);f&&r(a,e,n)}function bA(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:d}},f){const m=e.target=Mf(e.props,l);if(m){const g=fl(e.props),_=m._lpa||m.firstChild;if(e.shapeFlag&16)if(g)e.anchor=f(o(t),e,a(t),n,r,i,s),e.targetStart=_,e.targetAnchor=_&&o(_);else{e.anchor=o(t);let T=_;for(;T;){if(T&&T.nodeType===8){if(T.data==="teleport start anchor")e.targetStart=T;else if(T.data==="teleport anchor"){e.targetAnchor=T,m._lpa=e.targetAnchor&&o(e.targetAnchor);break}}T=o(T)}e.targetAnchor||Qw(m,e,d,c),f(_&&o(_),e,m,n,r,i,s)}fu(e,g)}return e.anchor&&o(e.anchor)}const ao=Yw;function fu(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function Qw(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[Ww]=s,t&&(r(i,t),r(s,t)),s}const Wi=Symbol("_leaveCb"),Mc=Symbol("_enterCb");function wA(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Lt(()=>{t.isMounted=!0}),Kr(()=>{t.isUnmounting=!0}),t}const Xn=[Function,Array],Xw={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Xn,onEnter:Xn,onAfterEnter:Xn,onEnterCancelled:Xn,onBeforeLeave:Xn,onLeave:Xn,onAfterLeave:Xn,onLeaveCancelled:Xn,onBeforeAppear:Xn,onAppear:Xn,onAfterAppear:Xn,onAppearCancelled:Xn},Jw=t=>{const e=t.subTree;return e.component?Jw(e.component):e},TA={name:"BaseTransition",props:Xw,setup(t,{slots:e}){const n=Ar(),r=wA();return()=>{const i=e.default&&t0(e.default(),!0);if(!i||!i.length)return;const s=Zw(i),o=ut(t),{mode:a}=o;if(r.isLeaving)return Nh(s);const l=Nv(s);if(!l)return Nh(s);let c=Ff(l,o,r,n,f=>c=f);l.type!==pn&&Dl(l,c);let d=n.subTree&&Nv(n.subTree);if(d&&d.type!==pn&&!Bs(l,d)&&Jw(n).type!==pn){let f=Ff(d,o,r,n);if(Dl(d,f),a==="out-in"&&l.type!==pn)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,d=void 0},Nh(s);a==="in-out"&&l.type!==pn?f.delayLeave=(m,g,_)=>{const T=e0(r,d);T[String(d.key)]=d,m[Wi]=()=>{g(),m[Wi]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{_(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return s}}};function Zw(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==pn){e=n;break}}return e}const EA=TA;function e0(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Ff(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:m,onLeave:g,onAfterLeave:_,onLeaveCancelled:T,onBeforeAppear:b,onAppear:C,onAfterAppear:y,onAppearCancelled:A}=e,D=String(t.key),x=e0(n,t),O=(I,k)=>{I&&Er(I,r,9,k)},R=(I,k)=>{const E=k[1];O(I,k),Fe(I)?I.every(S=>S.length<=1)&&E():I.length<=1&&E()},v={mode:o,persisted:a,beforeEnter(I){let k=l;if(!n.isMounted)if(s)k=b||l;else return;I[Wi]&&I[Wi](!0);const E=x[D];E&&Bs(t,E)&&E.el[Wi]&&E.el[Wi](),O(k,[I])},enter(I){let k=c,E=d,S=f;if(!n.isMounted)if(s)k=C||c,E=y||d,S=A||f;else return;let P=!1;const re=I[Mc]=fe=>{P||(P=!0,fe?O(S,[I]):O(E,[I]),v.delayedLeave&&v.delayedLeave(),I[Mc]=void 0)};k?R(k,[I,re]):re()},leave(I,k){const E=String(t.key);if(I[Mc]&&I[Mc](!0),n.isUnmounting)return k();O(m,[I]);let S=!1;const P=I[Wi]=re=>{S||(S=!0,k(),re?O(T,[I]):O(_,[I]),I[Wi]=void 0,x[E]===t&&delete x[E])};x[E]=t,g?R(g,[I,P]):P()},clone(I){const k=Ff(I,e,n,r,i);return i&&i(k),k}};return v}function Nh(t){if(yd(t))return t=as(t),t.children=null,t}function Nv(t){if(!yd(t))return Kw(t.type)&&t.children?Zw(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&$e(n.default))return n.default()}}function Dl(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Dl(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function t0(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===rt?(o.patchFlag&128&&i++,r=r.concat(t0(o.children,e,a))):(e||o.type!==pn)&&r.push(a!=null?as(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function X(t,e){return $e(t)?Kt({name:t.name},e,{setup:t}):t}function n0(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Du(t,e,n,r,i=!1){if(Fe(t)){t.forEach((_,T)=>Du(_,e&&(Fe(e)?e[T]:e),n,r,i));return}if(ml(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Du(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?Td(r.component):r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,d=a.refs===vt?a.refs={}:a.refs,f=a.setupState,m=ut(f),g=f===vt?()=>!1:_=>ft(m,_);if(c!=null&&c!==l&&(Et(c)?(d[c]=null,g(c)&&(f[c]=null)):nn(c)&&(c.value=null)),$e(l))Xl(l,a,12,[o,d]);else{const _=Et(l),T=nn(l);if(_||T){const b=()=>{if(t.f){const C=_?g(l)?f[l]:d[l]:l.value;i?Fe(C)&&Um(C,s):Fe(C)?C.includes(s)||C.push(s):_?(d[l]=[s],g(l)&&(f[l]=d[l])):(l.value=[s],t.k&&(d[t.k]=l.value))}else _?(d[l]=o,g(l)&&(f[l]=o)):T&&(l.value=o,t.k&&(d[t.k]=o))};o?(b.id=-1,Rn(b,n)):b()}}}gd().requestIdleCallback;gd().cancelIdleCallback;const ml=t=>!!t.type.__asyncLoader,yd=t=>t.type.__isKeepAlive;function Gr(t,e){r0(t,"a",e)}function Wr(t,e){r0(t,"da",e)}function r0(t,e,n=en){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(bd(e,r,n),n){let i=n.parent;for(;i&&i.parent;)yd(i.parent.vnode)&&IA(r,e,n,i),i=i.parent}}function IA(t,e,n,r){const i=bd(e,t,r,!0);ba(()=>{Um(r[e],i)},n)}function bd(t,e,n=en,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{ps();const a=Zl(n),l=Er(e,n,t,o);return a(),vs(),l});return r?i.unshift(s):i.push(s),s}}const Ri=t=>(e,n=en)=>{(!Ll||t==="sp")&&bd(t,(...r)=>e(...r),n)},CA=Ri("bm"),Lt=Ri("m"),i0=Ri("bu"),s0=Ri("u"),Kr=Ri("bum"),ba=Ri("um"),SA=Ri("sp"),AA=Ri("rtg"),kA=Ri("rtc");function RA(t,e=en){bd("ec",t,e)}const Qm="components",PA="directives";function B(t,e){return Xm(Qm,t,!0,e)||t}const o0=Symbol.for("v-ndc");function xA(t){return Et(t)?Xm(Qm,t,!1)||t:t||o0}function DA(t){return Xm(PA,t)}function Xm(t,e,n=!0,r=!1){const i=Nn||en;if(i){const s=i.type;if(t===Qm){const a=vk(s,!1);if(a&&(a===e||a===ir(e)||a===md(ir(e))))return s}const o=Mv(i[t]||s[t],e)||Mv(i.appContext[t],e);return!o&&r?s:o}}function Mv(t,e){return t&&(t[e]||t[ir(e)]||t[md(ir(e))])}function vn(t,e,n,r){let i;const s=n,o=Fe(t);if(o||Et(t)){const a=o&&Yo(t);let l=!1;a&&(l=!tr(t),t=vd(t)),i=new Array(t.length);for(let c=0,d=t.length;c<d;c++)i[c]=e(l?mn(t[c]):t[c],c,void 0,s)}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s)}else if(It(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const d=a[l];i[l]=e(t[d],d,l,s)}}else i=[];return i}const Bf=t=>t?C0(t)?Td(t):Bf(t.parent):null,gl=Kt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Bf(t.parent),$root:t=>Bf(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>l0(t),$forceUpdate:t=>t.f||(t.f=()=>{Ym(t.update)}),$nextTick:t=>t.n||(t.n=qe.bind(t.proxy)),$watch:t=>ZA.bind(t)}),Mh=(t,e)=>t!==vt&&!t.__isScriptSetup&&ft(t,e),OA={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(Mh(r,e))return o[e]=1,r[e];if(i!==vt&&ft(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&ft(c,e))return o[e]=3,s[e];if(n!==vt&&ft(n,e))return o[e]=4,n[e];Uf&&(o[e]=0)}}const d=gl[e];let f,m;if(d)return e==="$attrs"&&fn(t.attrs,"get",""),d(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==vt&&ft(n,e))return o[e]=4,n[e];if(m=l.config.globalProperties,ft(m,e))return m[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return Mh(i,e)?(i[e]=n,!0):r!==vt&&ft(r,e)?(r[e]=n,!0):ft(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==vt&&ft(t,o)||Mh(e,o)||(a=s[0])&&ft(a,o)||ft(r,o)||ft(gl,o)||ft(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ft(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Fv(t){return Fe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Uf=!0;function VA(t){const e=l0(t),n=t.proxy,r=t.ctx;Uf=!1,e.beforeCreate&&Bv(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:d,beforeMount:f,mounted:m,beforeUpdate:g,updated:_,activated:T,deactivated:b,beforeDestroy:C,beforeUnmount:y,destroyed:A,unmounted:D,render:x,renderTracked:O,renderTriggered:R,errorCaptured:v,serverPrefetch:I,expose:k,inheritAttrs:E,components:S,directives:P,filters:re}=e;if(c&&LA(c,r,null),o)for(const de in o){const me=o[de];$e(me)&&(r[de]=me.bind(n))}if(i){const de=i.call(n,n);It(de)&&(t.data=Ct(de))}if(Uf=!0,s)for(const de in s){const me=s[de],Ue=$e(me)?me.bind(n,n):$e(me.get)?me.get.bind(n,n):Fr,Xe=!$e(me)&&$e(me.set)?me.set.bind(n):Fr,H=z({get:Ue,set:Xe});Object.defineProperty(r,de,{enumerable:!0,configurable:!0,get:()=>H.value,set:te=>H.value=te})}if(a)for(const de in a)a0(a[de],r,n,de);if(l){const de=$e(l)?l.call(n):l;Reflect.ownKeys(de).forEach(me=>{mi(me,de[me])})}d&&Bv(d,t,"c");function Y(de,me){Fe(me)?me.forEach(Ue=>de(Ue.bind(n))):me&&de(me.bind(n))}if(Y(CA,f),Y(Lt,m),Y(i0,g),Y(s0,_),Y(Gr,T),Y(Wr,b),Y(RA,v),Y(kA,O),Y(AA,R),Y(Kr,y),Y(ba,D),Y(SA,I),Fe(k))if(k.length){const de=t.exposed||(t.exposed={});k.forEach(me=>{Object.defineProperty(de,me,{get:()=>n[me],set:Ue=>n[me]=Ue})})}else t.exposed||(t.exposed={});x&&t.render===Fr&&(t.render=x),E!=null&&(t.inheritAttrs=E),S&&(t.components=S),P&&(t.directives=P),I&&n0(t)}function LA(t,e,n=Fr){Fe(t)&&(t=$f(t));for(const r in t){const i=t[r];let s;It(i)?"default"in i?s=_n(i.from||r,i.default,!0):s=_n(i.from||r):s=_n(i),nn(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Bv(t,e,n){Er(Fe(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function a0(t,e,n,r){let i=r.includes(".")?b0(n,r):()=>n[r];if(Et(t)){const s=e[t];$e(s)&&he(i,s)}else if($e(t))he(i,t.bind(n));else if(It(t))if(Fe(t))t.forEach(s=>a0(s,e,n,r));else{const s=$e(t.handler)?t.handler.bind(n):e[t.handler];$e(s)&&he(i,s,t)}}function l0(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>Ou(l,c,o,!0)),Ou(l,e,o)),It(e)&&s.set(e,l),l}function Ou(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Ou(t,s,n,!0),i&&i.forEach(o=>Ou(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=NA[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const NA={data:Uv,props:$v,emits:$v,methods:rl,computed:rl,beforeCreate:kn,created:kn,beforeMount:kn,mounted:kn,beforeUpdate:kn,updated:kn,beforeDestroy:kn,beforeUnmount:kn,destroyed:kn,unmounted:kn,activated:kn,deactivated:kn,errorCaptured:kn,serverPrefetch:kn,components:rl,directives:rl,watch:FA,provide:Uv,inject:MA};function Uv(t,e){return e?t?function(){return Kt($e(t)?t.call(this,this):t,$e(e)?e.call(this,this):e)}:e:t}function MA(t,e){return rl($f(t),$f(e))}function $f(t){if(Fe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function kn(t,e){return t?[...new Set([].concat(t,e))]:e}function rl(t,e){return t?Kt(Object.create(null),t,e):e}function $v(t,e){return t?Fe(t)&&Fe(e)?[...new Set([...t,...e])]:Kt(Object.create(null),Fv(t),Fv(e??{})):e}function FA(t,e){if(!t)return e;if(!e)return t;const n=Kt(Object.create(null),t);for(const r in e)n[r]=kn(t[r],e[r]);return n}function c0(){return{app:null,config:{isNativeTag:RS,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let BA=0;function UA(t,e){return function(r,i=null){$e(r)||(r=Kt({},r)),i!=null&&!It(i)&&(i=null);const s=c0(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:BA++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:yk,get config(){return s.config},set config(d){},use(d,...f){return o.has(d)||(d&&$e(d.install)?(o.add(d),d.install(c,...f)):$e(d)&&(o.add(d),d(c,...f))),c},mixin(d){return s.mixins.includes(d)||s.mixins.push(d),c},component(d,f){return f?(s.components[d]=f,c):s.components[d]},directive(d,f){return f?(s.directives[d]=f,c):s.directives[d]},mount(d,f,m){if(!l){const g=c._ceVNode||h(r,i);return g.appContext=s,m===!0?m="svg":m===!1&&(m=void 0),t(g,d,m),l=!0,c._container=d,d.__vue_app__=c,Td(g.component)}},onUnmount(d){a.push(d)},unmount(){l&&(Er(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(d,f){return s.provides[d]=f,c},runWithContext(d){const f=Xo;Xo=c;try{return d()}finally{Xo=f}}};return c}}let Xo=null;function mi(t,e){if(en){let n=en.provides;const r=en.parent&&en.parent.provides;r===n&&(n=en.provides=Object.create(r)),n[t]=e}}function _n(t,e,n=!1){const r=en||Nn;if(r||Xo){const i=Xo?Xo._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&$e(e)?e.call(r&&r.proxy):e}}const u0={},d0=()=>Object.create(u0),h0=t=>Object.getPrototypeOf(t)===u0;function $A(t,e,n,r=!1){const i={},s=d0();t.propsDefaults=Object.create(null),f0(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:Fw(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function zA(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=ut(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let f=0;f<d.length;f++){let m=d[f];if(wd(t.emitsOptions,m))continue;const g=e[m];if(l)if(ft(s,m))g!==s[m]&&(s[m]=g,c=!0);else{const _=ir(m);i[_]=zf(l,a,_,g,t,!1)}else g!==s[m]&&(s[m]=g,c=!0)}}}else{f0(t,e,i,s)&&(c=!0);let d;for(const f in a)(!e||!ft(e,f)&&((d=ki(f))===f||!ft(e,d)))&&(l?n&&(n[f]!==void 0||n[d]!==void 0)&&(i[f]=zf(l,a,f,void 0,t,!0)):delete i[f]);if(s!==a)for(const f in s)(!e||!ft(e,f))&&(delete s[f],c=!0)}c&&ai(t.attrs,"set","")}function f0(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(ul(l))continue;const c=e[l];let d;i&&ft(i,d=ir(l))?!s||!s.includes(d)?n[d]=c:(a||(a={}))[d]=c:wd(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=ut(n),c=a||vt;for(let d=0;d<s.length;d++){const f=s[d];n[f]=zf(i,l,f,c[f],t,!ft(c,f))}}return o}function zf(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=ft(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&$e(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const d=Zl(i);r=c[n]=l.call(null,e),d()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===ki(n))&&(r=!0))}return r}const jA=new WeakMap;function m0(t,e,n=!1){const r=n?jA:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!$e(t)){const d=f=>{l=!0;const[m,g]=m0(f,e,!0);Kt(o,m),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!s&&!l)return It(t)&&r.set(t,Wo),Wo;if(Fe(s))for(let d=0;d<s.length;d++){const f=ir(s[d]);zv(f)&&(o[f]=vt)}else if(s)for(const d in s){const f=ir(d);if(zv(f)){const m=s[d],g=o[f]=Fe(m)||$e(m)?{type:m}:Kt({},m),_=g.type;let T=!1,b=!0;if(Fe(_))for(let C=0;C<_.length;++C){const y=_[C],A=$e(y)&&y.name;if(A==="Boolean"){T=!0;break}else A==="String"&&(b=!1)}else T=$e(_)&&_.name==="Boolean";g[0]=T,g[1]=b,(T||ft(g,"default"))&&a.push(f)}}const c=[o,a];return It(t)&&r.set(t,c),c}function zv(t){return t[0]!=="$"&&!ul(t)}const g0=t=>t[0]==="_"||t==="$stable",Jm=t=>Fe(t)?t.map(Nr):[Nr(t)],HA=(t,e,n)=>{if(e._n)return e;const r=F((...i)=>Jm(e(...i)),n);return r._c=!1,r},p0=(t,e,n)=>{const r=t._ctx;for(const i in t){if(g0(i))continue;const s=t[i];if($e(s))e[i]=HA(i,s,r);else if(s!=null){const o=Jm(s);e[i]=()=>o}}},v0=(t,e)=>{const n=Jm(e);t.slots.default=()=>n},_0=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},qA=(t,e,n)=>{const r=t.slots=d0();if(t.vnode.shapeFlag&32){const i=e._;i?(_0(r,e,n),n&&yw(r,"_",i,!0)):p0(e,r)}else e&&v0(t,e)},GA=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=vt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:_0(i,e,n):(s=!e.$stable,p0(e,i)),o=e}else e&&(v0(t,e),o={default:1});if(s)for(const a in i)!g0(a)&&o[a]==null&&delete i[a]},Rn=ok;function WA(t){return KA(t)}function KA(t,e){const n=gd();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:d,parentNode:f,nextSibling:m,setScopeId:g=Fr,insertStaticContent:_}=t,T=(N,M,U,K=null,Z=null,J=null,be=void 0,_e=null,ve=!!M.dynamicChildren)=>{if(N===M)return;N&&!Bs(N,M)&&(K=L(N),te(N,Z,J,!0),N=null),M.patchFlag===-2&&(ve=!1,M.dynamicChildren=null);const{type:ue,ref:Oe,shapeFlag:Te}=M;switch(ue){case Jl:b(N,M,U,K);break;case pn:C(N,M,U,K);break;case Bh:N==null&&y(M,U,K,be);break;case rt:S(N,M,U,K,Z,J,be,_e,ve);break;default:Te&1?x(N,M,U,K,Z,J,be,_e,ve):Te&6?P(N,M,U,K,Z,J,be,_e,ve):(Te&64||Te&128)&&ue.process(N,M,U,K,Z,J,be,_e,ve,ae)}Oe!=null&&Z&&Du(Oe,N&&N.ref,J,M||N,!M)},b=(N,M,U,K)=>{if(N==null)r(M.el=a(M.children),U,K);else{const Z=M.el=N.el;M.children!==N.children&&c(Z,M.children)}},C=(N,M,U,K)=>{N==null?r(M.el=l(M.children||""),U,K):M.el=N.el},y=(N,M,U,K)=>{[N.el,N.anchor]=_(N.children,M,U,K,N.el,N.anchor)},A=({el:N,anchor:M},U,K)=>{let Z;for(;N&&N!==M;)Z=m(N),r(N,U,K),N=Z;r(M,U,K)},D=({el:N,anchor:M})=>{let U;for(;N&&N!==M;)U=m(N),i(N),N=U;i(M)},x=(N,M,U,K,Z,J,be,_e,ve)=>{M.type==="svg"?be="svg":M.type==="math"&&(be="mathml"),N==null?O(M,U,K,Z,J,be,_e,ve):I(N,M,Z,J,be,_e,ve)},O=(N,M,U,K,Z,J,be,_e)=>{let ve,ue;const{props:Oe,shapeFlag:Te,transition:xe,dirs:Le}=N;if(ve=N.el=o(N.type,J,Oe&&Oe.is,Oe),Te&8?d(ve,N.children):Te&16&&v(N.children,ve,null,K,Z,Fh(N,J),be,_e),Le&&xs(N,null,K,"created"),R(ve,N,N.scopeId,be,K),Oe){for(const We in Oe)We!=="value"&&!ul(We)&&s(ve,We,null,Oe[We],J,K);"value"in Oe&&s(ve,"value",null,Oe.value,J),(ue=Oe.onVnodeBeforeMount)&&Dr(ue,K,N)}Le&&xs(N,null,K,"beforeMount");const Ve=YA(Z,xe);Ve&&xe.beforeEnter(ve),r(ve,M,U),((ue=Oe&&Oe.onVnodeMounted)||Ve||Le)&&Rn(()=>{ue&&Dr(ue,K,N),Ve&&xe.enter(ve),Le&&xs(N,null,K,"mounted")},Z)},R=(N,M,U,K,Z)=>{if(U&&g(N,U),K)for(let J=0;J<K.length;J++)g(N,K[J]);if(Z){let J=Z.subTree;if(M===J||T0(J.type)&&(J.ssContent===M||J.ssFallback===M)){const be=Z.vnode;R(N,be,be.scopeId,be.slotScopeIds,Z.parent)}}},v=(N,M,U,K,Z,J,be,_e,ve=0)=>{for(let ue=ve;ue<N.length;ue++){const Oe=N[ue]=_e?Ki(N[ue]):Nr(N[ue]);T(null,Oe,M,U,K,Z,J,be,_e)}},I=(N,M,U,K,Z,J,be)=>{const _e=M.el=N.el;let{patchFlag:ve,dynamicChildren:ue,dirs:Oe}=M;ve|=N.patchFlag&16;const Te=N.props||vt,xe=M.props||vt;let Le;if(U&&Ds(U,!1),(Le=xe.onVnodeBeforeUpdate)&&Dr(Le,U,M,N),Oe&&xs(M,N,U,"beforeUpdate"),U&&Ds(U,!0),(Te.innerHTML&&xe.innerHTML==null||Te.textContent&&xe.textContent==null)&&d(_e,""),ue?k(N.dynamicChildren,ue,_e,U,K,Fh(M,Z),J):be||me(N,M,_e,null,U,K,Fh(M,Z),J,!1),ve>0){if(ve&16)E(_e,Te,xe,U,Z);else if(ve&2&&Te.class!==xe.class&&s(_e,"class",null,xe.class,Z),ve&4&&s(_e,"style",Te.style,xe.style,Z),ve&8){const Ve=M.dynamicProps;for(let We=0;We<Ve.length;We++){const ot=Ve[We],an=Te[ot],Yt=xe[ot];(Yt!==an||ot==="value")&&s(_e,ot,an,Yt,Z,U)}}ve&1&&N.children!==M.children&&d(_e,M.children)}else!be&&ue==null&&E(_e,Te,xe,U,Z);((Le=xe.onVnodeUpdated)||Oe)&&Rn(()=>{Le&&Dr(Le,U,M,N),Oe&&xs(M,N,U,"updated")},K)},k=(N,M,U,K,Z,J,be)=>{for(let _e=0;_e<M.length;_e++){const ve=N[_e],ue=M[_e],Oe=ve.el&&(ve.type===rt||!Bs(ve,ue)||ve.shapeFlag&70)?f(ve.el):U;T(ve,ue,Oe,null,K,Z,J,be,!0)}},E=(N,M,U,K,Z)=>{if(M!==U){if(M!==vt)for(const J in M)!ul(J)&&!(J in U)&&s(N,J,M[J],null,Z,K);for(const J in U){if(ul(J))continue;const be=U[J],_e=M[J];be!==_e&&J!=="value"&&s(N,J,_e,be,Z,K)}"value"in U&&s(N,"value",M.value,U.value,Z)}},S=(N,M,U,K,Z,J,be,_e,ve)=>{const ue=M.el=N?N.el:a(""),Oe=M.anchor=N?N.anchor:a("");let{patchFlag:Te,dynamicChildren:xe,slotScopeIds:Le}=M;Le&&(_e=_e?_e.concat(Le):Le),N==null?(r(ue,U,K),r(Oe,U,K),v(M.children||[],U,Oe,Z,J,be,_e,ve)):Te>0&&Te&64&&xe&&N.dynamicChildren?(k(N.dynamicChildren,xe,U,Z,J,be,_e),(M.key!=null||Z&&M===Z.subTree)&&Zm(N,M,!0)):me(N,M,U,Oe,Z,J,be,_e,ve)},P=(N,M,U,K,Z,J,be,_e,ve)=>{M.slotScopeIds=_e,N==null?M.shapeFlag&512?Z.ctx.activate(M,U,K,be,ve):re(M,U,K,Z,J,be,ve):fe(N,M,ve)},re=(N,M,U,K,Z,J,be)=>{const _e=N.component=hk(N,K,Z);if(yd(N)&&(_e.ctx.renderer=ae),fk(_e,!1,be),_e.asyncDep){if(Z&&Z.registerDep(_e,Y,be),!N.el){const ve=_e.subTree=h(pn);C(null,ve,M,U)}}else Y(_e,N,M,U,Z,J,be)},fe=(N,M,U)=>{const K=M.component=N.component;if(ik(N,M,U))if(K.asyncDep&&!K.asyncResolved){de(K,M,U);return}else K.next=M,K.update();else M.el=N.el,K.vnode=M},Y=(N,M,U,K,Z,J,be)=>{const _e=()=>{if(N.isMounted){let{next:Te,bu:xe,u:Le,parent:Ve,vnode:We}=N;{const ln=y0(N);if(ln){Te&&(Te.el=We.el,de(N,Te,be)),ln.asyncDep.then(()=>{N.isUnmounted||_e()});return}}let ot=Te,an;Ds(N,!1),Te?(Te.el=We.el,de(N,Te,be)):Te=We,xe&&xh(xe),(an=Te.props&&Te.props.onVnodeBeforeUpdate)&&Dr(an,Ve,Te,We),Ds(N,!0);const Yt=Hv(N),Yn=N.subTree;N.subTree=Yt,T(Yn,Yt,f(Yn.el),L(Yn),N,Z,J),Te.el=Yt.el,ot===null&&sk(N,Yt.el),Le&&Rn(Le,Z),(an=Te.props&&Te.props.onVnodeUpdated)&&Rn(()=>Dr(an,Ve,Te,We),Z)}else{let Te;const{el:xe,props:Le}=M,{bm:Ve,m:We,parent:ot,root:an,type:Yt}=N,Yn=ml(M);Ds(N,!1),Ve&&xh(Ve),!Yn&&(Te=Le&&Le.onVnodeBeforeMount)&&Dr(Te,ot,M),Ds(N,!0);{an.ce&&an.ce._injectChildStyle(Yt);const ln=N.subTree=Hv(N);T(null,ln,U,K,N,Z,J),M.el=ln.el}if(We&&Rn(We,Z),!Yn&&(Te=Le&&Le.onVnodeMounted)){const ln=M;Rn(()=>Dr(Te,ot,ln),Z)}(M.shapeFlag&256||ot&&ml(ot.vnode)&&ot.vnode.shapeFlag&256)&&N.a&&Rn(N.a,Z),N.isMounted=!0,M=U=K=null}};N.scope.on();const ve=N.effect=new Iw(_e);N.scope.off();const ue=N.update=ve.run.bind(ve),Oe=N.job=ve.runIfDirty.bind(ve);Oe.i=N,Oe.id=N.uid,ve.scheduler=()=>Ym(Oe),Ds(N,!0),ue()},de=(N,M,U)=>{M.component=N;const K=N.vnode.props;N.vnode=M,N.next=null,zA(N,M.props,K,U),GA(N,M.children,U),ps(),Dv(N),vs()},me=(N,M,U,K,Z,J,be,_e,ve=!1)=>{const ue=N&&N.children,Oe=N?N.shapeFlag:0,Te=M.children,{patchFlag:xe,shapeFlag:Le}=M;if(xe>0){if(xe&128){Xe(ue,Te,U,K,Z,J,be,_e,ve);return}else if(xe&256){Ue(ue,Te,U,K,Z,J,be,_e,ve);return}}Le&8?(Oe&16&&Ee(ue,Z,J),Te!==ue&&d(U,Te)):Oe&16?Le&16?Xe(ue,Te,U,K,Z,J,be,_e,ve):Ee(ue,Z,J,!0):(Oe&8&&d(U,""),Le&16&&v(Te,U,K,Z,J,be,_e,ve))},Ue=(N,M,U,K,Z,J,be,_e,ve)=>{N=N||Wo,M=M||Wo;const ue=N.length,Oe=M.length,Te=Math.min(ue,Oe);let xe;for(xe=0;xe<Te;xe++){const Le=M[xe]=ve?Ki(M[xe]):Nr(M[xe]);T(N[xe],Le,U,null,Z,J,be,_e,ve)}ue>Oe?Ee(N,Z,J,!0,!1,Te):v(M,U,K,Z,J,be,_e,ve,Te)},Xe=(N,M,U,K,Z,J,be,_e,ve)=>{let ue=0;const Oe=M.length;let Te=N.length-1,xe=Oe-1;for(;ue<=Te&&ue<=xe;){const Le=N[ue],Ve=M[ue]=ve?Ki(M[ue]):Nr(M[ue]);if(Bs(Le,Ve))T(Le,Ve,U,null,Z,J,be,_e,ve);else break;ue++}for(;ue<=Te&&ue<=xe;){const Le=N[Te],Ve=M[xe]=ve?Ki(M[xe]):Nr(M[xe]);if(Bs(Le,Ve))T(Le,Ve,U,null,Z,J,be,_e,ve);else break;Te--,xe--}if(ue>Te){if(ue<=xe){const Le=xe+1,Ve=Le<Oe?M[Le].el:K;for(;ue<=xe;)T(null,M[ue]=ve?Ki(M[ue]):Nr(M[ue]),U,Ve,Z,J,be,_e,ve),ue++}}else if(ue>xe)for(;ue<=Te;)te(N[ue],Z,J,!0),ue++;else{const Le=ue,Ve=ue,We=new Map;for(ue=Ve;ue<=xe;ue++){const Qt=M[ue]=ve?Ki(M[ue]):Nr(M[ue]);Qt.key!=null&&We.set(Qt.key,ue)}let ot,an=0;const Yt=xe-Ve+1;let Yn=!1,ln=0;const Vi=new Array(Yt);for(ue=0;ue<Yt;ue++)Vi[ue]=0;for(ue=Le;ue<=Te;ue++){const Qt=N[ue];if(an>=Yt){te(Qt,Z,J,!0);continue}let Qn;if(Qt.key!=null)Qn=We.get(Qt.key);else for(ot=Ve;ot<=xe;ot++)if(Vi[ot-Ve]===0&&Bs(Qt,M[ot])){Qn=ot;break}Qn===void 0?te(Qt,Z,J,!0):(Vi[Qn-Ve]=ue+1,Qn>=ln?ln=Qn:Yn=!0,T(Qt,M[Qn],U,null,Z,J,be,_e,ve),an++)}const Da=Yn?QA(Vi):Wo;for(ot=Da.length-1,ue=Yt-1;ue>=0;ue--){const Qt=Ve+ue,Qn=M[Qt],vc=Qt+1<Oe?M[Qt+1].el:K;Vi[ue]===0?T(null,Qn,U,vc,Z,J,be,_e,ve):Yn&&(ot<0||ue!==Da[ot]?H(Qn,U,vc,2):ot--)}}},H=(N,M,U,K,Z=null)=>{const{el:J,type:be,transition:_e,children:ve,shapeFlag:ue}=N;if(ue&6){H(N.component.subTree,M,U,K);return}if(ue&128){N.suspense.move(M,U,K);return}if(ue&64){be.move(N,M,U,ae);return}if(be===rt){r(J,M,U);for(let Te=0;Te<ve.length;Te++)H(ve[Te],M,U,K);r(N.anchor,M,U);return}if(be===Bh){A(N,M,U);return}if(K!==2&&ue&1&&_e)if(K===0)_e.beforeEnter(J),r(J,M,U),Rn(()=>_e.enter(J),Z);else{const{leave:Te,delayLeave:xe,afterLeave:Le}=_e,Ve=()=>r(J,M,U),We=()=>{Te(J,()=>{Ve(),Le&&Le()})};xe?xe(J,Ve,We):We()}else r(J,M,U)},te=(N,M,U,K=!1,Z=!1)=>{const{type:J,props:be,ref:_e,children:ve,dynamicChildren:ue,shapeFlag:Oe,patchFlag:Te,dirs:xe,cacheIndex:Le}=N;if(Te===-2&&(Z=!1),_e!=null&&Du(_e,null,U,N,!0),Le!=null&&(M.renderCache[Le]=void 0),Oe&256){M.ctx.deactivate(N);return}const Ve=Oe&1&&xe,We=!ml(N);let ot;if(We&&(ot=be&&be.onVnodeBeforeUnmount)&&Dr(ot,M,N),Oe&6)ce(N.component,U,K);else{if(Oe&128){N.suspense.unmount(U,K);return}Ve&&xs(N,null,M,"beforeUnmount"),Oe&64?N.type.remove(N,M,U,ae,K):ue&&!ue.hasOnce&&(J!==rt||Te>0&&Te&64)?Ee(ue,M,U,!1,!0):(J===rt&&Te&384||!Z&&Oe&16)&&Ee(ve,M,U),K&&ge(N)}(We&&(ot=be&&be.onVnodeUnmounted)||Ve)&&Rn(()=>{ot&&Dr(ot,M,N),Ve&&xs(N,null,M,"unmounted")},U)},ge=N=>{const{type:M,el:U,anchor:K,transition:Z}=N;if(M===rt){Ae(U,K);return}if(M===Bh){D(N);return}const J=()=>{i(U),Z&&!Z.persisted&&Z.afterLeave&&Z.afterLeave()};if(N.shapeFlag&1&&Z&&!Z.persisted){const{leave:be,delayLeave:_e}=Z,ve=()=>be(U,J);_e?_e(N.el,J,ve):ve()}else J()},Ae=(N,M)=>{let U;for(;N!==M;)U=m(N),i(N),N=U;i(M)},ce=(N,M,U)=>{const{bum:K,scope:Z,job:J,subTree:be,um:_e,m:ve,a:ue}=N;jv(ve),jv(ue),K&&xh(K),Z.stop(),J&&(J.flags|=8,te(be,N,M,U)),_e&&Rn(_e,M),Rn(()=>{N.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&N.asyncDep&&!N.asyncResolved&&N.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},Ee=(N,M,U,K=!1,Z=!1,J=0)=>{for(let be=J;be<N.length;be++)te(N[be],M,U,K,Z)},L=N=>{if(N.shapeFlag&6)return L(N.component.subTree);if(N.shapeFlag&128)return N.suspense.next();const M=m(N.anchor||N.el),U=M&&M[Ww];return U?m(U):M};let q=!1;const G=(N,M,U)=>{N==null?M._vnode&&te(M._vnode,null,null,!0):T(M._vnode||null,N,M,null,null,null,U),M._vnode=N,q||(q=!0,Dv(),Hw(),q=!1)},ae={p:T,um:te,m:H,r:ge,mt:re,mc:v,pc:me,pbc:k,n:L,o:t};return{render:G,hydrate:void 0,createApp:UA(G)}}function Fh({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ds({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function YA(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Zm(t,e,n=!1){const r=t.children,i=e.children;if(Fe(r)&&Fe(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Ki(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&Zm(o,a)),a.type===Jl&&(a.el=o.el)}}function QA(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function y0(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:y0(e)}function jv(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const XA=Symbol.for("v-scx"),JA=()=>_n(XA);function wa(t,e){return eg(t,null,e)}function he(t,e,n){return eg(t,e,n)}function eg(t,e,n=vt){const{immediate:r,deep:i,flush:s,once:o}=n,a=Kt({},n),l=e&&r||!e&&s!=="post";let c;if(Ll){if(s==="sync"){const g=JA();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=Fr,g.resume=Fr,g.pause=Fr,g}}const d=en;a.call=(g,_,T)=>Er(g,d,_,T);let f=!1;s==="post"?a.scheduler=g=>{Rn(g,d&&d.suspense)}:s!=="sync"&&(f=!0,a.scheduler=(g,_)=>{_?g():Ym(g)}),a.augmentJob=g=>{e&&(g.flags|=4),f&&(g.flags|=2,d&&(g.id=d.uid,g.i=d))};const m=pA(t,e,a);return Ll&&(c?c.push(m):l&&m()),m}function ZA(t,e,n){const r=this.proxy,i=Et(t)?t.includes(".")?b0(r,t):()=>r[t]:t.bind(r,r);let s;$e(e)?s=e:(s=e.handler,n=e);const o=Zl(this),a=eg(i,s.bind(r),n);return o(),a}function b0(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const ek=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${ir(e)}Modifiers`]||t[`${ki(e)}Modifiers`];function tk(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||vt;let i=n;const s=e.startsWith("update:"),o=s&&ek(r,e.slice(7));o&&(o.trim&&(i=n.map(d=>Et(d)?d.trim():d)),o.number&&(i=n.map(VS)));let a,l=r[a=Ph(e)]||r[a=Ph(ir(e))];!l&&s&&(l=r[a=Ph(ki(e))]),l&&Er(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Er(c,t,6,i)}}function w0(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!$e(t)){const l=c=>{const d=w0(c,e,!0);d&&(a=!0,Kt(o,d))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(It(t)&&r.set(t,null),null):(Fe(s)?s.forEach(l=>o[l]=null):Kt(o,s),It(t)&&r.set(t,o),o)}function wd(t,e){return!t||!dd(e)?!1:(e=e.slice(2).replace(/Once$/,""),ft(t,e[0].toLowerCase()+e.slice(1))||ft(t,ki(e))||ft(t,e))}function Hv(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:d,props:f,data:m,setupState:g,ctx:_,inheritAttrs:T}=t,b=xu(t);let C,y;try{if(n.shapeFlag&4){const D=i||r,x=D;C=Nr(c.call(x,D,d,f,g,m,_)),y=a}else{const D=e;C=Nr(D.length>1?D(f,{attrs:a,slots:o,emit:l}):D(f,null)),y=e.props?a:nk(a)}}catch(D){pl.length=0,_d(D,t,1),C=h(pn)}let A=C;if(y&&T!==!1){const D=Object.keys(y),{shapeFlag:x}=A;D.length&&x&7&&(s&&D.some(Bm)&&(y=rk(y,s)),A=as(A,y,!1,!0))}return n.dirs&&(A=as(A,null,!1,!0),A.dirs=A.dirs?A.dirs.concat(n.dirs):n.dirs),n.transition&&Dl(A,n.transition),C=A,xu(b),C}const nk=t=>{let e;for(const n in t)(n==="class"||n==="style"||dd(n))&&((e||(e={}))[n]=t[n]);return e},rk=(t,e)=>{const n={};for(const r in t)(!Bm(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function ik(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?qv(r,o,c):!!o;if(l&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const m=d[f];if(o[m]!==r[m]&&!wd(c,m))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?qv(r,o,c):!0:!!o;return!1}function qv(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!wd(n,s))return!0}return!1}function sk({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const T0=t=>t.__isSuspense;function ok(t,e){e&&e.pendingBranch?Fe(t)?e.effects.push(...t):e.effects.push(t):yA(t)}const rt=Symbol.for("v-fgt"),Jl=Symbol.for("v-txt"),pn=Symbol.for("v-cmt"),Bh=Symbol.for("v-stc"),pl=[];let Hn=null;function Se(t=!1){pl.push(Hn=t?null:[])}function ak(){pl.pop(),Hn=pl[pl.length-1]||null}let Ol=1;function Gv(t,e=!1){Ol+=t,t<0&&Hn&&e&&(Hn.hasOnce=!0)}function E0(t){return t.dynamicChildren=Ol>0?Hn||Wo:null,ak(),Ol>0&&Hn&&Hn.push(t),t}function Ge(t,e,n,r,i,s){return E0(pe(t,e,n,r,i,s,!0))}function Tt(t,e,n,r,i){return E0(h(t,e,n,r,i,!0))}function Vl(t){return t?t.__v_isVNode===!0:!1}function Bs(t,e){return t.type===e.type&&t.key===e.key}const I0=({key:t})=>t??null,mu=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Et(t)||nn(t)||$e(t)?{i:Nn,r:t,k:e,f:!!n}:t:null);function pe(t,e=null,n=null,r=0,i=null,s=t===rt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&I0(e),ref:e&&mu(e),scopeId:Gw,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Nn};return a?(tg(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Et(n)?8:16),Ol>0&&!o&&Hn&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Hn.push(l),l}const h=lk;function lk(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===o0)&&(t=pn),Vl(t)){const a=as(t,e,!0);return n&&tg(a,n),Ol>0&&!s&&Hn&&(a.shapeFlag&6?Hn[Hn.indexOf(t)]=a:Hn.push(a)),a.patchFlag=-2,a}if(_k(t)&&(t=t.__vccOpts),e){e=ck(e);let{class:a,style:l}=e;a&&!Et(a)&&(e.class=oi(a)),It(l)&&(Km(l)&&!Fe(l)&&(l=Kt({},l)),e.style=pd(l))}const o=Et(t)?1:T0(t)?128:Kw(t)?64:It(t)?4:$e(t)?2:0;return pe(t,e,n,r,i,o,s,!0)}function ck(t){return t?Km(t)||h0(t)?Kt({},t):t:null}function as(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?Qe(i||{},e):i,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&I0(c),ref:e&&e.ref?n&&s?Fe(s)?s.concat(mu(e)):[s,mu(e)]:mu(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==rt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&as(t.ssContent),ssFallback:t.ssFallback&&as(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Dl(d,l.clone(d)),d}function Ie(t=" ",e=0){return h(Jl,null,t,e)}function Xs(t="",e=!1){return e?(Se(),Tt(pn,null,t)):h(pn,null,t)}function Nr(t){return t==null||typeof t=="boolean"?h(pn):Fe(t)?h(rt,null,t.slice()):Vl(t)?Ki(t):h(Jl,null,String(t))}function Ki(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:as(t)}function tg(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Fe(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),tg(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!h0(e)?e._ctx=Nn:i===3&&Nn&&(Nn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else $e(e)?(e={default:e,_ctx:Nn},n=32):(e=String(e),r&64?(n=16,e=[Ie(e)]):n=8);t.children=e,t.shapeFlag|=n}function Qe(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=oi([e.class,r.class]));else if(i==="style")e.style=pd([e.style,r.style]);else if(dd(i)){const s=e[i],o=r[i];o&&s!==o&&!(Fe(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Dr(t,e,n,r=null){Er(t,e,7,[n,r])}const uk=c0();let dk=0;function hk(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||uk,s={uid:dk++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ew(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:m0(r,i),emitsOptions:w0(r,i),emit:null,emitted:null,propsDefaults:vt,inheritAttrs:r.inheritAttrs,ctx:vt,data:vt,props:vt,attrs:vt,slots:vt,refs:vt,setupState:vt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=tk.bind(null,s),t.ce&&t.ce(s),s}let en=null;const Ar=()=>en||Nn;let Vu,jf;{const t=gd(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Vu=e("__VUE_INSTANCE_SETTERS__",n=>en=n),jf=e("__VUE_SSR_SETTERS__",n=>Ll=n)}const Zl=t=>{const e=en;return Vu(t),t.scope.on(),()=>{t.scope.off(),Vu(e)}},Wv=()=>{en&&en.scope.off(),Vu(null)};function C0(t){return t.vnode.shapeFlag&4}let Ll=!1;function fk(t,e=!1,n=!1){e&&jf(e);const{props:r,children:i}=t.vnode,s=C0(t);$A(t,r,s,e),qA(t,i,n);const o=s?mk(t,e):void 0;return e&&jf(!1),o}function mk(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,OA);const{setup:r}=n;if(r){ps();const i=t.setupContext=r.length>1?pk(t):null,s=Zl(t),o=Xl(r,t,0,[t.props,i]),a=pw(o);if(vs(),s(),(a||t.sp)&&!ml(t)&&n0(t),a){if(o.then(Wv,Wv),e)return o.then(l=>{Kv(t,l)}).catch(l=>{_d(l,t,0)});t.asyncDep=o}else Kv(t,o)}else S0(t)}function Kv(t,e,n){$e(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:It(e)&&(t.setupState=$w(e)),S0(t)}function S0(t,e,n){const r=t.type;t.render||(t.render=r.render||Fr);{const i=Zl(t);ps();try{VA(t)}finally{vs(),i()}}}const gk={get(t,e){return fn(t,"get",""),t[e]}};function pk(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,gk),slots:t.slots,emit:t.emit,expose:e}}function Td(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy($w(cA(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in gl)return gl[n](t)},has(e,n){return n in e||n in gl}})):t.proxy}function vk(t,e=!0){return $e(t)?t.displayName||t.name:t.name||e&&t.__name}function _k(t){return $e(t)&&"__vccOpts"in t}const z=(t,e)=>mA(t,e,Ll);function ng(t,e,n){const r=arguments.length;return r===2?It(e)&&!Fe(e)?Vl(e)?h(t,null,[e]):h(t,e):h(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Vl(n)&&(n=[n]),h(t,e,n))}const yk="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Hf;const Yv=typeof window<"u"&&window.trustedTypes;if(Yv)try{Hf=Yv.createPolicy("vue",{createHTML:t=>t})}catch{}const A0=Hf?t=>Hf.createHTML(t):t=>t,bk="http://www.w3.org/2000/svg",wk="http://www.w3.org/1998/Math/MathML",si=typeof document<"u"?document:null,Qv=si&&si.createElement("template"),Tk={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?si.createElementNS(bk,t):e==="mathml"?si.createElementNS(wk,t):n?si.createElement(t,{is:n}):si.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>si.createTextNode(t),createComment:t=>si.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>si.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{Qv.innerHTML=A0(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=Qv.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Fi="transition",Ga="animation",Nl=Symbol("_vtc"),k0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Ek=Kt({},Xw,k0),Ik=t=>(t.displayName="Transition",t.props=Ek,t),ec=Ik((t,{slots:e})=>ng(EA,Ck(t),e)),Os=(t,e=[])=>{Fe(t)?t.forEach(n=>n(...e)):t&&t(...e)},Xv=t=>t?Fe(t)?t.some(e=>e.length>1):t.length>1:!1;function Ck(t){const e={};for(const S in t)S in k0||(e[S]=t[S]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:d=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,_=Sk(i),T=_&&_[0],b=_&&_[1],{onBeforeEnter:C,onEnter:y,onEnterCancelled:A,onLeave:D,onLeaveCancelled:x,onBeforeAppear:O=C,onAppear:R=y,onAppearCancelled:v=A}=e,I=(S,P,re,fe)=>{S._enterCancelled=fe,Vs(S,P?d:a),Vs(S,P?c:o),re&&re()},k=(S,P)=>{S._isLeaving=!1,Vs(S,f),Vs(S,g),Vs(S,m),P&&P()},E=S=>(P,re)=>{const fe=S?R:y,Y=()=>I(P,S,re);Os(fe,[P,Y]),Jv(()=>{Vs(P,S?l:s),Zr(P,S?d:a),Xv(fe)||Zv(P,r,T,Y)})};return Kt(e,{onBeforeEnter(S){Os(C,[S]),Zr(S,s),Zr(S,o)},onBeforeAppear(S){Os(O,[S]),Zr(S,l),Zr(S,c)},onEnter:E(!1),onAppear:E(!0),onLeave(S,P){S._isLeaving=!0;const re=()=>k(S,P);Zr(S,f),S._enterCancelled?(Zr(S,m),n_()):(n_(),Zr(S,m)),Jv(()=>{S._isLeaving&&(Vs(S,f),Zr(S,g),Xv(D)||Zv(S,r,b,re))}),Os(D,[S,re])},onEnterCancelled(S){I(S,!1,void 0,!0),Os(A,[S])},onAppearCancelled(S){I(S,!0,void 0,!0),Os(v,[S])},onLeaveCancelled(S){k(S),Os(x,[S])}})}function Sk(t){if(t==null)return null;if(It(t))return[Uh(t.enter),Uh(t.leave)];{const e=Uh(t);return[e,e]}}function Uh(t){return LS(t)}function Zr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Nl]||(t[Nl]=new Set)).add(e)}function Vs(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Nl];n&&(n.delete(e),n.size||(t[Nl]=void 0))}function Jv(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Ak=0;function Zv(t,e,n,r){const i=t._endId=++Ak,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=kk(t,e);if(!o)return r();const c=o+"end";let d=0;const f=()=>{t.removeEventListener(c,m),s()},m=g=>{g.target===t&&++d>=l&&f()};setTimeout(()=>{d<l&&f()},a+1),t.addEventListener(c,m)}function kk(t,e){const n=window.getComputedStyle(t),r=_=>(n[_]||"").split(", "),i=r(`${Fi}Delay`),s=r(`${Fi}Duration`),o=e_(i,s),a=r(`${Ga}Delay`),l=r(`${Ga}Duration`),c=e_(a,l);let d=null,f=0,m=0;e===Fi?o>0&&(d=Fi,f=o,m=s.length):e===Ga?c>0&&(d=Ga,f=c,m=l.length):(f=Math.max(o,c),d=f>0?o>c?Fi:Ga:null,m=d?d===Fi?s.length:l.length:0);const g=d===Fi&&/\b(transform|all)(,|$)/.test(r(`${Fi}Property`).toString());return{type:d,timeout:f,propCount:m,hasTransform:g}}function e_(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>t_(n)+t_(t[r])))}function t_(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function n_(){return document.body.offsetHeight}function Rk(t,e,n){const r=t[Nl];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Lu=Symbol("_vod"),R0=Symbol("_vsh"),rn={beforeMount(t,{value:e},{transition:n}){t[Lu]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Wa(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Wa(t,!0),r.enter(t)):r.leave(t,()=>{Wa(t,!1)}):Wa(t,e))},beforeUnmount(t,{value:e}){Wa(t,e)}};function Wa(t,e){t.style.display=e?t[Lu]:"none",t[R0]=!e}const Pk=Symbol(""),xk=/(^|;)\s*display\s*:/;function Dk(t,e,n){const r=t.style,i=Et(n);let s=!1;if(n&&!i){if(e)if(Et(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&gu(r,a,"")}else for(const o in e)n[o]==null&&gu(r,o,"");for(const o in n)o==="display"&&(s=!0),gu(r,o,n[o])}else if(i){if(e!==n){const o=r[Pk];o&&(n+=";"+o),r.cssText=n,s=xk.test(n)}}else e&&t.removeAttribute("style");Lu in t&&(t[Lu]=s?r.display:"",t[R0]&&(r.display="none"))}const r_=/\s*!important$/;function gu(t,e,n){if(Fe(n))n.forEach(r=>gu(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Ok(t,e);r_.test(n)?t.setProperty(ki(r),n.replace(r_,""),"important"):t[r]=n}}const i_=["Webkit","Moz","ms"],$h={};function Ok(t,e){const n=$h[e];if(n)return n;let r=ir(e);if(r!=="filter"&&r in t)return $h[e]=r;r=md(r);for(let i=0;i<i_.length;i++){const s=i_[i]+r;if(s in t)return $h[e]=s}return e}const s_="http://www.w3.org/1999/xlink";function o_(t,e,n,r,i,s=zS(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(s_,e.slice(6,e.length)):t.setAttributeNS(s_,e,n):n==null||s&&!bw(n)?t.removeAttribute(e):t.setAttribute(e,s?"":gs(n)?String(n):n)}function a_(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?A0(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=bw(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function Vk(t,e,n,r){t.addEventListener(e,n,r)}function Lk(t,e,n,r){t.removeEventListener(e,n,r)}const l_=Symbol("_vei");function Nk(t,e,n,r,i=null){const s=t[l_]||(t[l_]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=Mk(e);if(r){const c=s[e]=Uk(r,i);Vk(t,a,c,l)}else o&&(Lk(t,a,o,l),s[e]=void 0)}}const c_=/(?:Once|Passive|Capture)$/;function Mk(t){let e;if(c_.test(t)){e={};let r;for(;r=t.match(c_);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ki(t.slice(2)),e]}let zh=0;const Fk=Promise.resolve(),Bk=()=>zh||(Fk.then(()=>zh=0),zh=Date.now());function Uk(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Er($k(r,n.value),e,5,[r])};return n.value=t,n.attached=Bk(),n}function $k(t,e){if(Fe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const u_=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,zk=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?Rk(t,r,o):e==="style"?Dk(t,n,r):dd(e)?Bm(e)||Nk(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):jk(t,e,r,o))?(a_(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&o_(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Et(r))?a_(t,ir(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),o_(t,e,r,o))};function jk(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&u_(e)&&$e(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return u_(e)&&Et(n)?!1:e in t}const Hk=["ctrl","shift","alt","meta"],qk={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Hk.some(n=>t[`${n}Key`]&&!e.includes(n))},tc=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=qk[e[o]];if(a&&a(i,e))return}return t(i,...s)})},Gk={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Wk=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=ki(i.key);if(e.some(o=>o===s||Gk[o]===s))return t(i)})},Kk=Kt({patchProp:zk},Tk);let d_;function Yk(){return d_||(d_=WA(Kk))}const P0=(...t)=>{const e=Yk().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=Xk(r);if(!i)return;const s=e._component;!$e(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,Qk(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function Qk(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Xk(t){return Et(t)?document.querySelector(t):t}var h_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Jk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},D0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(m=64)),r.push(n[d],n[f],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(x0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Jk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new Zk;const m=s<<2|a>>4;if(r.push(m),c!==64){const g=a<<4&240|c>>2;if(r.push(g),f!==64){const _=c<<6&192|f;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Zk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eR=function(t){const e=x0(t);return D0.encodeByteArray(e,!0)},Nu=function(t){return eR(t).replace(/\./g,"")},O0=function(t){try{return D0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=()=>tR().__FIREBASE_DEFAULTS__,rR=()=>{if(typeof process>"u"||typeof h_>"u")return;const t=h_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&O0(t[1]);return e&&JSON.parse(e)},Ed=()=>{try{return nR()||rR()||iR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},V0=t=>{var e,n;return(n=(e=Ed())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},L0=t=>{const e=V0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},N0=()=>{var t;return(t=Ed())===null||t===void 0?void 0:t.config},M0=t=>{var e;return(e=Ed())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Nu(JSON.stringify(n)),Nu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function aR(){var t;const e=(t=Ed())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function B0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uR(){const t=bn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dR(){return!aR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function U0(){try{return typeof indexedDB=="object"}catch{return!1}}function $0(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function hR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="FirebaseError";class lr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fR,Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lo.prototype.create)}}class lo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?mR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new lr(i,a,r)}}function mR(t,e){return t.replace(gR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const gR=/\{\$([^}]+)}/g;function pR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ml(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(f_(s)&&f_(o)){if(!Ml(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function f_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function il(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function sl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function vR(t,e){const n=new _R(t,e);return n.subscribe.bind(n)}class _R{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");yR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=jh),i.error===void 0&&(i.error=jh),i.complete===void 0&&(i.complete=jh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jh(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=1e3,wR=2,TR=4*60*60*1e3,ER=.5;function m_(t,e=bR,n=wR){const r=e*Math.pow(n,t),i=Math.round(ER*r*(Math.random()-.5)*2);return Math.min(TR,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t){return t&&t._delegate?t._delegate:t}class sr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new sR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SR(e))try{this.getOrInitializeService({instanceIdentifier:Fs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fs){return this.instances.has(e)}getOptions(e=Fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fs){return this.component?this.component.multipleInstances?e:Fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CR(t){return t===Fs?void 0:t}function SR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new IR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ze||(Ze={}));const kR={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},RR=Ze.INFO,PR={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},xR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=PR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Id{constructor(e){this.name=e,this._logLevel=RR,this._logHandler=xR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const DR=(t,e)=>e.some(n=>t instanceof n);let g_,p_;function OR(){return g_||(g_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VR(){return p_||(p_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const z0=new WeakMap,qf=new WeakMap,j0=new WeakMap,Hh=new WeakMap,rg=new WeakMap;function LR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(is(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&z0.set(n,t)}).catch(()=>{}),rg.set(e,t),e}function NR(t){if(qf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});qf.set(t,e)}let Gf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||j0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return is(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function MR(t){Gf=t(Gf)}function FR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(qh(this),e,...n);return j0.set(r,e.sort?e.sort():[e]),is(r)}:VR().includes(t)?function(...e){return t.apply(qh(this),e),is(z0.get(this))}:function(...e){return is(t.apply(qh(this),e))}}function BR(t){return typeof t=="function"?FR(t):(t instanceof IDBTransaction&&NR(t),DR(t,OR())?new Proxy(t,Gf):t)}function is(t){if(t instanceof IDBRequest)return LR(t);if(Hh.has(t))return Hh.get(t);const e=BR(t);return e!==t&&(Hh.set(t,e),rg.set(e,t)),e}const qh=t=>rg.get(t);function H0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=is(o);return r&&o.addEventListener("upgradeneeded",l=>{r(is(o.result),l.oldVersion,l.newVersion,is(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const UR=["get","getKey","getAll","getAllKeys","count"],$R=["put","add","delete","clear"],Gh=new Map;function v_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gh.get(e))return Gh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=$R.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||UR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Gh.set(e,s),s}MR(t=>({...t,get:(e,n,r)=>v_(e,n)||t.get(e,n,r),has:(e,n)=>!!v_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function jR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wf="@firebase/app",__="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new Id("@firebase/app"),HR="@firebase/app-compat",qR="@firebase/analytics-compat",GR="@firebase/analytics",WR="@firebase/app-check-compat",KR="@firebase/app-check",YR="@firebase/auth",QR="@firebase/auth-compat",XR="@firebase/database",JR="@firebase/data-connect",ZR="@firebase/database-compat",eP="@firebase/functions",tP="@firebase/functions-compat",nP="@firebase/installations",rP="@firebase/installations-compat",iP="@firebase/messaging",sP="@firebase/messaging-compat",oP="@firebase/performance",aP="@firebase/performance-compat",lP="@firebase/remote-config",cP="@firebase/remote-config-compat",uP="@firebase/storage",dP="@firebase/storage-compat",hP="@firebase/firestore",fP="@firebase/vertexai",mP="@firebase/firestore-compat",gP="firebase",pP="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="[DEFAULT]",vP={[Wf]:"fire-core",[HR]:"fire-core-compat",[GR]:"fire-analytics",[qR]:"fire-analytics-compat",[KR]:"fire-app-check",[WR]:"fire-app-check-compat",[YR]:"fire-auth",[QR]:"fire-auth-compat",[XR]:"fire-rtdb",[JR]:"fire-data-connect",[ZR]:"fire-rtdb-compat",[eP]:"fire-fn",[tP]:"fire-fn-compat",[nP]:"fire-iid",[rP]:"fire-iid-compat",[iP]:"fire-fcm",[sP]:"fire-fcm-compat",[oP]:"fire-perf",[aP]:"fire-perf-compat",[lP]:"fire-rc",[cP]:"fire-rc-compat",[uP]:"fire-gcs",[dP]:"fire-gcs-compat",[hP]:"fire-fst",[mP]:"fire-fst-compat",[fP]:"fire-vertex","fire-js":"fire-js",[gP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu=new Map,_P=new Map,Yf=new Map;function y_(t,e){try{t.container.addComponent(e)}catch(n){bi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ir(t){const e=t.name;if(Yf.has(e))return bi.debug(`There were multiple attempts to register component ${e}.`),!1;Yf.set(e,t);for(const n of Mu.values())y_(n,t);for(const n of _P.values())y_(n,t);return!0}function _s(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function pr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ss=new lo("app","Firebase",yP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=pP;function q0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Kf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ss.create("bad-app-name",{appName:String(i)});if(n||(n=N0()),!n)throw ss.create("no-options");const s=Mu.get(i);if(s){if(Ml(n,s.options)&&Ml(r,s.config))return s;throw ss.create("duplicate-app",{appName:i})}const o=new AR(i);for(const l of Yf.values())o.addComponent(l);const a=new bP(n,r,o);return Mu.set(i,a),a}function Cd(t=Kf){const e=Mu.get(t);if(!e&&t===Kf&&N0())return q0();if(!e)throw ss.create("no-app",{appName:t});return e}function Fn(t,e,n){var r;let i=(r=vP[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bi.warn(a.join(" "));return}Ir(new sr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP="firebase-heartbeat-database",TP=1,Fl="firebase-heartbeat-store";let Wh=null;function G0(){return Wh||(Wh=H0(wP,TP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fl)}catch(n){console.warn(n)}}}}).catch(t=>{throw ss.create("idb-open",{originalErrorMessage:t.message})})),Wh}async function EP(t){try{const n=(await G0()).transaction(Fl),r=await n.objectStore(Fl).get(W0(t));return await n.done,r}catch(e){if(e instanceof lr)bi.warn(e.message);else{const n=ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bi.warn(n.message)}}}async function b_(t,e){try{const r=(await G0()).transaction(Fl,"readwrite");await r.objectStore(Fl).put(e,W0(t)),await r.done}catch(n){if(n instanceof lr)bi.warn(n.message);else{const r=ss.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bi.warn(r.message)}}}function W0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP=1024,CP=30*24*60*60*1e3;class SP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=w_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=CP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){bi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=w_(),{heartbeatsToSend:r,unsentEntries:i}=AP(this._heartbeatsCache.heartbeats),s=Nu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return bi.warn(n),""}}}function w_(){return new Date().toISOString().substring(0,10)}function AP(t,e=IP){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),T_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),T_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class kP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return U0()?$0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await EP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return b_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return b_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function T_(t){return Nu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(t){Ir(new sr("platform-logger",e=>new zR(e),"PRIVATE")),Ir(new sr("heartbeat",e=>new SP(e),"PRIVATE")),Fn(Wf,__,t),Fn(Wf,__,"esm2017"),Fn("fire-js","")}RP("");function ig(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function K0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PP=K0,Y0=new lo("auth","Firebase",K0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=new Id("@firebase/auth");function xP(t,...e){Fu.logLevel<=Ze.WARN&&Fu.warn(`Auth (${co}): ${t}`,...e)}function pu(t,...e){Fu.logLevel<=Ze.ERROR&&Fu.error(`Auth (${co}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,...e){throw og(t,...e)}function br(t,...e){return og(t,...e)}function sg(t,e,n){const r=Object.assign(Object.assign({},PP()),{[e]:n});return new lo("auth","Firebase",r).create(e,{appName:t.name})}function gi(t){return sg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function DP(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&or(t,"argument-error"),sg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function og(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Y0.create(t,...e)}function Ne(t,e,...n){if(!t)throw og(e,...n)}function di(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pu(e),new Error(e)}function wi(t,e){t||di(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function OP(){return E_()==="http:"||E_()==="https:"}function E_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OP()||B0()||"connection"in navigator)?navigator.onLine:!0}function LP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n){this.shortDelay=e,this.longDelay=n,wi(n>e,"Short delay should be less than long delay!"),this.isMobile=oR()||cR()}get(){return VP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t,e){wi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=new rc(3e4,6e4);function ys(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Yr(t,e,n,r,i={}){return X0(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=nc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return lR()||(c.referrerPolicy="no-referrer"),Q0.fetch()(J0(t,t.config.apiHost,n,a),c)})}async function X0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},NP),e);try{const i=new BP(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Fc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Fc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Fc(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw sg(t,d,c);or(t,d)}}catch(i){if(i instanceof lr)throw i;or(t,"network-request-failed",{message:String(i)})}}async function ic(t,e,n,r,i={}){const s=await Yr(t,e,n,r,i);return"mfaPendingCredential"in s&&or(t,"multi-factor-auth-required",{_serverResponse:s}),s}function J0(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?ag(t.config,i):`${t.config.apiScheme}://${i}`}function FP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class BP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(br(this.auth,"network-request-failed")),MP.get())})}}function Fc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=br(t,e,r);return i.customData._tokenResponse=n,i}function I_(t){return t!==void 0&&t.enterprise!==void 0}class UP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return FP(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $P(t,e){return Yr(t,"GET","/v2/recaptchaConfig",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zP(t,e){return Yr(t,"POST","/v1/accounts:delete",e)}async function Z0(t,e){return Yr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jP(t,e=!1){const n=bt(t),r=await n.getIdToken(e),i=lg(r);Ne(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:vl(Kh(i.auth_time)),issuedAtTime:vl(Kh(i.iat)),expirationTime:vl(Kh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Kh(t){return Number(t)*1e3}function lg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return pu("JWT malformed, contained fewer than 3 sections"),null;try{const i=O0(n);return i?JSON.parse(i):(pu("Failed to decode base64 JWT payload"),null)}catch(i){return pu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function C_(t){const e=lg(t);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Js(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof lr&&HP(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function HP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vl(this.lastLoginAt),this.creationTime=vl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Js(t,Z0(n,{idToken:r}));Ne(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?eT(s.providerUserInfo):[],a=WP(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Xf(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function GP(t){const e=bt(t);await Bu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WP(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function eT(t){return t.map(e=>{var{providerId:n}=e,r=ig(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KP(t,e){const n=await X0(t,{},async()=>{const r=nc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=J0(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Q0.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function YP(t,e){return Yr(t,"POST","/v2/accounts:revokeToken",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):C_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const n=C_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await KP(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Jo;return r&&(Ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ne(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ne(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jo,this.toJSON())}_performRefresh(){return di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t,e){Ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class hi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ig(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Xf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Js(this,this.stsTokenManager.getToken(this.auth,e));return Ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return jP(this,e)}reload(){return GP(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new hi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pr(this.auth.app))return Promise.reject(gi(this.auth));const e=await this.getIdToken();return await Js(this,zP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,T=(a=n.tenantId)!==null&&a!==void 0?a:void 0,b=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,C=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:A,emailVerified:D,isAnonymous:x,providerData:O,stsTokenManager:R}=n;Ne(A&&R,e,"internal-error");const v=Jo.fromJSON(this.name,R);Ne(typeof A=="string",e,"internal-error"),Bi(f,e.name),Bi(m,e.name),Ne(typeof D=="boolean",e,"internal-error"),Ne(typeof x=="boolean",e,"internal-error"),Bi(g,e.name),Bi(_,e.name),Bi(T,e.name),Bi(b,e.name),Bi(C,e.name),Bi(y,e.name);const I=new hi({uid:A,auth:e,email:m,emailVerified:D,displayName:f,isAnonymous:x,photoURL:_,phoneNumber:g,tenantId:T,stsTokenManager:v,createdAt:C,lastLoginAt:y});return O&&Array.isArray(O)&&(I.providerData=O.map(k=>Object.assign({},k))),b&&(I._redirectEventId=b),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new Jo;i.updateFromServerResponse(n);const s=new hi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Bu(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ne(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?eT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Jo;a.updateFromIdToken(r);const l=new hi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Xf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=new Map;function fi(t){wi(t instanceof Function,"Expected a class definition");let e=S_.get(t);return e?(wi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,S_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}tT.type="NONE";const A_=tT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(t,e,n){return`firebase:${t}:${e}:${n}`}class Zo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=vu(this.userKey,i.apiKey,s),this.fullPersistenceKey=vu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?hi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Zo(fi(A_),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||fi(A_);const o=vu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const f=hi._fromJSON(e,d);c!==s&&(a=f),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Zo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Zo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aT(e))return"Blackberry";if(lT(e))return"Webos";if(rT(e))return"Safari";if((e.includes("chrome/")||iT(e))&&!e.includes("edge/"))return"Chrome";if(oT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function nT(t=bn()){return/firefox\//i.test(t)}function rT(t=bn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iT(t=bn()){return/crios\//i.test(t)}function sT(t=bn()){return/iemobile/i.test(t)}function oT(t=bn()){return/android/i.test(t)}function aT(t=bn()){return/blackberry/i.test(t)}function lT(t=bn()){return/webos/i.test(t)}function cg(t=bn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function QP(t=bn()){var e;return cg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XP(){return uR()&&document.documentMode===10}function cT(t=bn()){return cg(t)||oT(t)||lT(t)||aT(t)||/windows phone/i.test(t)||sT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(t,e=[]){let n;switch(t){case"Browser":n=k_(bn());break;case"Worker":n=`${k_(bn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${co}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZP(t,e={}){return Yr(t,"GET","/v2/passwordPolicy",ys(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=6;class tx{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:ex,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new R_(this),this.idTokenSubscription=new R_(this),this.beforeStateQueue=new JP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Y0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fi(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Zo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Z0(this,{idToken:e}),r=await hi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(pr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pr(this.app))return Promise.reject(gi(this));const n=e?bt(e):null;return n&&Ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pr(this.app)?Promise.reject(gi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pr(this.app)?Promise.reject(gi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZP(this),n=new tx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new lo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await YP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fi(e)||this._popupRedirectResolver;Ne(n,this,"argument-error"),this.redirectPersistenceManager=await Zo.create(this,[fi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&xP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function bs(t){return bt(t)}class R_{constructor(e){this.auth=e,this.observer=null,this.addObserver=vR(n=>this.observer=n)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rx(t){Sd=t}function dT(t){return Sd.loadJS(t)}function ix(){return Sd.recaptchaEnterpriseScript}function sx(){return Sd.gapiScript}function ox(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class ax{constructor(){this.enterprise=new lx}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class lx{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const cx="recaptcha-enterprise",hT="NO_RECAPTCHA";class ux{constructor(e){this.type=cx,this.auth=bs(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{$P(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new UP(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;I_(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(hT)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ax().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&I_(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=ix();l.length!==0&&(l+=a),dT(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function P_(t,e,n,r=!1,i=!1){const s=new ux(t);let o;if(i)o=hT;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Jf(t,e,n,r,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await P_(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await P_(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t,e){const n=_s(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ml(s,e??{}))return i;or(i,"already-initialized")}return n.initialize({options:e})}function hx(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function fx(t,e,n){const r=bs(t);Ne(r._canInitEmulator,r,"emulator-config-failed"),Ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=fT(e),{host:o,port:a}=mx(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),gx()}function fT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mx(t){const e=fT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:x_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:x_(o)}}}function x_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function gx(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return di("not implemented")}_getIdTokenResponse(e){return di("not implemented")}_linkToIdToken(e,n){return di("not implemented")}_getReauthenticationResolver(e){return di("not implemented")}}async function px(t,e){return Yr(t,"POST","/v1/accounts:update",e)}async function vx(t,e){return Yr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _x(t,e){return ic(t,"POST","/v1/accounts:signInWithPassword",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yx(t,e){return ic(t,"POST","/v1/accounts:signInWithEmailLink",ys(t,e))}async function bx(t,e){return ic(t,"POST","/v1/accounts:signInWithEmailLink",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends ug{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Bl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Bl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jf(e,n,"signInWithPassword",_x);case"emailLink":return yx(e,{email:this._email,oobCode:this._password});default:or(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jf(e,r,"signUpPassword",vx);case"emailLink":return bx(e,{idToken:n,email:this._email,oobCode:this._password});default:or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ea(t,e){return ic(t,"POST","/v1/accounts:signInWithIdp",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="http://localhost";class Zs extends ug{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Zs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):or("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=ig(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Zs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ea(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ea(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ea(e,n)}buildRequest(){const e={requestUri:wx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=nc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ex(t){const e=il(sl(t)).link,n=e?il(sl(e)).deep_link_id:null,r=il(sl(t)).deep_link_id;return(r?il(sl(r)).link:null)||r||n||e||t}class dg{constructor(e){var n,r,i,s,o,a;const l=il(sl(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,f=Tx((i=l.mode)!==null&&i!==void 0?i:null);Ne(c&&d&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=Ex(e);try{return new dg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(){this.providerId=uo.PROVIDER_ID}static credential(e,n){return Bl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=dg.parseLink(n);return Ne(r,"argument-error"),Bl._fromEmailAndCode(e,r.code,r.tenantId)}}uo.PROVIDER_ID="password";uo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";uo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc extends hg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends sc{constructor(){super("facebook.com")}static credential(e){return Zs._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qi.credential(e.oauthAccessToken)}catch{return null}}}Qi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends sc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Zs._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ci.credential(n,r)}catch{return null}}}ci.GOOGLE_SIGN_IN_METHOD="google.com";ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends sc{constructor(){super("github.com")}static credential(e){return Zs._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xi.credential(e.oauthAccessToken)}catch{return null}}}Xi.GITHUB_SIGN_IN_METHOD="github.com";Xi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends sc{constructor(){super("twitter.com")}static credential(e,n){return Zs._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ji.credential(n,r)}catch{return null}}}Ji.TWITTER_SIGN_IN_METHOD="twitter.com";Ji.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ix(t,e){return ic(t,"POST","/v1/accounts:signUp",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await hi._fromIdTokenResponse(e,r,i),o=D_(r);return new eo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=D_(r);return new eo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function D_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends lr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Uu.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Uu(e,n,r,i)}}function mT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Uu._fromErrorAndOperation(t,s,e,r):s})}async function Cx(t,e,n=!1){const r=await Js(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return eo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sx(t,e,n=!1){const{auth:r}=t;if(pr(r.app))return Promise.reject(gi(r));const i="reauthenticate";try{const s=await Js(t,mT(r,i,e,t),n);Ne(s.idToken,r,"internal-error");const o=lg(s.idToken);Ne(o,r,"internal-error");const{sub:a}=o;return Ne(t.uid===a,r,"user-mismatch"),eo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&or(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gT(t,e,n=!1){if(pr(t.app))return Promise.reject(gi(t));const r="signIn",i=await mT(t,r,e),s=await eo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Ax(t,e){return gT(bs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pT(t){const e=bs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function kx(t,e,n){if(pr(t.app))return Promise.reject(gi(t));const r=bs(t),o=await Jf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ix).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&pT(t),l}),a=await eo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function vT(t,e,n){return pr(t.app)?Promise.reject(gi(t)):Ax(bt(t),uo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&pT(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rx(t,e){return Yr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zf(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=bt(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Js(r,Rx(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Px(t,e){return xx(bt(t),null,e)}async function xx(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await Js(t,px(r,s));await t._updateTokensIfNecessary(o,!0)}function Dx(t,e,n,r){return bt(t).onIdTokenChanged(e,n,r)}function Ox(t,e,n){return bt(t).beforeAuthStateChanged(e,n)}function Vx(t,e,n,r){return bt(t).onAuthStateChanged(e,n,r)}function Lx(t){return bt(t).signOut()}const $u="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($u,"1"),this.storage.removeItem($u),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=1e3,Mx=10;class yT extends _T{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);XP()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Mx):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Nx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}yT.type="LOCAL";const Fx=yT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT extends _T{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bT.type="SESSION";const wT=bT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Ad(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await Bx(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ad.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=fg("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(){return window}function $x(t){Br().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(){return typeof Br().WorkerGlobalScope<"u"&&typeof Br().importScripts=="function"}async function zx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jx(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Hx(){return TT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="firebaseLocalStorageDb",qx=1,zu="firebaseLocalStorage",IT="fbase_key";class oc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function kd(t,e){return t.transaction([zu],e?"readwrite":"readonly").objectStore(zu)}function Gx(){const t=indexedDB.deleteDatabase(ET);return new oc(t).toPromise()}function em(){const t=indexedDB.open(ET,qx);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zu,{keyPath:IT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zu)?e(r):(r.close(),await Gx(),e(await em()))})})}async function O_(t,e,n){const r=kd(t,!0).put({[IT]:e,value:n});return new oc(r).toPromise()}async function Wx(t,e){const n=kd(t,!1).get(e),r=await new oc(n).toPromise();return r===void 0?null:r.value}function V_(t,e){const n=kd(t,!0).delete(e);return new oc(n).toPromise()}const Kx=800,Yx=3;class CT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await em(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Yx)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ad._getInstance(Hx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await zx(),!this.activeServiceWorker)return;this.sender=new Ux(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await em();return await O_(e,$u,"1"),await V_(e,$u),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>O_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Wx(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>V_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=kd(i,!1).getAll();return new oc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Kx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}CT.type="LOCAL";const Qx=CT;new rc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(t,e){return e?fi(e):(Ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg extends ug{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ea(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ea(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ea(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Xx(t){return gT(t.auth,new mg(t),t.bypassAuthState)}function Jx(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),Sx(n,new mg(t),t.bypassAuthState)}async function Zx(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),Cx(n,new mg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Xx;case"linkViaPopup":case"linkViaRedirect":return Zx;case"reauthViaPopup":case"reauthViaRedirect":return Jx;default:or(this.auth,"internal-error")}}resolve(e){wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=new rc(2e3,1e4);async function tD(t,e,n){if(pr(t.app))return Promise.reject(br(t,"operation-not-supported-in-this-environment"));const r=bs(t);DP(t,e,hg);const i=ST(r,n);return new $s(r,"signInViaPopup",e,i).executeNotNull()}class $s extends AT{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,$s.currentPopupAction&&$s.currentPopupAction.cancel(),$s.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){wi(this.filter.length===1,"Popup operations only handle one event");const e=fg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$s.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,eD.get())};e()}}$s.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="pendingRedirect",_u=new Map;class rD extends AT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=_u.get(this.auth._key());if(!e){try{const r=await iD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_u.set(this.auth._key(),e)}return this.bypassAuthState||_u.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iD(t,e){const n=aD(e),r=oD(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function sD(t,e){_u.set(t._key(),e)}function oD(t){return fi(t._redirectPersistence)}function aD(t){return vu(nD,t.config.apiKey,t.name)}async function lD(t,e,n=!1){if(pr(t.app))return Promise.reject(gi(t));const r=bs(t),i=ST(r,e),o=await new rD(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=10*60*1e3;class uD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!kT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(br(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cD&&this.cachedEventUids.clear(),this.cachedEventUids.has(L_(e))}saveEventToCache(e){this.cachedEventUids.add(L_(e)),this.lastProcessedEventTime=Date.now()}}function L_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function kT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD(t,e={}){return Yr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mD=/^https?/;async function gD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await hD(t);for(const n of e)try{if(pD(n))return}catch{}or(t,"unauthorized-domain")}function pD(t){const e=Qf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!mD.test(n))return!1;if(fD.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=new rc(3e4,6e4);function N_(){const t=Br().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _D(t){return new Promise((e,n)=>{var r,i,s;function o(){N_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N_(),n(br(t,"network-request-failed"))},timeout:vD.get()})}if(!((i=(r=Br().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Br().gapi)===null||s===void 0)&&s.load)o();else{const a=ox("iframefcb");return Br()[a]=()=>{gapi.load?o():n(br(t,"network-request-failed"))},dT(`${sx()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw yu=null,e})}let yu=null;function yD(t){return yu=yu||_D(t),yu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=new rc(5e3,15e3),wD="__/auth/iframe",TD="emulator/auth/iframe",ED={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ID=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CD(t){const e=t.config;Ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ag(e,TD):`https://${t.config.authDomain}/${wD}`,r={apiKey:e.apiKey,appName:t.name,v:co},i=ID.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${nc(r).slice(1)}`}async function SD(t){const e=await yD(t),n=Br().gapi;return Ne(n,t,"internal-error"),e.open({where:document.body,url:CD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ED,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=br(t,"network-request-failed"),a=Br().setTimeout(()=>{s(o)},bD.get());function l(){Br().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kD=500,RD=600,PD="_blank",xD="http://localhost";class M_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DD(t,e,n,r=kD,i=RD){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},AD),{width:r.toString(),height:i.toString(),top:s,left:o}),c=bn().toLowerCase();n&&(a=iT(c)?PD:n),nT(c)&&(e=e||xD,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[g,_])=>`${m}${g}=${_},`,"");if(QP(c)&&a!=="_self")return OD(e||"",a),new M_(null);const f=window.open(e||"",a,d);Ne(f,t,"popup-blocked");try{f.focus()}catch{}return new M_(f)}function OD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="__/auth/handler",LD="emulator/auth/handler",ND=encodeURIComponent("fac");async function F_(t,e,n,r,i,s){Ne(t.config.authDomain,t,"auth-domain-config-required"),Ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:co,eventId:i};if(e instanceof hg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",pR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof sc){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${ND}=${encodeURIComponent(l)}`:"";return`${MD(t)}?${nc(a).slice(1)}${c}`}function MD({config:t}){return t.emulator?ag(t,LD):`https://${t.authDomain}/${VD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh="webStorageSupport";class FD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wT,this._completeRedirectFn=lD,this._overrideRedirectResult=sD}async _openPopup(e,n,r,i){var s;wi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await F_(e,n,r,Qf(),i);return DD(e,o,fg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await F_(e,n,r,Qf(),i);return $x(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(wi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await SD(e),r=new uD(e);return n.register("authEvent",i=>(Ne(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Yh,{type:Yh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Yh];o!==void 0&&n(!!o),or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cT()||rT()||cg()}}const BD=FD;var B_="@firebase/auth",U_="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zD(t){Ir(new sr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uT(t)},c=new nx(r,i,s,l);return hx(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ir(new sr("auth-internal",e=>{const n=bs(e.getProvider("auth").getImmediate());return(r=>new UD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fn(B_,U_,$D(t)),Fn(B_,U_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=5*60,HD=M0("authIdTokenMaxAge")||jD;let $_=null;const qD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>HD)return;const i=n==null?void 0:n.token;$_!==i&&($_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function GD(t=Cd()){const e=_s(t,"auth");if(e.isInitialized())return e.getImmediate();const n=dx(t,{popupRedirectResolver:BD,persistence:[Qx,Fx,wT]}),r=M0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=qD(s.toString());Ox(n,o,()=>o(n.currentUser)),Dx(n,a=>o(a))}}const i=V0("auth");return i&&fx(n,`http://${i}`),n}function WD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}rx({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=br("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",WD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zD("Browser");var KD="firebase",YD="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fn(KD,YD,"app");const RT="@firebase/installations",gg="0.6.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=1e4,xT=`w:${gg}`,DT="FIS_v2",QD="https://firebaseinstallations.googleapis.com/v1",XD=60*60*1e3,JD="installations",ZD="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},to=new lo(JD,ZD,eO);function OT(t){return t instanceof lr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT({projectId:t}){return`${QD}/projects/${t}/installations`}function LT(t){return{token:t.token,requestStatus:2,expiresIn:nO(t.expiresIn),creationTime:Date.now()}}async function NT(t,e){const r=(await e.json()).error;return to.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function MT({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function tO(t,{refreshToken:e}){const n=MT(t);return n.append("Authorization",rO(e)),n}async function FT(t){const e=await t();return e.status>=500&&e.status<600?t():e}function nO(t){return Number(t.replace("s","000"))}function rO(t){return`${DT} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=VT(t),i=MT(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:DT,appId:t.appId,sdkVersion:xT},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await FT(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:LT(c.authToken)}}else throw await NT("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=/^[cdef][\w-]{21}$/,tm="";function aO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=lO(t);return oO.test(n)?n:tm}catch{return tm}}function lO(t){return sO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=new Map;function $T(t,e){const n=Rd(t);zT(n,e),cO(n,e)}function zT(t,e){const n=UT.get(t);if(n)for(const r of n)r(e)}function cO(t,e){const n=uO();n&&n.postMessage({key:t,fid:e}),dO()}let zs=null;function uO(){return!zs&&"BroadcastChannel"in self&&(zs=new BroadcastChannel("[Firebase] FID Change"),zs.onmessage=t=>{zT(t.data.key,t.data.fid)}),zs}function dO(){UT.size===0&&zs&&(zs.close(),zs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="firebase-installations-database",fO=1,no="firebase-installations-store";let Qh=null;function pg(){return Qh||(Qh=H0(hO,fO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(no)}}})),Qh}async function ju(t,e){const n=Rd(t),i=(await pg()).transaction(no,"readwrite"),s=i.objectStore(no),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&$T(t,e.fid),e}async function jT(t){const e=Rd(t),r=(await pg()).transaction(no,"readwrite");await r.objectStore(no).delete(e),await r.done}async function Pd(t,e){const n=Rd(t),i=(await pg()).transaction(no,"readwrite"),s=i.objectStore(no),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&$T(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vg(t){let e;const n=await Pd(t.appConfig,r=>{const i=mO(r),s=gO(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===tm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function mO(t){const e=t||{fid:aO(),registrationStatus:0};return HT(e)}function gO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(to.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=pO(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:vO(t)}:{installationEntry:e}}async function pO(t,e){try{const n=await iO(t,e);return ju(t.appConfig,n)}catch(n){throw OT(n)&&n.customData.serverCode===409?await jT(t.appConfig):await ju(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function vO(t){let e=await z_(t.appConfig);for(;e.registrationStatus===1;)await BT(100),e=await z_(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await vg(t);return r||n}return e}function z_(t){return Pd(t,e=>{if(!e)throw to.create("installation-not-found");return HT(e)})}function HT(t){return _O(t)?{fid:t.fid,registrationStatus:0}:t}function _O(t){return t.registrationStatus===1&&t.registrationTime+PT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yO({appConfig:t,heartbeatServiceProvider:e},n){const r=bO(t,n),i=tO(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:xT,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await FT(()=>fetch(r,a));if(l.ok){const c=await l.json();return LT(c)}else throw await NT("Generate Auth Token",l)}function bO(t,{fid:e}){return`${VT(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _g(t,e=!1){let n;const r=await Pd(t.appConfig,s=>{if(!qT(s))throw to.create("not-registered");const o=s.authToken;if(!e&&EO(o))return s;if(o.requestStatus===1)return n=wO(t,e),s;{if(!navigator.onLine)throw to.create("app-offline");const a=CO(s);return n=TO(t,a),a}});return n?await n:r.authToken}async function wO(t,e){let n=await j_(t.appConfig);for(;n.authToken.requestStatus===1;)await BT(100),n=await j_(t.appConfig);const r=n.authToken;return r.requestStatus===0?_g(t,e):r}function j_(t){return Pd(t,e=>{if(!qT(e))throw to.create("not-registered");const n=e.authToken;return SO(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function TO(t,e){try{const n=await yO(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await ju(t.appConfig,r),n}catch(n){if(OT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await jT(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ju(t.appConfig,r)}throw n}}function qT(t){return t!==void 0&&t.registrationStatus===2}function EO(t){return t.requestStatus===2&&!IO(t)}function IO(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+XD}function CO(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function SO(t){return t.requestStatus===1&&t.requestTime+PT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(t){const e=t,{installationEntry:n,registrationPromise:r}=await vg(e);return r?r.catch(console.error):_g(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kO(t,e=!1){const n=t;return await RO(n),(await _g(n,e)).token}async function RO(t){const{registrationPromise:e}=await vg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(t){if(!t||!t.options)throw Xh("App Configuration");if(!t.name)throw Xh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Xh(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Xh(t){return to.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="installations",xO="installations-internal",DO=t=>{const e=t.getProvider("app").getImmediate(),n=PO(e),r=_s(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},OO=t=>{const e=t.getProvider("app").getImmediate(),n=_s(e,GT).getImmediate();return{getId:()=>AO(n),getToken:i=>kO(n,i)}};function VO(){Ir(new sr(GT,DO,"PUBLIC")),Ir(new sr(xO,OO,"PRIVATE"))}VO();Fn(RT,gg);Fn(RT,gg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu="analytics",LO="firebase_id",NO="origin",MO=60*1e3,FO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",yg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=new Id("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Wn=new lo("analytics","Analytics",BO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(t){if(!t.startsWith(yg)){const e=Wn.create("invalid-gtag-resource",{gtagURL:t});return Bn.warn(e.message),""}return t}function WT(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function $O(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function zO(t,e){const n=$O("firebase-js-sdk-policy",{createScriptURL:UO}),r=document.createElement("script"),i=`${yg}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function jO(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function HO(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await WT(n)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){Bn.error(a)}t("config",i,s)}async function qO(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await WT(n);for(const l of o){const c=a.find(f=>f.measurementId===l),d=c&&e[c.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Bn.error(s)}}function GO(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await qO(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await HO(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Bn.error(a)}}return i}function WO(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=GO(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function KO(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(yg)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=30,QO=1e3;class XO{constructor(e={},n=QO){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const KT=new XO;function JO(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function ZO(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:JO(r)},s=FO.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Wn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function eV(t,e=KT,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Wn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Wn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new rV;return setTimeout(async()=>{a.abort()},MO),YT({appId:r,apiKey:i,measurementId:s},o,a,e)}async function YT(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=KT){var s;const{appId:o,measurementId:a}=t;try{await tV(r,e)}catch(l){if(a)return Bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await ZO(t);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!nV(c)){if(i.deleteThrottleMetadata(o),a)return Bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const d=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?m_(n,i.intervalMillis,YO):m_(n,i.intervalMillis),f={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(o,f),Bn.debug(`Calling attemptFetch again in ${d} millis`),YT(t,f,r,i)}}function tV(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Wn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function nV(t){if(!(t instanceof lr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class rV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function iV(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sV(){if(U0())try{await $0()}catch(t){return Bn.warn(Wn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Bn.warn(Wn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function oV(t,e,n,r,i,s,o){var a;const l=eV(t);l.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&Bn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Bn.error(g)),e.push(l);const c=sV().then(g=>{if(g)return r.getId()}),[d,f]=await Promise.all([l,c]);KO(s)||zO(s,d.measurementId),i("js",new Date);const m=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return m[NO]="firebase",m.update=!0,f!=null&&(m[LO]=f),i("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e){this.app=e}_delete(){return delete _l[this.app.options.appId],Promise.resolve()}}let _l={},H_=[];const q_={};let Jh="dataLayer",lV="gtag",G_,QT,W_=!1;function cV(){const t=[];if(B0()&&t.push("This is a browser extension environment."),hR()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Wn.create("invalid-analytics-context",{errorInfo:e});Bn.warn(n.message)}}function uV(t,e,n){cV();const r=t.options.appId;if(!r)throw Wn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Wn.create("no-api-key");if(_l[r]!=null)throw Wn.create("already-exists",{id:r});if(!W_){jO(Jh);const{wrappedGtag:s,gtagCore:o}=WO(_l,H_,q_,Jh,lV);QT=s,G_=o,W_=!0}return _l[r]=oV(t,H_,q_,e,G_,Jh,n),new aV(t)}function dV(t=Cd()){t=bt(t);const e=_s(t,Hu);return e.isInitialized()?e.getImmediate():hV(t)}function hV(t,e={}){const n=_s(t,Hu);if(n.isInitialized()){const i=n.getImmediate();if(Ml(e,n.getOptions()))return i;throw Wn.create("already-initialized")}return n.initialize({options:e})}function fV(t,e,n,r){t=bt(t),iV(QT,_l[t.app.options.appId],e,n,r).catch(i=>Bn.error(i))}const K_="@firebase/analytics",Y_="0.10.10";function mV(){Ir(new sr(Hu,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return uV(r,i,n)},"PUBLIC")),Ir(new sr("analytics-internal",t,"PRIVATE")),Fn(K_,Y_),Fn(K_,Y_,"esm2017");function t(e){try{const n=e.getProvider(Hu).getImmediate();return{logEvent:(r,i,s)=>fV(n,r,i,s)}}catch(n){throw Wn.create("interop-component-reg-failed",{reason:n})}}}mV();var Q_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gs,XT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,v){function I(){}I.prototype=v.prototype,R.D=v.prototype,R.prototype=new I,R.prototype.constructor=R,R.C=function(k,E,S){for(var P=Array(arguments.length-2),re=2;re<arguments.length;re++)P[re-2]=arguments[re];return v.prototype[E].apply(k,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,v,I){I||(I=0);var k=Array(16);if(typeof v=="string")for(var E=0;16>E;++E)k[E]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(E=0;16>E;++E)k[E]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=R.g[0],I=R.g[1],E=R.g[2];var S=R.g[3],P=v+(S^I&(E^S))+k[0]+3614090360&4294967295;v=I+(P<<7&4294967295|P>>>25),P=S+(E^v&(I^E))+k[1]+3905402710&4294967295,S=v+(P<<12&4294967295|P>>>20),P=E+(I^S&(v^I))+k[2]+606105819&4294967295,E=S+(P<<17&4294967295|P>>>15),P=I+(v^E&(S^v))+k[3]+3250441966&4294967295,I=E+(P<<22&4294967295|P>>>10),P=v+(S^I&(E^S))+k[4]+4118548399&4294967295,v=I+(P<<7&4294967295|P>>>25),P=S+(E^v&(I^E))+k[5]+1200080426&4294967295,S=v+(P<<12&4294967295|P>>>20),P=E+(I^S&(v^I))+k[6]+2821735955&4294967295,E=S+(P<<17&4294967295|P>>>15),P=I+(v^E&(S^v))+k[7]+4249261313&4294967295,I=E+(P<<22&4294967295|P>>>10),P=v+(S^I&(E^S))+k[8]+1770035416&4294967295,v=I+(P<<7&4294967295|P>>>25),P=S+(E^v&(I^E))+k[9]+2336552879&4294967295,S=v+(P<<12&4294967295|P>>>20),P=E+(I^S&(v^I))+k[10]+4294925233&4294967295,E=S+(P<<17&4294967295|P>>>15),P=I+(v^E&(S^v))+k[11]+2304563134&4294967295,I=E+(P<<22&4294967295|P>>>10),P=v+(S^I&(E^S))+k[12]+1804603682&4294967295,v=I+(P<<7&4294967295|P>>>25),P=S+(E^v&(I^E))+k[13]+4254626195&4294967295,S=v+(P<<12&4294967295|P>>>20),P=E+(I^S&(v^I))+k[14]+2792965006&4294967295,E=S+(P<<17&4294967295|P>>>15),P=I+(v^E&(S^v))+k[15]+1236535329&4294967295,I=E+(P<<22&4294967295|P>>>10),P=v+(E^S&(I^E))+k[1]+4129170786&4294967295,v=I+(P<<5&4294967295|P>>>27),P=S+(I^E&(v^I))+k[6]+3225465664&4294967295,S=v+(P<<9&4294967295|P>>>23),P=E+(v^I&(S^v))+k[11]+643717713&4294967295,E=S+(P<<14&4294967295|P>>>18),P=I+(S^v&(E^S))+k[0]+3921069994&4294967295,I=E+(P<<20&4294967295|P>>>12),P=v+(E^S&(I^E))+k[5]+3593408605&4294967295,v=I+(P<<5&4294967295|P>>>27),P=S+(I^E&(v^I))+k[10]+38016083&4294967295,S=v+(P<<9&4294967295|P>>>23),P=E+(v^I&(S^v))+k[15]+3634488961&4294967295,E=S+(P<<14&4294967295|P>>>18),P=I+(S^v&(E^S))+k[4]+3889429448&4294967295,I=E+(P<<20&4294967295|P>>>12),P=v+(E^S&(I^E))+k[9]+568446438&4294967295,v=I+(P<<5&4294967295|P>>>27),P=S+(I^E&(v^I))+k[14]+3275163606&4294967295,S=v+(P<<9&4294967295|P>>>23),P=E+(v^I&(S^v))+k[3]+4107603335&4294967295,E=S+(P<<14&4294967295|P>>>18),P=I+(S^v&(E^S))+k[8]+1163531501&4294967295,I=E+(P<<20&4294967295|P>>>12),P=v+(E^S&(I^E))+k[13]+2850285829&4294967295,v=I+(P<<5&4294967295|P>>>27),P=S+(I^E&(v^I))+k[2]+4243563512&4294967295,S=v+(P<<9&4294967295|P>>>23),P=E+(v^I&(S^v))+k[7]+1735328473&4294967295,E=S+(P<<14&4294967295|P>>>18),P=I+(S^v&(E^S))+k[12]+2368359562&4294967295,I=E+(P<<20&4294967295|P>>>12),P=v+(I^E^S)+k[5]+4294588738&4294967295,v=I+(P<<4&4294967295|P>>>28),P=S+(v^I^E)+k[8]+2272392833&4294967295,S=v+(P<<11&4294967295|P>>>21),P=E+(S^v^I)+k[11]+1839030562&4294967295,E=S+(P<<16&4294967295|P>>>16),P=I+(E^S^v)+k[14]+4259657740&4294967295,I=E+(P<<23&4294967295|P>>>9),P=v+(I^E^S)+k[1]+2763975236&4294967295,v=I+(P<<4&4294967295|P>>>28),P=S+(v^I^E)+k[4]+1272893353&4294967295,S=v+(P<<11&4294967295|P>>>21),P=E+(S^v^I)+k[7]+4139469664&4294967295,E=S+(P<<16&4294967295|P>>>16),P=I+(E^S^v)+k[10]+3200236656&4294967295,I=E+(P<<23&4294967295|P>>>9),P=v+(I^E^S)+k[13]+681279174&4294967295,v=I+(P<<4&4294967295|P>>>28),P=S+(v^I^E)+k[0]+3936430074&4294967295,S=v+(P<<11&4294967295|P>>>21),P=E+(S^v^I)+k[3]+3572445317&4294967295,E=S+(P<<16&4294967295|P>>>16),P=I+(E^S^v)+k[6]+76029189&4294967295,I=E+(P<<23&4294967295|P>>>9),P=v+(I^E^S)+k[9]+3654602809&4294967295,v=I+(P<<4&4294967295|P>>>28),P=S+(v^I^E)+k[12]+3873151461&4294967295,S=v+(P<<11&4294967295|P>>>21),P=E+(S^v^I)+k[15]+530742520&4294967295,E=S+(P<<16&4294967295|P>>>16),P=I+(E^S^v)+k[2]+3299628645&4294967295,I=E+(P<<23&4294967295|P>>>9),P=v+(E^(I|~S))+k[0]+4096336452&4294967295,v=I+(P<<6&4294967295|P>>>26),P=S+(I^(v|~E))+k[7]+1126891415&4294967295,S=v+(P<<10&4294967295|P>>>22),P=E+(v^(S|~I))+k[14]+2878612391&4294967295,E=S+(P<<15&4294967295|P>>>17),P=I+(S^(E|~v))+k[5]+4237533241&4294967295,I=E+(P<<21&4294967295|P>>>11),P=v+(E^(I|~S))+k[12]+1700485571&4294967295,v=I+(P<<6&4294967295|P>>>26),P=S+(I^(v|~E))+k[3]+2399980690&4294967295,S=v+(P<<10&4294967295|P>>>22),P=E+(v^(S|~I))+k[10]+4293915773&4294967295,E=S+(P<<15&4294967295|P>>>17),P=I+(S^(E|~v))+k[1]+2240044497&4294967295,I=E+(P<<21&4294967295|P>>>11),P=v+(E^(I|~S))+k[8]+1873313359&4294967295,v=I+(P<<6&4294967295|P>>>26),P=S+(I^(v|~E))+k[15]+4264355552&4294967295,S=v+(P<<10&4294967295|P>>>22),P=E+(v^(S|~I))+k[6]+2734768916&4294967295,E=S+(P<<15&4294967295|P>>>17),P=I+(S^(E|~v))+k[13]+1309151649&4294967295,I=E+(P<<21&4294967295|P>>>11),P=v+(E^(I|~S))+k[4]+4149444226&4294967295,v=I+(P<<6&4294967295|P>>>26),P=S+(I^(v|~E))+k[11]+3174756917&4294967295,S=v+(P<<10&4294967295|P>>>22),P=E+(v^(S|~I))+k[2]+718787259&4294967295,E=S+(P<<15&4294967295|P>>>17),P=I+(S^(E|~v))+k[9]+3951481745&4294967295,R.g[0]=R.g[0]+v&4294967295,R.g[1]=R.g[1]+(E+(P<<21&4294967295|P>>>11))&4294967295,R.g[2]=R.g[2]+E&4294967295,R.g[3]=R.g[3]+S&4294967295}r.prototype.u=function(R,v){v===void 0&&(v=R.length);for(var I=v-this.blockSize,k=this.B,E=this.h,S=0;S<v;){if(E==0)for(;S<=I;)i(this,R,S),S+=this.blockSize;if(typeof R=="string"){for(;S<v;)if(k[E++]=R.charCodeAt(S++),E==this.blockSize){i(this,k),E=0;break}}else for(;S<v;)if(k[E++]=R[S++],E==this.blockSize){i(this,k),E=0;break}}this.h=E,this.o+=v},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var v=1;v<R.length-8;++v)R[v]=0;var I=8*this.o;for(v=R.length-8;v<R.length;++v)R[v]=I&255,I/=256;for(this.u(R),R=Array(16),v=I=0;4>v;++v)for(var k=0;32>k;k+=8)R[I++]=this.g[v]>>>k&255;return R};function s(R,v){var I=a;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=v(R)}function o(R,v){this.h=v;for(var I=[],k=!0,E=R.length-1;0<=E;E--){var S=R[E]|0;k&&S==v||(I[E]=S,k=!1)}this.g=I}var a={};function l(R){return-128<=R&&128>R?s(R,function(v){return new o([v|0],0>v?-1:0)}):new o([R|0],0>R?-1:0)}function c(R){if(isNaN(R)||!isFinite(R))return f;if(0>R)return b(c(-R));for(var v=[],I=1,k=0;R>=I;k++)v[k]=R/I|0,I*=4294967296;return new o(v,0)}function d(R,v){if(R.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(R.charAt(0)=="-")return b(d(R.substring(1),v));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(v,8)),k=f,E=0;E<R.length;E+=8){var S=Math.min(8,R.length-E),P=parseInt(R.substring(E,E+S),v);8>S?(S=c(Math.pow(v,S)),k=k.j(S).add(c(P))):(k=k.j(I),k=k.add(c(P)))}return k}var f=l(0),m=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(T(this))return-b(this).m();for(var R=0,v=1,I=0;I<this.g.length;I++){var k=this.i(I);R+=(0<=k?k:4294967296+k)*v,v*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(_(this))return"0";if(T(this))return"-"+b(this).toString(R);for(var v=c(Math.pow(R,6)),I=this,k="";;){var E=D(I,v).g;I=C(I,E.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(R);if(I=E,_(I))return S+k;for(;6>S.length;)S="0"+S;k=S+k}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function _(R){if(R.h!=0)return!1;for(var v=0;v<R.g.length;v++)if(R.g[v]!=0)return!1;return!0}function T(R){return R.h==-1}t.l=function(R){return R=C(this,R),T(R)?-1:_(R)?0:1};function b(R){for(var v=R.g.length,I=[],k=0;k<v;k++)I[k]=~R.g[k];return new o(I,~R.h).add(m)}t.abs=function(){return T(this)?b(this):this},t.add=function(R){for(var v=Math.max(this.g.length,R.g.length),I=[],k=0,E=0;E<=v;E++){var S=k+(this.i(E)&65535)+(R.i(E)&65535),P=(S>>>16)+(this.i(E)>>>16)+(R.i(E)>>>16);k=P>>>16,S&=65535,P&=65535,I[E]=P<<16|S}return new o(I,I[I.length-1]&-2147483648?-1:0)};function C(R,v){return R.add(b(v))}t.j=function(R){if(_(this)||_(R))return f;if(T(this))return T(R)?b(this).j(b(R)):b(b(this).j(R));if(T(R))return b(this.j(b(R)));if(0>this.l(g)&&0>R.l(g))return c(this.m()*R.m());for(var v=this.g.length+R.g.length,I=[],k=0;k<2*v;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(var E=0;E<R.g.length;E++){var S=this.i(k)>>>16,P=this.i(k)&65535,re=R.i(E)>>>16,fe=R.i(E)&65535;I[2*k+2*E]+=P*fe,y(I,2*k+2*E),I[2*k+2*E+1]+=S*fe,y(I,2*k+2*E+1),I[2*k+2*E+1]+=P*re,y(I,2*k+2*E+1),I[2*k+2*E+2]+=S*re,y(I,2*k+2*E+2)}for(k=0;k<v;k++)I[k]=I[2*k+1]<<16|I[2*k];for(k=v;k<2*v;k++)I[k]=0;return new o(I,0)};function y(R,v){for(;(R[v]&65535)!=R[v];)R[v+1]+=R[v]>>>16,R[v]&=65535,v++}function A(R,v){this.g=R,this.h=v}function D(R,v){if(_(v))throw Error("division by zero");if(_(R))return new A(f,f);if(T(R))return v=D(b(R),v),new A(b(v.g),b(v.h));if(T(v))return v=D(R,b(v)),new A(b(v.g),v.h);if(30<R.g.length){if(T(R)||T(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,k=v;0>=k.l(R);)I=x(I),k=x(k);var E=O(I,1),S=O(k,1);for(k=O(k,2),I=O(I,2);!_(k);){var P=S.add(k);0>=P.l(R)&&(E=E.add(I),S=P),k=O(k,1),I=O(I,1)}return v=C(R,E.j(v)),new A(E,v)}for(E=f;0<=R.l(v);){for(I=Math.max(1,Math.floor(R.m()/v.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),S=c(I),P=S.j(v);T(P)||0<P.l(R);)I-=k,S=c(I),P=S.j(v);_(S)&&(S=m),E=E.add(S),R=C(R,P)}return new A(E,R)}t.A=function(R){return D(this,R).h},t.and=function(R){for(var v=Math.max(this.g.length,R.g.length),I=[],k=0;k<v;k++)I[k]=this.i(k)&R.i(k);return new o(I,this.h&R.h)},t.or=function(R){for(var v=Math.max(this.g.length,R.g.length),I=[],k=0;k<v;k++)I[k]=this.i(k)|R.i(k);return new o(I,this.h|R.h)},t.xor=function(R){for(var v=Math.max(this.g.length,R.g.length),I=[],k=0;k<v;k++)I[k]=this.i(k)^R.i(k);return new o(I,this.h^R.h)};function x(R){for(var v=R.g.length+1,I=[],k=0;k<v;k++)I[k]=R.i(k)<<1|R.i(k-1)>>>31;return new o(I,R.h)}function O(R,v){var I=v>>5;v%=32;for(var k=R.g.length-I,E=[],S=0;S<k;S++)E[S]=0<v?R.i(S+I)>>>v|R.i(S+I+1)<<32-v:R.i(S+I);return new o(E,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,XT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Gs=o}).apply(typeof Q_<"u"?Q_:typeof self<"u"?self:typeof window<"u"?window:{});var Bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var JT,ol,ZT,bu,nm,eE,tE,nE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,w){return u==Array.prototype||u==Object.prototype||(u[p]=w.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bc=="object"&&Bc];for(var p=0;p<u.length;++p){var w=u[p];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function i(u,p){if(p)e:{var w=r;u=u.split(".");for(var V=0;V<u.length-1;V++){var $=u[V];if(!($ in w))break e;w=w[$]}u=u[u.length-1],V=w[u],p=p(V),p!=V&&p!=null&&e(w,u,{configurable:!0,writable:!0,value:p})}}function s(u,p){u instanceof String&&(u+="");var w=0,V=!1,$={next:function(){if(!V&&w<u.length){var W=w++;return{value:p(W,u[W]),done:!1}}return V=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}i("Array.prototype.values",function(u){return u||function(){return s(this,function(p,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function d(u,p,w){return u.call.apply(u.bind,arguments)}function f(u,p,w){if(!u)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,V),u.apply(p,$)}}return function(){return u.apply(p,arguments)}}function m(u,p,w){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function g(u,p){var w=Array.prototype.slice.call(arguments,1);return function(){var V=w.slice();return V.push.apply(V,arguments),u.apply(this,V)}}function _(u,p){function w(){}w.prototype=p.prototype,u.aa=p.prototype,u.prototype=new w,u.prototype.constructor=u,u.Qb=function(V,$,W){for(var ye=Array(arguments.length-2),pt=2;pt<arguments.length;pt++)ye[pt-2]=arguments[pt];return p.prototype[$].apply(V,ye)}}function T(u){const p=u.length;if(0<p){const w=Array(p);for(let V=0;V<p;V++)w[V]=u[V];return w}return[]}function b(u,p){for(let w=1;w<arguments.length;w++){const V=arguments[w];if(l(V)){const $=u.length||0,W=V.length||0;u.length=$+W;for(let ye=0;ye<W;ye++)u[$+ye]=V[ye]}else u.push(V)}}class C{constructor(p,w){this.i=p,this.j=w,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function y(u){return/^[\s\xa0]*$/.test(u)}function A(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function D(u){return D[" "](u),u}D[" "]=function(){};var x=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function O(u,p,w){for(const V in u)p.call(w,u[V],V,u)}function R(u,p){for(const w in u)p.call(void 0,u[w],w,u)}function v(u){const p={};for(const w in u)p[w]=u[w];return p}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,p){let w,V;for(let $=1;$<arguments.length;$++){V=arguments[$];for(w in V)u[w]=V[w];for(let W=0;W<I.length;W++)w=I[W],Object.prototype.hasOwnProperty.call(V,w)&&(u[w]=V[w])}}function E(u){var p=1;u=u.split(":");const w=[];for(;0<p&&u.length;)w.push(u.shift()),p--;return u.length&&w.push(u.join(":")),w}function S(u){a.setTimeout(()=>{throw u},0)}function P(){var u=Ue;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class re{constructor(){this.h=this.g=null}add(p,w){const V=fe.get();V.set(p,w),this.h?this.h.next=V:this.g=V,this.h=V}}var fe=new C(()=>new Y,u=>u.reset());class Y{constructor(){this.next=this.g=this.h=null}set(p,w){this.h=p,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let de,me=!1,Ue=new re,Xe=()=>{const u=a.Promise.resolve(void 0);de=()=>{u.then(H)}};var H=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(w){S(w)}var p=fe;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}me=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var Ae=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const w=()=>{};a.addEventListener("test",w,p),a.removeEventListener("test",w,p)}catch{}return u}();function ce(u,p){if(ge.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var w=this.type=u.type,V=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(x){e:{try{D(p.nodeName);var $=!0;break e}catch{}$=!1}$||(p=null)}}else w=="mouseover"?p=u.fromElement:w=="mouseout"&&(p=u.toElement);this.relatedTarget=p,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ee[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ce.aa.h.call(this)}}_(ce,ge);var Ee={2:"touch",3:"pen",4:"mouse"};ce.prototype.h=function(){ce.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),q=0;function G(u,p,w,V,$){this.listener=u,this.proxy=null,this.src=p,this.type=w,this.capture=!!V,this.ha=$,this.key=++q,this.da=this.fa=!1}function ae(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Re(u){this.src=u,this.g={},this.h=0}Re.prototype.add=function(u,p,w,V,$){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var ye=M(u,p,V,$);return-1<ye?(p=u[ye],w||(p.fa=!1)):(p=new G(p,this.src,W,!!V,$),p.fa=w,u.push(p)),p};function N(u,p){var w=p.type;if(w in u.g){var V=u.g[w],$=Array.prototype.indexOf.call(V,p,void 0),W;(W=0<=$)&&Array.prototype.splice.call(V,$,1),W&&(ae(p),u.g[w].length==0&&(delete u.g[w],u.h--))}}function M(u,p,w,V){for(var $=0;$<u.length;++$){var W=u[$];if(!W.da&&W.listener==p&&W.capture==!!w&&W.ha==V)return $}return-1}var U="closure_lm_"+(1e6*Math.random()|0),K={};function Z(u,p,w,V,$){if(Array.isArray(p)){for(var W=0;W<p.length;W++)Z(u,p[W],w,V,$);return null}return w=Le(w),u&&u[L]?u.K(p,w,c(V)?!!V.capture:!!V,$):J(u,p,w,!1,V,$)}function J(u,p,w,V,$,W){if(!p)throw Error("Invalid event type");var ye=c($)?!!$.capture:!!$,pt=Te(u);if(pt||(u[U]=pt=new Re(u)),w=pt.add(p,w,V,ye,W),w.proxy)return w;if(V=be(),w.proxy=V,V.src=u,V.listener=w,u.addEventListener)Ae||($=ye),$===void 0&&($=!1),u.addEventListener(p.toString(),V,$);else if(u.attachEvent)u.attachEvent(ue(p.toString()),V);else if(u.addListener&&u.removeListener)u.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return w}function be(){function u(w){return p.call(u.src,u.listener,w)}const p=Oe;return u}function _e(u,p,w,V,$){if(Array.isArray(p))for(var W=0;W<p.length;W++)_e(u,p[W],w,V,$);else V=c(V)?!!V.capture:!!V,w=Le(w),u&&u[L]?(u=u.i,p=String(p).toString(),p in u.g&&(W=u.g[p],w=M(W,w,V,$),-1<w&&(ae(W[w]),Array.prototype.splice.call(W,w,1),W.length==0&&(delete u.g[p],u.h--)))):u&&(u=Te(u))&&(p=u.g[p.toString()],u=-1,p&&(u=M(p,w,V,$)),(w=-1<u?p[u]:null)&&ve(w))}function ve(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[L])N(p.i,u);else{var w=u.type,V=u.proxy;p.removeEventListener?p.removeEventListener(w,V,u.capture):p.detachEvent?p.detachEvent(ue(w),V):p.addListener&&p.removeListener&&p.removeListener(V),(w=Te(p))?(N(w,u),w.h==0&&(w.src=null,p[U]=null)):ae(u)}}}function ue(u){return u in K?K[u]:K[u]="on"+u}function Oe(u,p){if(u.da)u=!0;else{p=new ce(p,this);var w=u.listener,V=u.ha||u.src;u.fa&&ve(u),u=w.call(V,p)}return u}function Te(u){return u=u[U],u instanceof Re?u:null}var xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Le(u){return typeof u=="function"?u:(u[xe]||(u[xe]=function(p){return u.handleEvent(p)}),u[xe])}function Ve(){te.call(this),this.i=new Re(this),this.M=this,this.F=null}_(Ve,te),Ve.prototype[L]=!0,Ve.prototype.removeEventListener=function(u,p,w,V){_e(this,u,p,w,V)};function We(u,p){var w,V=u.F;if(V)for(w=[];V;V=V.F)w.push(V);if(u=u.M,V=p.type||p,typeof p=="string")p=new ge(p,u);else if(p instanceof ge)p.target=p.target||u;else{var $=p;p=new ge(V,u),k(p,$)}if($=!0,w)for(var W=w.length-1;0<=W;W--){var ye=p.g=w[W];$=ot(ye,V,!0,p)&&$}if(ye=p.g=u,$=ot(ye,V,!0,p)&&$,$=ot(ye,V,!1,p)&&$,w)for(W=0;W<w.length;W++)ye=p.g=w[W],$=ot(ye,V,!1,p)&&$}Ve.prototype.N=function(){if(Ve.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var w=u.g[p],V=0;V<w.length;V++)ae(w[V]);delete u.g[p],u.h--}}this.F=null},Ve.prototype.K=function(u,p,w,V){return this.i.add(String(u),p,!1,w,V)},Ve.prototype.L=function(u,p,w,V){return this.i.add(String(u),p,!0,w,V)};function ot(u,p,w,V){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var $=!0,W=0;W<p.length;++W){var ye=p[W];if(ye&&!ye.da&&ye.capture==w){var pt=ye.listener,Xt=ye.ha||ye.src;ye.fa&&N(u.i,ye),$=pt.call(Xt,V)!==!1&&$}}return $&&!V.defaultPrevented}function an(u,p,w){if(typeof u=="function")w&&(u=m(u,w));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function Yt(u){u.g=an(()=>{u.g=null,u.i&&(u.i=!1,Yt(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Yn extends te{constructor(p,w){super(),this.m=p,this.l=w,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Yt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ln(u){te.call(this),this.h=u,this.g={}}_(ln,te);var Vi=[];function Da(u){O(u.g,function(p,w){this.g.hasOwnProperty(w)&&ve(p)},u),u.g={}}ln.prototype.N=function(){ln.aa.N.call(this),Da(this)},ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qt=a.JSON.stringify,Qn=a.JSON.parse,vc=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function gh(){}gh.prototype.h=null;function Fp(u){return u.h||(u.h=u.i())}function Bp(){}var Oa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ph(){ge.call(this,"d")}_(ph,ge);function vh(){ge.call(this,"c")}_(vh,ge);var As={},Up=null;function _c(){return Up=Up||new Ve}As.La="serverreachability";function $p(u){ge.call(this,As.La,u)}_($p,ge);function Va(u){const p=_c();We(p,new $p(p))}As.STAT_EVENT="statevent";function zp(u,p){ge.call(this,As.STAT_EVENT,u),this.stat=p}_(zp,ge);function In(u){const p=_c();We(p,new zp(p,u))}As.Ma="timingevent";function jp(u,p){ge.call(this,As.Ma,u),this.size=p}_(jp,ge);function La(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function Na(){this.g=!0}Na.prototype.xa=function(){this.g=!1};function oS(u,p,w,V,$,W){u.info(function(){if(u.g)if(W)for(var ye="",pt=W.split("&"),Xt=0;Xt<pt.length;Xt++){var ct=pt[Xt].split("=");if(1<ct.length){var cn=ct[0];ct=ct[1];var un=cn.split("_");ye=2<=un.length&&un[1]=="type"?ye+(cn+"="+ct+"&"):ye+(cn+"=redacted&")}}else ye=null;else ye=W;return"XMLHTTP REQ ("+V+") [attempt "+$+"]: "+p+`
`+w+`
`+ye})}function aS(u,p,w,V,$,W,ye){u.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+$+"]: "+p+`
`+w+`
`+W+" "+ye})}function bo(u,p,w,V){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+cS(u,w)+(V?" "+V:"")})}function lS(u,p){u.info(function(){return"TIMEOUT: "+p})}Na.prototype.info=function(){};function cS(u,p){if(!u.g)return p;if(!p)return null;try{var w=JSON.parse(p);if(w){for(u=0;u<w.length;u++)if(Array.isArray(w[u])){var V=w[u];if(!(2>V.length)){var $=V[1];if(Array.isArray($)&&!(1>$.length)){var W=$[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ye=1;ye<$.length;ye++)$[ye]=""}}}}return Qt(w)}catch{return p}}var yc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_h;function bc(){}_(bc,gh),bc.prototype.g=function(){return new XMLHttpRequest},bc.prototype.i=function(){return{}},_h=new bc;function Li(u,p,w,V){this.j=u,this.i=p,this.l=w,this.R=V||1,this.U=new ln(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qp}function qp(){this.i=null,this.g="",this.h=!1}var Gp={},yh={};function bh(u,p,w){u.L=1,u.v=Ic(Qr(p)),u.m=w,u.P=!0,Wp(u,null)}function Wp(u,p){u.F=Date.now(),wc(u),u.A=Qr(u.v);var w=u.A,V=u.R;Array.isArray(V)||(V=[String(V)]),av(w.i,"t",V),u.C=0,w=u.j.J,u.h=new qp,u.g=Cv(u.j,w?p:null,!u.m),0<u.O&&(u.M=new Yn(m(u.Y,u,u.g),u.O)),p=u.U,w=u.g,V=u.ca;var $="readystatechange";Array.isArray($)||($&&(Vi[0]=$.toString()),$=Vi);for(var W=0;W<$.length;W++){var ye=Z(w,$[W],V||p.handleEvent,!1,p.h||p);if(!ye)break;p.g[ye.key]=ye}p=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Va(),oS(u.i,u.u,u.A,u.l,u.R,u.m)}Li.prototype.ca=function(u){u=u.target;const p=this.M;p&&Xr(u)==3?p.j():this.Y(u)},Li.prototype.Y=function(u){try{if(u==this.g)e:{const un=Xr(this.g);var p=this.g.Ba();const Eo=this.g.Z();if(!(3>un)&&(un!=3||this.g&&(this.h.h||this.g.oa()||mv(this.g)))){this.J||un!=4||p==7||(p==8||0>=Eo?Va(3):Va(2)),wh(this);var w=this.g.Z();this.X=w;t:if(Kp(this)){var V=mv(this.g);u="";var $=V.length,W=Xr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ks(this),Ma(this);var ye="";break t}this.h.i=new a.TextDecoder}for(p=0;p<$;p++)this.h.h=!0,u+=this.h.i.decode(V[p],{stream:!(W&&p==$-1)});V.length=0,this.h.g+=u,this.C=0,ye=this.h.g}else ye=this.g.oa();if(this.o=w==200,aS(this.i,this.u,this.A,this.l,this.R,un,w),this.o){if(this.T&&!this.K){t:{if(this.g){var pt,Xt=this.g;if((pt=Xt.g?Xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(pt)){var ct=pt;break t}}ct=null}if(w=ct)bo(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Th(this,w);else{this.o=!1,this.s=3,In(12),ks(this),Ma(this);break e}}if(this.P){w=!0;let dr;for(;!this.J&&this.C<ye.length;)if(dr=uS(this,ye),dr==yh){un==4&&(this.s=4,In(14),w=!1),bo(this.i,this.l,null,"[Incomplete Response]");break}else if(dr==Gp){this.s=4,In(15),bo(this.i,this.l,ye,"[Invalid Chunk]"),w=!1;break}else bo(this.i,this.l,dr,null),Th(this,dr);if(Kp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),un!=4||ye.length!=0||this.h.h||(this.s=1,In(16),w=!1),this.o=this.o&&w,!w)bo(this.i,this.l,ye,"[Invalid Chunked Response]"),ks(this),Ma(this);else if(0<ye.length&&!this.W){this.W=!0;var cn=this.j;cn.g==this&&cn.ba&&!cn.M&&(cn.j.info("Great, no buffering proxy detected. Bytes received: "+ye.length),kh(cn),cn.M=!0,In(11))}}else bo(this.i,this.l,ye,null),Th(this,ye);un==4&&ks(this),this.o&&!this.J&&(un==4?wv(this.j,this):(this.o=!1,wc(this)))}else AS(this.g),w==400&&0<ye.indexOf("Unknown SID")?(this.s=3,In(12)):(this.s=0,In(13)),ks(this),Ma(this)}}}catch{}finally{}};function Kp(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function uS(u,p){var w=u.C,V=p.indexOf(`
`,w);return V==-1?yh:(w=Number(p.substring(w,V)),isNaN(w)?Gp:(V+=1,V+w>p.length?yh:(p=p.slice(V,V+w),u.C=V+w,p)))}Li.prototype.cancel=function(){this.J=!0,ks(this)};function wc(u){u.S=Date.now()+u.I,Yp(u,u.I)}function Yp(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=La(m(u.ba,u),p)}function wh(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Li.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(lS(this.i,this.A),this.L!=2&&(Va(),In(17)),ks(this),this.s=2,Ma(this)):Yp(this,this.S-u)};function Ma(u){u.j.G==0||u.J||wv(u.j,u)}function ks(u){wh(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Da(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Th(u,p){try{var w=u.j;if(w.G!=0&&(w.g==u||Eh(w.h,u))){if(!u.K&&Eh(w.h,u)&&w.G==3){try{var V=w.Da.g.parse(p)}catch{V=null}if(Array.isArray(V)&&V.length==3){var $=V;if($[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<u.F)Pc(w),kc(w);else break e;Ah(w),In(18)}}else w.za=$[1],0<w.za-w.T&&37500>$[2]&&w.F&&w.v==0&&!w.C&&(w.C=La(m(w.Za,w),6e3));if(1>=Jp(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Ps(w,11)}else if((u.K||w.g==u)&&Pc(w),!y(p))for($=w.Da.g.parse(p),p=0;p<$.length;p++){let ct=$[p];if(w.T=ct[0],ct=ct[1],w.G==2)if(ct[0]=="c"){w.K=ct[1],w.ia=ct[2];const cn=ct[3];cn!=null&&(w.la=cn,w.j.info("VER="+w.la));const un=ct[4];un!=null&&(w.Aa=un,w.j.info("SVER="+w.Aa));const Eo=ct[5];Eo!=null&&typeof Eo=="number"&&0<Eo&&(V=1.5*Eo,w.L=V,w.j.info("backChannelRequestTimeoutMs_="+V)),V=w;const dr=u.g;if(dr){const Dc=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dc){var W=V.h;W.g||Dc.indexOf("spdy")==-1&&Dc.indexOf("quic")==-1&&Dc.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Ih(W,W.h),W.h=null))}if(V.D){const Rh=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;Rh&&(V.ya=Rh,wt(V.I,V.D,Rh))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-u.F,w.j.info("Handshake RTT: "+w.R+"ms")),V=w;var ye=u;if(V.qa=Iv(V,V.J?V.ia:null,V.W),ye.K){Zp(V.h,ye);var pt=ye,Xt=V.L;Xt&&(pt.I=Xt),pt.B&&(wh(pt),wc(pt)),V.g=ye}else yv(V);0<w.i.length&&Rc(w)}else ct[0]!="stop"&&ct[0]!="close"||Ps(w,7);else w.G==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?Ps(w,7):Sh(w):ct[0]!="noop"&&w.l&&w.l.ta(ct),w.v=0)}}Va(4)}catch{}}var dS=class{constructor(u,p){this.g=u,this.map=p}};function Qp(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xp(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Jp(u){return u.h?1:u.g?u.g.size:0}function Eh(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Ih(u,p){u.g?u.g.add(p):u.h=p}function Zp(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Qp.prototype.cancel=function(){if(this.i=ev(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ev(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const w of u.g.values())p=p.concat(w.D);return p}return T(u.i)}function hS(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],w=u.length,V=0;V<w;V++)p.push(u[V]);return p}p=[],w=0;for(V in u)p[w++]=u[V];return p}function fS(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var w=0;w<u;w++)p.push(w);return p}p=[],w=0;for(const V in u)p[w++]=V;return p}}}function tv(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var w=fS(u),V=hS(u),$=V.length,W=0;W<$;W++)p.call(void 0,V[W],w&&w[W],u)}var nv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mS(u,p){if(u){u=u.split("&");for(var w=0;w<u.length;w++){var V=u[w].indexOf("="),$=null;if(0<=V){var W=u[w].substring(0,V);$=u[w].substring(V+1)}else W=u[w];p(W,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Rs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Rs){this.h=u.h,Tc(this,u.j),this.o=u.o,this.g=u.g,Ec(this,u.s),this.l=u.l;var p=u.i,w=new Ua;w.i=p.i,p.g&&(w.g=new Map(p.g),w.h=p.h),rv(this,w),this.m=u.m}else u&&(p=String(u).match(nv))?(this.h=!1,Tc(this,p[1]||"",!0),this.o=Fa(p[2]||""),this.g=Fa(p[3]||"",!0),Ec(this,p[4]),this.l=Fa(p[5]||"",!0),rv(this,p[6]||"",!0),this.m=Fa(p[7]||"")):(this.h=!1,this.i=new Ua(null,this.h))}Rs.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Ba(p,iv,!0),":");var w=this.g;return(w||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Ba(p,iv,!0),"@"),u.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&u.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&u.push("/"),u.push(Ba(w,w.charAt(0)=="/"?vS:pS,!0))),(w=this.i.toString())&&u.push("?",w),(w=this.m)&&u.push("#",Ba(w,yS)),u.join("")};function Qr(u){return new Rs(u)}function Tc(u,p,w){u.j=w?Fa(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Ec(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function rv(u,p,w){p instanceof Ua?(u.i=p,bS(u.i,u.h)):(w||(p=Ba(p,_S)),u.i=new Ua(p,u.h))}function wt(u,p,w){u.i.set(p,w)}function Ic(u){return wt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Fa(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ba(u,p,w){return typeof u=="string"?(u=encodeURI(u).replace(p,gS),w&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function gS(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var iv=/[#\/\?@]/g,pS=/[#\?:]/g,vS=/[#\?]/g,_S=/[#\?@]/g,yS=/#/g;function Ua(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Ni(u){u.g||(u.g=new Map,u.h=0,u.i&&mS(u.i,function(p,w){u.add(decodeURIComponent(p.replace(/\+/g," ")),w)}))}t=Ua.prototype,t.add=function(u,p){Ni(this),this.i=null,u=wo(this,u);var w=this.g.get(u);return w||this.g.set(u,w=[]),w.push(p),this.h+=1,this};function sv(u,p){Ni(u),p=wo(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function ov(u,p){return Ni(u),p=wo(u,p),u.g.has(p)}t.forEach=function(u,p){Ni(this),this.g.forEach(function(w,V){w.forEach(function($){u.call(p,$,V,this)},this)},this)},t.na=function(){Ni(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),w=[];for(let V=0;V<p.length;V++){const $=u[V];for(let W=0;W<$.length;W++)w.push(p[V])}return w},t.V=function(u){Ni(this);let p=[];if(typeof u=="string")ov(this,u)&&(p=p.concat(this.g.get(wo(this,u))));else{u=Array.from(this.g.values());for(let w=0;w<u.length;w++)p=p.concat(u[w])}return p},t.set=function(u,p){return Ni(this),this.i=null,u=wo(this,u),ov(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function av(u,p,w){sv(u,p),0<w.length&&(u.i=null,u.g.set(wo(u,p),T(w)),u.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var w=0;w<p.length;w++){var V=p[w];const W=encodeURIComponent(String(V)),ye=this.V(V);for(V=0;V<ye.length;V++){var $=W;ye[V]!==""&&($+="="+encodeURIComponent(String(ye[V]))),u.push($)}}return this.i=u.join("&")};function wo(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function bS(u,p){p&&!u.j&&(Ni(u),u.i=null,u.g.forEach(function(w,V){var $=V.toLowerCase();V!=$&&(sv(this,V),av(this,$,w))},u)),u.j=p}function wS(u,p){const w=new Na;if(a.Image){const V=new Image;V.onload=g(Mi,w,"TestLoadImage: loaded",!0,p,V),V.onerror=g(Mi,w,"TestLoadImage: error",!1,p,V),V.onabort=g(Mi,w,"TestLoadImage: abort",!1,p,V),V.ontimeout=g(Mi,w,"TestLoadImage: timeout",!1,p,V),a.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=u}else p(!1)}function TS(u,p){const w=new Na,V=new AbortController,$=setTimeout(()=>{V.abort(),Mi(w,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:V.signal}).then(W=>{clearTimeout($),W.ok?Mi(w,"TestPingServer: ok",!0,p):Mi(w,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout($),Mi(w,"TestPingServer: error",!1,p)})}function Mi(u,p,w,V,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),V(w)}catch{}}function ES(){this.g=new vc}function IS(u,p,w){const V=w||"";try{tv(u,function($,W){let ye=$;c($)&&(ye=Qt($)),p.push(V+W+"="+encodeURIComponent(ye))})}catch($){throw p.push(V+"type="+encodeURIComponent("_badmap")),$}}function Cc(u){this.l=u.Ub||null,this.j=u.eb||!1}_(Cc,gh),Cc.prototype.g=function(){return new Sc(this.l,this.j)},Cc.prototype.i=function(u){return function(){return u}}({});function Sc(u,p){Ve.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Sc,Ve),t=Sc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,za(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$a(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,za(this)),this.g&&(this.readyState=3,za(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function lv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?$a(this):za(this),this.readyState==3&&lv(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,$a(this))},t.Qa=function(u){this.g&&(this.response=u,$a(this))},t.ga=function(){this.g&&$a(this)};function $a(u){u.readyState=4,u.l=null,u.j=null,u.v=null,za(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var w=p.next();!w.done;)w=w.value,u.push(w[0]+": "+w[1]),w=p.next();return u.join(`\r
`)};function za(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Sc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function cv(u){let p="";return O(u,function(w,V){p+=V,p+=":",p+=w,p+=`\r
`}),p}function Ch(u,p,w){e:{for(V in w){var V=!1;break e}V=!0}V||(w=cv(w),typeof u=="string"?w!=null&&encodeURIComponent(String(w)):wt(u,p,w))}function Dt(u){Ve.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Dt,Ve);var CS=/^https?$/i,SS=["POST","PUT"];t=Dt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,w,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_h.g(),this.v=this.o?Fp(this.o):Fp(_h),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(W){uv(this,W);return}if(u=w||"",w=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var $ in V)w.set($,V[$]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const W of V.keys())w.set(W,V.get(W));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(w.keys()).find(W=>W.toLowerCase()=="content-type"),$=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(SS,p,void 0))||V||$||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ye]of w)this.g.setRequestHeader(W,ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fv(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){uv(this,W)}};function uv(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,dv(u),Ac(u)}function dv(u){u.A||(u.A=!0,We(u,"complete"),We(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,We(this,"complete"),We(this,"abort"),Ac(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ac(this,!0)),Dt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?hv(this):this.bb())},t.bb=function(){hv(this)};function hv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Xr(u)!=4||u.Z()!=2)){if(u.u&&Xr(u)==4)an(u.Ea,0,u);else if(We(u,"readystatechange"),Xr(u)==4){u.h=!1;try{const ye=u.Z();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var w;if(!(w=p)){var V;if(V=ye===0){var $=String(u.D).match(nv)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),V=!CS.test($?$.toLowerCase():"")}w=V}if(w)We(u,"complete"),We(u,"success");else{u.m=6;try{var W=2<Xr(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",dv(u)}}finally{Ac(u)}}}}function Ac(u,p){if(u.g){fv(u);const w=u.g,V=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||We(u,"ready");try{w.onreadystatechange=V}catch{}}}function fv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Xr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Xr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Qn(p)}};function mv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function AS(u){const p={};u=(u.g&&2<=Xr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<u.length;V++){if(y(u[V]))continue;var w=E(u[V]);const $=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const W=p[$]||[];p[$]=W,W.push(w)}R(p,function(V){return V.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ja(u,p,w){return w&&w.internalChannelParams&&w.internalChannelParams[u]||p}function gv(u){this.Aa=0,this.i=[],this.j=new Na,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ja("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ja("baseRetryDelayMs",5e3,u),this.cb=ja("retryDelaySeedMs",1e4,u),this.Wa=ja("forwardChannelMaxRetries",2,u),this.wa=ja("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Qp(u&&u.concurrentRequestLimit),this.Da=new ES,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=gv.prototype,t.la=8,t.G=1,t.connect=function(u,p,w,V){In(0),this.W=u,this.H=p||{},w&&V!==void 0&&(this.H.OSID=w,this.H.OAID=V),this.F=this.X,this.I=Iv(this,null,this.W),Rc(this)};function Sh(u){if(pv(u),u.G==3){var p=u.U++,w=Qr(u.I);if(wt(w,"SID",u.K),wt(w,"RID",p),wt(w,"TYPE","terminate"),Ha(u,w),p=new Li(u,u.j,p),p.L=2,p.v=Ic(Qr(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!w&&a.Image&&(new Image().src=p.v,w=!0),w||(p.g=Cv(p.j,null),p.g.ea(p.v)),p.F=Date.now(),wc(p)}Ev(u)}function kc(u){u.g&&(kh(u),u.g.cancel(),u.g=null)}function pv(u){kc(u),u.u&&(a.clearTimeout(u.u),u.u=null),Pc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Rc(u){if(!Xp(u.h)&&!u.s){u.s=!0;var p=u.Ga;de||Xe(),me||(de(),me=!0),Ue.add(p,u),u.B=0}}function kS(u,p){return Jp(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=La(m(u.Ga,u,p),Tv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const $=new Li(this,this.j,u);let W=this.o;if(this.S&&(W?(W=v(W),k(W,this.S)):W=this.S),this.m!==null||this.O||($.H=W,W=null),this.P)e:{for(var p=0,w=0;w<this.i.length;w++){t:{var V=this.i[w];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(p+=V,4096<p){p=w;break e}if(p===4096||w===this.i.length-1){p=w+1;break e}}p=1e3}else p=1e3;p=_v(this,$,p),w=Qr(this.I),wt(w,"RID",u),wt(w,"CVER",22),this.D&&wt(w,"X-HTTP-Session-Id",this.D),Ha(this,w),W&&(this.O?p="headers="+encodeURIComponent(String(cv(W)))+"&"+p:this.m&&Ch(w,this.m,W)),Ih(this.h,$),this.Ua&&wt(w,"TYPE","init"),this.P?(wt(w,"$req",p),wt(w,"SID","null"),$.T=!0,bh($,w,null)):bh($,w,p),this.G=2}}else this.G==3&&(u?vv(this,u):this.i.length==0||Xp(this.h)||vv(this))};function vv(u,p){var w;p?w=p.l:w=u.U++;const V=Qr(u.I);wt(V,"SID",u.K),wt(V,"RID",w),wt(V,"AID",u.T),Ha(u,V),u.m&&u.o&&Ch(V,u.m,u.o),w=new Li(u,u.j,w,u.B+1),u.m===null&&(w.H=u.o),p&&(u.i=p.D.concat(u.i)),p=_v(u,w,1e3),w.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ih(u.h,w),bh(w,V,p)}function Ha(u,p){u.H&&O(u.H,function(w,V){wt(p,V,w)}),u.l&&tv({},function(w,V){wt(p,V,w)})}function _v(u,p,w){w=Math.min(u.i.length,w);var V=u.l?m(u.l.Na,u.l,u):null;e:{var $=u.i;let W=-1;for(;;){const ye=["count="+w];W==-1?0<w?(W=$[0].g,ye.push("ofs="+W)):W=0:ye.push("ofs="+W);let pt=!0;for(let Xt=0;Xt<w;Xt++){let ct=$[Xt].g;const cn=$[Xt].map;if(ct-=W,0>ct)W=Math.max(0,$[Xt].g-100),pt=!1;else try{IS(cn,ye,"req"+ct+"_")}catch{V&&V(cn)}}if(pt){V=ye.join("&");break e}}}return u=u.i.splice(0,w),p.D=u,V}function yv(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;de||Xe(),me||(de(),me=!0),Ue.add(p,u),u.v=0}}function Ah(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=La(m(u.Fa,u),Tv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,bv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=La(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,In(10),kc(this),bv(this))};function kh(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function bv(u){u.g=new Li(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Qr(u.qa);wt(p,"RID","rpc"),wt(p,"SID",u.K),wt(p,"AID",u.T),wt(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&wt(p,"TO",u.ja),wt(p,"TYPE","xmlhttp"),Ha(u,p),u.m&&u.o&&Ch(p,u.m,u.o),u.L&&(u.g.I=u.L);var w=u.g;u=u.ia,w.L=1,w.v=Ic(Qr(p)),w.m=null,w.P=!0,Wp(w,u)}t.Za=function(){this.C!=null&&(this.C=null,kc(this),Ah(this),In(19))};function Pc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function wv(u,p){var w=null;if(u.g==p){Pc(u),kh(u),u.g=null;var V=2}else if(Eh(u.h,p))w=p.D,Zp(u.h,p),V=1;else return;if(u.G!=0){if(p.o)if(V==1){w=p.m?p.m.length:0,p=Date.now()-p.F;var $=u.B;V=_c(),We(V,new jp(V,w)),Rc(u)}else yv(u);else if($=p.s,$==3||$==0&&0<p.X||!(V==1&&kS(u,p)||V==2&&Ah(u)))switch(w&&0<w.length&&(p=u.h,p.i=p.i.concat(w)),$){case 1:Ps(u,5);break;case 4:Ps(u,10);break;case 3:Ps(u,6);break;default:Ps(u,2)}}}function Tv(u,p){let w=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(w*=2),w*p}function Ps(u,p){if(u.j.info("Error code "+p),p==2){var w=m(u.fb,u),V=u.Xa;const $=!V;V=new Rs(V||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Tc(V,"https"),Ic(V),$?wS(V.toString(),w):TS(V.toString(),w)}else In(2);u.G=0,u.l&&u.l.sa(p),Ev(u),pv(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),In(2)):(this.j.info("Failed to ping google.com"),In(1))};function Ev(u){if(u.G=0,u.ka=[],u.l){const p=ev(u.h);(p.length!=0||u.i.length!=0)&&(b(u.ka,p),b(u.ka,u.i),u.h.i.length=0,T(u.i),u.i.length=0),u.l.ra()}}function Iv(u,p,w){var V=w instanceof Rs?Qr(w):new Rs(w);if(V.g!="")p&&(V.g=p+"."+V.g),Ec(V,V.s);else{var $=a.location;V=$.protocol,p=p?p+"."+$.hostname:$.hostname,$=+$.port;var W=new Rs(null);V&&Tc(W,V),p&&(W.g=p),$&&Ec(W,$),w&&(W.l=w),V=W}return w=u.D,p=u.ya,w&&p&&wt(V,w,p),wt(V,"VER",u.la),Ha(u,V),V}function Cv(u,p,w){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Dt(new Cc({eb:w})):new Dt(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sv(){}t=Sv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xc(){}xc.prototype.g=function(u,p){return new zn(u,p)};function zn(u,p){Ve.call(this),this.g=new gv(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!y(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!y(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new To(this)}_(zn,Ve),zn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zn.prototype.close=function(){Sh(this.g)},zn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var w={};w.__data__=u,u=w}else this.u&&(w={},w.__data__=Qt(u),u=w);p.i.push(new dS(p.Ya++,u)),p.G==3&&Rc(p)},zn.prototype.N=function(){this.g.l=null,delete this.j,Sh(this.g),delete this.g,zn.aa.N.call(this)};function Av(u){ph.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const w in p){u=w;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}_(Av,ph);function kv(){vh.call(this),this.status=1}_(kv,vh);function To(u){this.g=u}_(To,Sv),To.prototype.ua=function(){We(this.g,"a")},To.prototype.ta=function(u){We(this.g,new Av(u))},To.prototype.sa=function(u){We(this.g,new kv)},To.prototype.ra=function(){We(this.g,"b")},xc.prototype.createWebChannel=xc.prototype.g,zn.prototype.send=zn.prototype.o,zn.prototype.open=zn.prototype.m,zn.prototype.close=zn.prototype.close,nE=function(){return new xc},tE=function(){return _c()},eE=As,nm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yc.NO_ERROR=0,yc.TIMEOUT=8,yc.HTTP_ERROR=6,bu=yc,Hp.COMPLETE="complete",ZT=Hp,Bp.EventType=Oa,Oa.OPEN="a",Oa.CLOSE="b",Oa.ERROR="c",Oa.MESSAGE="d",Ve.prototype.listen=Ve.prototype.K,ol=Bp,Dt.prototype.listenOnce=Dt.prototype.L,Dt.prototype.getLastError=Dt.prototype.Ka,Dt.prototype.getLastErrorCode=Dt.prototype.Ba,Dt.prototype.getStatus=Dt.prototype.Z,Dt.prototype.getResponseJson=Dt.prototype.Oa,Dt.prototype.getResponseText=Dt.prototype.oa,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Ha,JT=Dt}).apply(typeof Bc<"u"?Bc:typeof self<"u"?self:typeof window<"u"?window:{});const X_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ta="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new Id("@firebase/firestore");function $o(){return ro.logLevel}function Ce(t,...e){if(ro.logLevel<=Ze.DEBUG){const n=e.map(bg);ro.debug(`Firestore (${Ta}): ${t}`,...n)}}function Ti(t,...e){if(ro.logLevel<=Ze.ERROR){const n=e.map(bg);ro.error(`Firestore (${Ta}): ${t}`,...n)}}function sa(t,...e){if(ro.logLevel<=Ze.WARN){const n=e.map(bg);ro.warn(`Firestore (${Ta}): ${t}`,...n)}}function bg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t="Unexpected state"){const e=`FIRESTORE (${Ta}) INTERNAL ASSERTION FAILED: `+t;throw Ti(e),new Error(e)}function gt(t,e){t||Me()}function He(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends lr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hn.UNAUTHENTICATED))}shutdown(){}}class pV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vV{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){gt(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new pi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new pi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new pi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(gt(typeof r.accessToken=="string"),new rE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gt(e===null||typeof e=="string"),new hn(e)}}class _V{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class yV{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new _V(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wV{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){gt(this.o===void 0);const r=s=>{s.error!=null&&Ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(gt(typeof n.token=="string"),this.R=n.token,new bV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=TV(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function tt(t,e){return t<e?-1:t>e?1:0}function oa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{static now(){return zt.fromMillis(Date.now())}static fromDate(e){return zt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new zt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Pe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Pe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Pe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?tt(this.nanoseconds,e.nanoseconds):tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{static fromTimestamp(e){return new Be(e)}static min(){return new Be(new zt(0,0))}static max(){return new Be(new zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n,r){n===void 0?n=0:n>e.length&&Me(),r===void 0?r=e.length-n:r>e.length-n&&Me(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ul.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ul?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class kt extends Ul{construct(e,n,r){return new kt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new kt(n)}static emptyPath(){return new kt([])}}const EV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Ul{construct(e,n,r){return new tn(e,n,r)}static isValidIdentifier(e){return EV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new tn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Pe(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Pe(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Pe(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Pe(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(n)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.path=e}static fromPath(e){return new De(kt.fromString(e))}static fromName(e){return new De(kt.fromString(e).popFirst(5))}static empty(){return new De(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return kt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new kt(e.slice()))}}function IV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Be.fromTimestamp(r===1e9?new zt(n+1,0):new zt(n,r));return new ls(i,De.empty(),e)}function CV(t){return new ls(t.readTime,t.key,-1)}class ls{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ls(Be.min(),De.empty(),-1)}static max(){return new ls(Be.max(),De.empty(),-1)}}function SV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=De.comparator(t.documentKey,e.documentKey),n!==0?n:tt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(t){if(t.code!==se.FAILED_PRECONDITION||t.message!==AV)throw t;Ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.reject(n)}static resolve(e){return new ne((n,r)=>{n(e)})}static reject(e){return new ne((n,r)=>{r(e)})}static waitFor(e){return new ne((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=ne.resolve(!1);for(const r of e)n=n.next(i=>i?ne.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new ne((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new ne((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function RV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ia(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}xd.oe=-1;function Dd(t){return t==null}function qu(t){return t===0&&1/t==-1/0}function PV(t){return typeof t=="number"&&Number.isInteger(t)&&!qu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=J_(e)),e=DV(t.get(n),e);return J_(e)}function DV(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function J_(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ws(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){this.comparator=e,this.root=n||Zt.EMPTY}insert(e,n){return new Pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new Pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uc(this.root,e,this.comparator,!0)}}class Uc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Zt.RED,this.left=i??Zt.EMPTY,this.right=s??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Zt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Zt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Me();const e=this.left.check();if(e!==this.right.check())throw Me();return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Me()}get value(){throw Me()}get color(){throw Me()}get left(){throw Me()}get right(){throw Me()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ey(this.data.getIterator())}getIteratorFrom(e){return new ey(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new jt(this.comparator);return n.data=e,n}}class ey{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new qn([])}unionWith(e){let n=new jt(tn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new qn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new oE("Invalid base64 string: "+s):s}}(e);return new sn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const OV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cs(t){if(gt(!!t),typeof t=="string"){let e=0;const n=OV.exec(t);if(gt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Mt(t.seconds),nanos:Mt(t.nanos)}}function Mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function us(t){return typeof t=="string"?sn.fromBase64String(t):sn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Od(t){const e=t.mapValue.fields.__previous_value__;return wg(e)?Od(e):e}function $l(t){const e=cs(t.mapValue.fields.__local_write_time__.timestampValue);return new zt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class zl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new zl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wg(t)?4:NV(t)?9007199254740991:LV(t)?10:11:Me()}function jr(t,e){if(t===e)return!0;const n=ds(t);if(n!==ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $l(t).isEqual($l(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=cs(i.timestampValue),a=cs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return us(i.bytesValue).isEqual(us(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Mt(i.geoPointValue.latitude)===Mt(s.geoPointValue.latitude)&&Mt(i.geoPointValue.longitude)===Mt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Mt(i.integerValue)===Mt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Mt(i.doubleValue),a=Mt(s.doubleValue);return o===a?qu(o)===qu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return oa(t.arrayValue.values||[],e.arrayValue.values||[],jr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Z_(o)!==Z_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!jr(o[l],a[l])))return!1;return!0}(t,e);default:return Me()}}function jl(t,e){return(t.values||[]).find(n=>jr(n,e))!==void 0}function aa(t,e){if(t===e)return 0;const n=ds(t),r=ds(e);if(n!==r)return tt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return tt(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Mt(s.integerValue||s.doubleValue),l=Mt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return ty(t.timestampValue,e.timestampValue);case 4:return ty($l(t),$l(e));case 5:return tt(t.stringValue,e.stringValue);case 6:return function(s,o){const a=us(s),l=us(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=tt(a[c],l[c]);if(d!==0)return d}return tt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=tt(Mt(s.latitude),Mt(o.latitude));return a!==0?a:tt(Mt(s.longitude),Mt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ny(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,d;const f=s.fields||{},m=o.fields||{},g=(a=f.value)===null||a===void 0?void 0:a.arrayValue,_=(l=m.value)===null||l===void 0?void 0:l.arrayValue,T=tt(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0);return T!==0?T:ny(g,_)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===$c.mapValue&&o===$c.mapValue)return 0;if(s===$c.mapValue)return 1;if(o===$c.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const m=tt(l[f],d[f]);if(m!==0)return m;const g=aa(a[l[f]],c[d[f]]);if(g!==0)return g}return tt(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Me()}}function ty(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return tt(t,e);const n=cs(t),r=cs(e),i=tt(n.seconds,r.seconds);return i!==0?i:tt(n.nanos,r.nanos)}function ny(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=aa(n[i],r[i]);if(s)return s}return tt(n.length,r.length)}function la(t){return rm(t)}function rm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=cs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return us(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return De.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=rm(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${rm(n.fields[o])}`;return i+"}"}(t.mapValue):Me()}function wu(t){switch(ds(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Od(t);return e?16+wu(e):16;case 5:return 2*t.stringValue.length;case 6:return us(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+wu(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ws(r.fields,(s,o)=>{i+=s.length+wu(o)}),i}(t.mapValue);default:throw Me()}}function im(t){return!!t&&"integerValue"in t}function Tg(t){return!!t&&"arrayValue"in t}function ry(t){return!!t&&"nullValue"in t}function iy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tu(t){return!!t&&"mapValue"in t}function LV(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function yl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ws(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function NV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Tu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yl(n)}setAll(e){let n=tn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=yl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Tu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Tu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ws(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ln(yl(this.value))}}function aE(t){const e=[];return ws(t.fields,(n,r)=>{const i=new tn([n]);if(Tu(r)){const s=aE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new gn(e,0,Be.min(),Be.min(),Be.min(),Ln.empty(),0)}static newFoundDocument(e,n,r,i){return new gn(e,1,n,Be.min(),r,i,0)}static newNoDocument(e,n){return new gn(e,2,n,Be.min(),Be.min(),Ln.empty(),0)}static newUnknownDocument(e,n){return new gn(e,3,n,Be.min(),Be.min(),Ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n){this.position=e,this.inclusive=n}}function sy(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=De.comparator(De.fromName(o.referenceValue),n.key):r=aa(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function oy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n="asc"){this.field=e,this.dir=n}}function MV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{}class $t extends lE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new BV(e,n,r):n==="array-contains"?new zV(e,r):n==="in"?new jV(e,r):n==="not-in"?new HV(e,r):n==="array-contains-any"?new qV(e,r):new $t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new UV(e,r):new $V(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(aa(n,this.value)):n!==null&&ds(this.value)===ds(n)&&this.matchesComparison(aa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hr extends lE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Hr(e,n)}matches(e){return cE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function cE(t){return t.op==="and"}function uE(t){return FV(t)&&cE(t)}function FV(t){for(const e of t.filters)if(e instanceof Hr)return!1;return!0}function sm(t){if(t instanceof $t)return t.field.canonicalString()+t.op.toString()+la(t.value);if(uE(t))return t.filters.map(e=>sm(e)).join(",");{const e=t.filters.map(n=>sm(n)).join(",");return`${t.op}(${e})`}}function dE(t,e){return t instanceof $t?function(r,i){return i instanceof $t&&r.op===i.op&&r.field.isEqual(i.field)&&jr(r.value,i.value)}(t,e):t instanceof Hr?function(r,i){return i instanceof Hr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&dE(o,i.filters[a]),!0):!1}(t,e):void Me()}function hE(t){return t instanceof $t?function(n){return`${n.field.canonicalString()} ${n.op} ${la(n.value)}`}(t):t instanceof Hr?function(n){return n.op.toString()+" {"+n.getFilters().map(hE).join(" ,")+"}"}(t):"Filter"}class BV extends $t{constructor(e,n,r){super(e,n,r),this.key=De.fromName(r.referenceValue)}matches(e){const n=De.comparator(e.key,this.key);return this.matchesComparison(n)}}class UV extends $t{constructor(e,n){super(e,"in",n),this.keys=fE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $V extends $t{constructor(e,n){super(e,"not-in",n),this.keys=fE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function fE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>De.fromName(r.referenceValue))}class zV extends $t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tg(n)&&jl(n.arrayValue,this.value)}}class jV extends $t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&jl(this.value.arrayValue,n)}}class HV extends $t{constructor(e,n){super(e,"not-in",n)}matches(e){if(jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!jl(this.value.arrayValue,n)}}class qV extends $t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>jl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function ay(t,e=null,n=[],r=[],i=null,s=null,o=null){return new GV(t,e,n,r,i,s,o)}function Eg(t){const e=He(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>sm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Dd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>la(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>la(r)).join(",")),e.ue=n}return e.ue}function Ig(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!MV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!dE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!oy(t.startAt,e.startAt)&&oy(t.endAt,e.endAt)}function om(t){return De.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function WV(t,e,n,r,i,s,o,a){return new Vd(t,e,n,r,i,s,o,a)}function Cg(t){return new Vd(t)}function ly(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function KV(t){return t.collectionGroup!==null}function bl(t){const e=He(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new jt(tn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Wu(s,r))}),n.has(tn.keyField().canonicalString())||e.ce.push(new Wu(tn.keyField(),r))}return e.ce}function Ur(t){const e=He(t);return e.le||(e.le=YV(e,bl(t))),e.le}function YV(t,e){if(t.limitType==="F")return ay(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Wu(i.field,s)});const n=t.endAt?new Gu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Gu(t.startAt.position,t.startAt.inclusive):null;return ay(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function am(t,e,n){return new Vd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ld(t,e){return Ig(Ur(t),Ur(e))&&t.limitType===e.limitType}function mE(t){return`${Eg(Ur(t))}|lt:${t.limitType}`}function zo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>hE(i)).join(", ")}]`),Dd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>la(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>la(i)).join(",")),`Target(${r})`}(Ur(t))}; limitType=${t.limitType})`}function Nd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):De.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of bl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=sy(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,bl(r),i)||r.endAt&&!function(o,a,l){const c=sy(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,bl(r),i))}(t,e)}function QV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function gE(t){return(e,n)=>{let r=!1;for(const i of bl(t)){const s=XV(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function XV(t,e,n){const r=t.field.isKeyField()?De.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?aa(l,c):Me()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Me()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ws(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return sE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=new Pt(De.comparator);function Ei(){return JV}const pE=new Pt(De.comparator);function al(...t){let e=pE;for(const n of t)e=e.insert(n.key,n);return e}function vE(t){let e=pE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function js(){return wl()}function _E(){return wl()}function wl(){return new ho(t=>t.toString(),(t,e)=>t.isEqual(e))}const ZV=new Pt(De.comparator),eL=new jt(De.comparator);function et(...t){let e=eL;for(const n of t)e=e.add(n);return e}const tL=new jt(tt);function nL(){return tL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qu(e)?"-0":e}}function yE(t){return{integerValue:""+t}}function rL(t,e){return PV(e)?yE(e):Sg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(){this._=void 0}}function iL(t,e,n){return t instanceof Ku?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&wg(s)&&(s=Od(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Hl?wE(t,e):t instanceof ql?TE(t,e):function(i,s){const o=bE(i,s),a=cy(o)+cy(i.Pe);return im(o)&&im(i.Pe)?yE(a):Sg(i.serializer,a)}(t,e)}function sL(t,e,n){return t instanceof Hl?wE(t,e):t instanceof ql?TE(t,e):n}function bE(t,e){return t instanceof Yu?function(r){return im(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ku extends Md{}class Hl extends Md{constructor(e){super(),this.elements=e}}function wE(t,e){const n=EE(e);for(const r of t.elements)n.some(i=>jr(i,r))||n.push(r);return{arrayValue:{values:n}}}class ql extends Md{constructor(e){super(),this.elements=e}}function TE(t,e){let n=EE(e);for(const r of t.elements)n=n.filter(i=>!jr(i,r));return{arrayValue:{values:n}}}class Yu extends Md{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function cy(t){return Mt(t.integerValue||t.doubleValue)}function EE(t){return Tg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function oL(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Hl&&i instanceof Hl||r instanceof ql&&i instanceof ql?oa(r.elements,i.elements,jr):r instanceof Yu&&i instanceof Yu?jr(r.Pe,i.Pe):r instanceof Ku&&i instanceof Ku}(t.transform,e.transform)}class aL{constructor(e,n){this.version=e,this.transformResults=n}}class nr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nr}static exists(e){return new nr(void 0,e)}static updateTime(e){return new nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Eu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fd{}function IE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ag(t.key,nr.none()):new ac(t.key,t.data,nr.none());{const n=t.data,r=Ln.empty();let i=new jt(tn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ts(t.key,r,new qn(i.toArray()),nr.none())}}function lL(t,e,n){t instanceof ac?function(i,s,o){const a=i.value.clone(),l=dy(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ts?function(i,s,o){if(!Eu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=dy(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(CE(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Tl(t,e,n,r){return t instanceof ac?function(s,o,a,l){if(!Eu(s.precondition,o))return a;const c=s.value.clone(),d=hy(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ts?function(s,o,a,l){if(!Eu(s.precondition,o))return a;const c=hy(s.fieldTransforms,l,o),d=o.data;return d.setAll(CE(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Eu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function cL(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=bE(r.transform,i||null);s!=null&&(n===null&&(n=Ln.empty()),n.set(r.field,s))}return n||null}function uy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&oa(r,i,(s,o)=>oL(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ac extends Fd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ts extends Fd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function CE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function dy(t,e,n){const r=new Map;gt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,sL(o,a,n[i]))}return r}function hy(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,iL(s,o,e))}return r}class Ag extends Fd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uL extends Fd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&lL(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Tl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Tl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_E();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=IE(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Be.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),et())}isEqual(e){return this.batchId===e.batchId&&oa(this.mutations,e.mutations,(n,r)=>uy(n,r))&&oa(this.baseMutations,e.baseMutations,(n,r)=>uy(n,r))}}class kg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){gt(e.mutations.length===r.length);let i=function(){return ZV}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new kg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hL=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,at;function mL(t){switch(t){default:return Me();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function SE(t){if(t===void 0)return Ti("GRPC error has no .code"),se.UNKNOWN;switch(t){case Ft.OK:return se.OK;case Ft.CANCELLED:return se.CANCELLED;case Ft.UNKNOWN:return se.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return se.INTERNAL;case Ft.UNAVAILABLE:return se.UNAVAILABLE;case Ft.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Ft.NOT_FOUND:return se.NOT_FOUND;case Ft.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Ft.ABORTED:return se.ABORTED;case Ft.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Ft.DATA_LOSS:return se.DATA_LOSS;default:return Me()}}(at=Ft||(Ft={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=new Gs([4294967295,4294967295],0);function fy(t){const e=gL().encode(t),n=new XT;return n.update(e),new Uint8Array(n.digest())}function my(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Gs([n,r],0),new Gs([i,s],0)]}class Rg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ll(`Invalid padding: ${n}`);if(r<0)throw new ll(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ll(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ll(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Gs.fromNumber(this.Te)}Ee(e,n,r){let i=e.add(n.multiply(Gs.fromNumber(r)));return i.compare(pL)===1&&(i=new Gs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=fy(e),[r,i]=my(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Rg(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=fy(e),[r,i]=my(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ll extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,lc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Bd(Be.min(),i,new Pt(tt),Ei(),et())}}class lc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new lc(r,n,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class AE{constructor(e,n){this.targetId=e,this.me=n}}class kE{constructor(e,n,r=sn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class gy{constructor(){this.fe=0,this.ge=py(),this.pe=sn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=et(),n=et(),r=et();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Me()}}),new lc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=py()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,gt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class vL{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ei(),this.qe=zc(),this.Qe=zc(),this.Ke=new Pt(tt)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:Me()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const s=i.target;if(om(s))if(r===0){const o=new De(s.path);this.We(n,o,gn.newNoDocument(o,Be.min()))}else gt(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=us(r).toUint8Array()}catch(l){if(l instanceof oE)return sa("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Rg(o,i,s)}catch(l){return sa(l instanceof ll?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&om(a.target)){const l=new De(a.target.path);this.st(l).has(o)||this.ot(o,l)||this.We(o,l,gn.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=et();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Bd(e,n,this.Ke,this.ke,r);return this.ke=Ei(),this.qe=zc(),this.Qe=zc(),this.Ke=new Pt(tt),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new gy,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new jt(tt),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new jt(tt),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||Ce("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new gy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function zc(){return new Pt(De.comparator)}function py(){return new Pt(De.comparator)}const _L={asc:"ASCENDING",desc:"DESCENDING"},yL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bL={and:"AND",or:"OR"};class wL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lm(t,e){return t.useProto3Json||Dd(e)?e:{value:e}}function Qu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function TL(t,e){return Qu(t,e.toTimestamp())}function $r(t){return gt(!!t),Be.fromTimestamp(function(n){const r=cs(n);return new zt(r.seconds,r.nanos)}(t))}function Pg(t,e){return cm(t,e).canonicalString()}function cm(t,e){const n=function(i){return new kt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function PE(t){const e=kt.fromString(t);return gt(LE(e)),e}function um(t,e){return Pg(t.databaseId,e.path)}function Zh(t,e){const n=PE(e);if(n.get(1)!==t.databaseId.projectId)throw new Pe(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Pe(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new De(DE(n))}function xE(t,e){return Pg(t.databaseId,e)}function EL(t){const e=PE(t);return e.length===4?kt.emptyPath():DE(e)}function dm(t){return new kt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function DE(t){return gt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function vy(t,e,n){return{name:um(t,e),fields:n.value.mapValue.fields}}function IL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Me()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(gt(d===void 0||typeof d=="string"),sn.fromBase64String(d||"")):(gt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),sn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?se.UNKNOWN:SE(c.code);return new Pe(d,c.message||"")}(o);n=new kE(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Zh(t,r.document.name),s=$r(r.document.updateTime),o=r.document.createTime?$r(r.document.createTime):Be.min(),a=new Ln({mapValue:{fields:r.document.fields}}),l=gn.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Iu(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Zh(t,r.document),s=r.readTime?$r(r.readTime):Be.min(),o=gn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Iu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Zh(t,r.document),s=r.removedTargetIds||[];n=new Iu([],s,i,null)}else{if(!("filter"in e))return Me();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new fL(i,s),a=r.targetId;n=new AE(a,o)}}return n}function CL(t,e){let n;if(e instanceof ac)n={update:vy(t,e.key,e.value)};else if(e instanceof Ag)n={delete:um(t,e.key)};else if(e instanceof Ts)n={update:vy(t,e.key,e.data),updateMask:VL(e.fieldMask)};else{if(!(e instanceof uL))return Me();n={verify:um(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ku)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Hl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ql)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Yu)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Me()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:TL(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Me()}(t,e.precondition)),n}function SL(t,e){return t&&t.length>0?(gt(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?$r(i.updateTime):$r(s);return o.isEqual(Be.min())&&(o=$r(s)),new aL(o,i.transformResults||[])}(n,e))):[]}function AL(t,e){return{documents:[xE(t,e.path)]}}function kL(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=xE(t,i);const s=function(c){if(c.length!==0)return VE(Hr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:jo(m.field),direction:xL(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=lm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:n,parent:i}}function RL(t){let e=EL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){gt(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){const m=OE(f);return m instanceof Hr&&uE(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(_){return new Wu(Ho(_.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Dd(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,g=f.values||[];return new Gu(g,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,g=f.values||[];return new Gu(g,m)}(n.endAt)),WV(e,i,o,s,a,"F",l,c)}function PL(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ho(n.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ho(n.unaryFilter.field);return $t.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ho(n.unaryFilter.field);return $t.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ho(n.unaryFilter.field);return $t.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Me()}}(t):t.fieldFilter!==void 0?function(n){return $t.create(Ho(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Me()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Hr.create(n.compositeFilter.filters.map(r=>OE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Me()}}(n.compositeFilter.op))}(t):Me()}function xL(t){return _L[t]}function DL(t){return yL[t]}function OL(t){return bL[t]}function jo(t){return{fieldPath:t.canonicalString()}}function Ho(t){return tn.fromServerFormat(t.fieldPath)}function VE(t){return t instanceof $t?function(n){if(n.op==="=="){if(iy(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NAN"}};if(ry(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iy(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NAN"}};if(ry(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(n.field),op:DL(n.op),value:n.value}}}(t):t instanceof Hr?function(n){const r=n.getFilters().map(i=>VE(i));return r.length===1?r[0]:{compositeFilter:{op:OL(n.op),filters:r}}}(t):Me()}function VL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function LE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n,r,i,s=Be.min(),o=Be.min(),a=sn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e){this.ht=e}}function NL(t){const e=RL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?am(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(){this.ln=new FL}addToCollectionParentIndex(e,n){return this.ln.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(ls.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(ls.min())}updateCollectionGroup(e,n,r){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class FL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new jt(kt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jt(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Dn{static withCacheSize(e){return new Dn(e,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(41943040,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new ca(0)}static Qn(){return new ca(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy([t,e],[n,r]){const i=tt(t,n);return i===0?tt(e,r):i}class BL{constructor(e){this.Gn=e,this.buffer=new jt(yy),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();yy(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class UL{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){Ce("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ia(n)?Ce("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Ea(n)}await this.Yn(3e5)})}}class $L{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ne.resolve(xd.oe);const r=new BL(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ce("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(_y)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_y):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,s,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),$o()<=Ze.DEBUG&&Ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function zL(t,e){return new $L(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(){this.changes=new ho(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ne.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Tl(r.mutation,i,qn.empty(),zt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,et()).next(()=>r))}getLocalViewOfDocuments(e,n,r=et()){const i=js();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=al();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=js();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,et()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Ei();const o=wl(),a=function(){return wl()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof Ts)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Tl(d.mutation,c,d.mutation.getFieldMask(),zt.now())):o.set(c.key,qn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var f;return a.set(c,new HL(d,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=wl();let i=new Pt((o,a)=>o-a),s=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||qn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const f=(i.get(a.batchId)||et()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,f=_E();d.forEach(m=>{if(!s.has(m)){const g=IE(n.get(m),r.get(m));g!==null&&f.set(m,g),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return ne.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return De.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):KV(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):ne.resolve(js());let a=-1,l=s;return o.next(c=>ne.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?ne.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,et())).next(d=>({batchId:a,changes:vE(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new De(n)).next(r=>{let i=al();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=al();return this.indexManager.getCollectionParents(e,s).next(a=>ne.forEach(a,l=>{const c=function(f,m){return new Vd(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,gn.newInvalidDocument(d)))});let a=al();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&Tl(d.mutation,c,qn.empty(),zt.now()),Nd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return ne.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:$r(i.createTime)}}(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:NL(i.bundledQuery),readTime:$r(i.readTime)}}(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(){this.overlays=new Pt(De.comparator),this.Er=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const r=js();return ne.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.Tt(e,n,s)}),ne.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(r)),ne.resolve()}getOverlaysForCollection(e,n,r){const i=js(),s=n.length+1,o=new De(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Pt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=js(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=js(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return ne.resolve(a)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hL(n,r));let s=this.Er.get(n);s===void 0&&(s=et(),this.Er.set(n,s)),this.Er.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(){this.dr=new jt(Ht.Ar),this.Rr=new jt(Ht.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const r=new Ht(e,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new Ht(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new De(new kt([])),r=new Ht(n,e),i=new Ht(n,e+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new De(new kt([])),r=new Ht(n,e),i=new Ht(n,e+1);let s=et();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ht(e,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return De.comparator(e.key,n.key)||tt(e.br,n.br)}static Vr(e,n){return tt(e.br,n.br)||De.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new jt(Ht.Ar)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new dL(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new Ht(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ne.resolve(o)}lookupMutationBatch(e,n){return ne.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return ne.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ht(n,0),i=new Ht(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),ne.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new jt(tt);return n.forEach(i=>{const s=new Ht(i,0),o=new Ht(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),ne.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;De.isDocumentKey(s)||(s=s.child(""));const o=new Ht(new De(s),0);let a=new jt(tt);return this.vr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.br)),!0)},o),ne.resolve(this.Mr(a))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){gt(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return ne.forEach(n.mutations,i=>{const s=new Ht(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,n){const r=new Ht(n,0),i=this.vr.firstAfterOrEqual(r);return ne.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e){this.Nr=e,this.docs=function(){return new Pt(De.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ne.resolve(r?r.document.mutableCopy():gn.newInvalidDocument(n))}getEntries(e,n){let r=Ei();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():gn.newInvalidDocument(i))}),ne.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ei();const o=n.path,a=new De(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||SV(CV(d),r)<=0||(i.has(d.key)||Nd(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return ne.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Me()}Lr(e,n){return ne.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new XL(this)}getSize(e){return ne.resolve(this.size)}}class XL extends jL{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),ne.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e){this.persistence=e,this.Br=new ho(n=>Eg(n),Ig),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.kr=0,this.qr=new xg,this.targetCount=0,this.Qr=ca.qn()}forEachTarget(e,n){return this.Br.forEach((r,i)=>n(i)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),ne.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new ca(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.Un(n),ne.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ne.waitFor(s).next(()=>i)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const r=this.Br.get(n)||null;return ne.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),ne.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),ne.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return ne.resolve(r)}containsKey(e,n){return ne.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n){this.Kr={},this.overlays={},this.$r=new xd(0),this.Ur=!1,this.Ur=!0,this.Wr=new KL,this.referenceDelegate=e(this),this.Gr=new JL(this),this.indexManager=new ML,this.remoteDocumentCache=function(i){return new QL(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new LL(n),this.jr=new GL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new WL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new YL(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){Ce("MemoryPersistence","Starting transaction:",e);const i=new ZL(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,n){return ne.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class ZL extends kV{constructor(e){super(),this.currentSequenceNumber=e}}class Dg{constructor(e){this.persistence=e,this.Zr=new xg,this.Xr=null}static ei(e){return new Dg(e)}get ti(){if(this.Xr)return this.Xr;throw Me()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),ne.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),ne.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.ti,r=>{const i=De.fromPath(r);return this.ni(e,i).next(s=>{s||n.removeEntry(i,Be.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return ne.or([()=>ne.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class Xu{constructor(e,n){this.persistence=e,this.ri=new ho(r=>xV(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=zL(this,n)}static ei(e,n){return new Xu(e,n)}Hr(){}Jr(e){return ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return ne.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?ne.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Lr(e,o=>this.ir(e,o,n).next(a=>{a||(r++,s.removeEntry(o,Be.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),ne.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),ne.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=wu(e.data.value)),n}ir(e,n,r){return ne.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return ne.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=et(),i=et();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Og(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return dR()?8:RV(bn())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Xi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new eN;return this.ts(e,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(e,n,o,a.size)})}).next(()=>s.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?($o()<=Ze.DEBUG&&Ce("QueryEngine","SDK will not create cache indexes for query:",zo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),ne.resolve()):($o()<=Ze.DEBUG&&Ce("QueryEngine","Query:",zo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?($o()<=Ze.DEBUG&&Ce("QueryEngine","The SDK decides to create cache indexes for query:",zo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ur(n))):ne.resolve())}Xi(e,n){if(ly(n))return ne.resolve(null);let r=Ur(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=am(n,null,"F"),r=Ur(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=et(...s);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.rs(n,a);return this.ss(n,c,o,l.readTime)?this.Xi(e,am(n,null,"F")):this.os(e,c,n,l)}))})))}es(e,n,r,i){return ly(n)||i.isEqual(Be.min())?ne.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?ne.resolve(null):($o()<=Ze.DEBUG&&Ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zo(n)),this.os(e,o,n,IV(i,-1)).next(a=>a))})}rs(e,n){let r=new jt(gE(e));return n.forEach((i,s)=>{Nd(e,s)&&(r=r.add(s))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,n,r){return $o()<=Ze.DEBUG&&Ce("QueryEngine","Using full collection scan to execute query:",zo(n)),this.Zi.getDocumentsMatchingQuery(e,n,ls.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new Pt(tt),this.cs=new ho(s=>Eg(s),Ig),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qL(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function rN(t,e,n,r){return new nN(t,e,n,r)}async function ME(t,e){const n=He(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=et();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ts:c,removedBatchIds:o,addedBatchIds:a}))})})}function iN(t,e){const n=He(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const f=c.batch,m=f.keys();let g=ne.resolve();return m.forEach(_=>{g=g.next(()=>d.getEntry(l,_)).next(T=>{const b=c.docVersions.get(_);gt(b!==null),T.version.compareTo(b)<0&&(f.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),d.addEntry(T)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=et();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function FE(t){const e=He(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function sN(t,e){const n=He(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];e.targetChanges.forEach((d,f)=>{const m=i.get(f);if(!m)return;a.push(n.Gr.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Gr.addMatchingKeys(s,d.addedDocuments,f)));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(sn.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(f,g),function(T,b,C){return T.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(m,g,d)&&a.push(n.Gr.updateTargetData(s,g))});let l=Ei(),c=et();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(oN(s,o,e.documentUpdates).next(d=>{l=d.Is,c=d.Es})),!r.isEqual(Be.min())){const d=n.Gr.getLastRemoteSnapshotVersion(s).next(f=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return ne.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.us=i,s))}function oN(t,e,n){let r=et(),i=et();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ei();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Be.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ce("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Is:o,Es:i}})}function aN(t,e){const n=He(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lN(t,e){const n=He(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(s=>s?(i=s,ne.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new es(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function hm(t,e,n){const r=He(t),i=r.us.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ia(o))throw o;Ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function by(t,e,n){const r=He(t);let i=Be.min(),s=et();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const f=He(l),m=f.cs.get(d);return m!==void 0?ne.resolve(f.us.get(m)):f.Gr.getTargetData(c,d)}(r,o,Ur(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,n?i:Be.min(),n?s:et())).next(a=>(cN(r,QV(e),a),{documents:a,ds:s})))}function cN(t,e,n){let r=t.ls.get(e)||Be.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ls.set(e,r)}class wy{constructor(){this.activeTargetIds=nL()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uN{constructor(){this._o=new wy,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new wy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){Ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc=null;function ef(){return jc===null?jc=function(){return 268435456+Math.round(2147483648*Math.random())}():jc++,"0x"+jc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class mN extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=ef(),l=this.No(n,r.toUriEncodedString());Ce("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(c,s,o),this.Bo(n,l,c,i).then(d=>(Ce("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw sa("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Lo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ta}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=hN[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,r,i){const s=ef();return new Promise((o,a)=>{const l=new JT;l.setWithCredentials(!0),l.listenOnce(ZT.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case bu.NO_ERROR:const d=l.getResponseJson();Ce(dn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case bu.TIMEOUT:Ce(dn,`RPC '${e}' ${s} timed out`),a(new Pe(se.DEADLINE_EXCEEDED,"Request time out"));break;case bu.HTTP_ERROR:const f=l.getStatus();if(Ce(dn,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const _=function(b){const C=b.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(C)>=0?C:se.UNKNOWN}(g.status);a(new Pe(_,g.message))}else a(new Pe(se.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Pe(se.UNAVAILABLE,"Connection failed."));break;default:Me()}}finally{Ce(dn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Ce(dn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}qo(e,n,r){const i=ef(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=nE(),a=tE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");Ce(dn,`Creating RPC '${e}' stream ${i}: ${d}`,l);const f=o.createWebChannel(d,l);let m=!1,g=!1;const _=new fN({Eo:b=>{g?Ce(dn,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(m||(Ce(dn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),Ce(dn,`RPC '${e}' stream ${i} sending:`,b),f.send(b))},Ao:()=>f.close()}),T=(b,C,y)=>{b.listen(C,A=>{try{y(A)}catch(D){setTimeout(()=>{throw D},0)}})};return T(f,ol.EventType.OPEN,()=>{g||(Ce(dn,`RPC '${e}' stream ${i} transport opened.`),_.So())}),T(f,ol.EventType.CLOSE,()=>{g||(g=!0,Ce(dn,`RPC '${e}' stream ${i} transport closed`),_.Do())}),T(f,ol.EventType.ERROR,b=>{g||(g=!0,sa(dn,`RPC '${e}' stream ${i} transport errored:`,b),_.Do(new Pe(se.UNAVAILABLE,"The operation could not be completed")))}),T(f,ol.EventType.MESSAGE,b=>{var C;if(!g){const y=b.data[0];gt(!!y);const A=y,D=(A==null?void 0:A.error)||((C=A[0])===null||C===void 0?void 0:C.error);if(D){Ce(dn,`RPC '${e}' stream ${i} received error:`,D);const x=D.status;let O=function(I){const k=Ft[I];if(k!==void 0)return SE(k)}(x),R=D.message;O===void 0&&(O=se.INTERNAL,R="Unknown error status: "+x+" with message "+D.message),g=!0,_.Do(new Pe(O,R)),f.close()}else Ce(dn,`RPC '${e}' stream ${i} received:`,y),_.vo(y)}}),T(a,eE.STAT_EVENT,b=>{b.stat===nm.PROXY?Ce(dn,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===nm.NOPROXY&&Ce(dn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.bo()},0),_}}function tf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(t){return new wL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,n,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&Ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,n,r,i,s,o,a,l){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new BE(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===se.RESOURCE_EXHAUSTED?(Ti(n.toString()),Ti("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new Pe(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return Ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(Ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gN extends UE{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=IL(this.serializer,e),r=function(s){if(!("targetChange"in s))return Be.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Be.min():o.readTime?$r(o.readTime):Be.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=dm(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=om(l)?{documents:AL(s,l)}:{query:kL(s,l).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=RE(s,o.resumeToken);const c=lm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Be.min())>0){a.readTime=Qu(s,o.snapshotVersion.toTimestamp());const c=lm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=PL(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=dm(this.serializer),n.removeTarget=e,this.c_(n)}}class pN extends UE{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return gt(!!e.streamToken),this.lastStreamToken=e.streamToken,gt(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){gt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=SL(e.writeResults,e.commitTime),r=$r(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=dm(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>CL(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new Pe(se.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,cm(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Pe(se.UNKNOWN,s.toString())})}ko(e,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,cm(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(se.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class _N{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Ti(n),this.C_=!1):Ce("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{fo(this)&&(Ce("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=He(l);c.k_.add(4),await cc(c),c.K_.set("Unknown"),c.k_.delete(4),await $d(c)}(this))})}),this.K_=new _N(r,i)}}async function $d(t){if(fo(t))for(const e of t.q_)await e(!0)}async function cc(t){for(const e of t.q_)await e(!1)}function $E(t,e){const n=He(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),Mg(n)?Ng(n):Ca(n).s_()&&Lg(n,e))}function Vg(t,e){const n=He(t),r=Ca(n);n.B_.delete(e),r.s_()&&zE(n,e),n.B_.size===0&&(r.s_()?r.a_():fo(n)&&n.K_.set("Unknown"))}function Lg(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ca(t).V_(e)}function zE(t,e){t.U_.xe(e),Ca(t).m_(e)}function Ng(t){t.U_=new vL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Ca(t).start(),t.K_.F_()}function Mg(t){return fo(t)&&!Ca(t).i_()&&t.B_.size>0}function fo(t){return He(t).k_.size===0}function jE(t){t.U_=void 0}async function bN(t){t.K_.set("Online")}async function wN(t){t.B_.forEach((e,n)=>{Lg(t,e)})}async function TN(t,e){jE(t),Mg(t)?(t.K_.O_(e),Ng(t)):t.K_.set("Unknown")}async function EN(t,e,n){if(t.K_.set("Online"),e instanceof kE&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.B_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.B_.delete(a),i.U_.removeTarget(a))}(t,e)}catch(r){Ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ju(t,r)}else if(e instanceof Iu?t.U_.$e(e):e instanceof AE?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(Be.min()))try{const r=await FE(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.B_.get(c);d&&s.B_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.B_.get(l);if(!d)return;s.B_.set(l,d.withResumeToken(sn.EMPTY_BYTE_STRING,d.snapshotVersion)),zE(s,l);const f=new es(d.target,l,c,d.sequenceNumber);Lg(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Ce("RemoteStore","Failed to raise snapshot:",r),await Ju(t,r)}}async function Ju(t,e,n){if(!Ia(e))throw e;t.k_.add(1),await cc(t),t.K_.set("Offline"),n||(n=()=>FE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ce("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await $d(t)})}function HE(t,e){return e().catch(n=>Ju(t,n,e))}async function zd(t){const e=He(t),n=hs(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;IN(e);)try{const i=await aN(e.localStore,r);if(i===null){e.L_.length===0&&n.a_();break}r=i.batchId,CN(e,i)}catch(i){await Ju(e,i)}qE(e)&&GE(e)}function IN(t){return fo(t)&&t.L_.length<10}function CN(t,e){t.L_.push(e);const n=hs(t);n.s_()&&n.f_&&n.g_(e.mutations)}function qE(t){return fo(t)&&!hs(t).i_()&&t.L_.length>0}function GE(t){hs(t).start()}async function SN(t){hs(t).w_()}async function AN(t){const e=hs(t);for(const n of t.L_)e.g_(n.mutations)}async function kN(t,e,n){const r=t.L_.shift(),i=kg.from(r,e,n);await HE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await zd(t)}async function RN(t,e){e&&hs(t).f_&&await async function(r,i){if(function(o){return mL(o)&&o!==se.ABORTED}(i.code)){const s=r.L_.shift();hs(r).__(),await HE(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await zd(r)}}(t,e),qE(t)&&GE(t)}async function Ey(t,e){const n=He(t);n.asyncQueue.verifyOperationInProgress(),Ce("RemoteStore","RemoteStore received new credentials");const r=fo(n);n.k_.add(3),await cc(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await $d(n)}async function PN(t,e){const n=He(t);e?(n.k_.delete(2),await $d(n)):e||(n.k_.add(2),await cc(n),n.K_.set("Unknown"))}function Ca(t){return t.W_||(t.W_=function(n,r,i){const s=He(n);return s.b_(),new gN(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:bN.bind(null,t),mo:wN.bind(null,t),po:TN.bind(null,t),R_:EN.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),Mg(t)?Ng(t):t.K_.set("Unknown")):(await t.W_.stop(),jE(t))})),t.W_}function hs(t){return t.G_||(t.G_=function(n,r,i){const s=He(n);return s.b_(),new pN(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:SN.bind(null,t),po:RN.bind(null,t),p_:AN.bind(null,t),y_:kN.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await zd(t)):(await t.G_.stop(),t.L_.length>0&&(Ce("RemoteStore",`Stopping write stream with ${t.L_.length} pending writes`),t.L_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Fg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Pe(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bg(t,e){if(Ti("AsyncQueue",`${e}: ${t}`),Ia(t))return new Pe(se.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{static emptySet(e){return new ta(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||De.comparator(n.key,r.key):(n,r)=>De.comparator(n.key,r.key),this.keyedMap=al(),this.sortedSet=new Pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ta)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ta;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(){this.z_=new Pt(De.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):Me():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ua{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ua(e,n,ta.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class DN{constructor(){this.queries=Cy(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=He(n),s=i.queries;i.queries=Cy(),s.forEach((o,a)=>{for(const l of a.J_)l.onError(r)})})(this,new Pe(se.ABORTED,"Firestore shutting down"))}}function Cy(){return new ho(t=>mE(t),Ld)}async function WE(t,e){const n=He(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new xN,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Bg(o,`Initialization of query '${zo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.J_.push(e),e.ea(n.onlineState),s.H_&&e.ta(s.H_)&&Ug(n)}async function KE(t,e){const n=He(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ON(t,e){const n=He(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&Ug(n)}function VN(t,e,n){const r=He(t),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(e)}function Ug(t){t.X_.forEach(e=>{e.next()})}var fm,Sy;(Sy=fm||(fm={})).na="default",Sy.Cache="cache";class YE{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ua(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==fm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e){this.key=e}}class XE{constructor(e){this.key=e}}class LN{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=et(),this.mutatedKeys=et(),this.Va=gE(e),this.ma=new ta(this.Va)}get fa(){return this.da}ga(e,n){const r=n?n.pa:new Iy,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const m=i.get(d),g=Nd(this.query,f)?f:null,_=!!m&&this.mutatedKeys.has(m.key),T=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;m&&g?m.data.isEqual(g.data)?_!==T&&(r.track({type:3,doc:g}),b=!0):this.ya(m,g)||(r.track({type:2,doc:g}),b=!0,(l&&this.Va(g,l)>0||c&&this.Va(g,c)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),b=!0):m&&!g&&(r.track({type:1,doc:m}),b=!0,(l||c)&&(a=!0)),b&&(g?(o=o.add(g),s=T?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((d,f)=>function(g,_){const T=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me()}};return T(g)-T(_)}(d.type,f.type)||this.Va(d.doc,f.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],l=this.Ra.size===0&&this.current&&!i?1:0,c=l!==this.Aa;return this.Aa=l,o.length!==0||c?{snapshot:new ua(this.query,e.ma,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Iy,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=et(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new XE(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new QE(r))}),n}va(e){this.da=e.ds,this.Ra=et();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return ua.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class NN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class MN{constructor(e){this.key=e,this.Fa=!1}}class FN{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new ho(a=>mE(a),Ld),this.Oa=new Map,this.Na=new Set,this.La=new Pt(De.comparator),this.Ba=new Map,this.ka=new xg,this.qa={},this.Qa=new Map,this.Ka=ca.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function BN(t,e,n=!0){const r=rI(t);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await JE(r,e,n,!0),i}async function UN(t,e){const n=rI(t);await JE(n,e,!0,!1)}async function JE(t,e,n,r){const i=await lN(t.localStore,Ur(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await $N(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&$E(t.remoteStore,i),a}async function $N(t,e,n,r,i){t.Ua=(f,m,g)=>async function(T,b,C,y){let A=b.view.ga(C);A.ss&&(A=await by(T.localStore,b.query,!1).then(({documents:R})=>b.view.ga(R,A)));const D=y&&y.targetChanges.get(b.targetId),x=y&&y.targetMismatches.get(b.targetId)!=null,O=b.view.applyChanges(A,T.isPrimaryClient,D,x);return ky(T,b.targetId,O.ba),O.snapshot}(t,f,m,g);const s=await by(t.localStore,e,!0),o=new LN(e,s.ds),a=o.ga(s.documents),l=lc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);ky(t,n,c.ba);const d=new NN(e,n,o);return t.xa.set(e,d),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),c.snapshot}async function zN(t,e,n){const r=He(t),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!Ld(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await hm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Vg(r.remoteStore,i.targetId),mm(r,i.targetId)}).catch(Ea)):(mm(r,i.targetId),await hm(r.localStore,i.targetId,!0))}async function jN(t,e){const n=He(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Vg(n.remoteStore,r.targetId))}async function HN(t,e,n){const r=XN(t);try{const i=await function(o,a){const l=He(o),c=zt.now(),d=a.reduce((g,_)=>g.add(_.key),et());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=Ei(),T=et();return l.hs.getEntries(g,d).next(b=>{_=b,_.forEach((C,y)=>{y.isValidDocument()||(T=T.add(C))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,_)).next(b=>{f=b;const C=[];for(const y of a){const A=cL(y,f.get(y.key).overlayedDocument);A!=null&&C.push(new Ts(y.key,A,aE(A.value.mapValue),nr.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,C,a)}).next(b=>{m=b;const C=b.applyToLocalDocumentSet(f,T);return l.documentOverlayCache.saveOverlays(g,b.batchId,C)})}).then(()=>({batchId:m.batchId,changes:vE(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.qa[o.currentUser.toKey()];c||(c=new Pt(tt)),c=c.insert(a,l),o.qa[o.currentUser.toKey()]=c}(r,i.batchId,n),await uc(r,i.changes),await zd(r.remoteStore)}catch(i){const s=Bg(i,"Failed to persist write");n.reject(s)}}async function ZE(t,e){const n=He(t);try{const r=await sN(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ba.get(s);o&&(gt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?gt(o.Fa):i.removedDocuments.size>0&&(gt(o.Fa),o.Fa=!1))}),await uc(n,r,e)}catch(r){await Ea(r)}}function Ay(t,e,n){const r=He(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=He(o);l.onlineState=a;let c=!1;l.queries.forEach((d,f)=>{for(const m of f.J_)m.ea(a)&&(c=!0)}),c&&Ug(l)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qN(t,e,n){const r=He(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ba.get(e),s=i&&i.key;if(s){let o=new Pt(De.comparator);o=o.insert(s,gn.newNoDocument(s,Be.min()));const a=et().add(s),l=new Bd(Be.min(),new Map,new Pt(tt),o,a);await ZE(r,l),r.La=r.La.remove(s),r.Ba.delete(e),$g(r)}else await hm(r.localStore,e,!1).then(()=>mm(r,e,n)).catch(Ea)}async function GN(t,e){const n=He(t),r=e.batch.batchId;try{const i=await iN(n.localStore,e);tI(n,r,null),eI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await uc(n,i)}catch(i){await Ea(i)}}async function WN(t,e,n){const r=He(t);try{const i=await function(o,a){const l=He(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(gt(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);tI(r,e,n),eI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await uc(r,i)}catch(i){await Ea(i)}}function eI(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function tI(t,e,n){const r=He(t);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function mm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||nI(t,r)})}function nI(t,e){t.Na.delete(e.path.canonicalString());const n=t.La.get(e);n!==null&&(Vg(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),$g(t))}function ky(t,e,n){for(const r of n)r instanceof QE?(t.ka.addReference(r.key,e),KN(t,r)):r instanceof XE?(Ce("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||nI(t,r.key)):Me()}function KN(t,e){const n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(Ce("SyncEngine","New document in limbo: "+n),t.Na.add(r),$g(t))}function $g(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new De(kt.fromString(e)),r=t.Ka.next();t.Ba.set(r,new MN(n)),t.La=t.La.insert(n,r),$E(t.remoteStore,new es(Ur(Cg(n.path)),r,"TargetPurposeLimboResolution",xd.oe))}}async function uc(t,e,n){const r=He(t),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,l)=>{o.push(r.Ua(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=Og.zi(l.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(l,c){const d=He(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ne.forEach(c,m=>ne.forEach(m.Wi,g=>d.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>ne.forEach(m.Gi,g=>d.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!Ia(f))throw f;Ce("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const g=d.us.get(m),_=g.snapshotVersion,T=g.withLastLimboFreeSnapshotVersion(_);d.us=d.us.insert(m,T)}}}(r.localStore,s))}async function YN(t,e){const n=He(t);if(!n.currentUser.isEqual(e)){Ce("SyncEngine","User change. New user:",e.toKey());const r=await ME(n.localStore,e);n.currentUser=e,function(s,o){s.Qa.forEach(a=>{a.forEach(l=>{l.reject(new Pe(se.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await uc(n,r.Ts)}}function QN(t,e){const n=He(t),r=n.Ba.get(e);if(r&&r.Fa)return et().add(r.key);{let i=et();const s=n.Oa.get(e);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function rI(t){const e=He(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qN.bind(null,e),e.Ma.R_=ON.bind(null,e.eventManager),e.Ma.Wa=VN.bind(null,e.eventManager),e}function XN(t){const e=He(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WN.bind(null,e),e}class Zu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ud(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return rN(this.persistence,new tN,e.initialUser,this.serializer)}ja(e){return new NE(Dg.ei,this.serializer)}za(e){return new uN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zu.provider={build:()=>new Zu};class JN extends Zu{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){gt(this.persistence.referenceDelegate instanceof Xu);const r=this.persistence.referenceDelegate.garbageCollector;return new UL(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new NE(r=>Xu.ei(r,n),this.serializer)}}class gm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ay(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=YN.bind(null,this.syncEngine),await PN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DN}()}createDatastore(e){const n=Ud(e.databaseInfo.databaseId),r=function(s){return new mN(s)}(e.databaseInfo);return function(s,o,a,l){return new vN(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new yN(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Ay(this.syncEngine,n,0),function(){return Ty.p()?new Ty:new dN}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,d){const f=new FN(i,s,o,a,l,c);return d&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=He(i);Ce("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await cc(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}gm.provider={build:()=>new gm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Ti("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=hn.UNAUTHENTICATED,this.clientId=iE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Ce("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ce("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Bg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function nf(t,e){t.asyncQueue.verifyOperationInProgress(),Ce("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await ME(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ry(t,e){t.asyncQueue.verifyOperationInProgress();const n=await eM(t);Ce("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ey(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Ey(e.remoteStore,i)),t._onlineComponents=e}async function eM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ce("FirestoreClient","Using user provided OfflineComponentProvider");try{await nf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===se.FAILED_PRECONDITION||i.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;sa("Error using user provided cache. Falling back to memory cache: "+n),await nf(t,new Zu)}}else Ce("FirestoreClient","Using default OfflineComponentProvider"),await nf(t,new JN(void 0));return t._offlineComponents}async function sI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ce("FirestoreClient","Using user provided OnlineComponentProvider"),await Ry(t,t._uninitializedComponentsProvider._online)):(Ce("FirestoreClient","Using default OnlineComponentProvider"),await Ry(t,new gm))),t._onlineComponents}function tM(t){return sI(t).then(e=>e.syncEngine)}async function oI(t){const e=await sI(t),n=e.eventManager;return n.onListen=BN.bind(null,e.syncEngine),n.onUnlisten=zN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=UN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=jN.bind(null,e.syncEngine),n}function nM(t,e,n={}){const r=new pi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new iI({next:m=>{d.eu(),o.enqueueAndForget(()=>KE(s,f));const g=m.docs.has(a);!g&&m.fromCache?c.reject(new Pe(se.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?c.reject(new Pe(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new YE(Cg(a.path),d,{includeMetadataChanges:!0,ua:!0});return WE(s,f)}(await oI(t),t.asyncQueue,e,n,r)),r.promise}function rM(t,e,n={}){const r=new pi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new iI({next:m=>{d.eu(),o.enqueueAndForget(()=>KE(s,f)),m.fromCache&&l.source==="server"?c.reject(new Pe(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new YE(a,d,{includeMetadataChanges:!0,ua:!0});return WE(s,f)}(await oI(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(t,e,n){if(!n)throw new Pe(se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function iM(t,e,n,r){if(e===!0&&r===!0)throw new Pe(se.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function xy(t){if(!De.isDocumentKey(t))throw new Pe(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Dy(t){if(De.isDocumentKey(t))throw new Pe(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function zg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Me()}function Cr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Pe(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zg(t);throw new Pe(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Pe(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Pe(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Oy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Pe(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Pe(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Oy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gV;switch(r.type){case"firstParty":return new yV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Pe(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Py.get(n);r&&(Ce("ComponentProvider","Removing Datastore"),Py.delete(n),r.terminate())}(this),Promise.resolve()}}function sM(t,e,n,r={}){var i;const s=(t=Cr(t,jd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&sa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=hn.MOCK_USER;else{a=F0(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Pe(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new hn(c)}t._authCredentials=new pV(new rE(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hd(this.firestore,e,this._query)}}class Un{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Un(this.firestore,e,this._key)}}class os extends Hd{constructor(e,n,r){super(e,n,Cg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Un(this.firestore,null,new De(e))}withConverter(e){return new os(this.firestore,e,this._path)}}function Mn(t,e,...n){if(t=bt(t),lI("collection","path",e),t instanceof jd){const r=kt.fromString(e,...n);return Dy(r),new os(t,null,r)}{if(!(t instanceof Un||t instanceof os))throw new Pe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(kt.fromString(e,...n));return Dy(r),new os(t.firestore,null,r)}}function mt(t,e,...n){if(t=bt(t),arguments.length===1&&(e=iE.newId()),lI("doc","path",e),t instanceof jd){const r=kt.fromString(e,...n);return xy(r),new Un(t,null,new De(r))}{if(!(t instanceof Un||t instanceof os))throw new Pe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(kt.fromString(e,...n));return xy(r),new Un(t.firestore,t instanceof os?t.converter:null,new De(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new BE(this,"async_queue_retry"),this.fu=()=>{const r=tf();r&&Ce("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=tf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=tf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new pi;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Ia(e))throw e;Ce("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ti("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=Fg.createAndSchedule(this,e,n,r,s=>this.Su(s));return this.du.push(i),i}pu(){this.Au&&Me()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class mo extends jd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Vy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Vy(e),this._firestoreClient=void 0,await e}}}function oM(t,e){const n=typeof t=="object"?t:Cd(),r=typeof t=="string"?t:"(default)",i=_s(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=L0("firestore");s&&sM(i,...s)}return i}function jg(t){if(t._terminated)throw new Pe(se.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||aM(t),t._firestoreClient}function aM(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,d){return new VV(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,aI(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new ZN(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this._byteString=e}static fromBase64String(e){try{return new da(sn.fromBase64String(e))}catch(n){throw new Pe(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new da(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Pe(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Pe(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Pe(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return tt(this._lat,e._lat)||tt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=/^__.*__$/;class cM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,n,this.fieldTransforms):new ac(e,this.data,n,this.fieldTransforms)}}class cI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ts(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function uI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me()}}class Wg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Wg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return ed(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(uI(this.Mu)&&lM.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class uM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ud(e)}$u(e,n,r,i=!1){return new Wg({Mu:e,methodName:n,Ku:r,path:tn.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kg(t){const e=t._freezeSettings(),n=Ud(t._databaseId);return new uM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function dI(t,e,n,r,i,s={}){const o=t.$u(s.merge||s.mergeFields?2:0,e,n,i);Yg("Data must be an object, but it was:",o,r);const a=hI(r,o);let l,c;if(s.merge)l=new qn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const m=pm(e,f,n);if(!o.contains(m))throw new Pe(se.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);mI(d,m)||d.push(m)}l=new qn(d),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new cM(new Ln(a),l,c)}class Gd extends Hg{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gd}}function dM(t,e,n,r){const i=t.$u(1,e,n);Yg("Data must be an object, but it was:",i,r);const s=[],o=Ln.empty();ws(r,(l,c)=>{const d=Qg(e,l,n);c=bt(c);const f=i.Bu(d);if(c instanceof Gd)s.push(d);else{const m=Wd(c,f);m!=null&&(s.push(d),o.set(d,m))}});const a=new qn(s);return new cI(o,a,i.fieldTransforms)}function hM(t,e,n,r,i,s){const o=t.$u(1,e,n),a=[pm(e,r,n)],l=[i];if(s.length%2!=0)throw new Pe(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(pm(e,s[m])),l.push(s[m+1]);const c=[],d=Ln.empty();for(let m=a.length-1;m>=0;--m)if(!mI(c,a[m])){const g=a[m];let _=l[m];_=bt(_);const T=o.Bu(g);if(_ instanceof Gd)c.push(g);else{const b=Wd(_,T);b!=null&&(c.push(g),d.set(g,b))}}const f=new qn(c);return new cI(d,f,o.fieldTransforms)}function Wd(t,e){if(fI(t=bt(t)))return Yg("Unsupported field value:",e,t),hI(t,e);if(t instanceof Hg)return function(r,i){if(!uI(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Wd(a,i.ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=zt.fromDate(r);return{timestampValue:Qu(i.serializer,s)}}if(r instanceof zt){const s=new zt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qu(i.serializer,s)}}if(r instanceof qg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof da)return{bytesValue:RE(i.serializer,r._byteString)};if(r instanceof Un){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Pg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Gg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.qu("VectorValues must only contain numeric values.");return Sg(a.serializer,l)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${zg(r)}`)}(t,e)}function hI(t,e){const n={};return sE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ws(t,(r,i)=>{const s=Wd(i,e.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function fI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof zt||t instanceof qg||t instanceof da||t instanceof Un||t instanceof Hg||t instanceof Gg)}function Yg(t,e,n){if(!fI(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=zg(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function pm(t,e,n){if((e=bt(e))instanceof qd)return e._internalPath;if(typeof e=="string")return Qg(t,e);throw ed("Field path arguments must be of type string or ",t,!1,void 0,n)}const fM=new RegExp("[~\\*/\\[\\]]");function Qg(t,e,n){if(e.search(fM)>=0)throw ed(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qd(...e.split("."))._internalPath}catch{throw ed(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ed(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Pe(se.INVALID_ARGUMENT,a+t+l)}function mI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(pI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mM extends gI{data(){return super.data()}}function pI(t,e){return typeof e=="string"?Qg(t,e):e instanceof qd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Pe(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pM{convertValue(e,n="none"){switch(ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ws(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Mt(o.doubleValue));return new Gg(s)}convertGeoPoint(e){return new qg(Mt(e.latitude),Mt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Od(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($l(e));default:return null}}convertTimestamp(e){const n=cs(e);return new zt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=kt.fromString(e);gt(LE(r));const i=new zl(r.get(1),r.get(3)),s=new De(r.popFirst(5));return i.isEqual(n)||Ti(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _I extends gI{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Cu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(pI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Cu extends _I{data(e={}){return super.data(e)}}class vM{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new cl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Cu(this._firestore,this._userDataWriter,r.key,r,new cl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Pe(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Cu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new cl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Cu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new cl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:_M(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function _M(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t){t=Cr(t,Un);const e=Cr(t.firestore,mo);return nM(jg(e),t._key).then(n=>yM(e,t,n))}class yI extends pM{constructor(e){super(),this.firestore=e}convertBytes(e){return new da(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,n)}}function vr(t){t=Cr(t,Hd);const e=Cr(t.firestore,mo),n=jg(e),r=new yI(e);return gM(t._query),rM(n,t._query).then(i=>new vM(e,r,t,i))}function io(t,e,n){t=Cr(t,Un);const r=Cr(t.firestore,mo),i=vI(t.converter,e);return Kd(r,[dI(Kg(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,nr.none())])}function xn(t,e,n,...r){t=Cr(t,Un);const i=Cr(t.firestore,mo),s=Kg(i);let o;return o=typeof(e=bt(e))=="string"||e instanceof qd?hM(s,"updateDoc",t._key,e,n,r):dM(s,"updateDoc",t._key,e),Kd(i,[o.toMutation(t._key,nr.exists(!0))])}function dc(t){return Kd(Cr(t.firestore,mo),[new Ag(t._key,nr.none())])}function bI(t,e){const n=Cr(t.firestore,mo),r=mt(t),i=vI(t.converter,e);return Kd(n,[dI(Kg(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,nr.exists(!1))]).then(()=>r)}function Kd(t,e){return function(r,i){const s=new pi;return r.asyncQueue.enqueueAndForget(async()=>HN(await tM(r),i,s)),s.promise}(jg(t),e)}function yM(t,e,n){const r=n.docs.get(e._key),i=new yI(t);return new _I(t,i,e._key,r,new cl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ta=i})(co),Ir(new sr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new mo(new vV(r.getProvider("auth-internal")),new wV(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Pe(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zl(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Fn(X_,"4.7.5",e),Fn(X_,"4.7.5","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="firebasestorage.googleapis.com",TI="storageBucket",bM=2*60*1e3,wM=10*60*1e3,TM=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt extends lr{constructor(e,n,r=0){super(rf(e),`Firebase Storage: ${n} (${rf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var St;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(St||(St={}));function rf(t){return"storage/"+t}function Xg(){const t="An unknown error occurred, please check the error payload for server response.";return new xt(St.UNKNOWN,t)}function EM(t){return new xt(St.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function IM(t){return new xt(St.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function CM(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new xt(St.UNAUTHENTICATED,t)}function SM(){return new xt(St.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function AM(t){return new xt(St.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function EI(){return new xt(St.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function II(){return new xt(St.CANCELED,"User canceled the upload/download.")}function kM(t){return new xt(St.INVALID_URL,"Invalid URL '"+t+"'.")}function RM(t){return new xt(St.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function PM(){return new xt(St.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+TI+"' property when initializing the app?")}function CI(){return new xt(St.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function xM(){return new xt(St.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function DM(){return new xt(St.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function OM(t){return new xt(St.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function vm(t){return new xt(St.INVALID_ARGUMENT,t)}function SI(){return new xt(St.APP_DELETED,"The Firebase app was deleted.")}function VM(t){return new xt(St.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function El(t,e){return new xt(St.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ka(t){throw new xt(St.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Gn.makeFromUrl(e,n)}catch{return new Gn(e,"")}if(r.path==="")return r;throw RM(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(D){D.path_=decodeURIComponent(D.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${d}/b/${i}/o${m}`,"i"),_={bucket:1,path:3},T=n===wI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",C=new RegExp(`^https?://${T}/${i}/${b}`,"i"),A=[{regex:a,indices:l,postModify:s},{regex:g,indices:_,postModify:c},{regex:C,indices:{bucket:1,path:2},postModify:c}];for(let D=0;D<A.length;D++){const x=A[D],O=x.regex.exec(e);if(O){const R=O[x.indices.bucket];let v=O[x.indices.path];v||(v=""),r=new Gn(R,v),x.postModify(r);break}}if(r==null)throw kM(e);return r}}class LM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...b){c||(c=!0,e.apply(null,b))}function f(b){i=setTimeout(()=>{i=null,t(g,l())},b)}function m(){s&&clearTimeout(s)}function g(b,...C){if(c){m();return}if(b){m(),d.call(null,b,...C);return}if(l()||o){m(),d.call(null,b,...C);return}r<64&&(r*=2);let A;a===1?(a=2,A=0):A=(r+Math.random())*1e3,f(A)}let _=!1;function T(b){_||(_=!0,m(),!c&&(i!==null?(b||(a=2),clearTimeout(i),f(0)):b||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,T(!0)},n),T}function MM(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(t){return t!==void 0}function BM(t){return typeof t=="function"}function UM(t){return typeof t=="object"&&!Array.isArray(t)}function Yd(t){return typeof t=="string"||t instanceof String}function Ly(t){return Jg()&&t instanceof Blob}function Jg(){return typeof Blob<"u"}function Ny(t,e,n,r){if(r<e)throw vm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw vm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function AI(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ws;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ws||(Ws={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,n,r,i,s,o,a,l,c,d,f,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,_)=>{this.resolve_=g,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Hc(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Ws.NO_ERROR,l=s.getStatus();if(!a||kI(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Ws.ABORT;r(!1,new Hc(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Hc(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());FM(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Xg();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?SI():II();o(l)}else{const l=EI();o(l)}};this.canceled_?n(!1,new Hc(!1,null,!0)):this.backoffId_=NM(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&MM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Hc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function zM(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function jM(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function HM(t,e){e&&(t["X-Firebase-GMPID"]=e)}function qM(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function GM(t,e,n,r,i,s,o=!0){const a=AI(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return HM(c,e),zM(c,n),jM(c,s),qM(c,r),new $M(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function KM(...t){const e=WM();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Jg())return new Blob(t);throw new xt(St.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function YM(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(t){if(typeof atob>"u")throw OM("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class sf{constructor(e,n){this.data=e,this.contentType=n||null}}function XM(t,e){switch(t){case Mr.RAW:return new sf(RI(e));case Mr.BASE64:case Mr.BASE64URL:return new sf(PI(t,e));case Mr.DATA_URL:return new sf(ZM(e),e2(e))}throw Xg()}function RI(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function JM(t){let e;try{e=decodeURIComponent(t)}catch{throw El(Mr.DATA_URL,"Malformed data URL.")}return RI(e)}function PI(t,e){switch(t){case Mr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw El(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Mr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw El(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=QM(e)}catch(i){throw i.message.includes("polyfill")?i:El(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class xI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw El(Mr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=t2(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function ZM(t){const e=new xI(t);return e.base64?PI(Mr.BASE64,e.rest):JM(e.rest)}function e2(t){return new xI(t).contentType}function t2(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n){let r=0,i="";Ly(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Ly(this.data_)){const r=this.data_,i=YM(r,e,n);return i===null?null:new Zi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Zi(r,!0)}}static getBlob(...e){if(Jg()){const n=e.map(r=>r instanceof Zi?r.data_:r);return new Zi(KM.apply(null,n))}else{const n=e.map(o=>Yd(o)?XM(Mr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Zi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(t){let e;try{e=JSON.parse(t)}catch{return null}return UM(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function r2(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function OI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(t,e){return e}class Cn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||i2}}let qc=null;function s2(t){return!Yd(t)||t.length<2?t:OI(t)}function VI(){if(qc)return qc;const t=[];t.push(new Cn("bucket")),t.push(new Cn("generation")),t.push(new Cn("metageneration")),t.push(new Cn("name","fullPath",!0));function e(s,o){return s2(o)}const n=new Cn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Cn("size");return i.xform=r,t.push(i),t.push(new Cn("timeCreated")),t.push(new Cn("updated")),t.push(new Cn("md5Hash",null,!0)),t.push(new Cn("cacheControl",null,!0)),t.push(new Cn("contentDisposition",null,!0)),t.push(new Cn("contentEncoding",null,!0)),t.push(new Cn("contentLanguage",null,!0)),t.push(new Cn("contentType",null,!0)),t.push(new Cn("metadata","customMetadata",!0)),qc=t,qc}function o2(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Gn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function a2(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return o2(r,t),r}function LI(t,e,n){const r=DI(e);return r===null?null:a2(t,r,n)}function l2(t,e,n,r){const i=DI(e);if(i===null||!Yd(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const d=t.bucket,f=t.fullPath,m="/b/"+o(d)+"/o/"+o(f),g=Sa(m,n,r),_=AI({alt:"media",token:c});return g+_})[0]}function NI(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class go{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t){if(!t)throw Xg()}function Zg(t,e){function n(r,i){const s=LI(t,i,e);return vi(s!==null),s}return n}function c2(t,e){function n(r,i){const s=LI(t,i,e);return vi(s!==null),l2(s,i,t.host,t._protocol)}return n}function hc(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=SM():i=CM():n.getStatus()===402?i=IM(t.bucket):n.getStatus()===403?i=AM(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function ep(t){const e=hc(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=EM(t.path)),s.serverResponse=i.serverResponse,s}return n}function u2(t,e,n){const r=e.fullServerUrl(),i=Sa(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new go(i,s,Zg(t,n),o);return a.errorHandler=ep(e),a}function d2(t,e,n){const r=e.fullServerUrl(),i=Sa(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new go(i,s,c2(t,n),o);return a.errorHandler=ep(e),a}function h2(t,e){const n=e.fullServerUrl(),r=Sa(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new go(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=ep(e),a}function f2(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function MI(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=f2(null,e)),r}function m2(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let A="";for(let D=0;D<2;D++)A=A+Math.random().toString().slice(2);return A}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=MI(e,r,i),d=NI(c,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+l+"--",g=Zi.getBlob(f,r,m);if(g===null)throw CI();const _={name:c.fullPath},T=Sa(s,t.host,t._protocol),b="POST",C=t.maxUploadRetryTime,y=new go(T,b,Zg(t,n),C);return y.urlParams=_,y.headers=o,y.body=g.uploadData(),y.errorHandler=hc(e),y}class td{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function tp(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{vi(!1)}return vi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function g2(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=MI(e,r,i),a={name:o.fullPath},l=Sa(s,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=NI(o,n),m=t.maxUploadRetryTime;function g(T){tp(T);let b;try{b=T.getResponseHeader("X-Goog-Upload-URL")}catch{vi(!1)}return vi(Yd(b)),b}const _=new go(l,c,g,m);return _.urlParams=a,_.headers=d,_.body=f,_.errorHandler=hc(e),_}function p2(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const d=tp(c,["active","final"]);let f=null;try{f=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{vi(!1)}f||vi(!1);const m=Number(f);return vi(!isNaN(m)),new td(m,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new go(n,o,s,a);return l.headers=i,l.errorHandler=hc(e),l}const My=256*1024;function v2(t,e,n,r,i,s,o,a){const l=new td(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw xM();const c=l.total-l.current;let d=c;i>0&&(d=Math.min(d,i));const f=l.current,m=f+d;let g="";d===0?g="finalize":c===d?g="upload, finalize":g="upload";const _={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${l.current}`},T=r.slice(f,m);if(T===null)throw CI();function b(D,x){const O=tp(D,["active","final"]),R=l.current+d,v=r.size();let I;return O==="final"?I=Zg(e,s)(D,x):I=null,new td(R,v,O==="final",I)}const C="POST",y=e.maxUploadRetryTime,A=new go(n,C,b,y);return A.headers=_,A.body=T.uploadData(),A.progressCallback=a||null,A.errorHandler=hc(t),A}const On={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function of(t){switch(t){case"running":case"pausing":case"canceling":return On.RUNNING;case"paused":return On.PAUSED;case"success":return On.SUCCESS;case"canceled":return On.CANCELED;case"error":return On.ERROR;default:return On.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n,r){if(BM(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class y2{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ws.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ws.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ws.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Ka("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ka("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ka("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ka("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ka("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class b2 extends y2{initXhr(){this.xhr_.responseType="text"}}function Us(){return new b2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=VI(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(St.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(kI(i.status,[]))if(s)i=EI();else{this.sleepTime=Math.max(this.sleepTime*2,TM),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(St.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=g2(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Us,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=p2(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Us,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=My*this._chunkMultiplier,n=new td(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=v2(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Us,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){My*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=u2(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Us,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=m2(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Us,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=II(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=of(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new _2(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(of(this._state)){case On.SUCCESS:Co(this._resolve.bind(null,this.snapshot))();break;case On.CANCELED:case On.ERROR:const n=this._reject;Co(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(of(this._state)){case On.RUNNING:case On.PAUSED:e.next&&Co(e.next.bind(e,this.snapshot))();break;case On.SUCCESS:e.complete&&Co(e.complete.bind(e))();break;case On.CANCELED:case On.ERROR:e.error&&Co(e.error.bind(e,this._error))();break;default:e.error&&Co(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n){this._service=e,n instanceof Gn?this._location=n:this._location=Gn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new so(e,n)}get root(){const e=new Gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return OI(this._location.path)}get storage(){return this._service}get parent(){const e=n2(this._location.path);if(e===null)return null;const n=new Gn(this._location.bucket,e);return new so(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw VM(e)}}function T2(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new w2(t,new Zi(e),n)}function E2(t){t._throwIfRoot("getDownloadURL");const e=d2(t.storage,t._location,VI());return t.storage.makeRequestWithTokens(e,Us).then(n=>{if(n===null)throw DM();return n})}function I2(t){t._throwIfRoot("deleteObject");const e=h2(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Us)}function C2(t,e){const n=r2(t._location.path,e),r=new Gn(t._location.bucket,n);return new so(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t){return/^[A-Za-z]+:\/\//.test(t)}function A2(t,e){return new so(t,e)}function FI(t,e){if(t instanceof np){const n=t;if(n._bucket==null)throw PM();const r=new so(n,n._bucket);return e!=null?FI(r,e):r}else return e!==void 0?C2(t,e):t}function k2(t,e){if(e&&S2(e)){if(t instanceof np)return A2(t,e);throw vm("To use ref(service, url), the first argument must be a Storage instance.")}else return FI(t,e)}function Fy(t,e){const n=e==null?void 0:e[TI];return n==null?null:Gn.makeFromBucketSpec(n,t)}function R2(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:F0(i,t.app.options.projectId))}class np{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=wI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=bM,this._maxUploadRetryTime=wM,this._requests=new Set,i!=null?this._bucket=Gn.makeFromBucketSpec(i,this._host):this._bucket=Fy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gn.makeFromBucketSpec(this._url,e):this._bucket=Fy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ny("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ny("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new so(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new LM(SI());{const o=GM(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const By="@firebase/storage",Uy="0.13.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI="storage";function ha(t,e,n){return t=bt(t),T2(t,e,n)}function fa(t){return t=bt(t),E2(t)}function $y(t){return t=bt(t),I2(t)}function fs(t,e){return t=bt(t),k2(t,e)}function P2(t=Cd(),e){t=bt(t);const r=_s(t,BI).getImmediate({identifier:e}),i=L0("storage");return i&&x2(r,...i),r}function x2(t,e,n,r={}){R2(t,e,n,r)}function D2(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new np(n,r,i,e,co)}function O2(){Ir(new sr(BI,D2,"PUBLIC").setMultipleInstances(!0)),Fn(By,Uy,""),Fn(By,Uy,"esm2017")}O2();const V2={apiKey:"AIzaSyCk16QL9Prxu2dDhgGO59eNGkFMGoUP73I",authDomain:"shoppingdemo-e82d9.firebaseapp.com",projectId:"shoppingdemo-e82d9",storageBucket:"shoppingdemo-e82d9.firebasestorage.app",messagingSenderId:"928496052552",appId:"1:928496052552:web:3bdefe18b0218764fb6b7d",measurementId:"G-0LM2KWY97V"},Qd=q0(V2);dV(Qd);const qr=GD(Qd),Ke=oM(Qd),ms=P2(Qd),L2=new ci;async function N2(t){try{const e=mt(Ke,"users",t),n=await ts(e);return n.exists()?n.data():(console.warn("用户数据不存在"),null)}catch(e){return console.error("获取用户角色失败：",e),null}}const Nt=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},M2={created(){Vx(qr,async t=>{if(t){const e=await N2(t.uid),n=(e==null?void 0:e.role)||"user";this.$store.commit("auth/setUser",{...t,role:n}),await this.$store.commit("initializeCart")}else this.$store.commit("auth/clearUser")})}},F2={id:"app"};function B2(t,e,n,r,i,s){const o=B("router-view");return Se(),Ge("div",F2,[h(o,null,{default:F(({Component:a})=>[h(ec,{name:"fade",mode:"out-in"},{default:F(()=>[(Se(),Tt(xA(a)))]),_:2},1024)]),_:1})])}const U2=Nt(M2,[["render",B2],["__scopeId","data-v-0d95afe7"]]);function _m(){}const ke=Object.assign,Kn=typeof window<"u",Ii=t=>t!==null&&typeof t=="object",it=t=>t!=null,ma=t=>typeof t=="function",rp=t=>Ii(t)&&ma(t.then)&&ma(t.catch),Gl=t=>Object.prototype.toString.call(t)==="[object Date]"&&!Number.isNaN(t.getTime());function UI(t){return t=t.replace(/[^-|\d]/g,""),/^((\+86)|(86))?(1)\d{10}$/.test(t)||/^0[0-9-]{10,13}$/.test(t)}const $I=t=>typeof t=="number"||/^\d+(\.\d+)?$/.test(t),$2=()=>Kn?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;function zy(t,e){const n=e.split(".");let r=t;return n.forEach(i=>{var s;r=Ii(r)&&(s=r[i])!=null?s:""}),r}function lt(t,e,n){return e.reduce((r,i)=>((!n||t[i]!==void 0)&&(r[i]=t[i]),r),{})}const zr=(t,e)=>JSON.stringify(t)===JSON.stringify(e),nd=t=>Array.isArray(t)?t:[t],z2=t=>t.reduce((e,n)=>e.concat(n),[]),Rt=null,ie=[Number,String],Q={type:Boolean,default:!0},Gt=t=>({type:t,required:!0}),At=()=>({type:Array,default:()=>[]}),Bt=t=>({type:Number,default:t}),we=t=>({type:ie,default:t}),le=t=>({type:String,default:t});var Es=typeof window<"u";function yn(t){return Es?requestAnimationFrame(t):-1}function Xd(t){Es&&cancelAnimationFrame(t)}function ns(t){yn(()=>yn(t))}var j2=t=>t===window,jy=(t,e)=>({top:0,left:0,right:t,bottom:e,width:t,height:e}),dt=t=>{const e=yr(t);if(j2(e)){const n=e.innerWidth,r=e.innerHeight;return jy(n,r)}return e!=null&&e.getBoundingClientRect?e.getBoundingClientRect():jy(0,0)};function H2(t=!1){const e=j(t);return[e,(r=!e.value)=>{e.value=r}]}function on(t){const e=_n(t,null);if(e){const n=Ar(),{link:r,unlink:i,internalChildren:s}=e;r(n),ba(()=>i(n));const o=z(()=>s.indexOf(n));return{parent:e,index:o}}return{parent:null,index:j(-1)}}function q2(t){const e=[],n=r=>{Array.isArray(r)&&r.forEach(i=>{var s;Vl(i)&&(e.push(i),(s=i.component)!=null&&s.subTree&&(e.push(i.component.subTree),n(i.component.subTree.children)),i.children&&n(i.children))})};return n(t),e}var Hy=(t,e)=>{const n=t.indexOf(e);return n===-1?t.findIndex(r=>e.key!==void 0&&e.key!==null&&r.type===e.type&&r.key===e.key):n};function G2(t,e,n){const r=q2(t.subTree.children);n.sort((s,o)=>Hy(r,s.vnode)-Hy(r,o.vnode));const i=n.map(s=>s.proxy);e.sort((s,o)=>{const a=i.indexOf(s),l=i.indexOf(o);return a-l})}function En(t){const e=Ct([]),n=Ct([]),r=Ar();return{children:e,linkChildren:s=>{mi(t,Object.assign({link:l=>{l.proxy&&(n.push(l),e.push(l.proxy),G2(r,e,n))},unlink:l=>{const c=n.indexOf(l);e.splice(c,1),n.splice(c,1)},children:e,internalChildren:n},s))}}}var ym=1e3,bm=60*ym,wm=60*bm,qy=24*wm;function W2(t){const e=Math.floor(t/qy),n=Math.floor(t%qy/wm),r=Math.floor(t%wm/bm),i=Math.floor(t%bm/ym),s=Math.floor(t%ym);return{total:t,days:e,hours:n,minutes:r,seconds:i,milliseconds:s}}function K2(t,e){return Math.floor(t/1e3)===Math.floor(e/1e3)}function Y2(t){let e,n,r,i;const s=j(t.time),o=z(()=>W2(s.value)),a=()=>{r=!1,Xd(e)},l=()=>Math.max(n-Date.now(),0),c=T=>{var b,C;s.value=T,(b=t.onChange)==null||b.call(t,o.value),T===0&&(a(),(C=t.onFinish)==null||C.call(t))},d=()=>{e=yn(()=>{r&&(c(l()),s.value>0&&d())})},f=()=>{e=yn(()=>{if(r){const T=l();(!K2(T,s.value)||T===0)&&c(T),s.value>0&&f()}})},m=()=>{Es&&(t.millisecond?d():f())},g=()=>{r||(n=Date.now()+s.value,r=!0,m())},_=(T=t.time)=>{a(),s.value=T};return Kr(a),Gr(()=>{i&&(r=!0,i=!1,m())}),Wr(()=>{r&&(a(),i=!0)}),{start:g,pause:a,reset:_,current:o}}function Aa(t){let e;Lt(()=>{t(),qe(()=>{e=!0})}),Gr(()=>{e&&t()})}function Vt(t,e,n={}){if(!Es)return;const{target:r=window,passive:i=!1,capture:s=!1}=n;let o=!1,a;const l=f=>{if(o)return;const m=yr(f);m&&!a&&(m.addEventListener(t,e,{capture:s,passive:i}),a=!0)},c=f=>{if(o)return;const m=yr(f);m&&a&&(m.removeEventListener(t,e,s),a=!1)};ba(()=>c(r)),Wr(()=>c(r)),Aa(()=>l(r));let d;return nn(r)&&(d=he(r,(f,m)=>{c(m),l(f)})),()=>{d==null||d(),c(r),o=!0}}function Jd(t,e,n={}){if(!Es)return;const{eventName:r="click"}=n;Vt(r,s=>{(Array.isArray(t)?t:[t]).every(l=>{const c=yr(l);return c&&!c.contains(s.target)})&&e(s)},{target:document})}var Gc,af;function Q2(){if(!Gc&&(Gc=j(0),af=j(0),Es)){const t=()=>{Gc.value=window.innerWidth,af.value=window.innerHeight};t(),window.addEventListener("resize",t,{passive:!0}),window.addEventListener("orientationchange",t,{passive:!0})}return{width:Gc,height:af}}var X2=/scroll|auto|overlay/i,zI=Es?window:void 0;function J2(t){return t.tagName!=="HTML"&&t.tagName!=="BODY"&&t.nodeType===1}function ip(t,e=zI){let n=t;for(;n&&n!==e&&J2(n);){const{overflowY:r}=window.getComputedStyle(n);if(X2.test(r))return n;n=n.parentNode}return e}function ka(t,e=zI){const n=j();return Lt(()=>{t.value&&(n.value=ip(t.value,e))}),n}var Wc;function Z2(){if(!Wc&&(Wc=j("visible"),Es)){const t=()=>{Wc.value=document.hidden?"hidden":"visible"};t(),window.addEventListener("visibilitychange",t)}return Wc}var jI=Symbol("van-field");function Is(t){const e=_n(jI,null);e&&!e.customValue.value&&(e.customValue.value=t,he(t,()=>{e.resetValidation(),e.validateWithTrigger("onChange")}))}function Ci(t){const e="scrollTop"in t?t.scrollTop:t.pageYOffset;return Math.max(e,0)}function rd(t,e){"scrollTop"in t?t.scrollTop=e:t.scrollTo(t.scrollX,e)}function Ks(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function Wl(t){rd(window,t),rd(document.body,t)}function Gy(t,e){if(t===window)return 0;const n=e?Ci(e):Ks();return dt(t).top+n}const eF=$2();function HI(){eF&&Wl(Ks())}const sp=t=>t.stopPropagation();function yt(t,e){(typeof t.cancelable!="boolean"||t.cancelable)&&t.preventDefault(),e&&sp(t)}function oo(t){const e=yr(t);if(!e)return!1;const n=window.getComputedStyle(e),r=n.display==="none",i=e.offsetParent===null&&n.position!=="fixed";return r||i}const{width:wr,height:rr}=Q2();function tF(t){const e=window.getComputedStyle(t);return e.transform!=="none"||e.perspective!=="none"||["transform","perspective","filter"].some(n=>(e.willChange||"").includes(n))}function nF(t){let e=t.parentElement;for(;e;){if(e&&e.tagName!=="HTML"&&e.tagName!=="BODY"&&tF(e))return e;e=e.parentElement}return null}function ze(t){if(it(t))return $I(t)?`${t}px`:String(t)}function Pi(t){if(it(t)){if(Array.isArray(t))return{width:ze(t[0]),height:ze(t[1])};const e=ze(t);return{width:e,height:e}}}function xi(t){const e={};return t!==void 0&&(e.zIndex=+t),e}let lf;function rF(){if(!lf){const t=document.documentElement,e=t.style.fontSize||window.getComputedStyle(t).fontSize;lf=parseFloat(e)}return lf}function iF(t){return t=t.replace(/rem/g,""),+t*rF()}function sF(t){return t=t.replace(/vw/g,""),+t*wr.value/100}function oF(t){return t=t.replace(/vh/g,""),+t*rr.value/100}function op(t){if(typeof t=="number")return t;if(Kn){if(t.includes("rem"))return iF(t);if(t.includes("vw"))return sF(t);if(t.includes("vh"))return oF(t)}return parseFloat(t)}const aF=/-(\w)/g,qI=t=>t.replace(aF,(e,n)=>n.toUpperCase()),lF=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"");function gr(t,e=2){let n=t+"";for(;n.length<e;)n="0"+n;return n}const qt=(t,e,n)=>Math.min(Math.max(t,e),n);function Wy(t,e,n){const r=t.indexOf(e);return r===-1?t:e==="-"&&r!==0?t.slice(0,r):t.slice(0,r+1)+t.slice(r).replace(n,"")}function Tm(t,e=!0,n=!0){e?t=Wy(t,".",/\./g):t=t.split(".")[0],n?t=Wy(t,"-",/-/g):t=t.replace(/-/,"");const r=e?/[^-0-9.]/g:/[^-0-9]/g;return t.replace(r,"")}function GI(t,e){return Math.round((t+e)*1e10)/1e10}const{hasOwnProperty:cF}=Object.prototype;function uF(t,e,n){const r=e[n];it(r)&&(!cF.call(t,n)||!Ii(r)?t[n]=r:t[n]=WI(Object(t[n]),r))}function WI(t,e){return Object.keys(e).forEach(n=>{uF(t,e,n)}),t}var dF={name:"姓名",tel:"电话",save:"保存",clear:"清空",cancel:"取消",confirm:"确认",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(t,e)=>`${t}年${e}月`,rangePrompt:t=>`最多选择 ${t} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:t=>`${t}折`,condition:t=>`满${t}元可用`},vanCouponCell:{title:"优惠券",count:t=>`${t}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}};const Ky=j("zh-CN"),Yy=Ct({"zh-CN":dF}),KI={messages(){return Yy[Ky.value]},use(t,e){Ky.value=t,this.add({[t]:e})},add(t={}){WI(Yy,t)}};var hF=KI;function fF(t){const e=qI(t)+".";return(n,...r)=>{const i=hF.messages(),s=zy(i,e+n)||zy(i,n);return ma(s)?s(...r):s}}function Em(t,e){return e?typeof e=="string"?` ${t}--${e}`:Array.isArray(e)?e.reduce((n,r)=>n+Em(t,r),""):Object.keys(e).reduce((n,r)=>n+(e[r]?Em(t,r):""),""):""}function mF(t){return(e,n)=>(e&&typeof e!="string"&&(n=e,e=""),e=e?`${t}__${e}`:t,`${e}${Em(e,n)}`)}function ee(t){const e=`van-${t}`;return[e,mF(e),fF(e)]}const Di="van-hairline",YI=`${Di}--top`,QI=`${Di}--left`,gF=`${Di}--right`,ap=`${Di}--bottom`,Il=`${Di}--surround`,Zd=`${Di}--top-bottom`,pF=`${Di}-unset--top-bottom`,wn="van-haptics-feedback",XI=Symbol("van-form"),JI=500,Qy=5;function Cs(t,{args:e=[],done:n,canceled:r,error:i}){if(t){const s=t.apply(null,e);rp(s)?s.then(o=>{o?n():r&&r()}).catch(i||_m):s?n():r&&r()}else n()}function oe(t){return t.install=e=>{const{name:n}=t;n&&(e.component(n,t),e.component(qI(`-${n}`),t))},t}function id(t,e){return t.reduce((n,r)=>Math.abs(n-e)<Math.abs(r-e)?n:r)}const ZI=Symbol();function eh(t){const e=_n(ZI,null);e&&he(e,n=>{n&&t()})}const eC=(t,e)=>{const n=j(),r=()=>{n.value=dt(t).height};return Lt(()=>{if(qe(r),e)for(let i=1;i<=3;i++)setTimeout(r,100*i)}),eh(()=>qe(r)),he([wr,rr],r),n};function th(t,e){const n=eC(t,!0);return r=>h("div",{class:e("placeholder"),style:{height:n.value?`${n.value}px`:void 0}},[r()])}const[tC,Xy]=ee("action-bar"),lp=Symbol(tC),vF={placeholder:Boolean,safeAreaInsetBottom:Q};var _F=X({name:tC,props:vF,setup(t,{slots:e}){const n=j(),r=th(n,Xy),{linkChildren:i}=En(lp);i();const s=()=>{var o;return h("div",{ref:n,class:[Xy(),{"van-safe-area-bottom":t.safeAreaInsetBottom}]},[(o=e.default)==null?void 0:o.call(e)])};return()=>t.placeholder?r(s):s()}});const cp=oe(_F);function Je(t){const e=Ar();e&&ke(e.proxy,t)}const Ss={to:[String,Object],url:String,replace:Boolean};function nC({to:t,url:e,replace:n,$router:r}){t&&r?r[n?"replace":"push"](t):e&&(n?location.replace(e):location.href=e)}function po(){const t=Ar().proxy;return()=>nC(t)}const[yF,Jy]=ee("badge"),bF={dot:Boolean,max:ie,tag:le("div"),color:String,offset:Array,content:ie,showZero:Q,position:le("top-right")};var wF=X({name:yF,props:bF,setup(t,{slots:e}){const n=()=>{if(e.content)return!0;const{content:a,showZero:l}=t;return it(a)&&a!==""&&(l||a!==0&&a!=="0")},r=()=>{const{dot:a,max:l,content:c}=t;if(!a&&n())return e.content?e.content():it(l)&&$I(c)&&+c>+l?`${l}+`:c},i=a=>a.startsWith("-")?a.replace("-",""):`-${a}`,s=z(()=>{const a={background:t.color};if(t.offset){const[l,c]=t.offset,{position:d}=t,[f,m]=d.split("-");e.default?(typeof c=="number"?a[f]=ze(f==="top"?c:-c):a[f]=f==="top"?ze(c):i(c),typeof l=="number"?a[m]=ze(m==="left"?l:-l):a[m]=m==="left"?ze(l):i(l)):(a.marginTop=ze(c),a.marginLeft=ze(l))}return a}),o=()=>{if(n()||t.dot)return h("div",{class:Jy([t.position,{dot:t.dot,fixed:!!e.default}]),style:s.value},[r()])};return()=>{if(e.default){const{tag:a}=t;return h(a,{class:Jy("wrapper")},{default:()=>[e.default(),o()]})}return o()}}});const vo=oe(wF);let rC=2e3;const TF=()=>++rC,EF=t=>{rC=t},[iC,IF]=ee("config-provider"),sC=Symbol(iC),CF={tag:le("div"),theme:le("light"),zIndex:Number,themeVars:Object,themeVarsDark:Object,themeVarsLight:Object,themeVarsScope:le("local"),iconPrefix:String};function SF(t){return t.replace(/([a-zA-Z])(\d)/g,"$1-$2")}function AF(t){const e={};return Object.keys(t).forEach(n=>{const r=SF(lF(n));e[`--van-${r}`]=t[n]}),e}function Kc(t={},e={}){Object.keys(t).forEach(n=>{t[n]!==e[n]&&document.documentElement.style.setProperty(n,t[n])}),Object.keys(e).forEach(n=>{t[n]||document.documentElement.style.removeProperty(n)})}var kF=X({name:iC,props:CF,setup(t,{slots:e}){const n=z(()=>AF(ke({},t.themeVars,t.theme==="dark"?t.themeVarsDark:t.themeVarsLight)));if(Kn){const r=()=>{document.documentElement.classList.add(`van-theme-${t.theme}`)},i=(s=t.theme)=>{document.documentElement.classList.remove(`van-theme-${s}`)};he(()=>t.theme,(s,o)=>{o&&i(o),r()},{immediate:!0}),Gr(r),Wr(i),Kr(i),he(n,(s,o)=>{t.themeVarsScope==="global"&&Kc(s,o)}),he(()=>t.themeVarsScope,(s,o)=>{o==="global"&&Kc({},n.value),s==="global"&&Kc(n.value,{})}),t.themeVarsScope==="global"&&Kc(n.value,{})}return mi(sC,t),wa(()=>{t.zIndex!==void 0&&EF(t.zIndex)}),()=>h(t.tag,{class:IF(),style:t.themeVarsScope==="local"?n.value:void 0},{default:()=>{var r;return[(r=e.default)==null?void 0:r.call(e)]}})}});const[RF,Zy]=ee("icon"),PF=t=>t==null?void 0:t.includes("/"),xF={dot:Boolean,tag:le("i"),name:String,size:ie,badge:ie,color:String,badgeProps:Object,classPrefix:String};var DF=X({name:RF,props:xF,setup(t,{slots:e}){const n=_n(sC,null),r=z(()=>t.classPrefix||(n==null?void 0:n.iconPrefix)||Zy());return()=>{const{tag:i,dot:s,name:o,size:a,badge:l,color:c}=t,d=PF(o);return h(vo,Qe({dot:s,tag:i,class:[r.value,d?"":`${r.value}-${o}`],style:{color:c,fontSize:ze(a)},content:l},t.badgeProps),{default:()=>{var f;return[(f=e.default)==null?void 0:f.call(e),d&&h("img",{class:Zy("image"),src:o},null)]}})}}});const je=oe(DF);var OF=je;const[VF,Cl]=ee("loading"),LF=Array(12).fill(null).map((t,e)=>h("i",{class:Cl("line",String(e+1))},null)),NF=h("svg",{class:Cl("circular"),viewBox:"25 25 50 50"},[h("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),MF={size:ie,type:le("circular"),color:String,vertical:Boolean,textSize:ie,textColor:String};var FF=X({name:VF,props:MF,setup(t,{slots:e}){const n=z(()=>ke({color:t.color},Pi(t.size))),r=()=>{const s=t.type==="spinner"?LF:NF;return h("span",{class:Cl("spinner",t.type),style:n.value},[e.icon?e.icon():s])},i=()=>{var s;if(e.default)return h("span",{class:Cl("text"),style:{fontSize:ze(t.textSize),color:(s=t.textColor)!=null?s:t.color}},[e.default()])};return()=>{const{type:s,vertical:o}=t;return h("div",{class:Cl([s,{vertical:o}]),"aria-live":"polite","aria-busy":!0},[r(),i()])}}});const cr=oe(FF),[BF,So]=ee("button"),UF=ke({},Ss,{tag:le("button"),text:String,icon:String,type:le("default"),size:le("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:le("button"),loadingSize:ie,loadingText:String,loadingType:String,iconPosition:le("left")});var $F=X({name:BF,props:UF,emits:["click"],setup(t,{emit:e,slots:n}){const r=po(),i=()=>n.loading?n.loading():h(cr,{size:t.loadingSize,type:t.loadingType,class:So("loading")},null),s=()=>{if(t.loading)return i();if(n.icon)return h("div",{class:So("icon")},[n.icon()]);if(t.icon)return h(je,{name:t.icon,class:So("icon"),classPrefix:t.iconPrefix},null)},o=()=>{let c;if(t.loading?c=t.loadingText:c=n.default?n.default():t.text,c)return h("span",{class:So("text")},[c])},a=()=>{const{color:c,plain:d}=t;if(c){const f={color:d?c:"white"};return d||(f.background=c),c.includes("gradient")?f.border=0:f.borderColor=c,f}},l=c=>{t.loading?yt(c):t.disabled||(e("click",c),r())};return()=>{const{tag:c,type:d,size:f,block:m,round:g,plain:_,square:T,loading:b,disabled:C,hairline:y,nativeType:A,iconPosition:D}=t,x=[So([d,f,{plain:_,block:m,round:g,square:T,loading:b,disabled:C,hairline:y}]),{[Il]:y}];return h(c,{type:A,class:x,style:a(),disabled:C,onClick:l},{default:()=>[h("div",{class:So("content")},[D==="left"&&s(),o(),D==="right"&&s()])]})}}});const Tn=oe($F),[zF,jF]=ee("action-bar-button"),HF=ke({},Ss,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var qF=X({name:zF,props:HF,setup(t,{slots:e}){const n=po(),{parent:r,index:i}=on(lp),s=z(()=>{if(r){const a=r.children[i.value-1];return!(a&&"isButton"in a)}}),o=z(()=>{if(r){const a=r.children[i.value+1];return!(a&&"isButton"in a)}});return Je({isButton:!0}),()=>{const{type:a,icon:l,text:c,color:d,loading:f,disabled:m}=t;return h(Tn,{class:jF([a,{last:o.value,first:s.value}]),size:"large",type:a,icon:l,color:d,loading:f,disabled:m,onClick:n},{default:()=>[e.default?e.default():c]})}}});const sd=oe(qF),[GF,cf]=ee("action-bar-icon"),WF=ke({},Ss,{dot:Boolean,text:String,icon:String,color:String,badge:ie,iconClass:Rt,badgeProps:Object,iconPrefix:String});var KF=X({name:GF,props:WF,setup(t,{slots:e}){const n=po();on(lp);const r=()=>{const{dot:i,badge:s,icon:o,color:a,iconClass:l,badgeProps:c,iconPrefix:d}=t;return e.icon?h(vo,Qe({dot:i,class:cf("icon"),content:s},c),{default:e.icon}):h(je,{tag:"div",dot:i,name:o,badge:s,color:a,class:[cf("icon"),l],badgeProps:c,classPrefix:d},null)};return()=>h("div",{role:"button",class:cf(),tabindex:0,onClick:n},[r(),e.default?e.default():t.text])}});const oC=oe(KF),Ra={show:Boolean,zIndex:ie,overlay:Q,duration:ie,teleport:[String,Object],lockScroll:Q,lazyRender:Q,beforeClose:Function,overlayStyle:Object,overlayClass:Rt,transitionAppear:Boolean,closeOnClickOverlay:Q},up=Object.keys(Ra);function YF(t,e){return t>e?"horizontal":e>t?"vertical":""}function ur(){const t=j(0),e=j(0),n=j(0),r=j(0),i=j(0),s=j(0),o=j(""),a=j(!0),l=()=>o.value==="vertical",c=()=>o.value==="horizontal",d=()=>{n.value=0,r.value=0,i.value=0,s.value=0,o.value="",a.value=!0};return{move:g=>{const _=g.touches[0];n.value=(_.clientX<0?0:_.clientX)-t.value,r.value=_.clientY-e.value,i.value=Math.abs(n.value),s.value=Math.abs(r.value);const T=10;(!o.value||i.value<T&&s.value<T)&&(o.value=YF(i.value,s.value)),a.value&&(i.value>Qy||s.value>Qy)&&(a.value=!1)},start:g=>{d(),t.value=g.touches[0].clientX,e.value=g.touches[0].clientY},reset:d,startX:t,startY:e,deltaX:n,deltaY:r,offsetX:i,offsetY:s,direction:o,isVertical:l,isHorizontal:c,isTap:a}}let Ya=0;const eb="van-overflow-hidden";function aC(t,e){const n=ur(),r="01",i="10",s=d=>{n.move(d);const f=n.deltaY.value>0?i:r,m=ip(d.target,t.value),{scrollHeight:g,offsetHeight:_,scrollTop:T}=m;let b="11";T===0?b=_>=g?"00":"01":T+_>=g&&(b="10"),b!=="11"&&n.isVertical()&&!(parseInt(b,2)&parseInt(f,2))&&yt(d,!0)},o=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",s,{passive:!1}),Ya||document.body.classList.add(eb),Ya++},a=()=>{Ya&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",s),Ya--,Ya||document.body.classList.remove(eb))},l=()=>e()&&o(),c=()=>e()&&a();Aa(l),Wr(c),Kr(c),he(e,d=>{d?o():a()})}function dp(t){const e=j(!1);return he(t,n=>{n&&(e.value=n)},{immediate:!0}),n=>()=>e.value?n():null}const od=()=>{var t;const{scopeId:e}=((t=Ar())==null?void 0:t.vnode)||{};return e?{[e]:""}:null},[QF,XF]=ee("overlay"),JF={show:Boolean,zIndex:ie,duration:ie,className:Rt,lockScroll:Q,lazyRender:Q,customStyle:Object,teleport:[String,Object]};var ZF=X({name:QF,props:JF,setup(t,{slots:e}){const n=j(),r=dp(()=>t.show||!t.lazyRender),i=o=>{t.lockScroll&&yt(o,!0)},s=r(()=>{var o;const a=ke(xi(t.zIndex),t.customStyle);return it(t.duration)&&(a.animationDuration=`${t.duration}s`),Wt(h("div",{ref:n,style:a,class:[XF(),t.className]},[(o=e.default)==null?void 0:o.call(e)]),[[rn,t.show]])});return Vt("touchmove",i,{target:n}),()=>{const o=h(ec,{name:"van-fade",appear:!0},{default:s});return t.teleport?h(ao,{to:t.teleport},{default:()=>[o]}):o}}});const lC=oe(ZF),eB=ke({},Ra,{round:Boolean,position:le("center"),closeIcon:le("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:le("top-right"),destroyOnClose:Boolean,safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[tB,tb]=ee("popup");var nB=X({name:tB,inheritAttrs:!1,props:eB,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(t,{emit:e,attrs:n,slots:r}){let i,s;const o=j(),a=j(),l=dp(()=>t.show||!t.lazyRender),c=z(()=>{const O={zIndex:o.value};if(it(t.duration)){const R=t.position==="center"?"animationDuration":"transitionDuration";O[R]=`${t.duration}s`}return O}),d=()=>{i||(i=!0,o.value=t.zIndex!==void 0?+t.zIndex:TF(),e("open"))},f=()=>{i&&Cs(t.beforeClose,{done(){i=!1,e("close"),e("update:show",!1)}})},m=O=>{e("clickOverlay",O),t.closeOnClickOverlay&&f()},g=()=>{if(t.overlay)return h(lC,Qe({show:t.show,class:t.overlayClass,zIndex:o.value,duration:t.duration,customStyle:t.overlayStyle,role:t.closeOnClickOverlay?"button":void 0,tabindex:t.closeOnClickOverlay?0:void 0},od(),{onClick:m}),{default:r["overlay-content"]})},_=O=>{e("clickCloseIcon",O),f()},T=()=>{if(t.closeable)return h(je,{role:"button",tabindex:0,name:t.closeIcon,class:[tb("close-icon",t.closeIconPosition),wn],classPrefix:t.iconPrefix,onClick:_},null)};let b;const C=()=>{b&&clearTimeout(b),b=setTimeout(()=>{e("opened")})},y=()=>e("closed"),A=O=>e("keydown",O),D=l(()=>{var O;const{destroyOnClose:R,round:v,position:I,safeAreaInsetTop:k,safeAreaInsetBottom:E,show:S}=t;if(!(!S&&R))return Wt(h("div",Qe({ref:a,style:c.value,role:"dialog",tabindex:0,class:[tb({round:v,[I]:I}),{"van-safe-area-top":k,"van-safe-area-bottom":E}],onKeydown:A},n,od()),[(O=r.default)==null?void 0:O.call(r),T()]),[[rn,S]])}),x=()=>{const{position:O,transition:R,transitionAppear:v}=t,I=O==="center"?"van-fade":`van-popup-slide-${O}`;return h(ec,{name:R||I,appear:v,onAfterEnter:C,onAfterLeave:y},{default:D})};return he(()=>t.show,O=>{O&&!i&&(d(),n.tabindex===0&&qe(()=>{var R;(R=a.value)==null||R.focus()})),!O&&i&&(i=!1,e("close"))}),Je({popupRef:a}),aC(a,()=>t.show&&t.lockScroll),Vt("popstate",()=>{t.closeOnPopstate&&(f(),s=!1)}),Lt(()=>{t.show&&d()}),Gr(()=>{s&&(e("update:show",!0),s=!1)}),Wr(()=>{t.show&&t.teleport&&(f(),s=!0)}),mi(ZI,()=>t.show),()=>t.teleport?h(ao,{to:t.teleport},{default:()=>[g(),x()]}):h(rt,null,[g(),x()])}});const kr=oe(nB),[rB,Jn]=ee("action-sheet"),iB=ke({},Ra,{title:String,round:Q,actions:At(),closeIcon:le("cross"),closeable:Q,cancelText:String,description:String,closeOnPopstate:Q,closeOnClickAction:Boolean,safeAreaInsetBottom:Q}),sB=[...up,"round","closeOnPopstate","safeAreaInsetBottom"];var oB=X({name:rB,props:iB,emits:["select","cancel","update:show"],setup(t,{slots:e,emit:n}){const r=f=>n("update:show",f),i=()=>{r(!1),n("cancel")},s=()=>{if(t.title)return h("div",{class:Jn("header")},[t.title,t.closeable&&h(je,{name:t.closeIcon,class:[Jn("close"),wn],onClick:i},null)])},o=()=>{if(e.cancel||t.cancelText)return[h("div",{class:Jn("gap")},null),h("button",{type:"button",class:Jn("cancel"),onClick:i},[e.cancel?e.cancel():t.cancelText])]},a=f=>{if(f.icon)return h(je,{class:Jn("item-icon"),name:f.icon},null)},l=(f,m)=>f.loading?h(cr,{class:Jn("loading-icon")},null):e.action?e.action({action:f,index:m}):[h("span",{class:Jn("name")},[f.name]),f.subname&&h("div",{class:Jn("subname")},[f.subname])],c=(f,m)=>{const{color:g,loading:_,callback:T,disabled:b,className:C}=f,y=()=>{b||_||(T&&T(f),t.closeOnClickAction&&r(!1),qe(()=>n("select",f,m)))};return h("button",{type:"button",style:{color:g},class:[Jn("item",{loading:_,disabled:b}),C],onClick:y},[a(f),l(f,m)])},d=()=>{if(t.description||e.description){const f=e.description?e.description():t.description;return h("div",{class:Jn("description")},[f])}};return()=>h(kr,Qe({class:Jn(),position:"bottom","onUpdate:show":r},lt(t,sB)),{default:()=>{var f;return[s(),d(),h("div",{class:Jn("content")},[t.actions.map(c),(f=e.default)==null?void 0:f.call(e)]),o()]}})}});const cC=oe(oB),[aB,ui,nb]=ee("picker"),uC=t=>t.find(e=>!e.disabled)||t[0];function lB(t,e){const n=t[0];if(n){if(Array.isArray(n))return"multiple";if(e.children in n)return"cascade"}return"default"}function Su(t,e){e=qt(e,0,t.length);for(let n=e;n<t.length;n++)if(!t[n].disabled)return n;for(let n=e-1;n>=0;n--)if(!t[n].disabled)return n;return 0}const rb=(t,e,n)=>e!==void 0&&!!t.find(r=>r[n.value]===e);function Im(t,e,n){const r=t.findIndex(s=>s[n.value]===e),i=Su(t,r);return t[i]}function cB(t,e,n){const r=[];let i={[e.children]:t},s=0;for(;i&&i[e.children];){const o=i[e.children],a=n.value[s];if(i=it(a)?Im(o,a,e):void 0,!i&&o.length){const l=uC(o)[e.value];i=Im(o,l,e)}s++,r.push(o)}return r}function uB(t){const{transform:e}=window.getComputedStyle(t),n=e.slice(7,e.length-1).split(", ")[5];return Number(n)}function dB(t){return ke({text:"text",value:"value",children:"children"},t)}const ib=200,sb=300,hB=15,[dC,uf]=ee("picker-column"),hC=Symbol(dC);var fB=X({name:dC,props:{value:ie,fields:Gt(Object),options:At(),readonly:Boolean,allowHtml:Boolean,optionHeight:Gt(Number),swipeDuration:Gt(ie),visibleOptionNum:Gt(ie)},emits:["change","clickOption","scrollInto"],setup(t,{emit:e,slots:n}){let r,i,s,o,a;const l=j(),c=j(),d=j(0),f=j(0),m=ur(),g=()=>t.options.length,_=()=>t.optionHeight*(+t.visibleOptionNum-1)/2,T=k=>{let E=Su(t.options,k);const S=-E*t.optionHeight,P=()=>{E>g()-1&&(E=Su(t.options,k));const re=t.options[E][t.fields.value];re!==t.value&&e("change",re)};r&&S!==d.value?a=P:P(),d.value=S},b=()=>t.readonly||!t.options.length,C=k=>{r||b()||(a=null,f.value=ib,T(k),e("clickOption",t.options[k]))},y=k=>qt(Math.round(-k/t.optionHeight),0,g()-1),A=z(()=>y(d.value)),D=(k,E)=>{const S=Math.abs(k/E);k=d.value+S/.003*(k<0?-1:1);const P=y(k);f.value=+t.swipeDuration,T(P)},x=()=>{r=!1,f.value=0,a&&(a(),a=null)},O=k=>{if(!b()){if(m.start(k),r){const E=uB(c.value);d.value=Math.min(0,E-_())}f.value=0,i=d.value,s=Date.now(),o=i,a=null}},R=k=>{if(b())return;m.move(k),m.isVertical()&&(r=!0,yt(k,!0));const E=qt(i+m.deltaY.value,-(g()*t.optionHeight),t.optionHeight),S=y(E);S!==A.value&&e("scrollInto",t.options[S]),d.value=E;const P=Date.now();P-s>sb&&(s=P,o=E)},v=()=>{if(b())return;const k=d.value-o,E=Date.now()-s;if(E<sb&&Math.abs(k)>hB){D(k,E);return}const P=y(d.value);f.value=ib,T(P),setTimeout(()=>{r=!1},0)},I=()=>{const k={height:`${t.optionHeight}px`};return t.options.map((E,S)=>{const P=E[t.fields.text],{disabled:re}=E,fe=E[t.fields.value],Y={role:"button",style:k,tabindex:re?-1:0,class:[uf("item",{disabled:re,selected:fe===t.value}),E.className],onClick:()=>C(S)},de={class:"van-ellipsis",[t.allowHtml?"innerHTML":"textContent"]:P};return h("li",Y,[n.option?n.option(E,S):h("div",de,null)])})};return on(hC),Je({stopMomentum:x}),wa(()=>{const k=r?Math.floor(-d.value/t.optionHeight):t.options.findIndex(P=>P[t.fields.value]===t.value),E=Su(t.options,k),S=-E*t.optionHeight;r&&E<k&&x(),d.value=S}),Vt("touchmove",R,{target:l}),()=>h("div",{ref:l,class:uf(),onTouchstartPassive:O,onTouchend:v,onTouchcancel:v},[h("ul",{ref:c,style:{transform:`translate3d(0, ${d.value+_()}px, 0)`,transitionDuration:`${f.value}ms`,transitionProperty:f.value?"all":"none"},class:uf("wrapper"),onTransitionend:x},[I()])])}});const[mB]=ee("picker-toolbar"),nh={title:String,cancelButtonText:String,confirmButtonText:String},fC=["cancel","confirm","title","toolbar"],gB=Object.keys(nh);var mC=X({name:mB,props:nh,emits:["confirm","cancel"],setup(t,{emit:e,slots:n}){const r=()=>{if(n.title)return n.title();if(t.title)return h("div",{class:[ui("title"),"van-ellipsis"]},[t.title])},i=()=>e("cancel"),s=()=>e("confirm"),o=()=>{var l;const c=(l=t.cancelButtonText)!=null?l:nb("cancel");if(!(!n.cancel&&!c))return h("button",{type:"button",class:[ui("cancel"),wn],onClick:i},[n.cancel?n.cancel():c])},a=()=>{var l;const c=(l=t.confirmButtonText)!=null?l:nb("confirm");if(!(!n.confirm&&!c))return h("button",{type:"button",class:[ui("confirm"),wn],onClick:s},[n.confirm?n.confirm():c])};return()=>h("div",{class:ui("toolbar")},[n.toolbar?n.toolbar():[o(),r(),a()]])}});const hp=(t,e)=>{const n=j(t());return he(t,r=>{r!==n.value&&(n.value=r)}),he(n,r=>{r!==t()&&e(r)}),n};function pB(t,e,n){let r,i=0;const s=t.scrollLeft,o=n===0?1:Math.round(n*1e3/16);let a=s;function l(){Xd(r)}function c(){a+=(e-s)/o,t.scrollLeft=a,++i<o&&(r=yn(c))}return c(),l}function vB(t,e,n,r){let i,s=Ci(t);const o=s<e,a=n===0?1:Math.round(n*1e3/16),l=(e-s)/a;function c(){Xd(i)}function d(){s+=l,(o&&s>e||!o&&s<e)&&(s=e),rd(t,s),o&&s<e||!o&&s>e?i=yn(d):i=yn(r)}return d(),c}let _B=0;function Pa(){const t=Ar(),{name:e="unknown"}=(t==null?void 0:t.type)||{};return`${e}-${++_B}`}function fc(){const t=j([]),e=[];return i0(()=>{t.value=[]}),[t,r=>(e[r]||(e[r]=i=>{t.value[r]=i}),e[r])]}function gC(t,e){if(!Kn||!window.IntersectionObserver)return;const n=new IntersectionObserver(s=>{e(s[0].intersectionRatio>0)},{root:document.body}),r=()=>{t.value&&n.observe(t.value)},i=()=>{t.value&&n.unobserve(t.value)};Wr(i),Kr(i),Aa(r)}const[yB,bB]=ee("sticky"),wB={zIndex:ie,position:le("top"),container:Object,offsetTop:we(0),offsetBottom:we(0)};var TB=X({name:yB,props:wB,emits:["scroll","change"],setup(t,{emit:e,slots:n}){const r=j(),i=ka(r),s=Ct({fixed:!1,width:0,height:0,transform:0}),o=j(!1),a=z(()=>op(t.position==="top"?t.offsetTop:t.offsetBottom)),l=z(()=>{if(o.value)return;const{fixed:m,height:g,width:_}=s;if(m)return{width:`${_}px`,height:`${g}px`}}),c=z(()=>{if(!s.fixed||o.value)return;const m=ke(xi(t.zIndex),{width:`${s.width}px`,height:`${s.height}px`,[t.position]:`${a.value}px`});return s.transform&&(m.transform=`translate3d(0, ${s.transform}px, 0)`),m}),d=m=>e("scroll",{scrollTop:m,isFixed:s.fixed}),f=()=>{if(!r.value||oo(r))return;const{container:m,position:g}=t,_=dt(r),T=Ci(window);if(s.width=_.width,s.height=_.height,g==="top")if(m){const b=dt(m),C=b.bottom-a.value-s.height;s.fixed=a.value>_.top&&b.bottom>0,s.transform=C<0?C:0}else s.fixed=a.value>_.top;else{const{clientHeight:b}=document.documentElement;if(m){const C=dt(m),y=b-C.top-a.value-s.height;s.fixed=b-a.value<_.bottom&&b>C.top,s.transform=y<0?-y:0}else s.fixed=b-a.value<_.bottom}d(T)};return he(()=>s.fixed,m=>e("change",m)),Vt("scroll",f,{target:i,passive:!0}),gC(r,f),he([wr,rr],()=>{!r.value||oo(r)||!s.fixed||(o.value=!0,qe(()=>{const m=dt(r);s.width=m.width,s.height=m.height,o.value=!1}))}),()=>{var m;return h("div",{ref:r,style:l.value},[h("div",{class:bB({fixed:s.fixed&&!o.value}),style:c.value},[(m=n.default)==null?void 0:m.call(n)])])}}});const pC=oe(TB),[vC,Yc]=ee("swipe"),EB={loop:Q,width:ie,height:ie,vertical:Boolean,autoplay:we(0),duration:we(500),touchable:Q,lazyRender:Boolean,initialSwipe:we(0),indicatorColor:String,showIndicators:Q,stopPropagation:Q},_C=Symbol(vC);var IB=X({name:vC,props:EB,emits:["change","dragStart","dragEnd"],setup(t,{emit:e,slots:n}){const r=j(),i=j(),s=Ct({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let o=!1;const a=ur(),{children:l,linkChildren:c}=En(_C),d=z(()=>l.length),f=z(()=>s[t.vertical?"height":"width"]),m=z(()=>t.vertical?a.deltaY.value:a.deltaX.value),g=z(()=>s.rect?(t.vertical?s.rect.height:s.rect.width)-f.value*d.value:0),_=z(()=>f.value?Math.ceil(Math.abs(g.value)/f.value):d.value),T=z(()=>d.value*f.value),b=z(()=>(s.active+d.value)%d.value),C=z(()=>{const H=t.vertical?"vertical":"horizontal";return a.direction.value===H}),y=z(()=>{const H={transitionDuration:`${s.swiping?0:t.duration}ms`,transform:`translate${t.vertical?"Y":"X"}(${+s.offset.toFixed(2)}px)`};if(f.value){const te=t.vertical?"height":"width",ge=t.vertical?"width":"height";H[te]=`${T.value}px`,H[ge]=t[ge]?`${t[ge]}px`:""}return H}),A=H=>{const{active:te}=s;return H?t.loop?qt(te+H,-1,d.value):qt(te+H,0,_.value):te},D=(H,te=0)=>{let ge=H*f.value;t.loop||(ge=Math.min(ge,-g.value));let Ae=te-ge;return t.loop||(Ae=qt(Ae,g.value,0)),Ae},x=({pace:H=0,offset:te=0,emitChange:ge})=>{if(d.value<=1)return;const{active:Ae}=s,ce=A(H),Ee=D(ce,te);if(t.loop){if(l[0]&&Ee!==g.value){const L=Ee<g.value;l[0].setOffset(L?T.value:0)}if(l[d.value-1]&&Ee!==0){const L=Ee>0;l[d.value-1].setOffset(L?-T.value:0)}}s.active=ce,s.offset=Ee,ge&&ce!==Ae&&e("change",b.value)},O=()=>{s.swiping=!0,s.active<=-1?x({pace:d.value}):s.active>=d.value&&x({pace:-d.value})},R=()=>{O(),a.reset(),ns(()=>{s.swiping=!1,x({pace:-1,emitChange:!0})})},v=()=>{O(),a.reset(),ns(()=>{s.swiping=!1,x({pace:1,emitChange:!0})})};let I;const k=()=>clearTimeout(I),E=()=>{k(),+t.autoplay>0&&d.value>1&&(I=setTimeout(()=>{v(),E()},+t.autoplay))},S=(H=+t.initialSwipe)=>{if(!r.value)return;const te=()=>{var ge,Ae;if(!oo(r)){const ce={width:r.value.offsetWidth,height:r.value.offsetHeight};s.rect=ce,s.width=+((ge=t.width)!=null?ge:ce.width),s.height=+((Ae=t.height)!=null?Ae:ce.height)}d.value&&(H=Math.min(d.value-1,H),H===-1&&(H=d.value-1)),s.active=H,s.swiping=!0,s.offset=D(H),l.forEach(ce=>{ce.setOffset(0)}),E()};oo(r)?qe().then(te):te()},P=()=>S(s.active);let re;const fe=H=>{!t.touchable||H.touches.length>1||(a.start(H),o=!1,re=Date.now(),k(),O())},Y=H=>{t.touchable&&s.swiping&&(a.move(H),C.value&&(!t.loop&&(s.active===0&&m.value>0||s.active===d.value-1&&m.value<0)||(yt(H,t.stopPropagation),x({offset:m.value}),o||(e("dragStart",{index:b.value}),o=!0))))},de=()=>{if(!t.touchable||!s.swiping)return;const H=Date.now()-re,te=m.value/H;if((Math.abs(te)>.25||Math.abs(m.value)>f.value/2)&&C.value){const Ae=t.vertical?a.offsetY.value:a.offsetX.value;let ce=0;t.loop?ce=Ae>0?m.value>0?-1:1:0:ce=-Math[m.value>0?"ceil":"floor"](m.value/f.value),x({pace:ce,emitChange:!0})}else m.value&&x({pace:0});o=!1,s.swiping=!1,e("dragEnd",{index:b.value}),E()},me=(H,te={})=>{O(),a.reset(),ns(()=>{let ge;t.loop&&H===d.value?ge=s.active===0?0:H:ge=H%d.value,te.immediate?ns(()=>{s.swiping=!1}):s.swiping=!1,x({pace:ge-s.active,emitChange:!0})})},Ue=(H,te)=>{const ge=te===b.value,Ae=ge?{backgroundColor:t.indicatorColor}:void 0;return h("i",{style:Ae,class:Yc("indicator",{active:ge})},null)},Xe=()=>{if(n.indicator)return n.indicator({active:b.value,total:d.value});if(t.showIndicators&&d.value>1)return h("div",{class:Yc("indicators",{vertical:t.vertical})},[Array(d.value).fill("").map(Ue)])};return Je({prev:R,next:v,state:s,resize:P,swipeTo:me}),c({size:f,props:t,count:d,activeIndicator:b}),he(()=>t.initialSwipe,H=>S(+H)),he(d,()=>S(s.active)),he(()=>t.autoplay,E),he([wr,rr,()=>t.width,()=>t.height],P),he(Z2(),H=>{H==="visible"?E():k()}),Lt(S),Gr(()=>S(s.active)),eh(()=>S(s.active)),Wr(k),Kr(k),Vt("touchmove",Y,{target:i}),()=>{var H;return h("div",{ref:r,class:Yc()},[h("div",{ref:i,style:y.value,class:Yc("track",{vertical:t.vertical}),onTouchstartPassive:fe,onTouchend:de,onTouchcancel:de},[(H=n.default)==null?void 0:H.call(n)]),Xe()])}}});const rh=oe(IB),[CB,ob]=ee("tabs");var SB=X({name:CB,props:{count:Gt(Number),inited:Boolean,animated:Boolean,duration:Gt(ie),swipeable:Boolean,lazyRender:Boolean,currentIndex:Gt(Number)},emits:["change"],setup(t,{emit:e,slots:n}){const r=j(),i=a=>e("change",a),s=()=>{var a;const l=(a=n.default)==null?void 0:a.call(n);return t.animated||t.swipeable?h(rh,{ref:r,loop:!1,class:ob("track"),duration:+t.duration*1e3,touchable:t.swipeable,lazyRender:t.lazyRender,showIndicators:!1,onChange:i},{default:()=>[l]}):l},o=a=>{const l=r.value;l&&l.state.active!==a&&l.swipeTo(a,{immediate:!t.inited})};return he(()=>t.currentIndex,o),Lt(()=>{o(t.currentIndex)}),Je({swipeRef:r}),()=>h("div",{class:ob("content",{animated:t.animated||t.swipeable})},[s()])}});const[yC,Qc]=ee("tabs"),AB={type:le("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:we(0),duration:we(.3),animated:Boolean,ellipsis:Q,swipeable:Boolean,scrollspy:Boolean,offsetTop:we(0),background:String,lazyRender:Q,showHeader:Q,lineWidth:ie,lineHeight:ie,beforeChange:Function,swipeThreshold:we(5),titleActiveColor:String,titleInactiveColor:String},bC=Symbol(yC);var kB=X({name:yC,props:AB,emits:["change","scroll","rendered","clickTab","update:active"],setup(t,{emit:e,slots:n}){let r,i,s,o,a;const l=j(),c=j(),d=j(),f=j(),m=Pa(),g=ka(l),[_,T]=fc(),{children:b,linkChildren:C}=En(bC),y=Ct({inited:!1,position:"",lineStyle:{},currentIndex:-1}),A=z(()=>b.length>+t.swipeThreshold||!t.ellipsis||t.shrink),D=z(()=>({borderColor:t.color,background:t.background})),x=(ce,Ee)=>{var L;return(L=ce.name)!=null?L:Ee},O=z(()=>{const ce=b[y.currentIndex];if(ce)return x(ce,y.currentIndex)}),R=z(()=>op(t.offsetTop)),v=z(()=>t.sticky?R.value+r:0),I=ce=>{const Ee=c.value,L=_.value;if(!A.value||!Ee||!L||!L[y.currentIndex])return;const q=L[y.currentIndex].$el,G=q.offsetLeft-(Ee.offsetWidth-q.offsetWidth)/2;o&&o(),o=pB(Ee,G,ce?0:+t.duration)},k=()=>{const ce=y.inited;qe(()=>{const Ee=_.value;if(!Ee||!Ee[y.currentIndex]||t.type!=="line"||oo(l.value))return;const L=Ee[y.currentIndex].$el,{lineWidth:q,lineHeight:G}=t,ae=L.offsetLeft+L.offsetWidth/2,Re={width:ze(q),backgroundColor:t.color,transform:`translateX(${ae}px) translateX(-50%)`};if(ce&&(Re.transitionDuration=`${t.duration}s`),it(G)){const N=ze(G);Re.height=N,Re.borderRadius=N}y.lineStyle=Re})},E=ce=>{const Ee=ce<y.currentIndex?-1:1;for(;ce>=0&&ce<b.length;){if(!b[ce].disabled)return ce;ce+=Ee}},S=(ce,Ee)=>{const L=E(ce);if(!it(L))return;const q=b[L],G=x(q,L),ae=y.currentIndex!==null;y.currentIndex!==L&&(y.currentIndex=L,Ee||I(),k()),G!==t.active&&(e("update:active",G),ae&&e("change",G,q.title)),s&&!t.scrollspy&&Wl(Math.ceil(Gy(l.value)-R.value))},P=(ce,Ee)=>{const L=b.find((G,ae)=>x(G,ae)===ce),q=L?b.indexOf(L):0;S(q,Ee)},re=(ce=!1)=>{if(t.scrollspy){const Ee=b[y.currentIndex].$el;if(Ee&&g.value){const L=Gy(Ee,g.value)-v.value;i=!0,a&&a(),a=vB(g.value,L,ce?0:+t.duration,()=>{i=!1})}}},fe=(ce,Ee,L)=>{const{title:q,disabled:G}=b[Ee],ae=x(b[Ee],Ee);G||(Cs(t.beforeChange,{args:[ae],done:()=>{S(Ee),re()}}),nC(ce)),e("clickTab",{name:ae,title:q,event:L,disabled:G})},Y=ce=>{s=ce.isFixed,e("scroll",ce)},de=ce=>{qe(()=>{P(ce),re(!0)})},me=()=>{for(let ce=0;ce<b.length;ce++){const{top:Ee}=dt(b[ce].$el);if(Ee>v.value)return ce===0?0:ce-1}return b.length-1},Ue=()=>{if(t.scrollspy&&!i){const ce=me();S(ce)}},Xe=()=>{if(t.type==="line"&&b.length)return h("div",{class:Qc("line"),style:y.lineStyle},null)},H=()=>{var ce,Ee,L;const{type:q,border:G,sticky:ae}=t,Re=[h("div",{ref:ae?void 0:d,class:[Qc("wrap"),{[Zd]:q==="line"&&G}]},[h("div",{ref:c,role:"tablist",class:Qc("nav",[q,{shrink:t.shrink,complete:A.value}]),style:D.value,"aria-orientation":"horizontal"},[(ce=n["nav-left"])==null?void 0:ce.call(n),b.map(N=>N.renderTitle(fe)),Xe(),(Ee=n["nav-right"])==null?void 0:Ee.call(n)])]),(L=n["nav-bottom"])==null?void 0:L.call(n)];return ae?h("div",{ref:d},[Re]):Re},te=()=>{k(),qe(()=>{var ce,Ee;I(!0),(Ee=(ce=f.value)==null?void 0:ce.swipeRef.value)==null||Ee.resize()})};he(()=>[t.color,t.duration,t.lineWidth,t.lineHeight],k),he(wr,te),he(()=>t.active,ce=>{ce!==O.value&&P(ce)}),he(()=>b.length,()=>{y.inited&&(P(t.active),k(),qe(()=>{I(!0)}))});const ge=()=>{P(t.active,!0),qe(()=>{y.inited=!0,d.value&&(r=dt(d.value).height),I(!0)})},Ae=(ce,Ee)=>e("rendered",ce,Ee);return Je({resize:te,scrollTo:de}),Gr(k),eh(k),Aa(ge),gC(l,k),Vt("scroll",Ue,{target:g,passive:!0}),C({id:m,props:t,setLine:k,scrollable:A,onRendered:Ae,currentName:O,setTitleRefs:T,scrollIntoView:I}),()=>h("div",{ref:l,class:Qc([t.type])},[t.showHeader?t.sticky?h(pC,{container:l.value,offsetTop:R.value,onScroll:Y},{default:()=>[H()]}):H():null,h(SB,{ref:f,count:b.length,inited:y.inited,animated:t.animated,duration:t.duration,swipeable:t.swipeable,lazyRender:t.lazyRender,currentIndex:y.currentIndex,onChange:S},{default:()=>{var ce;return[(ce=n.default)==null?void 0:ce.call(n)]}})])}});const wC=Symbol(),RB=()=>_n(wC,null),[PB,ab]=ee("tab"),xB=X({name:PB,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:ie,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:Q},setup(t,{slots:e}){const n=z(()=>{const i={},{type:s,color:o,disabled:a,isActive:l,activeColor:c,inactiveColor:d}=t;o&&s==="card"&&(i.borderColor=o,a||(l?i.backgroundColor=o:i.color=o));const m=l?c:d;return m&&(i.color=m),i}),r=()=>{const i=h("span",{class:ab("text",{ellipsis:!t.scrollable})},[e.title?e.title():t.title]);return t.dot||it(t.badge)&&t.badge!==""?h(vo,{dot:t.dot,content:t.badge,showZero:t.showZeroBadge},{default:()=>[i]}):i};return()=>h("div",{id:t.id,role:"tab",class:[ab([t.type,{grow:t.scrollable&&!t.shrink,shrink:t.shrink,active:t.isActive,disabled:t.disabled}])],style:n.value,tabindex:t.disabled?void 0:t.isActive?0:-1,"aria-selected":t.isActive,"aria-disabled":t.disabled||void 0,"aria-controls":t.controls,"data-allow-mismatch":"attribute"},[r()])}}),[DB,OB]=ee("swipe-item");var VB=X({name:DB,setup(t,{slots:e}){let n;const r=Ct({offset:0,inited:!1,mounted:!1}),{parent:i,index:s}=on(_C);if(!i)return;const o=z(()=>{const c={},{vertical:d}=i.props;return i.size.value&&(c[d?"height":"width"]=`${i.size.value}px`),r.offset&&(c.transform=`translate${d?"Y":"X"}(${r.offset}px)`),c}),a=z(()=>{const{loop:c,lazyRender:d}=i.props;if(!d||n)return!0;if(!r.mounted)return!1;const f=i.activeIndicator.value,m=i.count.value-1,g=f===0&&c?m:f-1,_=f===m&&c?0:f+1;return n=s.value===f||s.value===g||s.value===_,n}),l=c=>{r.offset=c};return Lt(()=>{qe(()=>{r.mounted=!0})}),Je({setOffset:l}),()=>{var c;return h("div",{class:OB(),style:o.value},[a.value?(c=e.default)==null?void 0:c.call(e):null])}}});const ih=oe(VB),[LB,df]=ee("tab"),NB=ke({},Ss,{dot:Boolean,name:ie,badge:ie,title:String,disabled:Boolean,titleClass:Rt,titleStyle:[String,Object],showZeroBadge:Q});var MB=X({name:LB,props:NB,setup(t,{slots:e}){const n=Pa(),r=j(!1),i=Ar(),{parent:s,index:o}=on(bC);if(!s)return;const a=()=>{var _;return(_=t.name)!=null?_:o.value},l=()=>{r.value=!0,s.props.lazyRender&&qe(()=>{s.onRendered(a(),t.title)})},c=z(()=>{const _=a()===s.currentName.value;return _&&!r.value&&l(),_}),d=j(""),f=j("");wa(()=>{const{titleClass:_,titleStyle:T}=t;d.value=_?oi(_):"",f.value=T&&typeof T!="string"?US(pd(T)):T});const m=_=>h(xB,Qe({key:n,id:`${s.id}-${o.value}`,ref:s.setTitleRefs(o.value),style:f.value,class:d.value,isActive:c.value,controls:n,scrollable:s.scrollable.value,activeColor:s.props.titleActiveColor,inactiveColor:s.props.titleInactiveColor,onClick:T=>_(i.proxy,o.value,T)},lt(s.props,["type","color","shrink"]),lt(t,["dot","badge","title","disabled","showZeroBadge"])),{title:e.title}),g=j(!c.value);return he(c,_=>{_?g.value=!1:ns(()=>{g.value=!0})}),he(()=>t.title,()=>{s.setLine(),s.scrollIntoView()}),mi(wC,c),Je({id:n,renderTitle:m}),()=>{var _;const T=`${s.id}-${o.value}`,{animated:b,swipeable:C,scrollspy:y,lazyRender:A}=s.props;if(!e.default&&!b)return;const D=y||c.value;if(b||C)return h(ih,{id:n,role:"tabpanel",class:df("panel-wrapper",{inactive:g.value}),tabindex:c.value?0:-1,"aria-hidden":!c.value,"aria-labelledby":T,"data-allow-mismatch":"attribute"},{default:()=>{var R;return[h("div",{class:df("panel")},[(R=e.default)==null?void 0:R.call(e)])]}});const O=r.value||y||!A?(_=e.default)==null?void 0:_.call(e):null;return Wt(h("div",{id:n,role:"tabpanel",class:df("panel"),tabindex:D?0:-1,"aria-labelledby":T,"data-allow-mismatch":"attribute"},[O]),[[rn,D]])}}});const ga=oe(MB),mc=oe(kB),[TC,hf]=ee("picker-group"),EC=Symbol(TC),FB=ke({tabs:At(),activeTab:we(0),nextStepText:String,showToolbar:Q},nh);var BB=X({name:TC,props:FB,emits:["confirm","cancel","update:activeTab"],setup(t,{emit:e,slots:n}){const r=hp(()=>t.activeTab,c=>e("update:activeTab",c)),{children:i,linkChildren:s}=En(EC);s();const o=()=>+r.value<t.tabs.length-1&&t.nextStepText,a=()=>{o()?r.value=+r.value+1:e("confirm",i.map(c=>c.confirm()))},l=()=>e("cancel");return()=>{var c,d;let f=(d=(c=n.default)==null?void 0:c.call(n))==null?void 0:d.filter(g=>g.type!==pn).map(g=>g.type===rt?g.children:g);f&&(f=z2(f));const m=o()?t.nextStepText:t.confirmButtonText;return h("div",{class:hf()},[t.showToolbar?h(mC,{title:t.title,cancelButtonText:t.cancelButtonText,confirmButtonText:m,onConfirm:a,onCancel:l},lt(n,fC)):null,h(mc,{active:r.value,"onUpdate:active":g=>r.value=g,class:hf("tabs"),shrink:!0,animated:!0,lazyRender:!1},{default:()=>[t.tabs.map((g,_)=>h(ga,{title:g,titleClass:hf("tab-title")},{default:()=>[f==null?void 0:f[_]]}))]})])}}});const sh=ke({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:we(44),showToolbar:Q,swipeDuration:we(1e3),visibleOptionNum:we(6)},nh),UB=ke({},sh,{columns:At(),modelValue:At(),toolbarPosition:le("top"),columnsFieldNames:Object});var $B=X({name:aB,props:UB,emits:["confirm","cancel","change","scrollInto","clickOption","update:modelValue"],setup(t,{emit:e,slots:n}){const r=j(),i=j(t.modelValue.slice(0)),{parent:s}=on(EC),{children:o,linkChildren:a}=En(hC);a();const l=z(()=>dB(t.columnsFieldNames)),c=z(()=>op(t.optionHeight)),d=z(()=>lB(t.columns,l.value)),f=z(()=>{const{columns:E}=t;switch(d.value){case"multiple":return E;case"cascade":return cB(E,l.value,i);default:return[E]}}),m=z(()=>f.value.some(E=>E.length)),g=z(()=>f.value.map((E,S)=>Im(E,i.value[S],l.value))),_=z(()=>f.value.map((E,S)=>E.findIndex(P=>P[l.value.value]===i.value[S]))),T=(E,S)=>{if(i.value[E]!==S){const P=i.value.slice(0);P[E]=S,i.value=P}},b=()=>({selectedValues:i.value.slice(0),selectedOptions:g.value,selectedIndexes:_.value}),C=(E,S)=>{T(S,E),d.value==="cascade"&&i.value.forEach((P,re)=>{const fe=f.value[re];rb(fe,P,l.value)||T(re,fe.length?fe[0][l.value.value]:void 0)}),qe(()=>{e("change",ke({columnIndex:S},b()))})},y=(E,S)=>{const P={columnIndex:S,currentOption:E};e("clickOption",ke(b(),P)),e("scrollInto",P)},A=()=>{o.forEach(S=>S.stopMomentum());const E=b();return qe(()=>{e("confirm",E)}),E},D=()=>e("cancel",b()),x=()=>f.value.map((E,S)=>h(fB,{value:i.value[S],fields:l.value,options:E,readonly:t.readonly,allowHtml:t.allowHtml,optionHeight:c.value,swipeDuration:t.swipeDuration,visibleOptionNum:t.visibleOptionNum,onChange:P=>C(P,S),onClickOption:P=>y(P,S),onScrollInto:P=>{e("scrollInto",{currentOption:P,columnIndex:S})}},{option:n.option})),O=E=>{if(m.value){const S={height:`${c.value}px`},P={backgroundSize:`100% ${(E-c.value)/2}px`};return[h("div",{class:ui("mask"),style:P},null),h("div",{class:[pF,ui("frame")],style:S},null)]}},R=()=>{const E=c.value*+t.visibleOptionNum,S={height:`${E}px`};return!t.loading&&!m.value&&n.empty?n.empty():h("div",{ref:r,class:ui("columns"),style:S},[x(),O(E)])},v=()=>{if(t.showToolbar&&!s)return h(mC,Qe(lt(t,gB),{onConfirm:A,onCancel:D}),lt(n,fC))};he(f,E=>{E.forEach((S,P)=>{S.length&&!rb(S,i.value[P],l.value)&&T(P,uC(S)[l.value.value])})},{immediate:!0});let I;return he(()=>t.modelValue,E=>{!zr(E,i.value)&&!zr(E,I)&&(i.value=E.slice(0),I=E.slice(0))},{deep:!0}),he(i,E=>{zr(E,t.modelValue)||(I=E.slice(0),e("update:modelValue",I))},{immediate:!0}),Vt("touchmove",yt,{target:r}),Je({confirm:A,getSelectedOptions:()=>g.value}),()=>{var E,S;return h("div",{class:ui()},[t.toolbarPosition==="top"?v():null,t.loading?h(cr,{class:ui("loading")},null):null,(E=n["columns-top"])==null?void 0:E.call(n),R(),(S=n["columns-bottom"])==null?void 0:S.call(n),t.toolbarPosition==="bottom"?v():null])}}});const na="000000",zB=["title","cancel","confirm","toolbar","columns-top","columns-bottom"],IC=["title","loading","readonly","optionHeight","swipeDuration","visibleOptionNum","cancelButtonText","confirmButtonText"],Ui=(t="",e=na,n=void 0)=>({text:t,value:e,children:n});function jB({areaList:t,columnsNum:e,columnsPlaceholder:n}){const{city_list:r={},county_list:i={},province_list:s={}}=t,o=+e>1,a=+e>2,l=()=>{if(o)return n.length>1?[Ui(n[1],na,a?[]:void 0)]:[]},c=new Map;Object.keys(s).forEach(m=>{c.set(m.slice(0,2),Ui(s[m],m,l()))});const d=new Map;if(o){const m=()=>{if(a)return n.length>2?[Ui(n[2])]:[]};Object.keys(r).forEach(g=>{const _=Ui(r[g],g,m());d.set(g.slice(0,4),_);const T=c.get(g.slice(0,2));T&&T.children.push(_)})}a&&Object.keys(i).forEach(m=>{const g=d.get(m.slice(0,4));g&&g.children.push(Ui(i[m],m))});const f=Array.from(c.values());if(n.length){const m=a?[Ui(n[2])]:void 0,g=o?[Ui(n[1],na,m)]:void 0;f.unshift(Ui(n[0],na,g))}return f}const gc=oe($B),[HB,qB]=ee("area"),GB=ke({},lt(sh,IC),{modelValue:String,columnsNum:we(3),columnsPlaceholder:At(),areaList:{type:Object,default:()=>({})}});var WB=X({name:HB,props:GB,emits:["change","confirm","cancel","update:modelValue"],setup(t,{emit:e,slots:n}){const r=j([]),i=j(),s=z(()=>jB(t)),o=(...c)=>e("change",...c),a=(...c)=>e("cancel",...c),l=(...c)=>e("confirm",...c);return he(r,c=>{const d=c.length?c[c.length-1]:"";d&&d!==t.modelValue&&e("update:modelValue",d)},{deep:!0}),he(()=>t.modelValue,c=>{if(c){const d=r.value.length?r.value[r.value.length-1]:"";c!==d&&(r.value=[`${c.slice(0,2)}0000`,`${c.slice(0,4)}00`,c].slice(0,+t.columnsNum))}else r.value=[]},{immediate:!0}),Je({confirm:()=>{var c;return(c=i.value)==null?void 0:c.confirm()},getSelectedOptions:()=>{var c;return((c=i.value)==null?void 0:c.getSelectedOptions())||[]}}),()=>h(gc,Qe({ref:i,modelValue:r.value,"onUpdate:modelValue":c=>r.value=c,class:qB(),columns:s.value,onChange:o,onCancel:a,onConfirm:l},lt(t,IC)),lt(n,zB))}});const CC=oe(WB),[KB,Ao]=ee("cell"),oh={tag:le("div"),icon:String,size:String,title:ie,value:ie,label:ie,center:Boolean,isLink:Boolean,border:Q,iconPrefix:String,valueClass:Rt,labelClass:Rt,titleClass:Rt,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},YB=ke({},oh,Ss);var QB=X({name:KB,props:YB,setup(t,{slots:e}){const n=po(),r=()=>{if(e.label||it(t.label))return h("div",{class:[Ao("label"),t.labelClass]},[e.label?e.label():t.label])},i=()=>{var l;if(e.title||it(t.title)){const c=(l=e.title)==null?void 0:l.call(e);return Array.isArray(c)&&c.length===0?void 0:h("div",{class:[Ao("title"),t.titleClass],style:t.titleStyle},[c||h("span",null,[t.title]),r()])}},s=()=>{const l=e.value||e.default;if(l||it(t.value))return h("div",{class:[Ao("value"),t.valueClass]},[l?l():h("span",null,[t.value])])},o=()=>{if(e.icon)return e.icon();if(t.icon)return h(je,{name:t.icon,class:Ao("left-icon"),classPrefix:t.iconPrefix},null)},a=()=>{if(e["right-icon"])return e["right-icon"]();if(t.isLink){const l=t.arrowDirection&&t.arrowDirection!=="right"?`arrow-${t.arrowDirection}`:"arrow";return h(je,{name:l,class:Ao("right-icon")},null)}};return()=>{var l;const{tag:c,size:d,center:f,border:m,isLink:g,required:_}=t,T=(l=t.clickable)!=null?l:g,b={center:f,required:!!_,clickable:T,borderless:!m};return d&&(b[d]=!!d),h(c,{class:Ao(b),role:T?"button":void 0,tabindex:T?0:void 0,onClick:n},{default:()=>{var C;return[o(),i(),s(),a(),(C=e.extra)==null?void 0:C.call(e)]}})}}});const Rr=oe(QB),[XB,JB]=ee("form"),ZB={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:ie,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:Q,showErrorMessage:Q,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var eU=X({name:XB,props:ZB,emits:["submit","failed"],setup(t,{emit:e,slots:n}){const{children:r,linkChildren:i}=En(XI),s=b=>b?r.filter(C=>b.includes(C.name)):r,o=b=>new Promise((C,y)=>{const A=[];s(b).reduce((x,O)=>x.then(()=>{if(!A.length)return O.validate().then(R=>{R&&A.push(R)})}),Promise.resolve()).then(()=>{A.length?y(A):C()})}),a=b=>new Promise((C,y)=>{const A=s(b);Promise.all(A.map(D=>D.validate())).then(D=>{D=D.filter(Boolean),D.length?y(D):C()})}),l=b=>{const C=r.find(y=>y.name===b);return C?new Promise((y,A)=>{C.validate().then(D=>{D?A(D):y()})}):Promise.reject()},c=b=>typeof b=="string"?l(b):t.validateFirst?o(b):a(b),d=b=>{typeof b=="string"&&(b=[b]),s(b).forEach(y=>{y.resetValidation()})},f=()=>r.reduce((b,C)=>(b[C.name]=C.getValidationStatus(),b),{}),m=(b,C)=>{r.some(y=>y.name===b?(y.$el.scrollIntoView(C),!0):!1)},g=()=>r.reduce((b,C)=>(C.name!==void 0&&(b[C.name]=C.formValue.value),b),{}),_=()=>{const b=g();c().then(()=>e("submit",b)).catch(C=>{e("failed",{values:b,errors:C});const{scrollToError:y,scrollToErrorPosition:A}=t;y&&C[0].name&&m(C[0].name,A?{block:A}:void 0)})},T=b=>{yt(b),_()};return i({props:t}),Je({submit:_,validate:c,getValues:g,scrollToField:m,resetValidation:d,getValidationStatus:f}),()=>{var b;return h("form",{class:JB(),onSubmit:T},[(b=n.default)==null?void 0:b.call(n)])}}});const fp=oe(eU);function SC(t){return Array.isArray(t)?!t.length:t===0?!1:!t}function tU(t,e){if(SC(t)){if(e.required)return!1;if(e.validateEmpty===!1)return!0}return!(e.pattern&&!e.pattern.test(String(t)))}function nU(t,e){return new Promise(n=>{const r=e.validator(t,e);if(rp(r)){r.then(n);return}n(r)})}function lb(t,e){const{message:n}=e;return ma(n)?n(t,e):n||""}function rU({target:t}){t.composing=!0}function cb({target:t}){t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}function iU(t,e){const n=Ks();t.style.height="auto";let r=t.scrollHeight;if(Ii(e)){const{maxHeight:i,minHeight:s}=e;i!==void 0&&(r=Math.min(r,i)),s!==void 0&&(r=Math.max(r,s))}r&&(t.style.height=`${r}px`,Wl(n))}function sU(t,e){return t==="number"&&(t="text",e??(e="decimal")),t==="digit"&&(t="tel",e??(e="numeric")),{type:t,inputmode:e}}function ei(t){return[...t].length}function ff(t,e){return[...t].slice(0,e).join("")}const[oU,Zn]=ee("field"),mp={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:ie,max:Number,min:Number,formatter:Function,clearIcon:le("clear"),modelValue:we(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:le("focus"),formatTrigger:le("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String},aU=ke({},oh,mp,{rows:ie,type:le("text"),rules:Array,autosize:[Boolean,Object],labelWidth:ie,labelClass:Rt,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var lU=X({name:oU,props:aU,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(t,{emit:e,slots:n}){const r=Pa(),i=Ct({status:"unvalidated",focused:!1,validateMessage:""}),s=j(),o=j(),a=j(),{parent:l}=on(XI),c=()=>{var L;return String((L=t.modelValue)!=null?L:"")},d=L=>{if(it(t[L]))return t[L];if(l&&it(l.props[L]))return l.props[L]},f=z(()=>{const L=d("readonly");if(t.clearable&&!L){const q=c()!=="",G=t.clearTrigger==="always"||t.clearTrigger==="focus"&&i.focused;return q&&G}return!1}),m=z(()=>a.value&&n.input?a.value():t.modelValue),g=z(()=>{var L;const q=d("required");return q==="auto"?(L=t.rules)==null?void 0:L.some(G=>G.required):q}),_=L=>L.reduce((q,G)=>q.then(()=>{if(i.status==="failed")return;let{value:ae}=m;if(G.formatter&&(ae=G.formatter(ae,G)),!tU(ae,G)){i.status="failed",i.validateMessage=lb(ae,G);return}if(G.validator)return SC(ae)&&G.validateEmpty===!1?void 0:nU(ae,G).then(Re=>{Re&&typeof Re=="string"?(i.status="failed",i.validateMessage=Re):Re===!1&&(i.status="failed",i.validateMessage=lb(ae,G))})}),Promise.resolve()),T=()=>{i.status="unvalidated",i.validateMessage=""},b=()=>e("endValidate",{status:i.status,message:i.validateMessage}),C=(L=t.rules)=>new Promise(q=>{T(),L?(e("startValidate"),_(L).then(()=>{i.status==="failed"?(q({name:t.name,message:i.validateMessage}),b()):(i.status="passed",q(),b())})):q()}),y=L=>{if(l&&t.rules){const{validateTrigger:q}=l.props,G=nd(q).includes(L),ae=t.rules.filter(Re=>Re.trigger?nd(Re.trigger).includes(L):G);ae.length&&C(ae)}},A=L=>{var q;const{maxlength:G}=t;if(it(G)&&ei(L)>+G){const ae=c();if(ae&&ei(ae)===+G)return ae;const Re=(q=s.value)==null?void 0:q.selectionEnd;if(i.focused&&Re){const N=[...L],M=N.length-+G;return N.splice(Re-M,M),N.join("")}return ff(L,+G)}return L},D=(L,q="onChange")=>{var G,ae;const Re=L;L=A(L);const N=ei(Re)-ei(L);if(t.type==="number"||t.type==="digit"){const U=t.type==="number";L=Tm(L,U,U),q==="onBlur"&&L!==""&&(t.min!==void 0||t.max!==void 0)&&(L=qt(+L,(G=t.min)!=null?G:-1/0,(ae=t.max)!=null?ae:1/0).toString())}let M=0;if(t.formatter&&q===t.formatTrigger){const{formatter:U,maxlength:K}=t;if(L=U(L),it(K)&&ei(L)>+K&&(L=ff(L,+K)),s.value&&i.focused){const{selectionEnd:Z}=s.value,J=ff(Re,Z);M=ei(U(J))-ei(J)}}if(s.value&&s.value.value!==L)if(i.focused){let{selectionStart:U,selectionEnd:K}=s.value;if(s.value.value=L,it(U)&&it(K)){const Z=ei(L);N?(U-=N,K-=N):M&&(U+=M,K+=M),s.value.setSelectionRange(Math.min(U,Z),Math.min(K,Z))}}else s.value.value=L;L!==t.modelValue&&e("update:modelValue",L)},x=L=>{L.target.composing||D(L.target.value)},O=()=>{var L;return(L=s.value)==null?void 0:L.blur()},R=()=>{var L;return(L=s.value)==null?void 0:L.focus()},v=()=>{const L=s.value;t.type==="textarea"&&t.autosize&&L&&iU(L,t.autosize)},I=L=>{i.focused=!0,e("focus",L),qe(v),d("readonly")&&O()},k=L=>{i.focused=!1,D(c(),"onBlur"),e("blur",L),!d("readonly")&&(y("onBlur"),qe(v),HI())},E=L=>e("clickInput",L),S=L=>e("clickLeftIcon",L),P=L=>e("clickRightIcon",L),re=L=>{yt(L),e("update:modelValue",""),e("clear",L)},fe=z(()=>{if(typeof t.error=="boolean")return t.error;if(l&&l.props.showError&&i.status==="failed")return!0}),Y=z(()=>{const L=d("labelWidth"),q=d("labelAlign");if(L&&q!=="top")return{width:ze(L)}}),de=L=>{L.keyCode===13&&(!(l&&l.props.submitOnEnter)&&t.type!=="textarea"&&yt(L),t.type==="search"&&O()),e("keypress",L)},me=()=>t.id||`${r}-input`,Ue=()=>i.status,Xe=()=>{const L=Zn("control",[d("inputAlign"),{error:fe.value,custom:!!n.input,"min-height":t.type==="textarea"&&!t.autosize}]);if(n.input)return h("div",{class:L,onClick:E},[n.input()]);const q={id:me(),ref:s,name:t.name,rows:t.rows!==void 0?+t.rows:void 0,class:L,disabled:d("disabled"),readonly:d("readonly"),autofocus:t.autofocus,placeholder:t.placeholder,autocomplete:t.autocomplete,autocapitalize:t.autocapitalize,autocorrect:t.autocorrect,enterkeyhint:t.enterkeyhint,spellcheck:t.spellcheck,"aria-labelledby":t.label?`${r}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:k,onFocus:I,onInput:x,onClick:E,onChange:cb,onKeypress:de,onCompositionend:cb,onCompositionstart:rU};return t.type==="textarea"?h("textarea",Qe(q,{inputmode:t.inputmode}),null):h("input",Qe(sU(t.type,t.inputmode),q),null)},H=()=>{const L=n["left-icon"];if(t.leftIcon||L)return h("div",{class:Zn("left-icon"),onClick:S},[L?L():h(je,{name:t.leftIcon,classPrefix:t.iconPrefix},null)])},te=()=>{const L=n["right-icon"];if(t.rightIcon||L)return h("div",{class:Zn("right-icon"),onClick:P},[L?L():h(je,{name:t.rightIcon,classPrefix:t.iconPrefix},null)])},ge=()=>{if(t.showWordLimit&&t.maxlength){const L=ei(c());return h("div",{class:Zn("word-limit")},[h("span",{class:Zn("word-num")},[L]),Ie("/"),t.maxlength])}},Ae=()=>{if(l&&l.props.showErrorMessage===!1)return;const L=t.errorMessage||i.validateMessage;if(L){const q=n["error-message"],G=d("errorMessageAlign");return h("div",{class:Zn("error-message",G)},[q?q({message:L}):L])}},ce=()=>{const L=d("labelWidth"),q=d("labelAlign"),G=d("colon")?":":"";if(n.label)return[n.label(),G];if(t.label)return h("label",{id:`${r}-label`,for:n.input?void 0:me(),"data-allow-mismatch":"attribute",onClick:ae=>{yt(ae),R()},style:q==="top"&&L?{width:ze(L)}:void 0},[t.label+G])},Ee=()=>[h("div",{class:Zn("body")},[Xe(),f.value&&h(je,{ref:o,name:t.clearIcon,class:Zn("clear")},null),te(),n.button&&h("div",{class:Zn("button")},[n.button()])]),ge(),Ae()];return Je({blur:O,focus:R,validate:C,formValue:m,resetValidation:T,getValidationStatus:Ue}),mi(jI,{customValue:a,resetValidation:T,validateWithTrigger:y}),he(()=>t.modelValue,()=>{D(c()),T(),y("onChange"),qe(v)}),Lt(()=>{D(c(),t.formatTrigger),qe(v)}),Vt("touchstart",re,{target:z(()=>{var L;return(L=o.value)==null?void 0:L.$el})}),()=>{const L=d("disabled"),q=d("labelAlign"),G=H(),ae=()=>{const Re=ce();return q==="top"?[G,Re].filter(Boolean):Re||[]};return h(Rr,{size:t.size,class:Zn({error:fe.value,disabled:L,[`label-${q}`]:q}),center:t.center,border:t.border,isLink:t.isLink,clickable:t.clickable,titleStyle:Y.value,valueClass:Zn("value"),titleClass:[Zn("label",[q,{required:g.value}]),t.labelClass],arrowDirection:t.arrowDirection},{icon:G&&q!=="top"?()=>G:null,title:ae,value:Ee,extra:n.extra})}}});const _i=oe(lU);let Qa=0;function cU(t){t?(Qa||document.body.classList.add("van-toast--unclickable"),Qa++):Qa&&(Qa--,Qa||document.body.classList.remove("van-toast--unclickable"))}const[uU,ko]=ee("toast"),dU=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],hU={icon:String,show:Boolean,type:le("text"),overlay:Boolean,message:ie,iconSize:ie,duration:Bt(2e3),position:le("middle"),teleport:[String,Object],wordBreak:String,className:Rt,iconPrefix:String,transition:le("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:Rt,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:ie};var AC=X({name:uU,props:hU,emits:["update:show"],setup(t,{emit:e,slots:n}){let r,i=!1;const s=()=>{const f=t.show&&t.forbidClick;i!==f&&(i=f,cU(i))},o=f=>e("update:show",f),a=()=>{t.closeOnClick&&o(!1)},l=()=>clearTimeout(r),c=()=>{const{icon:f,type:m,iconSize:g,iconPrefix:_,loadingType:T}=t;if(f||m==="success"||m==="fail")return h(je,{name:f||m,size:g,class:ko("icon"),classPrefix:_},null);if(m==="loading")return h(cr,{class:ko("loading"),size:g,type:T},null)},d=()=>{const{type:f,message:m}=t;if(n.message)return h("div",{class:ko("text")},[n.message()]);if(it(m)&&m!=="")return f==="html"?h("div",{key:0,class:ko("text"),innerHTML:String(m)},null):h("div",{class:ko("text")},[m])};return he(()=>[t.show,t.forbidClick],s),he(()=>[t.show,t.type,t.message,t.duration],()=>{l(),t.show&&t.duration>0&&(r=setTimeout(()=>{o(!1)},t.duration))}),Lt(s),ba(s),()=>h(kr,Qe({class:[ko([t.position,t.wordBreak==="normal"?"break-normal":t.wordBreak,{[t.type]:!t.icon}]),t.className],lockScroll:!1,onClick:a,onClosed:l,"onUpdate:show":o},lt(t,dU)),{default:()=>[c(),d()]})}});function gp(){const t=Ct({show:!1}),e=i=>{t.show=i},n=i=>{ke(t,i,{transitionAppear:!0}),e(!0)},r=()=>e(!1);return Je({open:n,close:r,toggle:e}),{open:n,close:r,state:t,toggle:e}}function pp(t){const e=P0(t),n=document.createElement("div");return document.body.appendChild(n),{instance:e.mount(n),unmount(){e.unmount(),document.body.removeChild(n)}}}const fU={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let Xc=[],mU=!1,ub=ke({},fU);const gU=new Map;function kC(t){return Ii(t)?t:{message:t}}function pU(){const{instance:t,unmount:e}=pp({setup(){const n=j(""),{open:r,state:i,close:s,toggle:o}=gp(),a=()=>{},l=()=>h(AC,Qe(i,{onClosed:a,"onUpdate:show":o}),null);return he(n,c=>{i.message=c}),Ar().render=l,{open:r,close:s,message:n}}});return t}function vU(){if(!Xc.length||mU){const t=pU();Xc.push(t)}return Xc[Xc.length-1]}function nt(t={}){if(!Kn)return{};const e=vU(),n=kC(t);return e.open(ke({},ub,gU.get(n.type||ub.type),n)),e}const RC=t=>e=>nt(ke({type:t},kC(e))),ar=RC("success"),qo=RC("fail"),PC=oe(AC),[_U,mf]=ee("switch"),yU={size:ie,loading:Boolean,disabled:Boolean,modelValue:Rt,activeColor:String,inactiveColor:String,activeValue:{type:Rt,default:!0},inactiveValue:{type:Rt,default:!1}};var bU=X({name:_U,props:yU,emits:["change","update:modelValue"],setup(t,{emit:e,slots:n}){const r=()=>t.modelValue===t.activeValue,i=()=>{if(!t.disabled&&!t.loading){const o=r()?t.inactiveValue:t.activeValue;e("update:modelValue",o),e("change",o)}},s=()=>{if(t.loading){const o=r()?t.activeColor:t.inactiveColor;return h(cr,{class:mf("loading"),color:o},null)}if(n.node)return n.node()};return Is(()=>t.modelValue),()=>{var o;const{size:a,loading:l,disabled:c,activeColor:d,inactiveColor:f}=t,m=r(),g={fontSize:ze(a),backgroundColor:m?d:f};return h("div",{role:"switch",class:mf({on:m,loading:l,disabled:c}),style:g,tabindex:c?void 0:0,"aria-checked":m,onClick:i},[h("div",{class:mf("node")},[s()]),(o=n.background)==null?void 0:o.call(n)])}}});const vp=oe(bU),[wU,db]=ee("address-edit-detail"),hb=ee("address-edit")[2];var TU=X({name:wU,props:{show:Boolean,rows:ie,value:String,rules:Array,focused:Boolean,maxlength:ie,searchResult:Array,showSearchResult:Boolean},emits:["blur","focus","input","selectSearch"],setup(t,{emit:e}){const n=j(),r=()=>t.focused&&t.searchResult&&t.showSearchResult,i=c=>{e("selectSearch",c),e("input",`${c.address||""} ${c.name||""}`.trim())},s=()=>{if(!r())return;const{searchResult:c}=t;return c.map(d=>h(Rr,{clickable:!0,key:(d.name||"")+(d.address||""),icon:"location-o",title:d.name,label:d.address,class:db("search-item"),border:!1,onClick:()=>i(d)},null))},o=c=>e("blur",c),a=c=>e("focus",c),l=c=>e("input",c);return()=>{if(t.show)return h(rt,null,[h(_i,{autosize:!0,clearable:!0,ref:n,class:db(),rows:t.rows,type:"textarea",rules:t.rules,label:hb("addressDetail"),border:!r(),maxlength:t.maxlength,modelValue:t.value,placeholder:hb("addressDetail"),onBlur:o,onFocus:a,"onUpdate:modelValue":l},null),s()])}}});const[EU,Ro,Sn]=ee("address-edit"),xC={name:"",tel:"",city:"",county:"",country:"",province:"",areaCode:"",isDefault:!1,addressDetail:""},IU={areaList:Object,isSaving:Boolean,isDeleting:Boolean,validator:Function,showArea:Q,showDetail:Q,showDelete:Boolean,disableArea:Boolean,searchResult:Array,telMaxlength:ie,showSetDefault:Boolean,saveButtonText:String,areaPlaceholder:String,deleteButtonText:String,showSearchResult:Boolean,detailRows:we(1),detailMaxlength:we(200),areaColumnsPlaceholder:At(),addressInfo:{type:Object,default:()=>ke({},xC)},telValidator:{type:Function,default:UI}};var CU=X({name:EU,props:IU,emits:["save","focus","change","delete","clickArea","changeArea","changeDetail","selectSearch","changeDefault"],setup(t,{emit:e,slots:n}){const r=j(),i=Ct({}),s=j(!1),o=j(!1),a=z(()=>Ii(t.areaList)&&Object.keys(t.areaList).length),l=z(()=>{const{province:O,city:R,county:v,areaCode:I}=i;if(I){const k=[O,R,v];return O&&O===R&&k.splice(1,1),k.filter(Boolean).join("/")}return""}),c=z(()=>{var O;return((O=t.searchResult)==null?void 0:O.length)&&o.value}),d=O=>{o.value=O==="addressDetail",e("focus",O)},f=(O,R)=>{e("change",{key:O,value:R})},m=z(()=>{const{validator:O,telValidator:R}=t,v=(I,k)=>({validator:E=>{if(O){const S=O(I,E);if(S)return S}return E?!0:k}});return{name:[v("name",Sn("nameEmpty"))],tel:[v("tel",Sn("telInvalid")),{validator:R,message:Sn("telInvalid")}],areaCode:[v("areaCode",Sn("areaEmpty"))],addressDetail:[v("addressDetail",Sn("addressEmpty"))]}}),g=()=>e("save",i),_=O=>{i.addressDetail=O,e("changeDetail",O)},T=O=>{i.province=O[0].text,i.city=O[1].text,i.county=O[2].text},b=({selectedValues:O,selectedOptions:R})=>{O.some(v=>v===na)?nt(Sn("areaEmpty")):(s.value=!1,T(R),e("changeArea",R))},C=()=>e("delete",i),y=O=>{i.areaCode=O||""},A=()=>{setTimeout(()=>{o.value=!1})},D=O=>{i.addressDetail=O},x=()=>{if(t.showSetDefault){const O={"right-icon":()=>h(vp,{modelValue:i.isDefault,"onUpdate:modelValue":R=>i.isDefault=R,onChange:R=>e("changeDefault",R)},null)};return Wt(h(Rr,{center:!0,border:!1,title:Sn("defaultAddress"),class:Ro("default")},O),[[rn,!c.value]])}};return Je({setAreaCode:y,setAddressDetail:D}),he(()=>t.addressInfo,O=>{ke(i,xC,O),qe(()=>{var R;const v=(R=r.value)==null?void 0:R.getSelectedOptions();v&&v.every(I=>I&&I.value!==na)&&T(v)})},{deep:!0,immediate:!0}),()=>{const{disableArea:O}=t;return h(fp,{class:Ro(),onSubmit:g},{default:()=>{var R;return[h("div",{class:Ro("fields")},[h(_i,{modelValue:i.name,"onUpdate:modelValue":[v=>i.name=v,v=>f("name",v)],clearable:!0,label:Sn("name"),rules:m.value.name,placeholder:Sn("name"),onFocus:()=>d("name")},null),h(_i,{modelValue:i.tel,"onUpdate:modelValue":[v=>i.tel=v,v=>f("tel",v)],clearable:!0,type:"tel",label:Sn("tel"),rules:m.value.tel,maxlength:t.telMaxlength,placeholder:Sn("tel"),onFocus:()=>d("tel")},null),Wt(h(_i,{readonly:!0,label:Sn("area"),"is-link":!O,modelValue:l.value,rules:t.showArea?m.value.areaCode:void 0,placeholder:t.areaPlaceholder||Sn("area"),onFocus:()=>d("areaCode"),onClick:()=>{e("clickArea"),s.value=!O}},null),[[rn,t.showArea]]),h(TU,{show:t.showDetail,rows:t.detailRows,rules:m.value.addressDetail,value:i.addressDetail,focused:o.value,maxlength:t.detailMaxlength,searchResult:t.searchResult,showSearchResult:t.showSearchResult,onBlur:A,onFocus:()=>d("addressDetail"),onInput:_,onSelectSearch:v=>e("selectSearch",v)},null),(R=n.default)==null?void 0:R.call(n)]),x(),Wt(h("div",{class:Ro("buttons")},[h(Tn,{block:!0,round:!0,type:"primary",text:t.saveButtonText||Sn("save"),class:Ro("button"),loading:t.isSaving,nativeType:"submit"},null),t.showDelete&&h(Tn,{block:!0,round:!0,class:Ro("button"),loading:t.isDeleting,text:t.deleteButtonText||Sn("delete"),onClick:C},null)]),[[rn,!c.value]]),h(kr,{show:s.value,"onUpdate:show":v=>s.value=v,round:!0,teleport:"body",position:"bottom",lazyRender:!1},{default:()=>[h(CC,{modelValue:i.areaCode,"onUpdate:modelValue":v=>i.areaCode=v,ref:r,loading:!a.value,areaList:t.areaList,columnsPlaceholder:t.areaColumnsPlaceholder,onConfirm:b,onCancel:()=>{s.value=!1}},null)]})]}})}}});const DC=oe(CU),[OC,SU]=ee("radio-group"),AU={shape:String,disabled:Boolean,iconSize:ie,direction:String,modelValue:Rt,checkedColor:String},VC=Symbol(OC);var kU=X({name:OC,props:AU,emits:["change","update:modelValue"],setup(t,{emit:e,slots:n}){const{linkChildren:r}=En(VC),i=s=>e("update:modelValue",s);return he(()=>t.modelValue,s=>e("change",s)),r({props:t,updateValue:i}),Is(()=>t.modelValue),()=>{var s;return h("div",{class:SU([t.direction]),role:"radiogroup"},[(s=n.default)==null?void 0:s.call(n)])}}});const _p=oe(kU),[LC,RU]=ee("checkbox-group"),PU={max:ie,shape:le("round"),disabled:Boolean,iconSize:ie,direction:String,modelValue:At(),checkedColor:String},NC=Symbol(LC);var xU=X({name:LC,props:PU,emits:["change","update:modelValue"],setup(t,{emit:e,slots:n}){const{children:r,linkChildren:i}=En(NC),s=a=>e("update:modelValue",a),o=(a={})=>{typeof a=="boolean"&&(a={checked:a});const{checked:l,skipDisabled:c}=a,f=r.filter(m=>m.props.bindGroup?m.props.disabled&&c?m.checked.value:l??!m.checked.value:!1).map(m=>m.name);s(f)};return he(()=>t.modelValue,a=>e("change",a)),Je({toggleAll:o}),Is(()=>t.modelValue),i({props:t,updateValue:s}),()=>{var a;return h("div",{class:RU([t.direction])},[(a=n.default)==null?void 0:a.call(n)])}}});const yp=oe(xU),[DU,fb]=ee("tag"),OU={size:String,mark:Boolean,show:Q,type:le("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var VU=X({name:DU,props:OU,emits:["close"],setup(t,{slots:e,emit:n}){const r=o=>{o.stopPropagation(),n("close",o)},i=()=>t.plain?{color:t.textColor||t.color,borderColor:t.color}:{color:t.textColor,background:t.color},s=()=>{var o;const{type:a,mark:l,plain:c,round:d,size:f,closeable:m}=t,g={mark:l,plain:c,round:d};f&&(g[f]=f);const _=m&&h(je,{name:"cross",class:[fb("close"),wn],onClick:r},null);return h("span",{style:i(),class:fb([g,a])},[(o=e.default)==null?void 0:o.call(e),_])};return()=>h(ec,{name:t.closeable?"van-fade":void 0},{default:()=>[t.show?s():null]})}});const ah=oe(VU),bp={name:Rt,disabled:Boolean,iconSize:ie,modelValue:Rt,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var MC=X({props:ke({},bp,{bem:Gt(Function),role:String,shape:String,parent:Object,checked:Boolean,bindGroup:Q,indeterminate:{type:Boolean,default:null}}),emits:["click","toggle"],setup(t,{emit:e,slots:n}){const r=j(),i=m=>{if(t.parent&&t.bindGroup)return t.parent.props[m]},s=z(()=>{if(t.parent&&t.bindGroup){const m=i("disabled")||t.disabled;if(t.role==="checkbox"){const g=i("modelValue").length,_=i("max"),T=_&&g>=+_;return m||T&&!t.checked}return m}return t.disabled}),o=z(()=>i("direction")),a=z(()=>{const m=t.checkedColor||i("checkedColor");if(m&&t.checked&&!s.value)return{borderColor:m,backgroundColor:m}}),l=z(()=>t.shape||i("shape")||"round"),c=m=>{const{target:g}=m,_=r.value,T=_===g||(_==null?void 0:_.contains(g));!s.value&&(T||!t.labelDisabled)&&e("toggle"),e("click",m)},d=()=>{var m,g;const{bem:_,checked:T,indeterminate:b}=t,C=t.iconSize||i("iconSize");return h("div",{ref:r,class:_("icon",[l.value,{disabled:s.value,checked:T,indeterminate:b}]),style:l.value!=="dot"?{fontSize:ze(C)}:{width:ze(C),height:ze(C),borderColor:(m=a.value)==null?void 0:m.borderColor}},[n.icon?n.icon({checked:T,disabled:s.value}):l.value!=="dot"?h(je,{name:b?"minus":"success",style:a.value},null):h("div",{class:_("icon--dot__icon"),style:{backgroundColor:(g=a.value)==null?void 0:g.backgroundColor}},null)])},f=()=>{const{checked:m}=t;if(n.default)return h("span",{class:t.bem("label",[t.labelPosition,{disabled:s.value}])},[n.default({checked:m,disabled:s.value})])};return()=>{const m=t.labelPosition==="left"?[f(),d()]:[d(),f()];return h("div",{role:t.role,class:t.bem([{disabled:s.value,"label-disabled":t.labelDisabled},o.value]),tabindex:s.value?void 0:0,"aria-checked":t.checked,onClick:c},[m])}}});const LU=ke({},bp,{shape:String}),[NU,MU]=ee("radio");var FU=X({name:NU,props:LU,emits:["update:modelValue"],setup(t,{emit:e,slots:n}){const{parent:r}=on(VC),i=()=>(r?r.props.modelValue:t.modelValue)===t.name,s=()=>{r?r.updateValue(t.name):e("update:modelValue",t.name)};return()=>h(MC,Qe({bem:MU,role:"radio",parent:r,checked:i(),onToggle:s},t),lt(n,["default","icon"]))}});const wp=oe(FU),[BU,UU]=ee("checkbox"),$U=ke({},bp,{shape:String,bindGroup:Q,indeterminate:{type:Boolean,default:null}});var zU=X({name:BU,props:$U,emits:["change","update:modelValue"],setup(t,{emit:e,slots:n}){const{parent:r}=on(NC),i=a=>{const{name:l}=t,{max:c,modelValue:d}=r.props,f=d.slice();if(a)!(c&&f.length>=+c)&&!f.includes(l)&&(f.push(l),t.bindGroup&&r.updateValue(f));else{const m=f.indexOf(l);m!==-1&&(f.splice(m,1),t.bindGroup&&r.updateValue(f))}},s=z(()=>r&&t.bindGroup?r.props.modelValue.indexOf(t.name)!==-1:!!t.modelValue),o=(a=!s.value)=>{r&&t.bindGroup?i(a):e("update:modelValue",a),t.indeterminate!==null&&e("change",a)};return he(()=>t.modelValue,a=>{t.indeterminate===null&&e("change",a)}),Je({toggle:o,props:t,checked:s}),Is(()=>t.modelValue),()=>h(MC,Qe({bem:UU,role:"checkbox",parent:r,checked:s.value,onToggle:o},t),lt(n,["default","icon"]))}});const lh=oe(zU),[jU,Po]=ee("address-item");var HU=X({name:jU,props:{address:Gt(Object),disabled:Boolean,switchable:Boolean,singleChoice:Boolean,defaultTagText:String,rightIcon:le("edit")},emits:["edit","click","select"],setup(t,{slots:e,emit:n}){const r=a=>{t.switchable&&n("select"),n("click",a)},i=()=>h(je,{name:t.rightIcon,class:Po("edit"),onClick:a=>{a.stopPropagation(),n("edit"),n("click",a)}},null),s=()=>{if(e.tag)return e.tag(t.address);if(t.address.isDefault&&t.defaultTagText)return h(ah,{type:"primary",round:!0,class:Po("tag")},{default:()=>[t.defaultTagText]})},o=()=>{const{address:a,disabled:l,switchable:c,singleChoice:d}=t,f=[h("div",{class:Po("name")},[`${a.name} ${a.tel}`,s()]),h("div",{class:Po("address")},[a.address])];return c&&!l?d?h(wp,{name:a.id,iconSize:18},{default:()=>[f]}):h(lh,{name:a.id,iconSize:18},{default:()=>[f]}):f};return()=>{var a;const{disabled:l}=t;return h("div",{class:Po({disabled:l}),onClick:r},[h(Rr,{border:!1,titleClass:Po("title")},{title:o,"right-icon":i}),(a=e.bottom)==null?void 0:a.call(e,ke({},t.address,{disabled:l}))])}}});const[qU,Jc,GU]=ee("address-list"),WU={list:At(),modelValue:[...ie,Array],switchable:Q,disabledText:String,disabledList:At(),showAddButton:Q,addButtonText:String,defaultTagText:String,rightIcon:le("edit")};var KU=X({name:qU,props:WU,emits:["add","edit","select","clickItem","editDisabled","selectDisabled","update:modelValue"],setup(t,{slots:e,emit:n}){const r=z(()=>!Array.isArray(t.modelValue)),i=(a,l,c)=>{const d=()=>n(c?"editDisabled":"edit",a,l),f=g=>n("clickItem",a,l,{event:g}),m=()=>{if(n(c?"selectDisabled":"select",a,l),!c)if(r.value)n("update:modelValue",a.id);else{const g=t.modelValue;g.includes(a.id)?n("update:modelValue",g.filter(_=>_!==a.id)):n("update:modelValue",[...g,a.id])}};return h(HU,{key:a.id,address:a,disabled:c,switchable:t.switchable,singleChoice:r.value,defaultTagText:t.defaultTagText,rightIcon:t.rightIcon,onEdit:d,onClick:f,onSelect:m},{bottom:e["item-bottom"],tag:e.tag})},s=(a,l)=>{if(a)return a.map((c,d)=>i(c,d,l))},o=()=>t.showAddButton?h("div",{class:[Jc("bottom"),"van-safe-area-bottom"]},[h(Tn,{round:!0,block:!0,type:"primary",text:t.addButtonText||GU("add"),class:Jc("add"),onClick:()=>n("add")},null)]):void 0;return()=>{var a,l;const c=s(t.list),d=s(t.disabledList,!0),f=t.disabledText&&h("div",{class:Jc("disabled-text")},[t.disabledText]);return h("div",{class:Jc()},[(a=e.top)==null?void 0:a.call(e),!r.value&&Array.isArray(t.modelValue)?h(yp,{modelValue:t.modelValue},{default:()=>[c]}):h(_p,{modelValue:t.modelValue},{default:()=>[c]}),f,d,(l=e.default)==null?void 0:l.call(e),o()])}}});const FC=oe(KU);function YU(t,e){let n=null,r=0;return function(...i){if(n)return;const s=Date.now()-r,o=()=>{r=Date.now(),n=!1,t.apply(this,i)};s>=e?o():n=setTimeout(o,e)}}const[QU,gf]=ee("back-top"),XU={right:ie,bottom:ie,zIndex:ie,target:[String,Object],offset:we(200),immediate:Boolean,teleport:{type:[String,Object],default:"body"}};var JU=X({name:QU,inheritAttrs:!1,props:XU,emits:["click"],setup(t,{emit:e,slots:n,attrs:r}){let i=!1;const s=j(!1),o=j(),a=j(),l=z(()=>ke(xi(t.zIndex),{right:ze(t.right),bottom:ze(t.bottom)})),c=g=>{var _;e("click",g),(_=a.value)==null||_.scrollTo({top:0,behavior:t.immediate?"auto":"smooth"})},d=()=>{s.value=a.value?Ci(a.value)>=+t.offset:!1},f=()=>{const{target:g}=t;if(typeof g=="string"){const _=document.querySelector(g);if(_)return _}else return g},m=()=>{Kn&&qe(()=>{a.value=t.target?f():ip(o.value),d()})};return Vt("scroll",YU(d,100),{target:a}),Lt(m),Gr(()=>{i&&(s.value=!0,i=!1)}),Wr(()=>{s.value&&t.teleport&&(s.value=!1,i=!0)}),he(()=>t.target,m),()=>{const g=h("div",Qe({ref:t.teleport?void 0:o,class:gf({active:s.value}),style:l.value,onClick:c},r),[n.default?n.default():h(je,{name:"back-top",class:gf("icon")},null)]);return t.teleport?[h("div",{ref:o,class:gf("placeholder")},null),h(ao,{to:t.teleport},{default:()=>[g]})]:g}}});const ZU=oe(JU);var e$=(t,e,n)=>new Promise((r,i)=>{var s=l=>{try{a(n.next(l))}catch(c){i(c)}},o=l=>{try{a(n.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(t,e)).next())});const t$={top:we(10),rows:we(4),duration:we(4e3),autoPlay:Q,delay:Bt(300),modelValue:At()},[n$,mb]=ee("barrage");var r$=X({name:n$,props:t$,emits:["update:modelValue"],setup(t,{emit:e,slots:n}){const r=j(),i=mb("item"),s=j(0),o=[],a=(T,b=t.delay)=>{const C=document.createElement("span");return C.className=i,C.innerText=String(T),C.style.animationDuration=`${t.duration}ms`,C.style.animationDelay=`${b}ms`,C.style.animationName="van-barrage",C.style.animationTimingFunction="linear",C},l=j(!0),c=j(t.autoPlay),d=({id:T,text:b},C)=>{var y;const A=a(b,l.value?C*t.delay:void 0);!t.autoPlay&&c.value===!1&&(A.style.animationPlayState="paused"),(y=r.value)==null||y.append(A),s.value++;const D=(s.value-1)%+t.rows*A.offsetHeight+ +t.top;A.style.top=`${D}px`,A.dataset.id=String(T),o.push(A),A.addEventListener("animationend",()=>{e("update:modelValue",[...t.modelValue].filter(x=>String(x.id)!==A.dataset.id))})},f=(T,b)=>{const C=new Map(b.map(y=>[y.id,y]));T.forEach((y,A)=>{C.has(y.id)?C.delete(y.id):d(y,A)}),C.forEach(y=>{const A=o.findIndex(D=>D.dataset.id===String(y.id));A>-1&&(o[A].remove(),o.splice(A,1))}),l.value=!1};he(()=>t.modelValue.slice(),(T,b)=>f(T??[],b??[]),{deep:!0});const m=j({});return Lt(()=>e$(this,null,function*(){var T;m.value["--move-distance"]=`-${(T=r.value)==null?void 0:T.offsetWidth}px`,yield qe(),f(t.modelValue,[])})),Je({play:()=>{c.value=!0,o.forEach(T=>{T.style.animationPlayState="running"})},pause:()=>{c.value=!1,o.forEach(T=>{T.style.animationPlayState="paused"})}}),()=>{var T;return h("div",{class:mb(),ref:r,style:m.value},[(T=n.default)==null?void 0:T.call(n)])}}});const i$=oe(r$),[s$,Ot,yi]=ee("calendar"),o$=t=>yi("monthTitle",t.getFullYear(),t.getMonth()+1);function Hs(t,e){const n=t.getFullYear(),r=e.getFullYear();if(n===r){const i=t.getMonth(),s=e.getMonth();return i===s?0:i>s?1:-1}return n>r?1:-1}function Vn(t,e){const n=Hs(t,e);if(n===0){const r=t.getDate(),i=e.getDate();return r===i?0:r>i?1:-1}return n}const pa=t=>new Date(t),gb=t=>Array.isArray(t)?t.map(pa):pa(t);function Tp(t,e){const n=pa(t);return n.setDate(n.getDate()+e),n}function Ep(t,e){const n=pa(t);return n.setMonth(n.getMonth()+e),n.getDate()!==t.getDate()&&n.setDate(0),n}function BC(t,e){const n=pa(t);return n.setFullYear(n.getFullYear()+e),n.getDate()!==t.getDate()&&n.setDate(0),n}const Cm=t=>Tp(t,-1),Sm=t=>Tp(t,1),pb=t=>Ep(t,-1),vb=t=>Ep(t,1),_b=t=>BC(t,-1),yb=t=>BC(t,1),Zc=()=>{const t=new Date;return t.setHours(0,0,0,0),t};function a$(t){const e=t[0].getTime();return(t[1].getTime()-e)/(1e3*60*60*24)+1}const UC=ke({},sh,{modelValue:At(),filter:Function,formatter:{type:Function,default:(t,e)=>e}}),$C=Object.keys(sh);function l$(t,e){if(t<0)return[];const n=Array(t);let r=-1;for(;++r<t;)n[r]=e(r);return n}const zC=(t,e)=>32-new Date(t,e-1,32).getDate(),ra=(t,e,n,r,i,s)=>{const o=l$(e-t+1,a=>{const l=gr(t+a);return r(n,{text:l,value:l})});return i?i(n,o,s):o},jC=(t,e)=>t.map((n,r)=>{const i=e[r];if(i.length){const s=+i[0].value,o=+i[i.length-1].value;return gr(qt(+n,s,o))}return n}),[c$]=ee("calendar-day");var u$=X({name:c$,props:{item:Gt(Object),color:String,index:Number,offset:Bt(0),rowHeight:String},emits:["click","clickDisabledDate"],setup(t,{emit:e,slots:n}){const r=z(()=>{var c;const{item:d,index:f,color:m,offset:g,rowHeight:_}=t,T={height:_};if(d.type==="placeholder")return T.width="100%",T;if(f===0&&(T.marginLeft=`${100*g/7}%`),m)switch(d.type){case"end":case"start":case"start-end":case"multiple-middle":case"multiple-selected":T.background=m;break;case"middle":T.color=m;break}return g+(((c=d.date)==null?void 0:c.getDate())||1)>28&&(T.marginBottom=0),T}),i=()=>{t.item.type!=="disabled"?e("click",t.item):e("clickDisabledDate",t.item)},s=()=>{const{topInfo:c}=t.item;if(c||n["top-info"])return h("div",{class:Ot("top-info")},[n["top-info"]?n["top-info"](t.item):c])},o=()=>{const{bottomInfo:c}=t.item;if(c||n["bottom-info"])return h("div",{class:Ot("bottom-info")},[n["bottom-info"]?n["bottom-info"](t.item):c])},a=()=>n.text?n.text(t.item):t.item.text,l=()=>{const{item:c,color:d,rowHeight:f}=t,{type:m}=c,g=[s(),a(),o()];return m==="selected"?h("div",{class:Ot("selected-day"),style:{width:f,height:f,background:d}},[g]):g};return()=>{const{type:c,className:d}=t.item;return c==="placeholder"?h("div",{class:Ot("day"),style:r.value},null):h("div",{role:"gridcell",style:r.value,class:[Ot("day",c),d],tabindex:c==="disabled"?void 0:-1,onClick:i},[l()])}}});const[d$]=ee("calendar-month"),h$={date:Gt(Date),type:String,color:String,minDate:Date,maxDate:Date,showMark:Boolean,rowHeight:ie,formatter:Function,lazyRender:Boolean,currentDate:[Date,Array],allowSameDay:Boolean,showSubtitle:Boolean,showMonthTitle:Boolean,firstDayOfWeek:Number};var f$=X({name:d$,props:h$,emits:["click","clickDisabledDate"],setup(t,{emit:e,slots:n}){const[r,i]=H2(),s=j(),o=j(),a=eC(o),l=z(()=>o$(t.date)),c=z(()=>ze(t.rowHeight)),d=z(()=>{const k=t.date.getDate(),S=(t.date.getDay()-k%7+8)%7;return t.firstDayOfWeek?(S+7-t.firstDayOfWeek)%7:S}),f=z(()=>zC(t.date.getFullYear(),t.date.getMonth()+1)),m=z(()=>r.value||!t.lazyRender),g=()=>l.value,_=k=>{const E=S=>t.currentDate.some(P=>Vn(P,S)===0);if(E(k)){const S=Cm(k),P=Sm(k),re=E(S),fe=E(P);return re&&fe?"multiple-middle":re?"end":fe?"start":"multiple-selected"}return""},T=k=>{const[E,S]=t.currentDate;if(!E)return"";const P=Vn(k,E);if(!S)return P===0?"start":"";const re=Vn(k,S);return t.allowSameDay&&P===0&&re===0?"start-end":P===0?"start":re===0?"end":P>0&&re<0?"middle":""},b=k=>{const{type:E,minDate:S,maxDate:P,currentDate:re}=t;if(S&&Vn(k,S)<0||P&&Vn(k,P)>0)return"disabled";if(re===null)return"";if(Array.isArray(re)){if(E==="multiple")return _(k);if(E==="range")return T(k)}else if(E==="single")return Vn(k,re)===0?"selected":"";return""},C=k=>{if(t.type==="range"){if(k==="start"||k==="end")return yi(k);if(k==="start-end")return`${yi("start")}/${yi("end")}`}},y=()=>{if(t.showMonthTitle)return h("div",{class:Ot("month-title")},[n["month-title"]?n["month-title"]({date:t.date,text:l.value}):l.value])},A=()=>{if(t.showMark&&m.value)return h("div",{class:Ot("month-mark")},[t.date.getMonth()+1])},D=z(()=>{const k=Math.ceil((f.value+d.value)/7);return Array(k).fill({type:"placeholder"})}),x=z(()=>{const k=[],E=t.date.getFullYear(),S=t.date.getMonth();for(let P=1;P<=f.value;P++){const re=new Date(E,S,P),fe=b(re);let Y={date:re,type:fe,text:P,bottomInfo:C(fe)};t.formatter&&(Y=t.formatter(Y)),k.push(Y)}return k}),O=z(()=>x.value.filter(k=>k.type==="disabled")),R=(k,E)=>{if(s.value){const S=dt(s.value),P=D.value.length,fe=(Math.ceil((E.getDate()+d.value)/7)-1)*S.height/P;rd(k,S.top+fe+k.scrollTop-dt(k).top)}},v=(k,E)=>h(u$,{item:k,index:E,color:t.color,offset:d.value,rowHeight:c.value,onClick:S=>e("click",S),onClickDisabledDate:S=>e("clickDisabledDate",S)},lt(n,["top-info","bottom-info","text"])),I=()=>h("div",{ref:s,role:"grid",class:Ot("days")},[A(),(m.value?x:D).value.map(v)]);return Je({getTitle:g,getHeight:()=>a.value,setVisible:i,scrollToDate:R,disabledDays:O}),()=>h("div",{class:Ot("month"),ref:o},[y(),I()])}});const[m$]=ee("calendar-header");var g$=X({name:m$,props:{date:Date,minDate:Date,maxDate:Date,title:String,subtitle:String,showTitle:Boolean,showSubtitle:Boolean,firstDayOfWeek:Number,switchMode:le("none")},emits:["clickSubtitle","panelChange"],setup(t,{slots:e,emit:n}){const r=z(()=>t.date&&t.minDate&&Hs(pb(t.date),t.minDate)<0),i=z(()=>t.date&&t.minDate&&Hs(_b(t.date),t.minDate)<0),s=z(()=>t.date&&t.maxDate&&Hs(vb(t.date),t.maxDate)>0),o=z(()=>t.date&&t.maxDate&&Hs(yb(t.date),t.maxDate)>0),a=()=>{if(t.showTitle){const g=t.title||yi("title"),_=e.title?e.title():g;return h("div",{class:Ot("header-title")},[_])}},l=g=>n("clickSubtitle",g),c=g=>n("panelChange",g),d=g=>{const _=t.switchMode==="year-month",T=e[g?"next-month":"prev-month"],b=e[g?"next-year":"prev-year"],C=g?s.value:r.value,y=g?o.value:i.value,A=g?"arrow":"arrow-left",D=g?"arrow-double-right":"arrow-double-left",x=()=>c((g?vb:pb)(t.date)),O=()=>c((g?yb:_b)(t.date)),R=h("view",{class:Ot("header-action",{disabled:C}),onClick:C?void 0:x},[T?T({disabled:C}):h(je,{class:{[wn]:!C},name:A},null)]),v=_&&h("view",{class:Ot("header-action",{disabled:y}),onClick:y?void 0:O},[b?b({disabled:y}):h(je,{class:{[wn]:!y},name:D},null)]);return g?[R,v]:[v,R]},f=()=>{if(t.showSubtitle){const g=e.subtitle?e.subtitle({date:t.date,text:t.subtitle}):t.subtitle,_=t.switchMode!=="none";return h("div",{class:Ot("header-subtitle",{"with-switch":_}),onClick:l},[_?[d(),h("div",{class:Ot("header-subtitle-text")},[g]),d(!0)]:g])}},m=()=>{const{firstDayOfWeek:g}=t,_=yi("weekdays"),T=[..._.slice(g,7),..._.slice(0,g)];return h("div",{class:Ot("weekdays")},[T.map(b=>h("span",{class:Ot("weekday")},[b]))])};return()=>h("div",{class:Ot("header")},[a(),f(),m()])}});const p$={show:Boolean,type:le("single"),switchMode:le("none"),title:String,color:String,round:Q,readonly:Boolean,poppable:Q,maxRange:we(null),position:le("bottom"),teleport:[String,Object],showMark:Q,showTitle:Q,formatter:Function,rowHeight:ie,confirmText:String,rangePrompt:String,lazyRender:Q,showConfirm:Q,defaultDate:[Date,Array],allowSameDay:Boolean,showSubtitle:Q,closeOnPopstate:Q,showRangePrompt:Q,confirmDisabledText:String,closeOnClickOverlay:Q,safeAreaInsetTop:Boolean,safeAreaInsetBottom:Q,minDate:{type:Date,validator:Gl},maxDate:{type:Date,validator:Gl},firstDayOfWeek:{type:ie,default:0,validator:t=>t>=0&&t<=6}};var v$=X({name:s$,props:p$,emits:["select","confirm","unselect","monthShow","overRange","update:show","clickSubtitle","clickDisabledDate","panelChange"],setup(t,{emit:e,slots:n}){const r=z(()=>t.switchMode!=="none"),i=z(()=>!t.minDate&&!r.value?Zc():t.minDate),s=z(()=>!t.maxDate&&!r.value?Ep(Zc(),6):t.maxDate),o=(H,te=i.value,ge=s.value)=>te&&Vn(H,te)===-1?te:ge&&Vn(H,ge)===1?ge:H,a=(H=t.defaultDate)=>{const{type:te,allowSameDay:ge}=t;if(H===null)return H;const Ae=Zc();if(te==="range"){Array.isArray(H)||(H=[]),H.length===1&&Vn(H[0],Ae)===1&&(H=[]);const ce=i.value,Ee=s.value,L=o(H[0]||Ae,ce,Ee?ge?Ee:Cm(Ee):void 0),q=o(H[1]||(ge?Ae:Sm(Ae)),ce?ge?ce:Sm(ce):void 0);return[L,q]}return te==="multiple"?Array.isArray(H)?H.map(ce=>o(ce)):[o(Ae)]:((!H||Array.isArray(H))&&(H=Ae),o(H))},l=()=>{const H=Array.isArray(f.value)?f.value[0]:f.value;return H||o(Zc())};let c;const d=j(),f=j(a()),m=j(l()),g=j(),[_,T]=fc(),b=z(()=>t.firstDayOfWeek?+t.firstDayOfWeek%7:0),C=z(()=>{const H=[];if(!i.value||!s.value)return H;const te=new Date(i.value);te.setDate(1);do H.push(new Date(te)),te.setMonth(te.getMonth()+1);while(Hs(te,s.value)!==1);return H}),y=z(()=>{if(f.value){if(t.type==="range")return!f.value[0]||!f.value[1];if(t.type==="multiple")return!f.value.length}return!f.value}),A=()=>f.value,D=()=>{const H=Ci(d.value),te=H+c,ge=C.value.map((q,G)=>_.value[G].getHeight()),Ae=ge.reduce((q,G)=>q+G,0);if(te>Ae&&H>0)return;let ce=0,Ee;const L=[-1,-1];for(let q=0;q<C.value.length;q++){const G=_.value[q];ce<=te&&ce+ge[q]>=H&&(L[1]=q,Ee||(Ee=G,L[0]=q),_.value[q].showed||(_.value[q].showed=!0,e("monthShow",{date:G.date,title:G.getTitle()}))),ce+=ge[q]}C.value.forEach((q,G)=>{const ae=G>=L[0]-1&&G<=L[1]+1;_.value[G].setVisible(ae)}),Ee&&(g.value=Ee)},x=H=>{r.value?m.value=H:yn(()=>{C.value.some((te,ge)=>Hs(te,H)===0?(d.value&&_.value[ge].scrollToDate(d.value,H),!0):!1),D()})},O=()=>{if(!(t.poppable&&!t.show))if(f.value){const H=t.type==="single"?f.value:f.value[0];Gl(H)&&x(H)}else r.value||yn(D)},R=()=>{t.poppable&&!t.show||(r.value||yn(()=>{c=Math.floor(dt(d).height)}),O())},v=(H=a())=>{f.value=H,O()},I=H=>{const{maxRange:te,rangePrompt:ge,showRangePrompt:Ae}=t;return te&&a$(H)>+te?(Ae&&nt(ge||yi("rangePrompt",te)),e("overRange"),!1):!0},k=H=>{m.value=H,e("panelChange",{date:H})},E=()=>{var H;return e("confirm",(H=f.value)!=null?H:gb(f.value))},S=(H,te)=>{const ge=Ae=>{f.value=Ae,e("select",gb(Ae))};if(te&&t.type==="range"&&!I(H)){ge([H[0],Tp(H[0],+t.maxRange-1)]);return}ge(H),te&&!t.showConfirm&&E()},P=(H,te,ge)=>{var Ae;return(Ae=H.find(ce=>Vn(te,ce.date)===-1&&Vn(ce.date,ge)===-1))==null?void 0:Ae.date},re=z(()=>_.value.reduce((H,te)=>{var ge,Ae;return H.push(...(Ae=(ge=te.disabledDays)==null?void 0:ge.value)!=null?Ae:[]),H},[])),fe=H=>{if(t.readonly||!H.date)return;const{date:te}=H,{type:ge}=t;if(ge==="range"){if(!f.value){S([te]);return}const[Ae,ce]=f.value;if(Ae&&!ce){const Ee=Vn(te,Ae);if(Ee===1){const L=P(re.value,Ae,te);if(L){const q=Cm(L);Vn(Ae,q)===-1?S([Ae,q]):S([te])}else S([Ae,te],!0)}else Ee===-1?S([te]):t.allowSameDay&&S([te,te],!0)}else S([te])}else if(ge==="multiple"){if(!f.value){S([te]);return}const Ae=f.value,ce=Ae.findIndex(Ee=>Vn(Ee,te)===0);if(ce!==-1){const[Ee]=Ae.splice(ce,1);e("unselect",pa(Ee))}else t.maxRange&&Ae.length>=+t.maxRange?nt(t.rangePrompt||yi("rangePrompt",t.maxRange)):S([...Ae,te])}else S(te,!0)},Y=H=>e("update:show",H),de=(H,te)=>{const ge=te!==0||!t.showSubtitle;return h(f$,Qe({ref:r.value?g:T(te),date:H,currentDate:f.value,showMonthTitle:ge,firstDayOfWeek:b.value,lazyRender:r.value?!1:t.lazyRender,maxDate:s.value,minDate:i.value},lt(t,["type","color","showMark","formatter","rowHeight","showSubtitle","allowSameDay"]),{onClick:fe,onClickDisabledDate:Ae=>e("clickDisabledDate",Ae)}),lt(n,["top-info","bottom-info","month-title","text"]))},me=()=>{if(n.footer)return n.footer();if(t.showConfirm){const H=n["confirm-text"],te=y.value,ge=te?t.confirmDisabledText:t.confirmText;return h(Tn,{round:!0,block:!0,type:"primary",color:t.color,class:Ot("confirm"),disabled:te,nativeType:"button",onClick:E},{default:()=>[H?H({disabled:te}):ge||yi("confirm")]})}},Ue=()=>h("div",{class:[Ot("footer"),{"van-safe-area-bottom":t.safeAreaInsetBottom}]},[me()]),Xe=()=>{var H,te;return h("div",{class:Ot()},[h(g$,{date:(H=g.value)==null?void 0:H.date,maxDate:s.value,minDate:i.value,title:t.title,subtitle:(te=g.value)==null?void 0:te.getTitle(),showTitle:t.showTitle,showSubtitle:t.showSubtitle,switchMode:t.switchMode,firstDayOfWeek:b.value,onClickSubtitle:ge=>e("clickSubtitle",ge),onPanelChange:k},lt(n,["title","subtitle","prev-month","prev-year","next-month","next-year"])),h("div",{ref:d,class:Ot("body"),onScroll:r.value?void 0:D},[r.value?de(m.value,0):C.value.map(de)]),Ue()])};return he(()=>t.show,R),he(()=>[t.type,t.minDate,t.maxDate,t.switchMode],()=>v(a(f.value))),he(()=>t.defaultDate,H=>{v(H)}),Je({reset:v,scrollToDate:x,getSelectedDate:A}),Aa(R),()=>t.poppable?h(kr,{show:t.show,class:Ot("popup"),round:t.round,position:t.position,closeable:t.showTitle||t.showSubtitle,teleport:t.teleport,closeOnPopstate:t.closeOnPopstate,safeAreaInsetTop:t.safeAreaInsetTop,closeOnClickOverlay:t.closeOnClickOverlay,"onUpdate:show":Y},{default:Xe}):Xe()}});const HC=oe(v$),[_$,xo]=ee("image"),y$={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:ie,height:ie,radius:ie,lazyLoad:Boolean,iconSize:ie,showError:Q,errorIcon:le("photo-fail"),iconPrefix:String,showLoading:Q,loadingIcon:le("photo"),crossorigin:String,referrerpolicy:String};var b$=X({name:_$,props:y$,emits:["load","error"],setup(t,{emit:e,slots:n}){const r=j(!1),i=j(!0),s=j(),{$Lazyload:o}=Ar().proxy,a=z(()=>{const b={width:ze(t.width),height:ze(t.height)};return it(t.radius)&&(b.overflow="hidden",b.borderRadius=ze(t.radius)),b});he(()=>t.src,()=>{r.value=!1,i.value=!0});const l=b=>{i.value&&(i.value=!1,e("load",b))},c=()=>{const b=new Event("load");Object.defineProperty(b,"target",{value:s.value,enumerable:!0}),l(b)},d=b=>{r.value=!0,i.value=!1,e("error",b)},f=(b,C,y)=>y?y():h(je,{name:b,size:t.iconSize,class:C,classPrefix:t.iconPrefix},null),m=()=>{if(i.value&&t.showLoading)return h("div",{class:xo("loading")},[f(t.loadingIcon,xo("loading-icon"),n.loading)]);if(r.value&&t.showError)return h("div",{class:xo("error")},[f(t.errorIcon,xo("error-icon"),n.error)])},g=()=>{if(r.value||!t.src)return;const b={alt:t.alt,class:xo("img"),style:{objectFit:t.fit,objectPosition:t.position},crossorigin:t.crossorigin,referrerpolicy:t.referrerpolicy};return t.lazyLoad?Wt(h("img",Qe({ref:s},b),null),[[DA("lazy"),t.src]]):h("img",Qe({ref:s,src:t.src,onLoad:l,onError:d},b),null)},_=({el:b})=>{const C=()=>{b===s.value&&i.value&&c()};s.value?C():qe(C)},T=({el:b})=>{b===s.value&&!r.value&&d()};return o&&Kn&&(o.$on("loaded",_),o.$on("error",T),Kr(()=>{o.$off("loaded",_),o.$off("error",T)})),Lt(()=>{qe(()=>{var b;(b=s.value)!=null&&b.complete&&!t.lazyLoad&&c()})}),()=>{var b;return h("div",{class:xo({round:t.round,block:t.block}),style:a.value},[g(),m(),(b=n.default)==null?void 0:b.call(n)])}}});const ch=oe(b$),[w$,An]=ee("card"),T$={tag:String,num:ie,desc:String,thumb:String,title:String,price:ie,centered:Boolean,lazyLoad:Boolean,currency:le("¥"),thumbLink:String,originPrice:ie};var E$=X({name:w$,props:T$,emits:["clickThumb"],setup(t,{slots:e,emit:n}){const r=()=>{if(e.title)return e.title();if(t.title)return h("div",{class:[An("title"),"van-multi-ellipsis--l2"]},[t.title])},i=()=>{if(e.tag||t.tag)return h("div",{class:An("tag")},[e.tag?e.tag():h(ah,{mark:!0,type:"primary"},{default:()=>[t.tag]})])},s=()=>e.thumb?e.thumb():h(ch,{src:t.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:t.lazyLoad},null),o=()=>{if(e.thumb||t.thumb)return h("a",{href:t.thumbLink,class:An("thumb"),onClick:c=>n("clickThumb",c)},[s(),i()])},a=()=>{if(e.desc)return e.desc();if(t.desc)return h("div",{class:[An("desc"),"van-ellipsis"]},[t.desc])},l=()=>{const c=t.price.toString().split(".");return h("div",null,[h("span",{class:An("price-currency")},[t.currency]),h("span",{class:An("price-integer")},[c[0]]),c.length>1&&h(rt,null,[Ie("."),h("span",{class:An("price-decimal")},[c[1]])])])};return()=>{var c,d,f;const m=e.num||it(t.num),g=e.price||it(t.price),_=e["origin-price"]||it(t.originPrice),T=m||g||_||e.bottom,b=g&&h("div",{class:An("price")},[e.price?e.price():l()]),C=_&&h("div",{class:An("origin-price")},[e["origin-price"]?e["origin-price"]():`${t.currency} ${t.originPrice}`]),y=m&&h("div",{class:An("num")},[e.num?e.num():`x${t.num}`]),A=e.footer&&h("div",{class:An("footer")},[e.footer()]),D=T&&h("div",{class:An("bottom")},[(c=e["price-top"])==null?void 0:c.call(e),b,C,y,(d=e.bottom)==null?void 0:d.call(e)]);return h("div",{class:An()},[h("div",{class:An("header")},[o(),h("div",{class:An("content",{centered:t.centered})},[h("div",null,[r(),a(),(f=e.tags)==null?void 0:f.call(e)]),D])]),A])}}});const I$=oe(E$),[C$,ti,S$]=ee("cascader"),A$={title:String,options:At(),closeable:Q,swipeable:Q,closeIcon:le("cross"),showHeader:Q,modelValue:ie,fieldNames:Object,placeholder:String,activeColor:String};var k$=X({name:C$,props:A$,emits:["close","change","finish","clickTab","update:modelValue"],setup(t,{slots:e,emit:n}){const r=j([]),i=j(0),[s,o]=fc(),{text:a,value:l,children:c}=ke({text:"text",value:"value",children:"children"},t.fieldNames),d=(x,O)=>{for(const R of x){if(R[l]===O)return[R];if(R[c]){const v=d(R[c],O);if(v)return[R,...v]}}},f=()=>{const{options:x,modelValue:O}=t;if(O!==void 0){const R=d(x,O);if(R){let v=x;r.value=R.map(I=>{const k={options:v,selected:I},E=v.find(S=>S[l]===I[l]);return E&&(v=E[c]),k}),v&&r.value.push({options:v,selected:null}),qe(()=>{i.value=r.value.length-1});return}}r.value=[{options:x,selected:null}]},m=(x,O)=>{if(x.disabled)return;if(r.value[O].selected=x,r.value.length>O+1&&(r.value=r.value.slice(0,O+1)),x[c]){const I={options:x[c],selected:null};r.value[O+1]?r.value[O+1]=I:r.value.push(I),qe(()=>{i.value++})}const R=r.value.map(I=>I.selected).filter(Boolean);n("update:modelValue",x[l]);const v={value:x[l],tabIndex:O,selectedOptions:R};n("change",v),x[c]||n("finish",v)},g=()=>n("close"),_=({name:x,title:O})=>n("clickTab",x,O),T=()=>t.showHeader?h("div",{class:ti("header")},[h("h2",{class:ti("title")},[e.title?e.title():t.title]),t.closeable?h(je,{name:t.closeIcon,class:[ti("close-icon"),wn],onClick:g},null):null]):null,b=(x,O,R)=>{const{disabled:v}=x,I=!!(O&&x[l]===O[l]),k=x.color||(I?t.activeColor:void 0),E=e.option?e.option({option:x,selected:I}):h("span",null,[x[a]]);return h("li",{ref:I?o(R):void 0,role:"menuitemradio",class:[ti("option",{selected:I,disabled:v}),x.className],style:{color:k},tabindex:v?void 0:I?0:-1,"aria-checked":I,"aria-disabled":v||void 0,onClick:()=>m(x,R)},[E,I?h(je,{name:"success",class:ti("selected-icon")},null):null])},C=(x,O,R)=>h("ul",{role:"menu",class:ti("options")},[x.map(v=>b(v,O,R))]),y=(x,O)=>{const{options:R,selected:v}=x,I=t.placeholder||S$("select"),k=v?v[a]:I;return h(ga,{title:k,titleClass:ti("tab",{unselected:!v})},{default:()=>{var E,S;return[(E=e["options-top"])==null?void 0:E.call(e,{tabIndex:O}),C(R,v,O),(S=e["options-bottom"])==null?void 0:S.call(e,{tabIndex:O})]}})},A=()=>h(mc,{active:i.value,"onUpdate:active":x=>i.value=x,shrink:!0,animated:!0,class:ti("tabs"),color:t.activeColor,swipeable:t.swipeable,onClickTab:_},{default:()=>[r.value.map(y)]}),D=x=>{const O=x.parentElement;O&&(O.scrollTop=x.offsetTop-(O.offsetHeight-x.offsetHeight)/2)};return f(),he(i,x=>{const O=s.value[x];O&&D(O)}),he(()=>t.options,f,{deep:!0}),he(()=>t.modelValue,x=>{x!==void 0&&r.value.map(R=>{var v;return(v=R.selected)==null?void 0:v[l]}).includes(x)||f()}),()=>h("div",{class:ti()},[T(),A()])}});const R$=oe(k$),[P$,bb]=ee("cell-group"),x$={title:String,inset:Boolean,border:Q};var D$=X({name:P$,inheritAttrs:!1,props:x$,setup(t,{slots:e,attrs:n}){const r=()=>{var s;return h("div",Qe({class:[bb({inset:t.inset}),{[Zd]:t.border&&!t.inset}]},n,od()),[(s=e.default)==null?void 0:s.call(e)])},i=()=>h("div",{class:bb("title",{inset:t.inset})},[e.title?e.title():t.title]);return()=>t.title||e.title?h(rt,null,[i(),r()]):r()}});const O$=oe(D$),[V$,eu]=ee("circle");let L$=0;const wb=t=>Math.min(Math.max(+t,0),100);function N$(t,e){const n=t?1:0;return`M ${e/2} ${e/2} m 0, -500 a 500, 500 0 1, ${n} 0, 1000 a 500, 500 0 1, ${n} 0, -1000`}const M$={text:String,size:ie,fill:le("none"),rate:we(100),speed:we(0),color:[String,Object],clockwise:Q,layerColor:String,currentRate:Bt(0),strokeWidth:we(40),strokeLinecap:String,startPosition:le("top")};var F$=X({name:V$,props:M$,emits:["update:currentRate"],setup(t,{emit:e,slots:n}){const r=`van-circle-${L$++}`,i=z(()=>+t.strokeWidth+1e3),s=z(()=>N$(t.clockwise,i.value)),o=z(()=>{const m={top:0,right:90,bottom:180,left:270}[t.startPosition];if(m)return{transform:`rotate(${m}deg)`}});he(()=>t.rate,f=>{let m;const g=Date.now(),_=t.currentRate,T=wb(f),b=Math.abs((_-T)*1e3/+t.speed),C=()=>{const y=Date.now(),D=Math.min((y-g)/b,1)*(T-_)+_;e("update:currentRate",wb(parseFloat(D.toFixed(1)))),(T>_?D<T:D>T)&&(m=yn(C))};t.speed?(m&&Xd(m),m=yn(C)):e("update:currentRate",T)},{immediate:!0});const a=()=>{const{strokeWidth:m,currentRate:g,strokeLinecap:_}=t,T=3140*g/100,b=Ii(t.color)?`url(#${r})`:t.color,C={stroke:b,strokeWidth:`${+m+1}px`,strokeLinecap:_,strokeDasharray:`${T}px 3140px`};return h("path",{d:s.value,style:C,class:eu("hover"),stroke:b},null)},l=()=>{const f={fill:t.fill,stroke:t.layerColor,strokeWidth:`${t.strokeWidth}px`};return h("path",{class:eu("layer"),style:f,d:s.value},null)},c=()=>{const{color:f}=t;if(!Ii(f))return;const m=Object.keys(f).sort((g,_)=>parseFloat(g)-parseFloat(_)).map((g,_)=>h("stop",{key:_,offset:g,"stop-color":f[g]},null));return h("defs",null,[h("linearGradient",{id:r,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},[m])])},d=()=>{if(n.default)return n.default();if(t.text)return h("div",{class:eu("text")},[t.text])};return()=>h("div",{class:eu(),style:Pi(t.size)},[h("svg",{viewBox:`0 0 ${i.value} ${i.value}`,style:o.value},[c(),l(),a()]),d()])}});const B$=oe(F$),[qC,U$]=ee("row"),GC=Symbol(qC),$$={tag:le("div"),wrap:Q,align:String,gutter:{type:[String,Number,Array],default:0},justify:String};var z$=X({name:qC,props:$$,setup(t,{slots:e}){const{children:n,linkChildren:r}=En(GC),i=z(()=>{const a=[[]];let l=0;return n.forEach((c,d)=>{l+=Number(c.span),l>24?(a.push([d]),l-=24):a[a.length-1].push(d)}),a}),s=z(()=>{let a=0;Array.isArray(t.gutter)?a=Number(t.gutter[0])||0:a=Number(t.gutter);const l=[];return a&&i.value.forEach(c=>{const d=a*(c.length-1)/c.length;c.forEach((f,m)=>{if(m===0)l.push({right:d});else{const g=a-l[f-1].right,_=d-g;l.push({left:g,right:_})}})}),l}),o=z(()=>{const{gutter:a}=t,l=[];if(Array.isArray(a)&&a.length>1){const c=Number(a[1])||0;if(c<=0)return l;i.value.forEach((d,f)=>{f!==i.value.length-1&&d.forEach(()=>{l.push({bottom:c})})})}return l});return r({spaces:s,verticalSpaces:o}),()=>{const{tag:a,wrap:l,align:c,justify:d}=t;return h(a,{class:U$({[`align-${c}`]:c,[`justify-${d}`]:d,nowrap:!l})},{default:()=>{var f;return[(f=e.default)==null?void 0:f.call(e)]}})}}});const[j$,H$]=ee("col"),q$={tag:le("div"),span:we(0),offset:ie};var G$=X({name:j$,props:q$,setup(t,{slots:e}){const{parent:n,index:r}=on(GC),i=z(()=>{if(!n)return;const{spaces:s,verticalSpaces:o}=n;let a={};if(s&&s.value&&s.value[r.value]){const{left:c,right:d}=s.value[r.value];a={paddingLeft:c?`${c}px`:null,paddingRight:d?`${d}px`:null}}const{bottom:l}=o.value[r.value]||{};return ke(a,{marginBottom:l?`${l}px`:null})});return()=>{const{tag:s,span:o,offset:a}=t;return h(s,{style:i.value,class:H$({[o]:o,[`offset-${a}`]:a})},{default:()=>{var l;return[(l=e.default)==null?void 0:l.call(e)]}})}}});const W$=oe(G$),[WC,K$]=ee("collapse"),KC=Symbol(WC),Y$={border:Q,accordion:Boolean,modelValue:{type:[String,Number,Array],default:""}};var Q$=X({name:WC,props:Y$,emits:["change","update:modelValue"],setup(t,{emit:e,slots:n}){const{linkChildren:r,children:i}=En(KC),s=c=>{e("change",c),e("update:modelValue",c)},o=(c,d)=>{const{accordion:f,modelValue:m}=t;s(f?c===m?"":c:d?m.concat(c):m.filter(g=>g!==c))},a=(c={})=>{if(t.accordion)return;typeof c=="boolean"&&(c={expanded:c});const{expanded:d,skipDisabled:f}=c,g=i.filter(_=>_.disabled&&f?_.expanded.value:d??!_.expanded.value).map(_=>_.itemName.value);s(g)},l=c=>{const{accordion:d,modelValue:f}=t;return d?f===c:f.includes(c)};return Je({toggleAll:a}),r({toggle:o,isExpanded:l}),()=>{var c;return h("div",{class:[K$(),{[Zd]:t.border}]},[(c=n.default)==null?void 0:c.call(n)])}}});const X$=oe(Q$),[J$,tu]=ee("collapse-item"),Z$=["icon","title","value","label","right-icon"],e4=ke({},oh,{name:ie,isLink:Q,disabled:Boolean,readonly:Boolean,lazyRender:Q});var t4=X({name:J$,props:e4,setup(t,{slots:e}){const n=j(),r=j(),{parent:i,index:s}=on(KC);if(!i)return;const o=z(()=>{var T;return(T=t.name)!=null?T:s.value}),a=z(()=>i.isExpanded(o.value)),l=j(a.value),c=dp(()=>l.value||!t.lazyRender),d=()=>{a.value?n.value&&(n.value.style.height=""):l.value=!1};he(a,(T,b)=>{if(b===null)return;T&&(l.value=!0),(T?qe:yn)(()=>{if(!r.value||!n.value)return;const{offsetHeight:y}=r.value;if(y){const A=`${y}px`;n.value.style.height=T?"0":A,ns(()=>{n.value&&(n.value.style.height=T?A:"0")})}else d()})});const f=(T=!a.value)=>{i.toggle(o.value,T)},m=()=>{!t.disabled&&!t.readonly&&f()},g=()=>{const{border:T,disabled:b,readonly:C}=t,y=lt(t,Object.keys(oh));return C&&(y.isLink=!1),(b||C)&&(y.clickable=!1),h(Rr,Qe({role:"button",class:tu("title",{disabled:b,expanded:a.value,borderless:!T}),"aria-expanded":String(a.value),onClick:m},y),lt(e,Z$))},_=c(()=>{var T;return Wt(h("div",{ref:n,class:tu("wrapper"),onTransitionend:d},[h("div",{ref:r,class:tu("content")},[(T=e.default)==null?void 0:T.call(e)])]),[[rn,l.value]])});return Je({toggle:f,expanded:a,itemName:o}),()=>h("div",{class:[tu({border:s.value&&t.border})]},[g(),_()])}});const n4=oe(t4),r4=oe(kF),[i4,Tb,pf]=ee("contact-card"),s4={tel:String,name:String,type:le("add"),addText:String,editable:Q};var o4=X({name:i4,props:s4,emits:["click"],setup(t,{emit:e}){const n=i=>{t.editable&&e("click",i)},r=()=>t.type==="add"?t.addText||pf("addContact"):[h("div",null,[`${pf("name")}：${t.name}`]),h("div",null,[`${pf("tel")}：${t.tel}`])];return()=>h(Rr,{center:!0,icon:t.type==="edit"?"contact":"add-square",class:Tb([t.type]),border:!1,isLink:t.editable,titleClass:Tb("title"),onClick:n},{title:r})}});const a4=oe(o4),[l4,Do,$i]=ee("contact-edit"),Am={tel:"",name:""},c4={isEdit:Boolean,isSaving:Boolean,isDeleting:Boolean,showSetDefault:Boolean,setDefaultLabel:String,contactInfo:{type:Object,default:()=>ke({},Am)},telValidator:{type:Function,default:UI}};var u4=X({name:l4,props:c4,emits:["save","delete","changeDefault"],setup(t,{emit:e}){const n=Ct(ke({},Am,t.contactInfo)),r=()=>{t.isSaving||e("save",n)},i=()=>e("delete",n),s=()=>h("div",{class:Do("buttons")},[h(Tn,{block:!0,round:!0,type:"primary",text:$i("save"),class:Do("button"),loading:t.isSaving,nativeType:"submit"},null),t.isEdit&&h(Tn,{block:!0,round:!0,text:$i("delete"),class:Do("button"),loading:t.isDeleting,onClick:i},null)]),o=()=>h(vp,{modelValue:n.isDefault,"onUpdate:modelValue":l=>n.isDefault=l,onChange:l=>e("changeDefault",l)},null),a=()=>{if(t.showSetDefault)return h(Rr,{title:t.setDefaultLabel,class:Do("switch-cell"),border:!1},{"right-icon":o})};return he(()=>t.contactInfo,l=>ke(n,Am,l)),()=>h(fp,{class:Do(),onSubmit:r},{default:()=>[h("div",{class:Do("fields")},[h(_i,{modelValue:n.name,"onUpdate:modelValue":l=>n.name=l,clearable:!0,label:$i("name"),rules:[{required:!0,message:$i("nameEmpty")}],maxlength:"30",placeholder:$i("name")},null),h(_i,{modelValue:n.tel,"onUpdate:modelValue":l=>n.tel=l,clearable:!0,type:"tel",label:$i("tel"),rules:[{validator:t.telValidator,message:$i("telInvalid")}],placeholder:$i("tel")},null)]),a(),s()]})}});const d4=oe(u4),[h4,ni,f4]=ee("contact-list"),m4={list:Array,addText:String,modelValue:Rt,defaultTagText:String};var g4=X({name:h4,props:m4,emits:["add","edit","select","update:modelValue"],setup(t,{emit:e}){const n=(r,i)=>{const s=()=>{e("update:modelValue",r.id),e("select",r,i)},o=()=>h(wp,{class:ni("radio"),name:r.id,iconSize:18},null),a=()=>h(je,{name:"edit",class:ni("edit"),onClick:c=>{c.stopPropagation(),e("edit",r,i)}},null),l=()=>{const c=[`${r.name}，${r.tel}`];return r.isDefault&&t.defaultTagText&&c.push(h(ah,{type:"primary",round:!0,class:ni("item-tag")},{default:()=>[t.defaultTagText]})),c};return h(Rr,{key:r.id,isLink:!0,center:!0,class:ni("item"),titleClass:ni("item-title"),onClick:s},{icon:a,title:l,"right-icon":o})};return()=>h("div",{class:ni()},[h(_p,{modelValue:t.modelValue,class:ni("group")},{default:()=>[t.list&&t.list.map(n)]}),h("div",{class:[ni("bottom"),"van-safe-area-bottom"]},[h(Tn,{round:!0,block:!0,type:"primary",class:ni("add"),text:t.addText||f4("addContact"),onClick:()=>e("add")},null)])])}});const p4=oe(g4);function v4(t,e){const{days:n}=e;let{hours:r,minutes:i,seconds:s,milliseconds:o}=e;if(t.includes("DD")?t=t.replace("DD",gr(n)):r+=n*24,t.includes("HH")?t=t.replace("HH",gr(r)):i+=r*60,t.includes("mm")?t=t.replace("mm",gr(i)):s+=i*60,t.includes("ss")?t=t.replace("ss",gr(s)):o+=s*1e3,t.includes("S")){const a=gr(o,3);t.includes("SSS")?t=t.replace("SSS",a):t.includes("SS")?t=t.replace("SS",a.slice(0,2)):t=t.replace("S",a.charAt(0))}return t}const[_4,y4]=ee("count-down"),b4={time:we(0),format:le("HH:mm:ss"),autoStart:Q,millisecond:Boolean};var w4=X({name:_4,props:b4,emits:["change","finish"],setup(t,{emit:e,slots:n}){const{start:r,pause:i,reset:s,current:o}=Y2({time:+t.time,millisecond:t.millisecond,onChange:c=>e("change",c),onFinish:()=>e("finish")}),a=z(()=>v4(t.format,o.value)),l=()=>{s(+t.time),t.autoStart&&r()};return he(()=>t.time,l,{immediate:!0}),Je({start:r,pause:i,reset:l}),()=>h("div",{role:"timer",class:y4()},[n.default?n.default(o.value):a.value])}});const T4=oe(w4);function Eb(t){const e=new Date(t*1e3);return`${e.getFullYear()}.${gr(e.getMonth()+1)}.${gr(e.getDate())}`}const E4=t=>(t/10).toFixed(t%10===0?0:1),Ib=t=>(t/100).toFixed(t%100===0?0:t%10===0?1:2),[I4,Or,vf]=ee("coupon");var C4=X({name:I4,props:{chosen:Boolean,coupon:Gt(Object),disabled:Boolean,currency:le("¥")},setup(t){const e=z(()=>{const{startAt:i,endAt:s}=t.coupon;return`${Eb(i)} - ${Eb(s)}`}),n=z(()=>{const{coupon:i,currency:s}=t;if(i.valueDesc)return[i.valueDesc,h("span",null,[i.unitDesc||""])];if(i.denominations){const o=Ib(i.denominations);return[h("span",null,[s]),` ${o}`]}return i.discount?vf("discount",E4(i.discount)):""}),r=z(()=>{const i=Ib(t.coupon.originCondition||0);return i==="0"?vf("unlimited"):vf("condition",i)});return()=>{const{chosen:i,coupon:s,disabled:o}=t,a=o&&s.reason||s.description;return h("div",{class:Or({disabled:o})},[h("div",{class:Or("content")},[h("div",{class:Or("head")},[h("h2",{class:Or("amount")},[n.value]),h("p",{class:Or("condition")},[s.condition||r.value])]),h("div",{class:Or("body")},[h("p",{class:Or("name")},[s.name]),h("p",{class:Or("valid")},[e.value]),!o&&h(lh,{class:Or("corner"),modelValue:i},null)])]),a&&h("p",{class:Or("description")},[a])])}}});const km=oe(C4),[S4,Cb,Rm]=ee("coupon-cell"),A4={title:String,border:Q,editable:Q,coupons:At(),currency:le("¥"),chosenCoupon:{type:[Number,Array],default:-1}},k4=t=>{const{value:e,denominations:n}=t;return it(e)?e:it(n)?n:0};function R4({coupons:t,chosenCoupon:e,currency:n}){let r=0,i=!1;return(Array.isArray(e)?e:[e]).forEach(s=>{const o=t[+s];o&&(i=!0,r+=k4(o))}),i?`-${n} ${(r/100).toFixed(2)}`:t.length===0?Rm("noCoupon"):Rm("count",t.length)}var P4=X({name:S4,props:A4,setup(t){return()=>{const e=Array.isArray(t.chosenCoupon)?t.chosenCoupon.length:t.coupons[+t.chosenCoupon];return h(Rr,{class:Cb(),value:R4(t),title:t.title||Rm("title"),border:t.border,isLink:t.editable,valueClass:Cb("value",{selected:e})},null)}}});const YC=oe(P4),[x4,nu]=ee("empty"),D4={image:le("default"),imageSize:[Number,String,Array],description:String};var O4=X({name:x4,props:D4,setup(t,{slots:e}){const n=()=>{const C=e.description?e.description():t.description;if(C)return h("p",{class:nu("description")},[C])},r=()=>{if(e.default)return h("div",{class:nu("bottom")},[e.default()])},i=Pa(),s=C=>`${i}-${C}`,o=C=>`url(#${s(C)})`,a=(C,y,A)=>h("stop",{"stop-color":C,offset:`${y}%`,"stop-opacity":A},null),l=(C,y)=>[a(C,0),a(y,100)],c=C=>[h("defs",null,[h("radialGradient",{id:s(C),cx:"50%",cy:"54%",fx:"50%",fy:"54%",r:"297%",gradientTransform:"matrix(-.16 0 0 -.33 .58 .72)","data-allow-mismatch":"attribute"},[a("#EBEDF0",0),a("#F2F3F5",100,.3)])]),h("ellipse",{fill:o(C),opacity:".8",cx:"80",cy:"140",rx:"46",ry:"8","data-allow-mismatch":"attribute"},null)],d=()=>[h("defs",null,[h("linearGradient",{id:s("a"),x1:"64%",y1:"100%",x2:"64%","data-allow-mismatch":"attribute"},[a("#FFF",0,.5),a("#F2F3F5",100)])]),h("g",{opacity:".8","data-allow-mismatch":"children"},[h("path",{d:"M36 131V53H16v20H2v58h34z",fill:o("a")},null),h("path",{d:"M123 15h22v14h9v77h-31V15z",fill:o("a")},null)])],f=()=>[h("defs",null,[h("linearGradient",{id:s("b"),x1:"64%",y1:"97%",x2:"64%",y2:"0%","data-allow-mismatch":"attribute"},[a("#F2F3F5",0,.3),a("#F2F3F5",100)])]),h("g",{opacity:".8","data-allow-mismatch":"children"},[h("path",{d:"M87 6c3 0 7 3 8 6a8 8 0 1 1-1 16H80a7 7 0 0 1-8-6c0-4 3-7 6-7 0-5 4-9 9-9Z",fill:o("b")},null),h("path",{d:"M19 23c2 0 3 1 4 3 2 0 4 2 4 4a4 4 0 0 1-4 3v1h-7v-1l-1 1c-2 0-3-2-3-4 0-1 1-3 3-3 0-2 2-4 4-4Z",fill:o("b")},null)])],m=()=>h("svg",{viewBox:"0 0 160 160"},[h("defs",{"data-allow-mismatch":"children"},[h("linearGradient",{id:s(1),x1:"64%",y1:"100%",x2:"64%"},[a("#FFF",0,.5),a("#F2F3F5",100)]),h("linearGradient",{id:s(2),x1:"50%",x2:"50%",y2:"84%"},[a("#EBEDF0",0),a("#DCDEE0",100,0)]),h("linearGradient",{id:s(3),x1:"100%",x2:"100%",y2:"100%"},[l("#EAEDF0","#DCDEE0")]),h("radialGradient",{id:s(4),cx:"50%",cy:"0%",fx:"50%",fy:"0%",r:"100%",gradientTransform:"matrix(0 1 -.54 0 .5 -.5)"},[a("#EBEDF0",0),a("#FFF",100,0)])]),h("g",{fill:"none"},[d(),h("path",{fill:o(4),d:"M0 139h160v21H0z","data-allow-mismatch":"attribute"},null),h("path",{d:"M80 54a7 7 0 0 1 3 13v27l-2 2h-2a2 2 0 0 1-2-2V67a7 7 0 0 1 3-13z",fill:o(2),"data-allow-mismatch":"attribute"},null),h("g",{opacity:".6","stroke-linecap":"round","stroke-width":"7","data-allow-mismatch":"children"},[h("path",{d:"M64 47a19 19 0 0 0-5 13c0 5 2 10 5 13",stroke:o(3)},null),h("path",{d:"M53 36a34 34 0 0 0 0 48",stroke:o(3)},null),h("path",{d:"M95 73a19 19 0 0 0 6-13c0-5-2-9-6-13",stroke:o(3)},null),h("path",{d:"M106 84a34 34 0 0 0 0-48",stroke:o(3)},null)]),h("g",{transform:"translate(31 105)"},[h("rect",{fill:"#EBEDF0",width:"98",height:"34",rx:"2"},null),h("rect",{fill:"#FFF",x:"9",y:"8",width:"80",height:"18",rx:"1.1"},null),h("rect",{fill:"#EBEDF0",x:"15",y:"12",width:"18",height:"6",rx:"1.1"},null)])])]),g=()=>h("svg",{viewBox:"0 0 160 160"},[h("defs",{"data-allow-mismatch":"children"},[h("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:s(5)},[l("#F2F3F5","#DCDEE0")]),h("linearGradient",{x1:"95%",y1:"48%",x2:"5.5%",y2:"51%",id:s(6)},[l("#EAEDF1","#DCDEE0")]),h("linearGradient",{y1:"45%",x2:"100%",y2:"54%",id:s(7)},[l("#EAEDF1","#DCDEE0")])]),d(),f(),h("g",{transform:"translate(36 50)",fill:"none"},[h("g",{transform:"translate(8)"},[h("rect",{fill:"#EBEDF0",opacity:".6",x:"38",y:"13",width:"36",height:"53",rx:"2"},null),h("rect",{fill:o(5),width:"64",height:"66",rx:"2","data-allow-mismatch":"attribute"},null),h("rect",{fill:"#FFF",x:"6",y:"6",width:"52",height:"55",rx:"1"},null),h("g",{transform:"translate(15 17)",fill:o(6),"data-allow-mismatch":"attribute"},[h("rect",{width:"34",height:"6",rx:"1"},null),h("path",{d:"M0 14h34v6H0z"},null),h("rect",{y:"28",width:"34",height:"6",rx:"1"},null)])]),h("rect",{fill:o(7),y:"61",width:"88",height:"28",rx:"1","data-allow-mismatch":"attribute"},null),h("rect",{fill:"#F7F8FA",x:"29",y:"72",width:"30",height:"6",rx:"1"},null)])]),_=()=>h("svg",{viewBox:"0 0 160 160"},[h("defs",null,[h("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:s(8),"data-allow-mismatch":"attribute"},[l("#EAEDF1","#DCDEE0")])]),d(),f(),c("c"),h("path",{d:"m59 60 21 21 21-21h3l9 9v3L92 93l21 21v3l-9 9h-3l-21-21-21 21h-3l-9-9v-3l21-21-21-21v-3l9-9h3Z",fill:o(8),"data-allow-mismatch":"attribute"},null)]),T=()=>h("svg",{viewBox:"0 0 160 160"},[h("defs",{"data-allow-mismatch":"children"},[h("linearGradient",{x1:"50%",y1:"100%",x2:"50%",id:s(9)},[l("#EEE","#D8D8D8")]),h("linearGradient",{x1:"100%",y1:"50%",y2:"50%",id:s(10)},[l("#F2F3F5","#DCDEE0")]),h("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:s(11)},[l("#F2F3F5","#DCDEE0")]),h("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:s(12)},[l("#FFF","#F7F8FA")])]),d(),f(),c("d"),h("g",{transform:"rotate(-45 113 -4)",fill:"none","data-allow-mismatch":"children"},[h("rect",{fill:o(9),x:"24",y:"52.8",width:"5.8",height:"19",rx:"1"},null),h("rect",{fill:o(10),x:"22.1",y:"67.3",width:"9.9",height:"28",rx:"1"},null),h("circle",{stroke:o(11),"stroke-width":"8",cx:"27",cy:"27",r:"27"},null),h("circle",{fill:o(12),cx:"27",cy:"27",r:"16"},null),h("path",{d:"M37 7c-8 0-15 5-16 12",stroke:o(11),"stroke-width":"3",opacity:".5","stroke-linecap":"round",transform:"rotate(45 29 13)"},null)])]),b=()=>{var C;if(e.image)return e.image();const y={error:_,search:T,network:m,default:g};return((C=y[t.image])==null?void 0:C.call(y))||h("img",{src:t.image},null)};return()=>h("div",{class:nu()},[h("div",{class:nu("image"),style:Pi(t.imageSize)},[b()]),n(),r()])}});const QC=oe(O4),[V4,Vr,Oo]=ee("coupon-list"),L4={code:le(""),coupons:At(),currency:le("¥"),showCount:Q,emptyImage:String,enabledTitle:String,disabledTitle:String,disabledCoupons:At(),showExchangeBar:Q,showCloseButton:Q,closeButtonText:String,inputPlaceholder:String,exchangeMinLength:Bt(1),exchangeButtonText:String,displayedCouponIndex:Bt(-1),exchangeButtonLoading:Boolean,exchangeButtonDisabled:Boolean,chosenCoupon:{type:[Number,Array],default:-1}};var N4=X({name:V4,props:L4,emits:["change","exchange","update:code"],setup(t,{emit:e,slots:n}){const[r,i]=fc(),s=j(),o=j(),a=j(0),l=j(0),c=j(t.code),d=z(()=>!t.exchangeButtonLoading&&(t.exchangeButtonDisabled||!c.value||c.value.length<t.exchangeMinLength)),f=()=>{const A=dt(s).height,D=dt(o).height+44;l.value=(A>D?A:rr.value)-D},m=()=>{e("exchange",c.value),t.code||(c.value="")},g=y=>{qe(()=>{var A;return(A=r.value[y])==null?void 0:A.scrollIntoView()})},_=()=>h(QC,{image:t.emptyImage},{default:()=>[h("p",{class:Vr("empty-tip")},[Oo("noCoupon")])]}),T=()=>{if(t.showExchangeBar)return h("div",{ref:o,class:Vr("exchange-bar")},[h(_i,{modelValue:c.value,"onUpdate:modelValue":y=>c.value=y,clearable:!0,border:!1,class:Vr("field"),placeholder:t.inputPlaceholder||Oo("placeholder"),maxlength:"20"},null),h(Tn,{plain:!0,type:"primary",class:Vr("exchange"),text:t.exchangeButtonText||Oo("exchange"),loading:t.exchangeButtonLoading,disabled:d.value,onClick:m},null)])},b=()=>{const{coupons:y,chosenCoupon:A}=t,D=t.showCount?` (${y.length})`:"",x=(t.enabledTitle||Oo("enable"))+D,O=(R=[],v=0)=>R.includes(v)?R.filter(I=>I!==v):[...R,v];return h(ga,{title:x},{default:()=>{var R;return[h("div",{class:Vr("list",{"with-bottom":t.showCloseButton}),style:{height:`${l.value}px`}},[y.map((v,I)=>h(km,{key:v.id,ref:i(I),coupon:v,chosen:Array.isArray(A)?A.includes(I):I===A,currency:t.currency,onClick:()=>e("change",Array.isArray(A)?O(A,I):I)},null)),!y.length&&_(),(R=n["list-footer"])==null?void 0:R.call(n)])]}})},C=()=>{const{disabledCoupons:y}=t,A=t.showCount?` (${y.length})`:"",D=(t.disabledTitle||Oo("disabled"))+A;return h(ga,{title:D},{default:()=>{var x;return[h("div",{class:Vr("list",{"with-bottom":t.showCloseButton}),style:{height:`${l.value}px`}},[y.map(O=>h(km,{disabled:!0,key:O.id,coupon:O,currency:t.currency},null)),!y.length&&_(),(x=n["disabled-list-footer"])==null?void 0:x.call(n)])]}})};return he(()=>t.code,y=>{c.value=y}),he(rr,f),he(c,y=>e("update:code",y)),he(()=>t.displayedCouponIndex,g),Lt(()=>{f(),g(t.displayedCouponIndex)}),()=>h("div",{ref:s,class:Vr()},[T(),h(mc,{active:a.value,"onUpdate:active":y=>a.value=y,class:Vr("tab")},{default:()=>[b(),C()]}),h("div",{class:Vr("bottom")},[n["list-button"]?n["list-button"]():Wt(h(Tn,{round:!0,block:!0,type:"primary",class:Vr("close"),text:t.closeButtonText||Oo("close"),onClick:()=>e("change",Array.isArray(t.chosenCoupon)?[]:-1)},null),[[rn,t.showCloseButton]])])])}});const XC=oe(N4),Sb=new Date().getFullYear(),[M4]=ee("date-picker"),F4=ke({},UC,{columnsType:{type:Array,default:()=>["year","month","day"]},minDate:{type:Date,default:()=>new Date(Sb-10,0,1),validator:Gl},maxDate:{type:Date,default:()=>new Date(Sb+10,11,31),validator:Gl}});var B4=X({name:M4,props:F4,emits:["confirm","cancel","change","update:modelValue"],setup(t,{emit:e,slots:n}){const r=j(t.modelValue),i=j(!1),s=j(),o=z(()=>i.value?t.modelValue:r.value),a=x=>x===t.minDate.getFullYear(),l=x=>x===t.maxDate.getFullYear(),c=x=>x===t.minDate.getMonth()+1,d=x=>x===t.maxDate.getMonth()+1,f=x=>{const{minDate:O,columnsType:R}=t,v=R.indexOf(x),I=o.value[v];if(I)return+I;switch(x){case"year":return O.getFullYear();case"month":return O.getMonth()+1;case"day":return O.getDate()}},m=()=>{const x=t.minDate.getFullYear(),O=t.maxDate.getFullYear();return ra(x,O,"year",t.formatter,t.filter,o.value)},g=()=>{const x=f("year"),O=a(x)?t.minDate.getMonth()+1:1,R=l(x)?t.maxDate.getMonth()+1:12;return ra(O,R,"month",t.formatter,t.filter,o.value)},_=()=>{const x=f("year"),O=f("month"),R=a(x)&&c(O)?t.minDate.getDate():1,v=l(x)&&d(O)?t.maxDate.getDate():zC(x,O);return ra(R,v,"day",t.formatter,t.filter,o.value)},T=()=>{var x;return(x=s.value)==null?void 0:x.confirm()},b=()=>r.value,C=z(()=>t.columnsType.map(x=>{switch(x){case"year":return m();case"month":return g();case"day":return _();default:return[]}}));he(r,x=>{zr(x,t.modelValue)||e("update:modelValue",x)}),he(()=>t.modelValue,(x,O)=>{i.value=zr(O,r.value),x=jC(x,C.value),zr(x,r.value)||(r.value=x),i.value=!1},{immediate:!0});const y=(...x)=>e("change",...x),A=(...x)=>e("cancel",...x),D=(...x)=>e("confirm",...x);return Je({confirm:T,getSelectedDate:b}),()=>h(gc,Qe({ref:s,modelValue:r.value,"onUpdate:modelValue":x=>r.value=x,columns:C.value,onChange:y,onCancel:A,onConfirm:D},lt(t,$C)),n)}});const U4=oe(B4),[$4,hr,ru]=ee("dialog"),z4=ke({},Ra,{title:String,theme:String,width:ie,message:[String,Function],callback:Function,allowHtml:Boolean,className:Rt,transition:le("van-dialog-bounce"),messageAlign:String,closeOnPopstate:Q,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:Q,closeOnClickOverlay:Boolean,keyboardEnabled:Q}),j4=[...up,"transition","closeOnPopstate"];var JC=X({name:$4,props:z4,emits:["confirm","cancel","keydown","update:show"],setup(t,{emit:e,slots:n}){const r=j(),i=Ct({confirm:!1,cancel:!1}),s=C=>e("update:show",C),o=C=>{var y;s(!1),(y=t.callback)==null||y.call(t,C)},a=C=>()=>{t.show&&(e(C),t.beforeClose?(i[C]=!0,Cs(t.beforeClose,{args:[C],done(){o(C),i[C]=!1},canceled(){i[C]=!1}})):o(C))},l=a("cancel"),c=a("confirm"),d=Wk(C=>{var y,A;if(!t.keyboardEnabled||C.target!==((A=(y=r.value)==null?void 0:y.popupRef)==null?void 0:A.value))return;({Enter:t.showConfirmButton?c:_m,Escape:t.showCancelButton?l:_m})[C.key](),e("keydown",C)},["enter","esc"]),f=()=>{const C=n.title?n.title():t.title;if(C)return h("div",{class:hr("header",{isolated:!t.message&&!n.default})},[C])},m=C=>{const{message:y,allowHtml:A,messageAlign:D}=t,x=hr("message",{"has-title":C,[D]:D}),O=ma(y)?y():y;return A&&typeof O=="string"?h("div",{class:x,innerHTML:O},null):h("div",{class:x},[O])},g=()=>{if(n.default)return h("div",{class:hr("content")},[n.default()]);const{title:C,message:y,allowHtml:A}=t;if(y){const D=!!(C||n.title);return h("div",{key:A?1:0,class:hr("content",{isolated:!D})},[m(D)])}},_=()=>h("div",{class:[YI,hr("footer")]},[t.showCancelButton&&h(Tn,{size:"large",text:t.cancelButtonText||ru("cancel"),class:hr("cancel"),style:{color:t.cancelButtonColor},loading:i.cancel,disabled:t.cancelButtonDisabled,onClick:l},null),t.showConfirmButton&&h(Tn,{size:"large",text:t.confirmButtonText||ru("confirm"),class:[hr("confirm"),{[QI]:t.showCancelButton}],style:{color:t.confirmButtonColor},loading:i.confirm,disabled:t.confirmButtonDisabled,onClick:c},null)]),T=()=>h(cp,{class:hr("footer")},{default:()=>[t.showCancelButton&&h(sd,{type:"warning",text:t.cancelButtonText||ru("cancel"),class:hr("cancel"),color:t.cancelButtonColor,loading:i.cancel,disabled:t.cancelButtonDisabled,onClick:l},null),t.showConfirmButton&&h(sd,{type:"danger",text:t.confirmButtonText||ru("confirm"),class:hr("confirm"),color:t.confirmButtonColor,loading:i.confirm,disabled:t.confirmButtonDisabled,onClick:c},null)]}),b=()=>n.footer?n.footer():t.theme==="round-button"?T():_();return()=>{const{width:C,title:y,theme:A,message:D,className:x}=t;return h(kr,Qe({ref:r,role:"dialog",class:[hr([A]),x],style:{width:ze(C)},tabindex:0,"aria-labelledby":y||D,onKeydown:d,"onUpdate:show":s},lt(t,j4)),{default:()=>[f(),g(),b()]})}}});let Pm;const H4={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let q4=ke({},H4);function G4(){({instance:Pm}=pp({setup(){const{state:e,toggle:n}=gp();return()=>h(JC,Qe(e,{"onUpdate:show":n}),null)}}))}function er(t){return Kn?new Promise((e,n)=>{Pm||G4(),Pm.open(ke({},q4,t,{callback:r=>{(r==="confirm"?e:n)(r)}}))}):Promise.resolve(void 0)}const _o=t=>er(ke({showCancelButton:!0},t)),ZC=oe(JC),[W4,K4]=ee("divider"),Y4={dashed:Boolean,hairline:Q,vertical:Boolean,contentPosition:le("center")};var Q4=X({name:W4,props:Y4,setup(t,{slots:e}){return()=>{var n;return h("div",{role:"separator",class:K4({dashed:t.dashed,hairline:t.hairline,vertical:t.vertical,[`content-${t.contentPosition}`]:!!e.default&&!t.vertical})},[!t.vertical&&((n=e.default)==null?void 0:n.call(e))])}}});const e1=oe(Q4),[t1,iu]=ee("dropdown-menu"),X4={overlay:Q,zIndex:ie,duration:we(.2),direction:le("down"),activeColor:String,autoLocate:Boolean,closeOnClickOutside:Q,closeOnClickOverlay:Q,swipeThreshold:ie},n1=Symbol(t1);var J4=X({name:t1,props:X4,setup(t,{slots:e}){const n=Pa(),r=j(),i=j(),s=j(0),{children:o,linkChildren:a}=En(n1),l=ka(r),c=z(()=>o.some(y=>y.state.showWrapper)),d=z(()=>t.swipeThreshold&&o.length>+t.swipeThreshold),f=z(()=>{if(c.value&&it(t.zIndex))return{zIndex:+t.zIndex+1}}),m=()=>{o.forEach(y=>{y.toggle(!1)})},g=()=>{t.closeOnClickOutside&&m()},_=()=>{if(i.value){const y=dt(i);t.direction==="down"?s.value=y.bottom:s.value=rr.value-y.top}},T=()=>{c.value&&_()},b=y=>{o.forEach((A,D)=>{D===y?A.toggle():A.state.showPopup&&A.toggle(!1,{immediate:!0})})},C=(y,A)=>{const{showPopup:D}=y.state,{disabled:x,titleClass:O}=y;return h("div",{id:`${n}-${A}`,role:"button",tabindex:x?void 0:0,"data-allow-mismatch":"attribute",class:[iu("item",{disabled:x,grow:d.value}),{[wn]:!x}],onClick:()=>{x||b(A)}},[h("span",{class:[iu("title",{down:D===(t.direction==="down"),active:D}),O],style:{color:D?t.activeColor:""}},[h("div",{class:"van-ellipsis"},[y.renderTitle()])])])};return Je({close:m}),a({id:n,props:t,offset:s,updateOffset:_}),Jd(r,g),Vt("scroll",T,{target:l,passive:!0}),()=>{var y;return h("div",{ref:r,class:iu()},[h("div",{ref:i,style:f.value,class:iu("bar",{opened:c.value,scrollable:d.value})},[o.map(C)]),(y=e.default)==null?void 0:y.call(e)])}}});const[Z4,su]=ee("dropdown-item"),e3={title:String,options:At(),disabled:Boolean,teleport:[String,Object],lazyRender:Q,modelValue:Rt,titleClass:Rt};var t3=X({name:Z4,inheritAttrs:!1,props:e3,emits:["open","opened","close","closed","change","update:modelValue"],setup(t,{emit:e,slots:n,attrs:r}){const i=Ct({showPopup:!1,transition:!0,showWrapper:!1}),s=j(),{parent:o,index:a}=on(n1);if(!o)return;const l=y=>()=>e(y),c=l("open"),d=l("close"),f=l("opened"),m=()=>{i.showWrapper=!1,e("closed")},g=y=>{t.teleport&&y.stopPropagation()},_=(y=!i.showPopup,A={})=>{y!==i.showPopup&&(i.showPopup=y,i.transition=!A.immediate,y&&(o.updateOffset(),i.showWrapper=!0))},T=()=>{if(n.title)return n.title();if(t.title)return t.title;const y=t.options.find(A=>A.value===t.modelValue);return y?y.text:""},b=y=>{const{activeColor:A}=o.props,{disabled:D}=y,x=y.value===t.modelValue,O=()=>{D||(i.showPopup=!1,y.value!==t.modelValue&&(e("update:modelValue",y.value),e("change",y.value)))},R=()=>{if(x)return h(je,{class:su("icon"),color:D?void 0:A,name:"success"},null)};return h(Rr,{role:"menuitem",key:String(y.value),icon:y.icon,title:y.text,class:su("option",{active:x,disabled:D}),style:{color:x?A:""},tabindex:x?0:-1,clickable:!D,onClick:O},{value:R})},C=()=>{const{offset:y}=o,{autoLocate:A,zIndex:D,overlay:x,duration:O,direction:R,closeOnClickOverlay:v}=o.props,I=xi(D);let k=y.value;if(A&&s.value){const E=nF(s.value);E&&(k-=dt(E).top)}return R==="down"?I.top=`${k}px`:I.bottom=`${k}px`,Wt(h("div",Qe({ref:s,style:I,class:su([R]),onClick:g},r),[h(kr,{show:i.showPopup,"onUpdate:show":E=>i.showPopup=E,role:"menu",class:su("content"),overlay:x,position:R==="down"?"top":"bottom",duration:i.transition?O:0,lazyRender:t.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${o.id}-${a.value}`,"data-allow-mismatch":"attribute",closeOnClickOverlay:v,onOpen:c,onClose:d,onOpened:f,onClosed:m},{default:()=>{var E;return[t.options.map(b),(E=n.default)==null?void 0:E.call(n)]}})]),[[rn,i.showWrapper]])};return Je({state:i,toggle:_,renderTitle:T}),()=>t.teleport?h(ao,{to:t.teleport},{default:()=>[C()]}):C()}});const n3=oe(t3),r3=oe(J4),i3={gap:Bt(24),icon:String,axis:le("y"),magnetic:String,offset:{type:Object,default:()=>({x:-1,y:-1})},teleport:{type:[String,Object],default:"body"}},[s3,Ab]=ee("floating-bubble");var o3=X({name:s3,inheritAttrs:!1,props:i3,emits:["click","update:offset","offsetChange"],setup(t,{slots:e,emit:n,attrs:r}){const i=j(),s=j({x:0,y:0,width:0,height:0}),o=z(()=>({top:t.gap,right:wr.value-s.value.width-t.gap,bottom:rr.value-s.value.height-t.gap,left:t.gap})),a=j(!1);let l=!1;const c=z(()=>{const A={},D=ze(s.value.x),x=ze(s.value.y);return A.transform=`translate3d(${D}, ${x}, 0)`,(a.value||!l)&&(A.transition="none"),A}),d=()=>{if(!y.value)return;const{width:A,height:D}=dt(i.value),{offset:x}=t;s.value={x:x.x>-1?x.x:wr.value-A-t.gap,y:x.y>-1?x.y:rr.value-D-t.gap,width:A,height:D}},f=ur();let m=0,g=0;const _=A=>{f.start(A),a.value=!0,m=s.value.x,g=s.value.y};Vt("touchmove",A=>{if(A.preventDefault(),f.move(A),t.axis!=="lock"&&!f.isTap.value){if(t.axis==="x"||t.axis==="xy"){let x=m+f.deltaX.value;x<o.value.left&&(x=o.value.left),x>o.value.right&&(x=o.value.right),s.value.x=x}if(t.axis==="y"||t.axis==="xy"){let x=g+f.deltaY.value;x<o.value.top&&(x=o.value.top),x>o.value.bottom&&(x=o.value.bottom),s.value.y=x}const D=lt(s.value,["x","y"]);n("update:offset",D)}},{target:i});const b=()=>{a.value=!1,qe(()=>{if(t.magnetic==="x"){const A=id([o.value.left,o.value.right],s.value.x);s.value.x=A}if(t.magnetic==="y"){const A=id([o.value.top,o.value.bottom],s.value.y);s.value.y=A}if(!f.isTap.value){const A=lt(s.value,["x","y"]);n("update:offset",A),(m!==A.x||g!==A.y)&&n("offsetChange",A)}})},C=A=>{f.isTap.value?n("click",A):A.stopPropagation()};Lt(()=>{d(),qe(()=>{l=!0})}),he([wr,rr,()=>t.gap,()=>t.offset],d,{deep:!0});const y=j(!0);return Gr(()=>{y.value=!0}),Wr(()=>{t.teleport&&(y.value=!1)}),()=>{const A=Wt(h("div",Qe({class:Ab(),ref:i,onTouchstartPassive:_,onTouchend:b,onTouchcancel:b,onClickCapture:C,style:c.value},r),[e.default?e.default():h(OF,{name:t.icon,class:Ab("icon")},null)]),[[rn,y.value]]);return t.teleport?h(ao,{to:t.teleport},{default:()=>[A]}):A}}});const a3=oe(o3),l3={height:we(0),anchors:At(),duration:we(.3),contentDraggable:Q,lockScroll:Boolean,safeAreaInsetBottom:Q},[c3,ou]=ee("floating-panel");var u3=X({name:c3,props:l3,emits:["heightChange","update:height"],setup(t,{emit:e,slots:n}){const i=j(),s=j(),o=hp(()=>+t.height,A=>e("update:height",A)),a=z(()=>{var A,D;return{min:(A=t.anchors[0])!=null?A:100,max:(D=t.anchors[t.anchors.length-1])!=null?D:Math.round(rr.value*.6)}}),l=z(()=>t.anchors.length>=2?t.anchors:[a.value.min,a.value.max]),c=j(!1),d=z(()=>({height:ze(a.value.max),transform:`translateY(calc(100% + ${ze(-o.value)}))`,transition:c.value?"none":`transform ${t.duration}s cubic-bezier(0.18, 0.89, 0.32, 1.28)`})),f=A=>{const D=Math.abs(A),{min:x,max:O}=a.value;return D>O?-(O+(D-O)*.2):D<x?-(x-(x-D)*.2):A};let m,g=-1;const _=ur(),T=A=>{_.start(A),c.value=!0,m=-o.value,g=-1},b=A=>{var D;_.move(A);const x=A.target;if(s.value===x||(D=s.value)!=null&&D.contains(x)){const{scrollTop:R}=s.value;if(g=Math.max(g,R),!t.contentDraggable)return;if(-m<a.value.max)yt(A,!0);else if(!(R<=0&&_.deltaY.value>0)||g>0)return}const O=_.deltaY.value+m;o.value=-f(O)},C=()=>{g=-1,c.value=!1,o.value=id(l.value,o.value),o.value!==-m&&e("heightChange",{height:o.value})};he(a,()=>{o.value=id(l.value,o.value)},{immediate:!0}),aC(i,()=>t.lockScroll||c.value),Vt("touchmove",b,{target:i});const y=()=>n.header?n.header():h("div",{class:ou("header")},[h("div",{class:ou("header-bar")},null)]);return()=>{var A;return h("div",{class:[ou(),{"van-safe-area-bottom":t.safeAreaInsetBottom}],ref:i,style:d.value,onTouchstartPassive:T,onTouchend:C,onTouchcancel:C},[y(),h("div",{class:ou("content"),ref:s},[(A=n.default)==null?void 0:A.call(n)])])}}});const r1=oe(u3),[i1,d3]=ee("grid"),h3={square:Boolean,center:Q,border:Q,gutter:ie,reverse:Boolean,iconSize:ie,direction:String,clickable:Boolean,columnNum:we(4)},s1=Symbol(i1);var f3=X({name:i1,props:h3,setup(t,{slots:e}){const{linkChildren:n}=En(s1);return n({props:t}),()=>{var r;return h("div",{style:{paddingLeft:ze(t.gutter)},class:[d3(),{[YI]:t.border&&!t.gutter}]},[(r=e.default)==null?void 0:r.call(e)])}}});const m3=oe(f3),[g3,au]=ee("grid-item"),p3=ke({},Ss,{dot:Boolean,text:String,icon:String,badge:ie,iconColor:String,iconPrefix:String,badgeProps:Object});var v3=X({name:g3,props:p3,setup(t,{slots:e}){const{parent:n,index:r}=on(s1),i=po();if(!n)return;const s=z(()=>{const{square:d,gutter:f,columnNum:m}=n.props,g=`${100/+m}%`,_={flexBasis:g};if(d)_.paddingTop=g;else if(f){const T=ze(f);_.paddingRight=T,r.value>=+m&&(_.marginTop=T)}return _}),o=z(()=>{const{square:d,gutter:f}=n.props;if(d&&f){const m=ze(f);return{right:m,bottom:m,height:"auto"}}}),a=()=>{if(e.icon)return h(vo,Qe({dot:t.dot,content:t.badge},t.badgeProps),{default:e.icon});if(t.icon)return h(je,{dot:t.dot,name:t.icon,size:n.props.iconSize,badge:t.badge,class:au("icon"),color:t.iconColor,badgeProps:t.badgeProps,classPrefix:t.iconPrefix},null)},l=()=>{if(e.text)return e.text();if(t.text)return h("span",{class:au("text")},[t.text])},c=()=>e.default?e.default():[a(),l()];return()=>{const{center:d,border:f,square:m,gutter:g,reverse:_,direction:T,clickable:b}=n.props,C=[au("content",[T,{center:d,square:m,reverse:_,clickable:b,surround:f&&g}]),{[Di]:f}];return h("div",{class:[au({square:m})],style:s.value},[h("div",{role:b?"button":void 0,class:C,style:o.value,tabindex:b?0:void 0,onClick:i},[c()])])}}});const _3=oe(v3),[y3,kb]=ee("highlight"),b3={autoEscape:Q,caseSensitive:Boolean,highlightClass:String,highlightTag:le("span"),keywords:Gt([String,Array]),sourceString:le(""),tag:le("div"),unhighlightClass:String,unhighlightTag:le("span")};var w3=X({name:y3,props:b3,setup(t){const e=z(()=>{const{autoEscape:r,caseSensitive:i,keywords:s,sourceString:o}=t,a=i?"g":"gi";let c=(Array.isArray(s)?s:[s]).filter(f=>f).reduce((f,m)=>{r&&(m=m.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));const g=new RegExp(m,a);let _;for(;_=g.exec(o);){const T=_.index,b=g.lastIndex;if(T>=b){g.lastIndex++;continue}f.push({start:T,end:b,highlight:!0})}return f},[]);c=c.sort((f,m)=>f.start-m.start).reduce((f,m)=>{const g=f[f.length-1];if(!g||m.start>g.end){const _=g?g.end:0,T=m.start;_!==T&&f.push({start:_,end:T,highlight:!1}),f.push(m)}else g.end=Math.max(g.end,m.end);return f},[]);const d=c[c.length-1];return d||c.push({start:0,end:o.length,highlight:!1}),d&&d.end<o.length&&c.push({start:d.end,end:o.length,highlight:!1}),c}),n=()=>{const{sourceString:r,highlightClass:i,unhighlightClass:s,highlightTag:o,unhighlightTag:a}=t;return e.value.map(l=>{const{start:c,end:d,highlight:f}=l,m=r.slice(c,d);return f?h(o,{class:[kb("tag"),i]},{default:()=>[m]}):h(a,{class:s},{default:()=>[m]})})};return()=>{const{tag:r}=t;return h(r,{class:kb()},{default:()=>[n()]})}}});const T3=oe(w3),Rb=t=>Math.sqrt((t[0].clientX-t[1].clientX)**2+(t[0].clientY-t[1].clientY)**2),E3=t=>({x:(t[0].clientX+t[1].clientX)/2,y:(t[0].clientY+t[1].clientY)/2}),_f=ee("image-preview")[1],Pb=2.6,I3={src:String,show:Boolean,active:Number,minZoom:Gt(ie),maxZoom:Gt(ie),rootWidth:Gt(Number),rootHeight:Gt(Number),disableZoom:Boolean,doubleScale:Boolean,closeOnClickImage:Boolean,closeOnClickOverlay:Boolean,vertical:Boolean};var C3=X({props:I3,emits:["scale","close","longPress"],setup(t,{emit:e,slots:n}){const r=Ct({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,initializing:!1,imageRatio:0}),i=ur(),s=j(),o=j(),a=j(!1),l=j(!1);let c=0;const d=z(()=>{const{scale:Y,moveX:de,moveY:me,moving:Ue,zooming:Xe,initializing:H}=r,te={transitionDuration:Xe||Ue||H?"0s":".3s"};return(Y!==1||l.value)&&(te.transform=`matrix(${Y}, 0, 0, ${Y}, ${de}, ${me})`),te}),f=z(()=>{if(r.imageRatio){const{rootWidth:Y,rootHeight:de}=t,me=a.value?de/r.imageRatio:Y;return Math.max(0,(r.scale*me-Y)/2)}return 0}),m=z(()=>{if(r.imageRatio){const{rootWidth:Y,rootHeight:de}=t,me=a.value?de:Y*r.imageRatio;return Math.max(0,(r.scale*me-de)/2)}return 0}),g=(Y,de)=>{var me;if(Y=qt(Y,+t.minZoom,+t.maxZoom+1),Y!==r.scale){const Ue=Y/r.scale;if(r.scale=Y,de){const Xe=dt((me=s.value)==null?void 0:me.$el),H={x:Xe.width*.5,y:Xe.height*.5},te=r.moveX-(de.x-Xe.left-H.x)*(Ue-1),ge=r.moveY-(de.y-Xe.top-H.y)*(Ue-1);r.moveX=qt(te,-f.value,f.value),r.moveY=qt(ge,-m.value,m.value)}else r.moveX=0,r.moveY=l.value?c:0;e("scale",{scale:Y,index:t.active})}},_=()=>{g(1)},T=()=>{const Y=r.scale>1?1:2;g(Y,Y===2||l.value?{x:i.startX.value,y:i.startY.value}:void 0)};let b,C,y,A,D,x,O,R,v=!1;const I=Y=>{const{touches:de}=Y;if(b=de.length,b===2&&t.disableZoom)return;const{offsetX:me}=i;i.start(Y),C=r.moveX,y=r.moveY,R=Date.now(),v=!1,r.moving=b===1&&(r.scale!==1||l.value),r.zooming=b===2&&!me.value,r.zooming&&(A=r.scale,D=Rb(de))},k=Y=>{const{touches:de}=Y;if(i.move(Y),r.moving){const{deltaX:me,deltaY:Ue}=i,Xe=me.value+C,H=Ue.value+y;if((t.vertical?i.isVertical()&&Math.abs(H)>m.value:i.isHorizontal()&&Math.abs(Xe)>f.value)&&!v){r.moving=!1;return}v=!0,yt(Y,!0),r.moveX=qt(Xe,-f.value,f.value),r.moveY=qt(H,-m.value,m.value)}if(r.zooming&&(yt(Y,!0),de.length===2)){const me=Rb(de),Ue=A*me/D;x=E3(de),g(Ue,x)}},E=Y=>{var de;const me=(de=o.value)==null?void 0:de.$el;if(!me)return;const Ue=me.firstElementChild,Xe=Y.target===me,H=Ue==null?void 0:Ue.contains(Y.target);!t.closeOnClickImage&&H||!t.closeOnClickOverlay&&Xe||e("close")},S=Y=>{if(b>1)return;const de=Date.now()-R,me=250;i.isTap.value&&(de<me?t.doubleScale?O?(clearTimeout(O),O=null,T()):O=setTimeout(()=>{E(Y),O=null},me):E(Y):de>JI&&e("longPress"))},P=Y=>{let de=!1;if((r.moving||r.zooming)&&(de=!0,r.moving&&C===r.moveX&&y===r.moveY&&(de=!1),!Y.touches.length)){r.zooming&&(r.moveX=qt(r.moveX,-f.value,f.value),r.moveY=qt(r.moveY,-m.value,m.value),r.zooming=!1),r.moving=!1,C=0,y=0,A=1,r.scale<1&&_();const me=+t.maxZoom;r.scale>me&&g(me,x)}yt(Y,de),S(Y),i.reset()},re=()=>{const{rootWidth:Y,rootHeight:de}=t,me=de/Y,{imageRatio:Ue}=r;a.value=r.imageRatio>me&&Ue<Pb,l.value=r.imageRatio>me&&Ue>=Pb,l.value&&(c=(Ue*Y-de)/2,r.moveY=c,r.initializing=!0,yn(()=>{r.initializing=!1})),_()},fe=Y=>{const{naturalWidth:de,naturalHeight:me}=Y.target;r.imageRatio=me/de,re()};return he(()=>t.active,_),he(()=>t.show,Y=>{Y||_()}),he(()=>[t.rootWidth,t.rootHeight],re),Vt("touchmove",k,{target:z(()=>{var Y;return(Y=o.value)==null?void 0:Y.$el})}),Je({resetScale:_}),()=>{const Y={loading:()=>h(cr,{type:"spinner"},null)};return h(ih,{ref:o,class:_f("swipe-item"),onTouchstartPassive:I,onTouchend:P,onTouchcancel:P},{default:()=>[n.image?h("div",{class:_f("image-wrap")},[n.image({src:t.src,onLoad:fe,style:d.value})]):h(ch,{ref:s,src:t.src,fit:"contain",class:_f("image",{vertical:a.value}),style:d.value,onLoad:fe},Y)]})}}});const[S3,Vo]=ee("image-preview"),A3=["show","teleport","transition","overlayStyle","closeOnPopstate"],k3={show:Boolean,loop:Q,images:At(),minZoom:we(1/3),maxZoom:we(3),overlay:Q,vertical:Boolean,closeable:Boolean,showIndex:Q,className:Rt,closeIcon:le("clear"),transition:String,beforeClose:Function,doubleScale:Q,overlayClass:Rt,overlayStyle:Object,swipeDuration:we(300),startPosition:we(0),showIndicators:Boolean,closeOnPopstate:Q,closeOnClickImage:Q,closeOnClickOverlay:Q,closeIconPosition:le("top-right"),teleport:[String,Object]};var o1=X({name:S3,props:k3,emits:["scale","close","closed","change","longPress","update:show"],setup(t,{emit:e,slots:n}){const r=j(),i=j(),s=Ct({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),o=()=>{if(r.value){const A=dt(r.value.$el);s.rootWidth=A.width,s.rootHeight=A.height,r.value.resize()}},a=A=>e("scale",A),l=A=>e("update:show",A),c=()=>{Cs(t.beforeClose,{args:[s.active],done:()=>l(!1)})},d=A=>{A!==s.active&&(s.active=A,e("change",A))},f=()=>{if(t.showIndex)return h("div",{class:Vo("index")},[n.index?n.index({index:s.active}):`${s.active+1} / ${t.images.length}`])},m=()=>{if(n.cover)return h("div",{class:Vo("cover")},[n.cover()])},g=()=>{s.disableZoom=!0},_=()=>{s.disableZoom=!1},T=()=>h(rh,{ref:r,lazyRender:!0,loop:t.loop,class:Vo("swipe"),vertical:t.vertical,duration:t.swipeDuration,initialSwipe:t.startPosition,showIndicators:t.showIndicators,indicatorColor:"white",onChange:d,onDragEnd:_,onDragStart:g},{default:()=>[t.images.map((A,D)=>h(C3,{ref:x=>{D===s.active&&(i.value=x)},src:A,show:t.show,active:s.active,maxZoom:t.maxZoom,minZoom:t.minZoom,rootWidth:s.rootWidth,rootHeight:s.rootHeight,disableZoom:s.disableZoom,doubleScale:t.doubleScale,closeOnClickImage:t.closeOnClickImage,closeOnClickOverlay:t.closeOnClickOverlay,vertical:t.vertical,onScale:a,onClose:c,onLongPress:()=>e("longPress",{index:D})},{image:n.image}))]}),b=()=>{if(t.closeable)return h(je,{role:"button",name:t.closeIcon,class:[Vo("close-icon",t.closeIconPosition),wn],onClick:c},null)},C=()=>e("closed"),y=(A,D)=>{var x;return(x=r.value)==null?void 0:x.swipeTo(A,D)};return Je({resetScale:()=>{var A;(A=i.value)==null||A.resetScale()},swipeTo:y}),Lt(o),he([wr,rr],o),he(()=>t.startPosition,A=>d(+A)),he(()=>t.show,A=>{const{images:D,startPosition:x}=t;A?(d(+x),qe(()=>{o(),y(+x,{immediate:!0})})):e("close",{index:s.active,url:D[s.active]})}),()=>h(kr,Qe({class:[Vo(),t.className],overlayClass:[Vo("overlay"),t.overlayClass],onClosed:C,"onUpdate:show":l},lt(t,A3)),{default:()=>[b(),T(),f(),m()]})}});let Au;const R3={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,vertical:!1,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,doubleScale:!0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeOnClickOverlay:!0,closeIconPosition:"top-right"};function P3(){({instance:Au}=pp({setup(){const{state:t,toggle:e}=gp(),n=()=>{t.images=[]};return()=>h(o1,Qe(t,{onClosed:n,"onUpdate:show":e}),null)}}))}const x3=(t,e=0)=>{if(Kn)return Au||P3(),t=Array.isArray(t)?{images:t,startPosition:e}:t,Au.open(ke({},R3,t)),Au},D3=oe(o1);function O3(){return Array(26).fill("").map((n,r)=>String.fromCharCode(65+r))}const[a1,yf]=ee("index-bar"),V3={sticky:Q,zIndex:ie,teleport:[String,Object],highlightColor:String,stickyOffsetTop:Bt(0),indexList:{type:Array,default:O3}},l1=Symbol(a1);var L3=X({name:a1,props:V3,emits:["select","change"],setup(t,{emit:e,slots:n}){const r=j(),i=j(),s=j(""),o=ur(),a=ka(r),{children:l,linkChildren:c}=En(l1);let d;c({props:t});const f=z(()=>{if(it(t.zIndex))return{zIndex:+t.zIndex+1}}),m=z(()=>{if(t.highlightColor)return{color:t.highlightColor}}),g=(v,I)=>{for(let k=l.length-1;k>=0;k--){const E=k>0?I[k-1].height:0,S=t.sticky?E+t.stickyOffsetTop:0;if(v+S>=I[k].top)return k}return-1},_=v=>l.find(I=>String(I.index)===v),T=()=>{if(oo(r))return;const{sticky:v,indexList:I}=t,k=Ci(a.value),E=dt(a),S=l.map(re=>re.getRect(a.value,E));let P=-1;if(d){const re=_(d);if(re){const fe=re.getRect(a.value,E);t.sticky&&t.stickyOffsetTop?P=g(fe.top-t.stickyOffsetTop,S):P=g(fe.top,S)}}else P=g(k,S);s.value=I[P],v&&l.forEach((re,fe)=>{const{state:Y,$el:de}=re;if(fe===P||fe===P-1){const me=de.getBoundingClientRect();Y.left=me.left,Y.width=me.width}else Y.left=null,Y.width=null;if(fe===P)Y.active=!0,Y.top=Math.max(t.stickyOffsetTop,S[fe].top-k)+E.top;else if(fe===P-1&&d===""){const me=S[P].top-k;Y.active=me>0,Y.top=me+E.top-S[fe].height}else Y.active=!1}),d=""},b=()=>{qe(T)};Vt("scroll",T,{target:a,passive:!0}),Lt(b),he(()=>t.indexList,b),he(s,v=>{v&&e("change",v)});const C=()=>t.indexList.map(v=>{const I=v===s.value;return h("span",{class:yf("index",{active:I}),style:I?m.value:void 0,"data-index":v},[v])}),y=v=>{d=String(v);const I=_(d);if(I){const k=Ci(a.value),E=dt(a),{offsetHeight:S}=document.documentElement;if(I.$el.scrollIntoView(),k===S-E.height){T();return}t.sticky&&t.stickyOffsetTop&&(Ks()===S-E.height?Wl(Ks()):Wl(Ks()-t.stickyOffsetTop)),e("select",I.index)}},A=v=>{const{index:I}=v.dataset;I&&y(I)},D=v=>{A(v.target)};let x;const O=v=>{if(o.move(v),o.isVertical()){yt(v);const{clientX:I,clientY:k}=v.touches[0],E=document.elementFromPoint(I,k);if(E){const{index:S}=E.dataset;S&&x!==S&&(x=S,A(E))}}},R=()=>h("div",{ref:i,class:yf("sidebar"),style:f.value,onClick:D,onTouchstartPassive:o.start},[C()]);return Je({scrollTo:y}),Vt("touchmove",O,{target:i}),()=>{var v;return h("div",{ref:r,class:yf()},[t.teleport?h(ao,{to:t.teleport},{default:()=>[R()]}):R(),(v=n.default)==null?void 0:v.call(n)])}}});const[N3,M3]=ee("index-anchor"),F3={index:ie};var B3=X({name:N3,props:F3,setup(t,{slots:e}){const n=Ct({top:0,left:null,rect:{top:0,height:0},width:null,active:!1}),r=j(),{parent:i}=on(l1);if(!i)return;const s=()=>n.active&&i.props.sticky,o=z(()=>{const{zIndex:l,highlightColor:c}=i.props;if(s())return ke(xi(l),{left:n.left?`${n.left}px`:void 0,width:n.width?`${n.width}px`:void 0,transform:n.top?`translate3d(0, ${n.top}px, 0)`:void 0,color:c})});return Je({state:n,getRect:(l,c)=>{const d=dt(r);return n.rect.height=d.height,l===window||l===document.body?n.rect.top=d.top+Ks():n.rect.top=d.top+Ci(l)-c.top,n.rect}}),()=>{const l=s();return h("div",{ref:r,style:{height:l?`${n.rect.height}px`:void 0}},[h("div",{style:o.value,class:[M3({sticky:l}),{[ap]:l}]},[e.default?e.default():t.index])])}}});const U3=oe(B3),$3=oe(L3),[z3,Lo,j3]=ee("list"),H3={error:Boolean,offset:we(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:le("down"),loadingText:String,finishedText:String,immediateCheck:Q};var q3=X({name:z3,props:H3,emits:["load","update:error","update:loading"],setup(t,{emit:e,slots:n}){const r=j(t.loading),i=j(),s=j(),o=RB(),a=ka(i),l=z(()=>t.scroller||a.value),c=()=>{qe(()=>{if(r.value||t.finished||t.disabled||t.error||(o==null?void 0:o.value)===!1)return;const{direction:_}=t,T=+t.offset,b=dt(l);if(!b.height||oo(i))return;let C=!1;const y=dt(s);_==="up"?C=b.top-y.top<=T:C=y.bottom-b.bottom<=T,C&&(r.value=!0,e("update:loading",!0),e("load"))})},d=()=>{if(t.finished){const _=n.finished?n.finished():t.finishedText;if(_)return h("div",{class:Lo("finished-text")},[_])}},f=()=>{e("update:error",!1),c()},m=()=>{if(t.error){const _=n.error?n.error():t.errorText;if(_)return h("div",{role:"button",class:Lo("error-text"),tabindex:0,onClick:f},[_])}},g=()=>{if(r.value&&!t.finished&&!t.disabled)return h("div",{class:Lo("loading")},[n.loading?n.loading():h(cr,{class:Lo("loading-icon")},{default:()=>[t.loadingText||j3("loading")]})])};return he(()=>[t.loading,t.finished,t.error],c),o&&he(o,_=>{_&&c()}),s0(()=>{r.value=t.loading}),Lt(()=>{t.immediateCheck&&c()}),Je({check:c}),Vt("scroll",c,{target:l,passive:!0}),()=>{var _;const T=(_=n.default)==null?void 0:_.call(n),b=h("div",{ref:s,class:Lo("placeholder")},null);return h("div",{ref:i,role:"feed",class:Lo(),"aria-busy":r.value},[t.direction==="down"?T:b,g(),d(),m(),t.direction==="up"?T:b])}}});const G3=oe(q3),[W3,ri]=ee("nav-bar"),K3={title:String,fixed:Boolean,zIndex:ie,border:Q,leftText:String,rightText:String,leftDisabled:Boolean,rightDisabled:Boolean,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:Q};var Y3=X({name:W3,props:K3,emits:["clickLeft","clickRight"],setup(t,{emit:e,slots:n}){const r=j(),i=th(r,ri),s=d=>{t.leftDisabled||e("clickLeft",d)},o=d=>{t.rightDisabled||e("clickRight",d)},a=()=>n.left?n.left():[t.leftArrow&&h(je,{class:ri("arrow"),name:"arrow-left"},null),t.leftText&&h("span",{class:ri("text")},[t.leftText])],l=()=>n.right?n.right():h("span",{class:ri("text")},[t.rightText]),c=()=>{const{title:d,fixed:f,border:m,zIndex:g}=t,_=xi(g),T=t.leftArrow||t.leftText||n.left,b=t.rightText||n.right;return h("div",{ref:r,style:_,class:[ri({fixed:f}),{[ap]:m,"van-safe-area-top":t.safeAreaInsetTop}]},[h("div",{class:ri("content")},[T&&h("div",{class:[ri("left",{disabled:t.leftDisabled}),t.clickable&&!t.leftDisabled?wn:""],onClick:s},[a()]),h("div",{class:[ri("title"),"van-ellipsis"]},[n.title?n.title():d]),b&&h("div",{class:[ri("right",{disabled:t.rightDisabled}),t.clickable&&!t.rightDisabled?wn:""],onClick:o},[l()])])])};return()=>t.fixed&&t.placeholder?i(c):c()}});const Q3=oe(Y3),[X3,Xa]=ee("notice-bar"),J3={text:String,mode:String,color:String,delay:we(1),speed:we(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}};var Z3=X({name:X3,props:J3,emits:["close","replay"],setup(t,{emit:e,slots:n}){let r=0,i=0,s;const o=j(),a=j(),l=Ct({show:!0,offset:0,duration:0}),c=()=>{if(n["left-icon"])return n["left-icon"]();if(t.leftIcon)return h(je,{class:Xa("left-icon"),name:t.leftIcon},null)},d=()=>{if(t.mode==="closeable")return"cross";if(t.mode==="link")return"arrow"},f=b=>{t.mode==="closeable"&&(l.show=!1,e("close",b))},m=()=>{if(n["right-icon"])return n["right-icon"]();const b=d();if(b)return h(je,{name:b,class:Xa("right-icon"),onClick:f},null)},g=()=>{l.offset=r,l.duration=0,yn(()=>{ns(()=>{l.offset=-i,l.duration=(i+r)/+t.speed,e("replay")})})},_=()=>{const b=t.scrollable===!1&&!t.wrapable,C={transform:l.offset?`translateX(${l.offset}px)`:"",transitionDuration:`${l.duration}s`};return h("div",{ref:o,role:"marquee",class:Xa("wrap")},[h("div",{ref:a,style:C,class:[Xa("content"),{"van-ellipsis":b}],onTransitionend:g},[n.default?n.default():t.text])])},T=()=>{const{delay:b,speed:C,scrollable:y}=t,A=it(b)?+b*1e3:0;r=0,i=0,l.offset=0,l.duration=0,clearTimeout(s),s=setTimeout(()=>{if(!o.value||!a.value||y===!1)return;const D=dt(o).width,x=dt(a).width;(y||x>D)&&ns(()=>{r=D,i=x,l.offset=-i,l.duration=i/+C})},A)};return eh(T),Aa(T),Vt("pageshow",T),Je({reset:T}),he(()=>[t.text,t.scrollable],T),()=>{const{color:b,wrapable:C,background:y}=t;return Wt(h("div",{role:"alert",class:Xa({wrapable:C}),style:{color:b,background:y}},[c(),_(),m()]),[[rn,l.show]])}}});const e9=oe(Z3),[t9,n9]=ee("notify"),r9=["lockScroll","position","show","teleport","zIndex"],i9=ke({},Ra,{type:le("danger"),color:String,message:ie,position:le("top"),className:Rt,background:String,lockScroll:Boolean});var s9=X({name:t9,props:i9,emits:["update:show"],setup(t,{emit:e,slots:n}){const r=i=>e("update:show",i);return()=>h(kr,Qe({class:[n9([t.type]),t.className],style:{color:t.color,background:t.background},overlay:!1,duration:.2,"onUpdate:show":r},lt(t,r9)),{default:()=>[n.default?n.default():t.message]})}});const o9=oe(s9),[a9,Sl]=ee("key"),l9=h("svg",{class:Sl("collapse-icon"),viewBox:"0 0 30 24"},[h("path",{d:"M26 13h-2v2h2v-2zm-8-3h2V8h-2v2zm2-4h2V4h-2v2zm2 4h4V4h-2v4h-2v2zm-7 14 3-3h-6l3 3zM6 13H4v2h2v-2zm16 0H8v2h14v-2zm-12-3h2V8h-2v2zM28 0l1 1 1 1v15l-1 2H1l-1-2V2l1-1 1-1zm0 2H2v15h26V2zM6 4v2H4V4zm10 2h2V4h-2v2zM8 9v1H4V8zm8 0v1h-2V8zm-6-5v2H8V4zm4 0v2h-2V4z",fill:"currentColor"},null)]),c9=h("svg",{class:Sl("delete-icon"),viewBox:"0 0 32 22"},[h("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null)]);var bf=X({name:a9,props:{type:String,text:ie,color:String,wider:Boolean,large:Boolean,loading:Boolean},emits:["press"],setup(t,{emit:e,slots:n}){const r=j(!1),i=ur(),s=c=>{i.start(c),r.value=!0},o=c=>{i.move(c),i.direction.value&&(r.value=!1)},a=c=>{r.value&&(n.default||yt(c),r.value=!1,e("press",t.text,t.type))},l=()=>{if(t.loading)return h(cr,{class:Sl("loading-icon")},null);const c=n.default?n.default():t.text;switch(t.type){case"delete":return c||c9;case"extra":return c||l9;default:return c}};return()=>h("div",{class:Sl("wrapper",{wider:t.wider}),onTouchstartPassive:s,onTouchmovePassive:o,onTouchend:a,onTouchcancel:a},[h("div",{role:"button",tabindex:0,class:Sl([t.color,{large:t.large,active:r.value,delete:t.type==="delete"}])},[l()])])}});const[u9,zi]=ee("number-keyboard"),d9={show:Boolean,title:String,theme:le("default"),zIndex:ie,teleport:[String,Object],maxlength:we(1/0),modelValue:le(""),transition:Q,blurOnClose:Q,showDeleteKey:Q,randomKeyOrder:Boolean,closeButtonText:String,deleteButtonText:String,closeButtonLoading:Boolean,hideOnClickOutside:Q,safeAreaInsetBottom:Q,extraKey:{type:[String,Array],default:""}};function h9(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[n],t[n]=r}return t}var f9=X({name:u9,inheritAttrs:!1,props:d9,emits:["show","hide","blur","input","close","delete","update:modelValue"],setup(t,{emit:e,slots:n,attrs:r}){const i=j(),s=()=>{const b=Array(9).fill("").map((C,y)=>({text:y+1}));return t.randomKeyOrder&&h9(b),b},o=()=>[...s(),{text:t.extraKey,type:"extra"},{text:0},{text:t.showDeleteKey?t.deleteButtonText:"",type:t.showDeleteKey?"delete":""}],a=()=>{const b=s(),{extraKey:C}=t,y=Array.isArray(C)?C:[C];return y.length===0?b.push({text:0,wider:!0}):y.length===1?b.push({text:0,wider:!0},{text:y[0],type:"extra"}):y.length===2&&b.push({text:y[0],type:"extra"},{text:0},{text:y[1],type:"extra"}),b},l=z(()=>t.theme==="custom"?a():o()),c=()=>{t.show&&e("blur")},d=()=>{e("close"),t.blurOnClose&&c()},f=()=>e(t.show?"show":"hide"),m=(b,C)=>{if(b===""){C==="extra"&&c();return}const y=t.modelValue;C==="delete"?(e("delete"),e("update:modelValue",y.slice(0,y.length-1))):C==="close"?d():y.length<+t.maxlength&&(e("input",b),e("update:modelValue",y+b))},g=()=>{const{title:b,theme:C,closeButtonText:y}=t,A=n["title-left"],D=y&&C==="default";if(b||D||A)return h("div",{class:zi("header")},[A&&h("span",{class:zi("title-left")},[A()]),b&&h("h2",{class:zi("title")},[b]),D&&h("button",{type:"button",class:[zi("close"),wn],onClick:d},[y])])},_=()=>l.value.map(b=>{const C={};return b.type==="delete"&&(C.default=n.delete),b.type==="extra"&&(C.default=n["extra-key"]),h(bf,{key:b.text,text:b.text,type:b.type,wider:b.wider,color:b.color,onPress:m},C)}),T=()=>{if(t.theme==="custom")return h("div",{class:zi("sidebar")},[t.showDeleteKey&&h(bf,{large:!0,text:t.deleteButtonText,type:"delete",onPress:m},{default:n.delete}),h(bf,{large:!0,text:t.closeButtonText,type:"close",color:"blue",loading:t.closeButtonLoading,onPress:m},null)])};return he(()=>t.show,b=>{t.transition||e(b?"show":"hide")}),t.hideOnClickOutside&&Jd(i,c,{eventName:"touchstart"}),()=>{const b=g(),C=h(ec,{name:t.transition?"van-slide-up":""},{default:()=>[Wt(h("div",Qe({ref:i,style:xi(t.zIndex),class:zi({unfit:!t.safeAreaInsetBottom,"with-title":!!b}),onAnimationend:f,onTouchstartPassive:sp},r),[b,h("div",{class:zi("body")},[h("div",{class:zi("keys")},[_()]),T()])]),[[rn,t.show]])]});return t.teleport?h(ao,{to:t.teleport},{default:()=>[C]}):C}}});const m9=oe(f9),[g9,No,xb]=ee("pagination"),wf=(t,e,n)=>({number:t,text:e,active:n}),p9={mode:le("multi"),prevText:String,nextText:String,pageCount:we(0),modelValue:Bt(0),totalItems:we(0),showPageSize:we(5),itemsPerPage:we(10),forceEllipses:Boolean,showPrevButton:Q,showNextButton:Q};var v9=X({name:g9,props:p9,emits:["change","update:modelValue"],setup(t,{emit:e,slots:n}){const r=z(()=>{const{pageCount:d,totalItems:f,itemsPerPage:m}=t,g=+d||Math.ceil(+f/+m);return Math.max(1,g)}),i=z(()=>{const d=[],f=r.value,m=+t.showPageSize,{modelValue:g,forceEllipses:_}=t;let T=1,b=f;const C=m<f;C&&(T=Math.max(g-Math.floor(m/2),1),b=T+m-1,b>f&&(b=f,T=b-m+1));for(let y=T;y<=b;y++){const A=wf(y,y,y===g);d.push(A)}if(C&&m>0&&_){if(T>1){const y=wf(T-1,"...");d.unshift(y)}if(b<f){const y=wf(b+1,"...");d.push(y)}}return d}),s=(d,f)=>{d=qt(d,1,r.value),t.modelValue!==d&&(e("update:modelValue",d),f&&e("change",d))};wa(()=>s(t.modelValue));const o=()=>h("li",{class:No("page-desc")},[n.pageDesc?n.pageDesc():`${t.modelValue}/${r.value}`]),a=()=>{const{mode:d,modelValue:f,showPrevButton:m}=t;if(!m)return;const g=n["prev-text"],_=f===1;return h("li",{class:[No("item",{disabled:_,border:d==="simple",prev:!0}),Il]},[h("button",{type:"button",disabled:_,onClick:()=>s(f-1,!0)},[g?g():t.prevText||xb("prev")])])},l=()=>{const{mode:d,modelValue:f,showNextButton:m}=t;if(!m)return;const g=n["next-text"],_=f===r.value;return h("li",{class:[No("item",{disabled:_,border:d==="simple",next:!0}),Il]},[h("button",{type:"button",disabled:_,onClick:()=>s(f+1,!0)},[g?g():t.nextText||xb("next")])])},c=()=>i.value.map(d=>h("li",{class:[No("item",{active:d.active,page:!0}),Il]},[h("button",{type:"button","aria-current":d.active||void 0,onClick:()=>s(d.number,!0)},[n.page?n.page(d):d.text])]));return()=>h("nav",{role:"navigation",class:No()},[h("ul",{class:No("items")},[a(),t.mode==="simple"?o():c(),l()])])}});const _9=oe(v9),[y9,Ja]=ee("password-input"),b9={info:String,mask:Q,value:le(""),gutter:ie,length:we(6),focused:Boolean,errorInfo:String};var w9=X({name:y9,props:b9,emits:["focus"],setup(t,{emit:e}){const n=i=>{i.stopPropagation(),e("focus",i)},r=()=>{const i=[],{mask:s,value:o,gutter:a,focused:l}=t,c=+t.length;for(let d=0;d<c;d++){const f=o[d],m=d!==0&&!a,g=l&&d===o.length;let _;d!==0&&a&&(_={marginLeft:ze(a)}),i.push(h("li",{class:[{[QI]:m},Ja("item",{focus:g})],style:_},[s?h("i",{style:{visibility:f?"visible":"hidden"}},null):f,g&&h("div",{class:Ja("cursor")},null)]))}return i};return()=>{const i=t.errorInfo||t.info;return h("div",{class:Ja()},[h("ul",{class:[Ja("security"),{[Il]:!t.gutter}],onTouchstartPassive:n},[r()]),i&&h("div",{class:Ja(t.errorInfo?"error-info":"info")},[i])])}}});const T9=oe(w9),E9=oe(BB);function Pr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Ip(t){var e=Pr(t).Element;return t instanceof e||t instanceof Element}function Tr(t){var e=Pr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function c1(t){if(typeof ShadowRoot>"u")return!1;var e=Pr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var va=Math.round;function xm(){var t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function I9(){return!/^((?!chrome|android).)*safari/i.test(xm())}function ad(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&Tr(t)&&(i=t.offsetWidth>0&&va(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&va(r.height)/t.offsetHeight||1);var o=Ip(t)?Pr(t):window,a=o.visualViewport,l=!I9()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,d=(r.top+(l&&a?a.offsetTop:0))/s,f=r.width/i,m=r.height/s;return{width:f,height:m,top:d,right:c+f,bottom:d+m,left:c,x:c,y:d}}function u1(t){var e=Pr(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function C9(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function S9(t){return t===Pr(t)||!Tr(t)?u1(t):C9(t)}function Si(t){return t?(t.nodeName||"").toLowerCase():null}function uh(t){return((Ip(t)?t.ownerDocument:t.document)||window.document).documentElement}function A9(t){return ad(uh(t)).left+u1(t).scrollLeft}function Ai(t){return Pr(t).getComputedStyle(t)}function Cp(t){var e=Ai(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function k9(t){var e=t.getBoundingClientRect(),n=va(e.width)/t.offsetWidth||1,r=va(e.height)/t.offsetHeight||1;return n!==1||r!==1}function R9(t,e,n){n===void 0&&(n=!1);var r=Tr(e),i=Tr(e)&&k9(e),s=uh(e),o=ad(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Si(e)!=="body"||Cp(s))&&(a=S9(e)),Tr(e)?(l=ad(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=A9(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function P9(t){var e=ad(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Sp(t){return Si(t)==="html"?t:t.assignedSlot||t.parentNode||(c1(t)?t.host:null)||uh(t)}function d1(t){return["html","body","#document"].indexOf(Si(t))>=0?t.ownerDocument.body:Tr(t)&&Cp(t)?t:d1(Sp(t))}function ku(t,e){var n;e===void 0&&(e=[]);var r=d1(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Pr(r),o=i?[s].concat(s.visualViewport||[],Cp(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(ku(Sp(o)))}function x9(t){return["table","td","th"].indexOf(Si(t))>=0}function Db(t){return!Tr(t)||Ai(t).position==="fixed"?null:t.offsetParent}function D9(t){var e=/firefox/i.test(xm()),n=/Trident/i.test(xm());if(n&&Tr(t)){var r=Ai(t);if(r.position==="fixed")return null}var i=Sp(t);for(c1(i)&&(i=i.host);Tr(i)&&["html","body"].indexOf(Si(i))<0;){var s=Ai(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function h1(t){for(var e=Pr(t),n=Db(t);n&&x9(n)&&Ai(n).position==="static";)n=Db(n);return n&&(Si(n)==="html"||Si(n)==="body"&&Ai(n).position==="static")?e:n||D9(t)||e}var ia="top",ld="bottom",Kl="right",Ys="left",f1="auto",O9=[ia,ld,Kl,Ys],m1="start",cd="end",V9=[].concat(O9,[f1]).reduce(function(t,e){return t.concat([e,e+"-"+m1,e+"-"+cd])},[]),L9="beforeRead",N9="read",M9="afterRead",F9="beforeMain",B9="main",U9="afterMain",$9="beforeWrite",z9="write",j9="afterWrite",Dm=[L9,N9,M9,F9,B9,U9,$9,z9,j9];function H9(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function q9(t){var e=H9(t);return Dm.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function G9(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function ji(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return[].concat(n).reduce(function(i,s){return i.replace(/%s/,s)},t)}var Ls='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s',W9='Popper: modifier "%s" requires "%s", but "%s" modifier is not available',Ob=["name","enabled","phase","fn","effect","requires","options"];function K9(t){t.forEach(function(e){[].concat(Object.keys(e),Ob).filter(function(n,r,i){return i.indexOf(n)===r}).forEach(function(n){switch(n){case"name":typeof e.name!="string"&&console.error(ji(Ls,String(e.name),'"name"','"string"','"'+String(e.name)+'"'));break;case"enabled":typeof e.enabled!="boolean"&&console.error(ji(Ls,e.name,'"enabled"','"boolean"','"'+String(e.enabled)+'"'));break;case"phase":Dm.indexOf(e.phase)<0&&console.error(ji(Ls,e.name,'"phase"',"either "+Dm.join(", "),'"'+String(e.phase)+'"'));break;case"fn":typeof e.fn!="function"&&console.error(ji(Ls,e.name,'"fn"','"function"','"'+String(e.fn)+'"'));break;case"effect":e.effect!=null&&typeof e.effect!="function"&&console.error(ji(Ls,e.name,'"effect"','"function"','"'+String(e.fn)+'"'));break;case"requires":e.requires!=null&&!Array.isArray(e.requires)&&console.error(ji(Ls,e.name,'"requires"','"array"','"'+String(e.requires)+'"'));break;case"requiresIfExists":Array.isArray(e.requiresIfExists)||console.error(ji(Ls,e.name,'"requiresIfExists"','"array"','"'+String(e.requiresIfExists)+'"'));break;case"options":case"data":break;default:console.error('PopperJS: an invalid property has been provided to the "'+e.name+'" modifier, valid properties are '+Ob.map(function(r){return'"'+r+'"'}).join(", ")+'; but "'+n+'" was provided.')}e.requires&&e.requires.forEach(function(r){t.find(function(i){return i.name===r})==null&&console.error(ji(W9,String(e.name),r,r))})})})}function Y9(t,e){var n=new Set;return t.filter(function(r){var i=e(r);if(!n.has(i))return n.add(i),!0})}function dh(t){return t.split("-")[0]}function Q9(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}function g1(t){return t.split("-")[1]}function X9(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function J9(t){var e=t.reference,n=t.element,r=t.placement,i=r?dh(r):null,s=r?g1(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case ia:l={x:o,y:e.y-n.height};break;case ld:l={x:o,y:e.y+e.height};break;case Kl:l={x:e.x+e.width,y:a};break;case Ys:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?X9(i):null;if(c!=null){var d=c==="y"?"height":"width";switch(s){case m1:l[c]=l[c]-(e[d]/2-n[d]/2);break;case cd:l[c]=l[c]+(e[d]/2-n[d]/2);break}}return l}var Vb="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.",Z9="Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.",Lb={placement:"bottom",modifiers:[],strategy:"absolute"};function Nb(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function ez(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?Lb:i;return function(a,l,c){c===void 0&&(c=s);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Lb,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],m=!1,g={state:d,setOptions:function(C){var y=typeof C=="function"?C(d.options):C;T(),d.options=Object.assign({},s,d.options,y),d.scrollParents={reference:Ip(a)?ku(a):a.contextElement?ku(a.contextElement):[],popper:ku(l)};var A=q9(Q9([].concat(r,d.options.modifiers)));d.orderedModifiers=A.filter(function(E){return E.enabled});{var D=Y9([].concat(A,d.options.modifiers),function(E){var S=E.name;return S});if(K9(D),dh(d.options.placement)===f1){var x=d.orderedModifiers.find(function(E){var S=E.name;return S==="flip"});x||console.error(['Popper: "auto" placements require the "flip" modifier be',"present and enabled to work."].join(" "))}var O=Ai(l),R=O.marginTop,v=O.marginRight,I=O.marginBottom,k=O.marginLeft;[R,v,I,k].some(function(E){return parseFloat(E)})&&console.warn(['Popper: CSS "margin" styles cannot be used to apply padding',"between the popper and its reference element or boundary.","To replicate margin, use the `offset` modifier, as well as","the `padding` option in the `preventOverflow` and `flip`","modifiers."].join(" "))}return _(),g.update()},forceUpdate:function(){if(!m){var C=d.elements,y=C.reference,A=C.popper;if(!Nb(y,A)){console.error(Vb);return}d.rects={reference:R9(y,h1(A),d.options.strategy==="fixed"),popper:P9(A)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(E){return d.modifiersData[E.name]=Object.assign({},E.data)});for(var D=0,x=0;x<d.orderedModifiers.length;x++){if(D+=1,D>100){console.error(Z9);break}if(d.reset===!0){d.reset=!1,x=-1;continue}var O=d.orderedModifiers[x],R=O.fn,v=O.options,I=v===void 0?{}:v,k=O.name;typeof R=="function"&&(d=R({state:d,options:I,name:k,instance:g})||d)}}},update:G9(function(){return new Promise(function(b){g.forceUpdate(),b(d)})}),destroy:function(){T(),m=!0}};if(!Nb(a,l))return console.error(Vb),g;g.setOptions(c).then(function(b){!m&&c.onFirstUpdate&&c.onFirstUpdate(b)});function _(){d.orderedModifiers.forEach(function(b){var C=b.name,y=b.options,A=y===void 0?{}:y,D=b.effect;if(typeof D=="function"){var x=D({state:d,name:C,instance:g,options:A}),O=function(){};f.push(x||O)}})}function T(){f.forEach(function(b){return b()}),f=[]}return g}}var lu={passive:!0};function tz(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=Pr(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(d){d.addEventListener("scroll",n.update,lu)}),a&&l.addEventListener("resize",n.update,lu),function(){s&&c.forEach(function(d){d.removeEventListener("scroll",n.update,lu)}),a&&l.removeEventListener("resize",n.update,lu)}}var nz={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:tz,data:{}};function rz(t){var e=t.state,n=t.name;e.modifiersData[n]=J9({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var iz={name:"popperOffsets",enabled:!0,phase:"read",fn:rz,data:{}},sz={top:"auto",right:"auto",bottom:"auto",left:"auto"};function oz(t){var e=t.x,n=t.y,r=window,i=r.devicePixelRatio||1;return{x:va(e*i)/i||0,y:va(n*i)/i||0}}function Mb(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,d=t.roundOffsets,f=t.isFixed,m=o.x,g=m===void 0?0:m,_=o.y,T=_===void 0?0:_,b=typeof d=="function"?d({x:g,y:T}):{x:g,y:T};g=b.x,T=b.y;var C=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),A=Ys,D=ia,x=window;if(c){var O=h1(n),R="clientHeight",v="clientWidth";if(O===Pr(n)&&(O=uh(n),Ai(O).position!=="static"&&a==="absolute"&&(R="scrollHeight",v="scrollWidth")),O=O,i===ia||(i===Ys||i===Kl)&&s===cd){D=ld;var I=f&&O===x&&x.visualViewport?x.visualViewport.height:O[R];T-=I-r.height,T*=l?1:-1}if(i===Ys||(i===ia||i===ld)&&s===cd){A=Kl;var k=f&&O===x&&x.visualViewport?x.visualViewport.width:O[v];g-=k-r.width,g*=l?1:-1}}var E=Object.assign({position:a},c&&sz),S=d===!0?oz({x:g,y:T}):{x:g,y:T};if(g=S.x,T=S.y,l){var P;return Object.assign({},E,(P={},P[D]=y?"0":"",P[A]=C?"0":"",P.transform=(x.devicePixelRatio||1)<=1?"translate("+g+"px, "+T+"px)":"translate3d("+g+"px, "+T+"px, 0)",P))}return Object.assign({},E,(e={},e[D]=y?T+"px":"",e[A]=C?g+"px":"",e.transform="",e))}function az(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a;{var c=Ai(e.elements.popper).transitionProperty||"";o&&["transform","top","right","bottom","left"].some(function(f){return c.indexOf(f)>=0})&&console.warn(["Popper: Detected CSS transitions on at least one of the following",'CSS properties: "transform", "top", "right", "bottom", "left".',`

`,'Disable the "computeStyles" modifier\'s `adaptive` option to allow',"for smooth transitions, or remove these properties from the CSS","transition declaration on the popper element if only transitioning","opacity or background-color for example.",`

`,"We recommend using the popper element as a wrapper around an inner","element that can have any CSS property transitioned for animations."].join(" "))}var d={placement:dh(e.placement),variation:g1(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Mb(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Mb(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var lz={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:az,data:{}};function cz(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!Tr(s)||!Si(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function uz(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!Tr(i)||!Si(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}var dz={name:"applyStyles",enabled:!0,phase:"write",fn:cz,effect:uz,requires:["computeStyles"]},hz=[nz,iz,lz,dz],fz=ez({defaultModifiers:hz});function mz(t,e,n){var r=dh(t),i=[Ys,ia].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Ys,Kl].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function gz(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=V9.reduce(function(d,f){return d[f]=mz(f,e.rects,s),d},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}var pz={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:gz};const[vz,Ns]=ee("popover"),_z=["overlay","duration","teleport","overlayStyle","overlayClass","closeOnClickOverlay"],yz={show:Boolean,theme:le("light"),overlay:Boolean,actions:At(),actionsDirection:le("vertical"),trigger:le("click"),duration:ie,showArrow:Q,placement:le("bottom"),iconPrefix:String,overlayClass:Rt,overlayStyle:Object,closeOnClickAction:Q,closeOnClickOverlay:Q,closeOnClickOutside:Q,offset:{type:Array,default:()=>[0,8]},teleport:{type:[String,Object],default:"body"}};var bz=X({name:vz,props:yz,emits:["select","touchstart","update:show"],setup(t,{emit:e,slots:n,attrs:r}){let i;const s=j(),o=j(),a=j(),l=hp(()=>t.show,y=>e("update:show",y)),c=()=>({placement:t.placement,modifiers:[{name:"computeStyles",options:{adaptive:!1,gpuAcceleration:!1}},ke({},pz,{options:{offset:t.offset}})]}),d=()=>o.value&&a.value?fz(o.value,a.value.popupRef.value,c()):null,f=()=>{qe(()=>{l.value&&(i?i.setOptions(c()):(i=d(),Kn&&(window.addEventListener("animationend",f),window.addEventListener("transitionend",f))))})},m=y=>{l.value=y},g=()=>{t.trigger==="click"&&(l.value=!l.value)},_=(y,A)=>{y.disabled||(e("select",y,A),t.closeOnClickAction&&(l.value=!1))},T=()=>{l.value&&t.closeOnClickOutside&&(!t.overlay||t.closeOnClickOverlay)&&(l.value=!1)},b=(y,A)=>n.action?n.action({action:y,index:A}):[y.icon&&h(je,{name:y.icon,classPrefix:t.iconPrefix,class:Ns("action-icon")},null),h("div",{class:[Ns("action-text"),{[ap]:t.actionsDirection==="vertical"}]},[y.text])],C=(y,A)=>{const{icon:D,color:x,disabled:O,className:R}=y;return h("div",{role:"menuitem",class:[Ns("action",{disabled:O,"with-icon":D}),{[gF]:t.actionsDirection==="horizontal"},R],style:{color:x},tabindex:O?void 0:0,"aria-disabled":O||void 0,onClick:()=>_(y,A)},[b(y,A)])};return Lt(()=>{f(),wa(()=>{var y;s.value=(y=a.value)==null?void 0:y.popupRef.value})}),Kr(()=>{i&&(Kn&&(window.removeEventListener("animationend",f),window.removeEventListener("transitionend",f)),i.destroy(),i=null)}),he(()=>[l.value,t.offset,t.placement],f),Jd([o,s],T,{eventName:"touchstart"}),()=>{var y;return h(rt,null,[h("span",{ref:o,class:Ns("wrapper"),onClick:g},[(y=n.reference)==null?void 0:y.call(n)]),h(kr,Qe({ref:a,show:l.value,class:Ns([t.theme]),position:"",transition:"van-popover-zoom",lockScroll:!1,"onUpdate:show":m},r,od(),lt(t,_z)),{default:()=>[t.showArrow&&h("div",{class:Ns("arrow")},null),h("div",{role:"menu",class:Ns("content",t.actionsDirection)},[n.default?n.default():t.actions.map(C)])]})])}}});const wz=oe(bz),[Tz,Tf]=ee("progress"),Ez={color:String,inactive:Boolean,pivotText:String,textColor:String,showPivot:Q,pivotColor:String,trackColor:String,strokeWidth:ie,percentage:{type:ie,default:0,validator:t=>+t>=0&&+t<=100}};var Iz=X({name:Tz,props:Ez,setup(t){const e=z(()=>t.inactive?void 0:t.color),n=()=>{const{textColor:r,pivotText:i,pivotColor:s,percentage:o}=t,a=i??`${o}%`;if(t.showPivot&&a){const l={color:r,left:`${+o}%`,transform:`translate(-${+o}%,-50%)`,background:s||e.value};return h("span",{style:l,class:Tf("pivot",{inactive:t.inactive})},[a])}};return()=>{const{trackColor:r,percentage:i,strokeWidth:s}=t,o={background:r,height:ze(s)},a={width:`${i}%`,background:e.value};return h("div",{class:Tf(),style:o},[h("span",{class:Tf("portion",{inactive:t.inactive}),style:a},null),n()])}}});const Cz=oe(Iz),[Sz,Za,Az]=ee("pull-refresh"),p1=50,kz=["pulling","loosing","success"],Rz={disabled:Boolean,modelValue:Boolean,headHeight:we(p1),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:ie,successDuration:we(500),animationDuration:we(300)};var Pz=X({name:Sz,props:Rz,emits:["change","refresh","update:modelValue"],setup(t,{emit:e,slots:n}){let r;const i=j(),s=j(),o=ka(i),a=Ct({status:"normal",distance:0,duration:0}),l=ur(),c=()=>{if(t.headHeight!==p1)return{height:`${t.headHeight}px`}},d=()=>a.status!=="loading"&&a.status!=="success"&&!t.disabled,f=D=>{const x=+(t.pullDistance||t.headHeight);return D>x&&(D<x*2?D=x+(D-x)/2:D=x*1.5+(D-x*2)/4),Math.round(D)},m=(D,x)=>{const O=+(t.pullDistance||t.headHeight);a.distance=D,x?a.status="loading":D===0?a.status="normal":D<O?a.status="pulling":a.status="loosing",e("change",{status:a.status,distance:D})},g=()=>{const{status:D}=a;return D==="normal"?"":t[`${D}Text`]||Az(D)},_=()=>{const{status:D,distance:x}=a;if(n[D])return n[D]({distance:x});const O=[];return kz.includes(D)&&O.push(h("div",{class:Za("text")},[g()])),D==="loading"&&O.push(h(cr,{class:Za("loading")},{default:g})),O},T=()=>{a.status="success",setTimeout(()=>{m(0)},+t.successDuration)},b=D=>{r=Ci(o.value)===0,r&&(a.duration=0,l.start(D))},C=D=>{d()&&b(D)},y=D=>{if(d()){r||b(D);const{deltaY:x}=l;l.move(D),r&&x.value>=0&&l.isVertical()&&(yt(D),m(f(x.value)))}},A=()=>{r&&l.deltaY.value&&d()&&(a.duration=+t.animationDuration,a.status==="loosing"?(m(+t.headHeight,!0),e("update:modelValue",!0),qe(()=>e("refresh"))):m(0))};return he(()=>t.modelValue,D=>{a.duration=+t.animationDuration,D?m(+t.headHeight,!0):n.success||t.successText?T():m(0,!1)}),Vt("touchmove",y,{target:s}),()=>{var D;const x={transitionDuration:`${a.duration}ms`,transform:a.distance?`translate3d(0,${a.distance}px, 0)`:""};return h("div",{ref:i,class:Za()},[h("div",{ref:s,class:Za("track"),style:x,onTouchstartPassive:C,onTouchend:A,onTouchcancel:A},[h("div",{class:Za("head"),style:c()},[_()]),(D=n.default)==null?void 0:D.call(n)])])}}});const xz=oe(Pz),[Dz,cu]=ee("rate");function Oz(t,e,n,r){return t>=e?{status:"full",value:1}:t+.5>=e&&n&&!r?{status:"half",value:.5}:t+1>=e&&n&&r?{status:"half",value:Math.round((t-e+1)*1e10)/1e10}:{status:"void",value:0}}const Vz={size:ie,icon:le("star"),color:String,count:we(5),gutter:ie,clearable:Boolean,readonly:Boolean,disabled:Boolean,voidIcon:le("star-o"),allowHalf:Boolean,voidColor:String,touchable:Q,iconPrefix:String,modelValue:Bt(0),disabledColor:String};var Lz=X({name:Dz,props:Vz,emits:["change","update:modelValue"],setup(t,{emit:e}){const n=ur(),[r,i]=fc(),s=j(),o=z(()=>t.readonly||t.disabled),a=z(()=>o.value||!t.touchable),l=z(()=>Array(+t.count).fill("").map((A,D)=>Oz(t.modelValue,D+1,t.allowHalf,t.readonly)));let c,d,f=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;const g=()=>{d=dt(s);const A=r.value.map(dt);c=[],A.forEach((D,x)=>{f=Math.min(D.top,f),m=Math.max(D.top,m),t.allowHalf?c.push({score:x+.5,left:D.left,top:D.top,height:D.height},{score:x+1,left:D.left+D.width/2,top:D.top,height:D.height}):c.push({score:x+1,left:D.left,top:D.top,height:D.height})})},_=(A,D)=>{for(let x=c.length-1;x>0;x--)if(D>=d.top&&D<=d.bottom){if(A>c[x].left&&D>=c[x].top&&D<=c[x].top+c[x].height)return c[x].score}else{const O=D<d.top?f:m;if(A>c[x].left&&c[x].top===O)return c[x].score}return t.allowHalf?.5:1},T=A=>{o.value||A===t.modelValue||(e("update:modelValue",A),e("change",A))},b=A=>{a.value||(n.start(A),g())},C=A=>{if(!a.value&&(n.move(A),n.isHorizontal()&&!n.isTap.value)){const{clientX:D,clientY:x}=A.touches[0];yt(A),T(_(D,x))}},y=(A,D)=>{const{icon:x,size:O,color:R,count:v,gutter:I,voidIcon:k,disabled:E,voidColor:S,allowHalf:P,iconPrefix:re,disabledColor:fe}=t,Y=D+1,de=A.status==="full",me=A.status==="void",Ue=P&&A.value>0&&A.value<1;let Xe;I&&Y!==+v&&(Xe={paddingRight:ze(I)});const H=te=>{g();let ge=P?_(te.clientX,te.clientY):Y;t.clearable&&n.isTap.value&&ge===t.modelValue&&(ge=0),T(ge)};return h("div",{key:D,ref:i(D),role:"radio",style:Xe,class:cu("item"),tabindex:E?void 0:0,"aria-setsize":v,"aria-posinset":Y,"aria-checked":!me,onClick:H},[h(je,{size:O,name:de?x:k,class:cu("icon",{disabled:E,full:de}),color:E?fe:de?R:S,classPrefix:re},null),Ue&&h(je,{size:O,style:{width:A.value+"em"},name:me?k:x,class:cu("icon",["half",{disabled:E,full:!me}]),color:E?fe:me?S:R,classPrefix:re},null)])};return Is(()=>t.modelValue),Vt("touchmove",C,{target:s}),()=>h("div",{ref:s,role:"radiogroup",class:cu({readonly:t.readonly,disabled:t.disabled}),tabindex:t.disabled?void 0:0,"aria-disabled":t.disabled,"aria-readonly":t.readonly,onTouchstartPassive:b},[l.value.map(y)])}});const Nz=oe(Lz),Mz={figureArr:At(),delay:Number,duration:Bt(2),isStart:Boolean,direction:le("down"),height:Bt(40)},[Fz,Ef]=ee("rolling-text-item");var Bz=X({name:Fz,props:Mz,setup(t){const e=z(()=>t.direction==="down"?t.figureArr.slice().reverse():t.figureArr),n=z(()=>`-${t.height*(t.figureArr.length-1)}px`),r=z(()=>({lineHeight:ze(t.height)})),i=z(()=>({height:ze(t.height),"--van-translate":n.value,"--van-duration":t.duration+"s","--van-delay":t.delay+"s"}));return()=>h("div",{class:Ef([t.direction]),style:i.value},[h("div",{class:Ef("box",{animate:t.isStart})},[Array.isArray(e.value)&&e.value.map(s=>h("div",{class:Ef("item"),style:r.value},[s]))])])}});const[Uz,$z]=ee("rolling-text"),zz={startNum:Bt(0),targetNum:Number,textList:At(),duration:Bt(2),autoStart:Q,direction:le("down"),stopOrder:le("ltr"),height:Bt(40)},jz=2;var Hz=X({name:Uz,props:zz,setup(t){const e=z(()=>Array.isArray(t.textList)&&t.textList.length),n=z(()=>e.value?t.textList[0].length:`${Math.max(t.startNum,t.targetNum)}`.length),r=f=>{const m=[];for(let g=0;g<t.textList.length;g++)m.push(t.textList[g][f]);return m},i=z(()=>e.value?new Array(n.value).fill(""):gr(t.targetNum,n.value).split("")),s=z(()=>gr(t.startNum,n.value).split("")),o=f=>{const m=+s.value[f],g=+i.value[f],_=[];for(let T=m;T<=9;T++)_.push(T);for(let T=0;T<=jz;T++)for(let b=0;b<=9;b++)_.push(b);for(let T=0;T<=g;T++)_.push(T);return _},a=(f,m)=>t.stopOrder==="ltr"?.2*f:.2*(m-1-f),l=j(t.autoStart),c=()=>{l.value=!0},d=()=>{l.value=!1,t.autoStart&&yn(()=>c())};return he(()=>t.autoStart,f=>{f&&c()}),Je({start:c,reset:d}),()=>h("div",{class:$z()},[i.value.map((f,m)=>h(Bz,{figureArr:e.value?r(m):o(m),duration:t.duration,direction:t.direction,isStart:l.value,height:t.height,delay:a(m,n.value)},null))])}});const qz=oe(Hz),Gz=oe(z$),[Wz,el,Kz]=ee("search"),Yz=ke({},mp,{label:String,shape:le("square"),leftIcon:le("search"),clearable:Q,actionText:String,background:String,showAction:Boolean});var Qz=X({name:Wz,props:Yz,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(t,{emit:e,slots:n,attrs:r}){const i=Pa(),s=j(),o=()=>{n.action||(e("update:modelValue",""),e("cancel"))},a=x=>{x.keyCode===13&&(yt(x),e("search",t.modelValue))},l=()=>t.id||`${i}-input`,c=()=>{if(n.label||t.label)return h("label",{class:el("label"),for:l(),"data-allow-mismatch":"attribute"},[n.label?n.label():t.label])},d=()=>{if(t.showAction){const x=t.actionText||Kz("cancel");return h("div",{class:el("action"),role:"button",tabindex:0,onClick:o},[n.action?n.action():x])}},f=()=>{var x;return(x=s.value)==null?void 0:x.blur()},m=()=>{var x;return(x=s.value)==null?void 0:x.focus()},g=x=>e("blur",x),_=x=>e("focus",x),T=x=>e("clear",x),b=x=>e("clickInput",x),C=x=>e("clickLeftIcon",x),y=x=>e("clickRightIcon",x),A=Object.keys(mp),D=()=>{const x=ke({},r,lt(t,A),{id:l()}),O=R=>e("update:modelValue",R);return h(_i,Qe({ref:s,type:"search",class:el("field",{"with-message":x.errorMessage}),border:!1,onBlur:g,onFocus:_,onClear:T,onKeypress:a,onClickInput:b,onClickLeftIcon:C,onClickRightIcon:y,"onUpdate:modelValue":O},x),lt(n,["left-icon","right-icon"]))};return Je({focus:m,blur:f}),()=>{var x;return h("div",{class:el({"show-action":t.showAction}),style:{background:t.background}},[(x=n.left)==null?void 0:x.call(n),h("div",{class:el("content",t.shape)},[c(),D()]),d()])}}});const Xz=oe(Qz),Jz=t=>t==null?void 0:t.includes("/"),Zz=[...up,"round","closeOnPopstate","safeAreaInsetBottom"],e6={qq:"qq",link:"link-o",weibo:"weibo",qrcode:"qr",poster:"photo-o",wechat:"wechat","weapp-qrcode":"miniprogram-o","wechat-moments":"wechat-moments"},[t6,fr,n6]=ee("share-sheet"),r6=ke({},Ra,{title:String,round:Q,options:At(),cancelText:String,description:String,closeOnPopstate:Q,safeAreaInsetBottom:Q});var i6=X({name:t6,props:r6,emits:["cancel","select","update:show"],setup(t,{emit:e,slots:n}){const r=m=>e("update:show",m),i=()=>{r(!1),e("cancel")},s=(m,g)=>e("select",m,g),o=()=>{const m=n.title?n.title():t.title,g=n.description?n.description():t.description;if(m||g)return h("div",{class:fr("header")},[m&&h("h2",{class:fr("title")},[m]),g&&h("span",{class:fr("description")},[g])])},a=m=>Jz(m)?h("img",{src:m,class:fr("image-icon")},null):h("div",{class:fr("icon",[m])},[h(je,{name:e6[m]||m},null)]),l=(m,g)=>{const{name:_,icon:T,className:b,description:C}=m;return h("div",{role:"button",tabindex:0,class:[fr("option"),b,wn],onClick:()=>s(m,g)},[a(T),_&&h("span",{class:fr("name")},[_]),C&&h("span",{class:fr("option-description")},[C])])},c=(m,g)=>h("div",{class:fr("options",{border:g})},[m.map(l)]),d=()=>{const{options:m}=t;return Array.isArray(m[0])?m.map((g,_)=>c(g,_!==0)):c(m)},f=()=>{var m;const g=(m=t.cancelText)!=null?m:n6("cancel");if(n.cancel||g)return h("button",{type:"button",class:fr("cancel"),onClick:i},[n.cancel?n.cancel():g])};return()=>h(kr,Qe({class:fr(),position:"bottom","onUpdate:show":r},lt(t,Zz)),{default:()=>[o(),d(),f()]})}});const s6=oe(i6),[v1,o6]=ee("sidebar"),_1=Symbol(v1),a6={modelValue:we(0)};var l6=X({name:v1,props:a6,emits:["change","update:modelValue"],setup(t,{emit:e,slots:n}){const{linkChildren:r}=En(_1),i=()=>+t.modelValue;return r({getActive:i,setActive:o=>{o!==i()&&(e("update:modelValue",o),e("change",o))}}),()=>{var o;return h("div",{role:"tablist",class:o6()},[(o=n.default)==null?void 0:o.call(n)])}}});const y1=oe(l6),[c6,Fb]=ee("sidebar-item"),u6=ke({},Ss,{dot:Boolean,title:String,badge:ie,disabled:Boolean,badgeProps:Object});var d6=X({name:c6,props:u6,emits:["click"],setup(t,{emit:e,slots:n}){const r=po(),{parent:i,index:s}=on(_1);if(!i)return;const o=()=>{t.disabled||(e("click",s.value),i.setActive(s.value),r())};return()=>{const{dot:a,badge:l,title:c,disabled:d}=t,f=s.value===i.getActive();return h("div",{role:"tab",class:Fb({select:f,disabled:d}),tabindex:d?void 0:0,"aria-selected":f,onClick:o},[h(vo,Qe({dot:a,class:Fb("text"),content:l},t.badgeProps),{default:()=>[n.title?n.title():c]})])}}});const b1=oe(d6),[h6,If,Bb]=ee("signature"),f6={tips:String,type:le("png"),penColor:le("#000"),lineWidth:Bt(3),clearButtonText:String,backgroundColor:le(""),confirmButtonText:String},m6=()=>{var t;const e=document.createElement("canvas");return!!((t=e.getContext)!=null&&t.call(e,"2d"))};var g6=X({name:h6,props:f6,emits:["submit","clear","start","end","signing"],setup(t,{emit:e}){const n=j(),r=j(),i=z(()=>n.value?n.value.getContext("2d"):null),s=Kn?m6():!0;let o=0,a=0,l;const c=()=>{if(!i.value)return!1;i.value.beginPath(),i.value.lineWidth=t.lineWidth,i.value.strokeStyle=t.penColor,l=dt(n),e("start")},d=y=>{if(!i.value)return!1;yt(y);const A=y.touches[0],D=A.clientX-((l==null?void 0:l.left)||0),x=A.clientY-((l==null?void 0:l.top)||0);i.value.lineCap="round",i.value.lineJoin="round",i.value.lineTo(D,x),i.value.stroke(),e("signing",y)},f=y=>{yt(y),e("end")},m=y=>{const A=document.createElement("canvas");if(A.width=y.width,A.height=y.height,t.backgroundColor){const D=A.getContext("2d");g(D)}return y.toDataURL()===A.toDataURL()},g=y=>{y&&t.backgroundColor&&(y.fillStyle=t.backgroundColor,y.fillRect(0,0,o,a))},_=()=>{var y,A;const D=n.value;if(!D)return;const O=m(D)?"":((A=(y={jpg:()=>D.toDataURL("image/jpeg",.8),jpeg:()=>D.toDataURL("image/jpeg",.8)})[t.type])==null?void 0:A.call(y))||D.toDataURL(`image/${t.type}`);e("submit",{image:O,canvas:D})},T=()=>{i.value&&(i.value.clearRect(0,0,o,a),i.value.closePath(),g(i.value)),e("clear")},b=()=>{var y,A,D;if(s&&n.value){const x=n.value,O=Kn?window.devicePixelRatio:1;o=x.width=(((y=r.value)==null?void 0:y.offsetWidth)||0)*O,a=x.height=(((A=r.value)==null?void 0:A.offsetHeight)||0)*O,(D=i.value)==null||D.scale(O,O),g(i.value)}},C=()=>{if(i.value){const y=i.value.getImageData(0,0,o,a);b(),i.value.putImageData(y,0,0)}};return he(wr,C),Lt(b),Je({resize:C,clear:T,submit:_}),()=>h("div",{class:If()},[h("div",{class:If("content"),ref:r},[s?h("canvas",{ref:n,onTouchstartPassive:c,onTouchmove:d,onTouchend:f},null):h("p",null,[t.tips])]),h("div",{class:If("footer")},[h(Tn,{size:"small",onClick:T},{default:()=>[t.clearButtonText||Bb("clear")]}),h(Tn,{type:"primary",size:"small",onClick:_},{default:()=>[t.confirmButtonText||Bb("confirm")]})])])}});const p6=oe(g6),[v6,_6]=ee("skeleton-title"),y6={round:Boolean,titleWidth:ie};var b6=X({name:v6,props:y6,setup(t){return()=>h("h3",{class:_6([{round:t.round}]),style:{width:ze(t.titleWidth)}},null)}});const Ap=oe(b6);var w6=Ap;const[T6,E6]=ee("skeleton-avatar"),I6={avatarSize:ie,avatarShape:le("round")};var C6=X({name:T6,props:I6,setup(t){return()=>h("div",{class:E6([t.avatarShape]),style:Pi(t.avatarSize)},null)}});const kp=oe(C6);var S6=kp;const Rp="100%",A6={round:Boolean,rowWidth:{type:ie,default:Rp}},[k6,R6]=ee("skeleton-paragraph");var P6=X({name:k6,props:A6,setup(t){return()=>h("div",{class:R6([{round:t.round}]),style:{width:t.rowWidth}},null)}});const Pp=oe(P6);var x6=Pp;const[D6,Ub]=ee("skeleton"),O6="60%",V6={row:we(0),round:Boolean,title:Boolean,titleWidth:ie,avatar:Boolean,avatarSize:ie,avatarShape:le("round"),loading:Q,animate:Q,rowWidth:{type:[Number,String,Array],default:Rp}};var L6=X({name:D6,inheritAttrs:!1,props:V6,setup(t,{slots:e,attrs:n}){const r=()=>{if(t.avatar)return h(S6,{avatarShape:t.avatarShape,avatarSize:t.avatarSize},null)},i=()=>{if(t.title)return h(w6,{round:t.round,titleWidth:t.titleWidth},null)},s=l=>{const{rowWidth:c}=t;return c===Rp&&l===+t.row-1?O6:Array.isArray(c)?c[l]:c},o=()=>Array(+t.row).fill("").map((l,c)=>h(x6,{key:c,round:t.round,rowWidth:ze(s(c))},null)),a=()=>e.template?e.template():h(rt,null,[r(),h("div",{class:Ub("content")},[i(),o()])]);return()=>{var l;return t.loading?h("div",Qe({class:Ub({animate:t.animate,round:t.round})},n),[a()]):(l=e.default)==null?void 0:l.call(e)}}});const w1=oe(L6),[N6,$b]=ee("skeleton-image"),M6={imageSize:ie,imageShape:le("square")};var F6=X({name:N6,props:M6,setup(t){return()=>h("div",{class:$b([t.imageShape]),style:Pi(t.imageSize)},[h(je,{name:"photo",class:$b("icon")},null)])}});const T1=oe(F6),[B6,tl]=ee("slider"),U6={min:we(0),max:we(100),step:we(1),range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:ie,buttonSize:ie,activeColor:String,inactiveColor:String,modelValue:{type:[Number,Array],default:0}};var $6=X({name:B6,props:U6,emits:["change","dragEnd","dragStart","update:modelValue"],setup(t,{emit:e,slots:n}){let r,i,s;const o=j(),a=[j(),j()],l=j(),c=ur(),d=z(()=>Number(t.max)-Number(t.min)),f=z(()=>{const E=t.vertical?"width":"height";return{background:t.inactiveColor,[E]:ze(t.barHeight)}}),m=E=>t.range&&Array.isArray(E),g=()=>{const{modelValue:E,min:S}=t;return m(E)?`${(E[1]-E[0])*100/d.value}%`:`${(E-Number(S))*100/d.value}%`},_=()=>{const{modelValue:E,min:S}=t;return m(E)?`${(E[0]-Number(S))*100/d.value}%`:"0%"},T=z(()=>{const S={[t.vertical?"height":"width"]:g(),background:t.activeColor};l.value&&(S.transition="none");const P=()=>t.vertical?t.reverse?"bottom":"top":t.reverse?"right":"left";return S[P()]=_(),S}),b=E=>{const S=+t.min,P=+t.max,re=+t.step;E=qt(E,S,P);const fe=Math.round((E-S)/re)*re;return GI(S,fe)},C=()=>{const E=t.modelValue;m(E)?s=E.map(b):s=b(E)},y=E=>{var S,P;const re=(S=E[0])!=null?S:Number(t.min),fe=(P=E[1])!=null?P:Number(t.max);return re>fe?[fe,re]:[re,fe]},A=(E,S)=>{m(E)?E=y(E).map(b):E=b(E),zr(E,t.modelValue)||e("update:modelValue",E),S&&!zr(E,s)&&e("change",E)},D=E=>{if(E.stopPropagation(),t.disabled||t.readonly)return;C();const{min:S,reverse:P,vertical:re,modelValue:fe}=t,Y=dt(o),de=()=>re?P?Y.bottom-E.clientY:E.clientY-Y.top:P?Y.right-E.clientX:E.clientX-Y.left,me=re?Y.height:Y.width,Ue=Number(S)+de()/me*d.value;if(m(fe)){const[Xe,H]=fe,te=(Xe+H)/2;Ue<=te?A([Ue,H],!0):A([Xe,Ue],!0)}else A(Ue,!0)},x=E=>{t.disabled||t.readonly||(c.start(E),i=t.modelValue,C(),l.value="start")},O=E=>{if(t.disabled||t.readonly)return;l.value==="start"&&e("dragStart",E),yt(E,!0),c.move(E),l.value="dragging";const S=dt(o),P=t.vertical?c.deltaY.value:c.deltaX.value,re=t.vertical?S.height:S.width;let fe=P/re*d.value;if(t.reverse&&(fe=-fe),m(s)){const Y=t.reverse?1-r:r;i[Y]=s[Y]+fe}else i=s+fe;A(i)},R=E=>{t.disabled||t.readonly||(l.value==="dragging"&&(A(i,!0),e("dragEnd",E)),l.value="")},v=E=>typeof E=="number"?tl("button-wrapper",["left","right"][E]):tl("button-wrapper",t.reverse?"left":"right"),I=(E,S)=>{const P=l.value==="dragging";if(typeof S=="number"){const re=n[S===0?"left-button":"right-button"];let fe;if(P&&Array.isArray(i)&&(fe=i[0]>i[1]?r^1:r),re)return re({value:E,dragging:P,dragIndex:fe})}return n.button?n.button({value:E,dragging:P}):h("div",{class:tl("button"),style:Pi(t.buttonSize)},null)},k=E=>{const S=typeof E=="number"?t.modelValue[E]:t.modelValue;return h("div",{ref:a[E??0],role:"slider",class:v(E),tabindex:t.disabled?void 0:0,"aria-valuemin":t.min,"aria-valuenow":S,"aria-valuemax":t.max,"aria-disabled":t.disabled||void 0,"aria-readonly":t.readonly||void 0,"aria-orientation":t.vertical?"vertical":"horizontal",onTouchstartPassive:P=>{typeof E=="number"&&(r=E),x(P)},onTouchend:R,onTouchcancel:R,onClick:sp},[I(S,E)])};return A(t.modelValue),Is(()=>t.modelValue),a.forEach(E=>{Vt("touchmove",O,{target:E})}),()=>h("div",{ref:o,style:f.value,class:tl({vertical:t.vertical,disabled:t.disabled}),onClick:D},[h("div",{class:tl("bar"),style:T.value},[t.range?[k(0),k(1)]:k()])])}});const z6=oe($6),[zb,j6]=ee("space"),H6={align:String,direction:{type:String,default:"horizontal"},size:{type:[Number,String,Array],default:8},wrap:Boolean,fill:Boolean};function E1(t=[]){const e=[];return t.forEach(n=>{Array.isArray(n)?e.push(...n):n.type===rt?e.push(...E1(n.children)):e.push(n)}),e.filter(n=>{var r;return!(n&&(n.type===pn||n.type===rt&&((r=n.children)==null?void 0:r.length)===0||n.type===Jl&&n.children.trim()===""))})}var q6=X({name:zb,props:H6,setup(t,{slots:e}){const n=z(()=>{var s;return(s=t.align)!=null?s:t.direction==="horizontal"?"center":""}),r=s=>typeof s=="number"?s+"px":s,i=s=>{const o={},a=`${r(Array.isArray(t.size)?t.size[0]:t.size)}`,l=`${r(Array.isArray(t.size)?t.size[1]:t.size)}`;return s?t.wrap?{marginBottom:l}:{}:(t.direction==="horizontal"&&(o.marginRight=a),(t.direction==="vertical"||t.wrap)&&(o.marginBottom=l),o)};return()=>{var s;const o=E1((s=e.default)==null?void 0:s.call(e));return h("div",{class:[j6({[t.direction]:t.direction,[`align-${n.value}`]:n.value,wrap:t.wrap,fill:t.fill})]},[o.map((a,l)=>h("div",{key:`item-${l}`,class:`${zb}-item`,style:i(l===o.length-1)},[a]))])}}});const G6=oe(q6),[I1,jb]=ee("steps"),W6={active:we(0),direction:le("horizontal"),activeIcon:le("checked"),iconPrefix:String,finishIcon:String,activeColor:String,inactiveIcon:String,inactiveColor:String},C1=Symbol(I1);var K6=X({name:I1,props:W6,emits:["clickStep"],setup(t,{emit:e,slots:n}){const{linkChildren:r}=En(C1);return r({props:t,onClickStep:s=>e("clickStep",s)}),()=>{var s;return h("div",{class:jb([t.direction])},[h("div",{class:jb("items")},[(s=n.default)==null?void 0:s.call(n)])])}}});const[Y6,Hi]=ee("step");var Q6=X({name:Y6,setup(t,{slots:e}){const{parent:n,index:r}=on(C1);if(!n)return;const i=n.props,s=()=>{const f=+i.active;return r.value<f?"finish":r.value===f?"process":"waiting"},o=()=>s()==="process",a=z(()=>({background:s()==="finish"?i.activeColor:i.inactiveColor})),l=z(()=>{if(o())return{color:i.activeColor};if(s()==="waiting")return{color:i.inactiveColor}}),c=()=>n.onClickStep(r.value),d=()=>{const{iconPrefix:f,finishIcon:m,activeIcon:g,activeColor:_,inactiveIcon:T}=i;return o()?e["active-icon"]?e["active-icon"]():h(je,{class:Hi("icon","active"),name:g,color:_,classPrefix:f},null):s()==="finish"&&(m||e["finish-icon"])?e["finish-icon"]?e["finish-icon"]():h(je,{class:Hi("icon","finish"),name:m,color:_,classPrefix:f},null):e["inactive-icon"]?e["inactive-icon"]():T?h(je,{class:Hi("icon"),name:T,classPrefix:f},null):h("i",{class:Hi("circle"),style:a.value},null)};return()=>{var f;const m=s();return h("div",{class:[Di,Hi([i.direction,{[m]:m}])]},[h("div",{class:Hi("title",{active:o()}),style:l.value,onClick:c},[(f=e.default)==null?void 0:f.call(e)]),h("div",{class:Hi("circle-container"),onClick:c},[d()]),h("div",{class:Hi("line"),style:a.value},null)])}}});const X6=oe(Q6),[J6,uu]=ee("stepper"),Z6=200,du=(t,e)=>String(t)===String(e),e5={min:we(1),max:we(1/0),name:we(""),step:we(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:Q,showMinus:Q,showInput:Q,longPress:Q,autoFixed:Q,allowEmpty:Boolean,modelValue:ie,inputWidth:ie,buttonSize:ie,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:we(1),decimalLength:ie};var t5=X({name:J6,props:e5,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(t,{emit:e}){const n=(v,I=!0)=>{const{min:k,max:E,allowEmpty:S,decimalLength:P}=t;return S&&v===""||(v=Tm(String(v),!t.integer),v=v===""?0:+v,v=Number.isNaN(v)?+k:v,v=I?Math.max(Math.min(+E,v),+k):v,it(P)&&(v=v.toFixed(+P))),v},r=()=>{var v;const I=(v=t.modelValue)!=null?v:t.defaultValue,k=n(I);return du(k,t.modelValue)||e("update:modelValue",k),k};let i;const s=j(),o=j(r()),a=z(()=>t.disabled||t.disableMinus||+o.value<=+t.min),l=z(()=>t.disabled||t.disablePlus||+o.value>=+t.max),c=z(()=>({width:ze(t.inputWidth),height:ze(t.buttonSize)})),d=z(()=>Pi(t.buttonSize)),f=()=>{const v=n(o.value);du(v,o.value)||(o.value=v)},m=v=>{t.beforeChange?Cs(t.beforeChange,{args:[v],done(){o.value=v}}):o.value=v},g=()=>{if(i==="plus"&&l.value||i==="minus"&&a.value){e("overlimit",i);return}const v=i==="minus"?-t.step:+t.step,I=n(GI(+o.value,v));m(I),e(i)},_=v=>{const I=v.target,{value:k}=I,{decimalLength:E}=t;let S=Tm(String(k),!t.integer);if(it(E)&&S.includes(".")){const re=S.split(".");S=`${re[0]}.${re[1].slice(0,+E)}`}t.beforeChange?I.value=String(o.value):du(k,S)||(I.value=S);const P=S===String(+S);m(P?+S:S)},T=v=>{var I;t.disableInput?(I=s.value)==null||I.blur():e("focus",v)},b=v=>{const I=v.target,k=n(I.value,t.autoFixed);I.value=String(k),o.value=k,qe(()=>{e("blur",v),HI()})};let C,y;const A=()=>{y=setTimeout(()=>{g(),A()},Z6)},D=()=>{t.longPress&&(C=!1,clearTimeout(y),y=setTimeout(()=>{C=!0,g(),A()},JI))},x=v=>{t.longPress&&(clearTimeout(y),C&&yt(v))},O=v=>{t.disableInput&&yt(v)},R=v=>({onClick:I=>{yt(I),i=v,g()},onTouchstartPassive:()=>{i=v,D()},onTouchend:x,onTouchcancel:x});return he(()=>[t.max,t.min,t.integer,t.decimalLength],f),he(()=>t.modelValue,v=>{du(v,o.value)||(o.value=n(v))}),he(o,v=>{e("update:modelValue",v),e("change",v,{name:t.name})}),Is(()=>t.modelValue),()=>h("div",{role:"group",class:uu([t.theme])},[Wt(h("button",Qe({type:"button",style:d.value,class:[uu("minus",{disabled:a.value}),{[wn]:!a.value}],"aria-disabled":a.value||void 0},R("minus")),null),[[rn,t.showMinus]]),Wt(h("input",{ref:s,type:t.integer?"tel":"text",role:"spinbutton",class:uu("input"),value:o.value,style:c.value,disabled:t.disabled,readonly:t.disableInput,inputmode:t.integer?"numeric":"decimal",placeholder:t.placeholder,autocomplete:"off","aria-valuemax":t.max,"aria-valuemin":t.min,"aria-valuenow":o.value,onBlur:b,onInput:_,onFocus:T,onMousedown:O},null),[[rn,t.showInput]]),Wt(h("button",Qe({type:"button",style:d.value,class:[uu("plus",{disabled:l.value}),{[wn]:!l.value}],"aria-disabled":l.value||void 0},R("plus")),null),[[rn,t.showPlus]])])}});const n5=oe(t5),r5=oe(K6),[i5,mr,s5]=ee("submit-bar"),o5={tip:String,label:String,price:Number,tipIcon:String,loading:Boolean,currency:le("¥"),disabled:Boolean,textAlign:String,buttonText:String,buttonType:le("danger"),buttonColor:String,suffixLabel:String,placeholder:Boolean,decimalLength:we(2),safeAreaInsetBottom:Q};var a5=X({name:i5,props:o5,emits:["submit"],setup(t,{emit:e,slots:n}){const r=j(),i=th(r,mr),s=()=>{const{price:d,label:f,currency:m,textAlign:g,suffixLabel:_,decimalLength:T}=t;if(typeof d=="number"){const b=(d/100).toFixed(+T).split("."),C=T?`.${b[1]}`:"";return h("div",{class:mr("text"),style:{textAlign:g}},[h("span",null,[f||s5("label")]),h("span",{class:mr("price")},[m,h("span",{class:mr("price-integer")},[b[0]]),C]),_&&h("span",{class:mr("suffix-label")},[_])])}},o=()=>{var d;const{tip:f,tipIcon:m}=t;if(n.tip||f)return h("div",{class:mr("tip")},[m&&h(je,{class:mr("tip-icon"),name:m},null),f&&h("span",{class:mr("tip-text")},[f]),(d=n.tip)==null?void 0:d.call(n)])},a=()=>e("submit"),l=()=>n.button?n.button():h(Tn,{round:!0,type:t.buttonType,text:t.buttonText,class:mr("button",t.buttonType),color:t.buttonColor,loading:t.loading,disabled:t.disabled,onClick:a},null),c=()=>{var d,f;return h("div",{ref:r,class:[mr(),{"van-safe-area-bottom":t.safeAreaInsetBottom}]},[(d=n.top)==null?void 0:d.call(n),o(),h("div",{class:mr("bar")},[(f=n.default)==null?void 0:f.call(n),s(),l()])])};return()=>t.placeholder?i(c):c()}});const S1=oe(a5),[l5,Cf]=ee("swipe-cell"),c5={name:we(""),disabled:Boolean,leftWidth:ie,rightWidth:ie,beforeClose:Function,stopPropagation:Boolean};var u5=X({name:l5,props:c5,emits:["open","close","click"],setup(t,{emit:e,slots:n}){let r,i,s,o;const a=j(),l=j(),c=j(),d=Ct({offset:0,dragging:!1}),f=ur(),m=v=>v.value?dt(v).width:0,g=z(()=>it(t.leftWidth)?+t.leftWidth:m(l)),_=z(()=>it(t.rightWidth)?+t.rightWidth:m(c)),T=v=>{d.offset=v==="left"?g.value:-_.value,r||(r=!0,e("open",{name:t.name,position:v}))},b=v=>{d.offset=0,r&&(r=!1,e("close",{name:t.name,position:v}))},C=v=>{const I=Math.abs(d.offset),k=.15,E=r?1-k:k,S=v==="left"?g.value:_.value;S&&I>S*E?T(v):b(v)},y=v=>{t.disabled||(s=d.offset,f.start(v))},A=v=>{if(t.disabled)return;const{deltaX:I}=f;f.move(v),f.isHorizontal()&&(i=!0,d.dragging=!0,(!r||I.value*s<0)&&yt(v,t.stopPropagation),d.offset=qt(I.value+s,-_.value,g.value))},D=()=>{d.dragging&&(d.dragging=!1,C(d.offset>0?"left":"right"),setTimeout(()=>{i=!1},0))},x=(v="outside",I)=>{o||(e("click",v),r&&!i&&(o=!0,Cs(t.beforeClose,{args:[{event:I,name:t.name,position:v}],done:()=>{o=!1,b(v)},canceled:()=>o=!1,error:()=>o=!1})))},O=(v,I)=>k=>{I&&k.stopPropagation(),!i&&x(v,k)},R=(v,I)=>{const k=n[v];if(k)return h("div",{ref:I,class:Cf(v),onClick:O(v,!0)},[k()])};return Je({open:T,close:b}),Jd(a,v=>x("outside",v),{eventName:"touchstart"}),Vt("touchmove",A,{target:a}),()=>{var v;const I={transform:`translate3d(${d.offset}px, 0, 0)`,transitionDuration:d.dragging?"0s":".6s"};return h("div",{ref:a,class:Cf(),onClick:O("cell",i),onTouchstartPassive:y,onTouchend:D,onTouchcancel:D},[h("div",{class:Cf("wrapper"),style:I},[R("left",l),(v=n.default)==null?void 0:v.call(n),R("right",c)])])}}});const A1=oe(u5),[k1,Hb]=ee("tabbar"),d5={route:Boolean,fixed:Q,border:Q,zIndex:ie,placeholder:Boolean,activeColor:String,beforeChange:Function,inactiveColor:String,modelValue:we(0),safeAreaInsetBottom:{type:Boolean,default:null}},R1=Symbol(k1);var h5=X({name:k1,props:d5,emits:["change","update:modelValue"],setup(t,{emit:e,slots:n}){const r=j(),{linkChildren:i}=En(R1),s=th(r,Hb),o=()=>{var c;return(c=t.safeAreaInsetBottom)!=null?c:t.fixed},a=()=>{var c;const{fixed:d,zIndex:f,border:m}=t;return h("div",{ref:r,role:"tablist",style:xi(f),class:[Hb({fixed:d}),{[Zd]:m,"van-safe-area-bottom":o()}]},[(c=n.default)==null?void 0:c.call(n)])};return i({props:t,setActive:(c,d)=>{Cs(t.beforeChange,{args:[c],done(){e("update:modelValue",c),e("change",c),d()}})}}),()=>t.fixed&&t.placeholder?s(a):a()}});const f5=oe(h5),[m5,Sf]=ee("tabbar-item"),g5=ke({},Ss,{dot:Boolean,icon:String,name:ie,badge:ie,badgeProps:Object,iconPrefix:String});var p5=X({name:m5,props:g5,emits:["click"],setup(t,{emit:e,slots:n}){const r=po(),i=Ar().proxy,{parent:s,index:o}=on(R1);if(!s)return;const a=z(()=>{var d;const{route:f,modelValue:m}=s.props;if(f&&"$route"in i){const{$route:g}=i,{to:_}=t,T=Ii(_)?_:{path:_};return!!g.matched.find(b=>{const C="path"in T&&T.path===b.path,y="name"in T&&T.name===b.name;return C||y})}return((d=t.name)!=null?d:o.value)===m}),l=d=>{var f;a.value||s.setActive((f=t.name)!=null?f:o.value,r),e("click",d)},c=()=>{if(n.icon)return n.icon({active:a.value});if(t.icon)return h(je,{name:t.icon,classPrefix:t.iconPrefix},null)};return()=>{var d;const{dot:f,badge:m}=t,{activeColor:g,inactiveColor:_}=s.props,T=a.value?g:_;return h("div",{role:"tab",class:Sf({active:a.value}),style:{color:T},tabindex:0,"aria-selected":a.value,onClick:l},[h(vo,Qe({dot:f,class:Sf("icon"),content:m},t.badgeProps),{default:c}),h("div",{class:Sf("text")},[(d=n.default)==null?void 0:d.call(n,{active:a.value})])])}}});const v5=oe(p5),[_5,qb]=ee("text-ellipsis"),y5={rows:we(1),dots:le("..."),content:le(""),expandText:le(""),collapseText:le(""),position:le("end")};var b5=X({name:_5,props:y5,emits:["clickAction"],setup(t,{emit:e,slots:n}){const r=j(t.content),i=j(!1),s=j(!1),o=j(),a=j();let l=!1;const c=z(()=>i.value?t.collapseText:t.expandText),d=C=>{if(!C)return 0;const y=C.match(/^\d*(\.\d*)?/);return y?Number(y[0]):0},f=()=>{if(!o.value||!o.value.isConnected)return;const C=window.getComputedStyle(o.value),y=document.createElement("div");return Array.prototype.slice.apply(C).forEach(D=>{y.style.setProperty(D,C.getPropertyValue(D))}),y.style.position="fixed",y.style.zIndex="-9999",y.style.top="-9999px",y.style.height="auto",y.style.minHeight="auto",y.style.maxHeight="auto",y.innerText=t.content,document.body.appendChild(y),y},m=(C,y)=>{var A,D;const{content:x,position:O,dots:R}=t,v=x.length,I=0+v>>1,k=n.action?(D=(A=a.value)==null?void 0:A.outerHTML)!=null?D:"":t.expandText,E=()=>{const P=(re,fe)=>{if(fe-re<=1)return O==="end"?x.slice(0,re)+R:R+x.slice(fe,v);const Y=Math.round((re+fe)/2);return O==="end"?C.innerText=x.slice(0,Y)+R:C.innerText=R+x.slice(Y,v),C.innerHTML+=k,C.offsetHeight>y?O==="end"?P(re,Y):P(Y,fe):O==="end"?P(Y,fe):P(re,Y)};return P(0,v)},S=(P,re)=>{if(P[1]-P[0]<=1&&re[1]-re[0]<=1)return x.slice(0,P[0])+R+x.slice(re[1],v);const fe=Math.floor((P[0]+P[1])/2),Y=Math.ceil((re[0]+re[1])/2);return C.innerText=t.content.slice(0,fe)+t.dots+t.content.slice(Y,v),C.innerHTML+=k,C.offsetHeight>=y?S([P[0],fe],[Y,re[1]]):S([fe,P[1]],[re[0],Y])};return t.position==="middle"?S([0,I],[I,v]):E()},g=()=>{const C=f();if(!C){l=!0;return}const{paddingBottom:y,paddingTop:A,lineHeight:D}=C.style,x=Math.ceil((Number(t.rows)+.5)*d(D)+d(A)+d(y));x<C.offsetHeight?(s.value=!0,r.value=m(C,x)):(s.value=!1,r.value=t.content),document.body.removeChild(C)},_=(C=!i.value)=>{i.value=C},T=C=>{_(),e("clickAction",C)},b=()=>{const C=n.action?n.action({expanded:i.value}):c.value;return h("span",{ref:a,class:qb("action"),onClick:T},[C])};return Lt(()=>{g(),n.action&&qe(g)}),Gr(()=>{l&&(l=!1,g())}),he([wr,()=>[t.content,t.rows,t.position]],g),Je({toggle:_}),()=>h("div",{ref:o,class:qb()},[i.value?t.content:r.value,s.value?b():null])}});const w5=oe(b5),[T5]=ee("time-picker"),Gb=t=>/^([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/.test(t),E5=["hour","minute","second"],I5=ke({},UC,{minHour:we(0),maxHour:we(23),minMinute:we(0),maxMinute:we(59),minSecond:we(0),maxSecond:we(59),minTime:{type:String,validator:Gb},maxTime:{type:String,validator:Gb},columnsType:{type:Array,default:()=>["hour","minute"]}});var C5=X({name:T5,props:I5,emits:["confirm","cancel","change","update:modelValue"],setup(t,{emit:e,slots:n}){const r=j(t.modelValue),i=j(),s=m=>{const g=m.split(":");return E5.map((_,T)=>t.columnsType.includes(_)?g[T]:"00")},o=()=>{var m;return(m=i.value)==null?void 0:m.confirm()},a=()=>r.value,l=z(()=>{let{minHour:m,maxHour:g,minMinute:_,maxMinute:T,minSecond:b,maxSecond:C}=t;if(t.minTime||t.maxTime){const y={hour:0,minute:0,second:0};t.columnsType.forEach((x,O)=>{var R;y[x]=(R=r.value[O])!=null?R:0});const{hour:A,minute:D}=y;if(t.minTime){const[x,O,R]=s(t.minTime);m=x,_=+A<=+m?O:"00",b=+A<=+m&&+D<=+_?R:"00"}if(t.maxTime){const[x,O,R]=s(t.maxTime);g=x,T=+A>=+g?O:"59",C=+A>=+g&&+D>=+T?R:"59"}}return t.columnsType.map(y=>{const{filter:A,formatter:D}=t;switch(y){case"hour":return ra(+m,+g,y,D,A,r.value);case"minute":return ra(+_,+T,y,D,A,r.value);case"second":return ra(+b,+C,y,D,A,r.value);default:return[]}})});he(r,m=>{zr(m,t.modelValue)||e("update:modelValue",m)}),he(()=>t.modelValue,m=>{m=jC(m,l.value),zr(m,r.value)||(r.value=m)},{immediate:!0});const c=(...m)=>e("change",...m),d=(...m)=>e("cancel",...m),f=(...m)=>e("confirm",...m);return Je({confirm:o,getSelectedTime:a}),()=>h(gc,Qe({ref:i,modelValue:r.value,"onUpdate:modelValue":m=>r.value=m,columns:l.value,onChange:c,onCancel:d,onConfirm:f},lt(t,$C)),n)}});const S5=oe(C5),[A5,Mo]=ee("tree-select"),k5={max:we(1/0),items:At(),height:we(300),selectedIcon:le("success"),mainActiveIndex:we(0),activeId:{type:[Number,String,Array],default:0}};var R5=X({name:A5,props:k5,emits:["clickNav","clickItem","update:activeId","update:mainActiveIndex"],setup(t,{emit:e,slots:n}){const r=c=>Array.isArray(t.activeId)?t.activeId.includes(c):t.activeId===c,i=c=>{const d=()=>{if(c.disabled)return;let f;if(Array.isArray(t.activeId)){f=t.activeId.slice();const m=f.indexOf(c.id);m!==-1?f.splice(m,1):f.length<+t.max&&f.push(c.id)}else f=c.id;e("update:activeId",f),e("clickItem",c)};return h("div",{key:c.id,class:["van-ellipsis",Mo("item",{active:r(c.id),disabled:c.disabled})],onClick:d},[c.text,r(c.id)&&h(je,{name:t.selectedIcon,class:Mo("selected")},null)])},s=c=>{e("update:mainActiveIndex",c)},o=c=>e("clickNav",c),a=()=>{const c=t.items.map(d=>h(b1,{dot:d.dot,badge:d.badge,class:[Mo("nav-item"),d.className],disabled:d.disabled,onClick:o},{title:()=>n["nav-text"]?n["nav-text"](d):d.text}));return h(y1,{class:Mo("nav"),modelValue:t.mainActiveIndex,onChange:s},{default:()=>[c]})},l=()=>{if(n.content)return n.content();const c=t.items[+t.mainActiveIndex]||{};if(c.children)return c.children.map(i)};return()=>h("div",{class:Mo(),style:{height:ze(t.height)}},[a(),h("div",{class:Mo("content")},[l()])])}});const P5=oe(R5),[x5,Ut,D5]=ee("uploader");function Wb(t,e){return new Promise(n=>{if(e==="file"){n();return}const r=new FileReader;r.onload=i=>{n(i.target.result)},e==="dataUrl"?r.readAsDataURL(t):e==="text"&&r.readAsText(t)})}function P1(t,e){return nd(t).some(n=>n.file?ma(e)?e(n.file):n.file.size>+e:!1)}function O5(t,e){const n=[],r=[];return t.forEach(i=>{P1(i,e)?r.push(i):n.push(i)}),{valid:n,invalid:r}}const V5=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg|avif)/i,L5=t=>V5.test(t);function x1(t){return t.isImage?!0:t.file&&t.file.type?t.file.type.indexOf("image")===0:t.url?L5(t.url):typeof t.content=="string"?t.content.indexOf("data:image")===0:!1}var N5=X({props:{name:ie,item:Gt(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,reupload:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview","reupload"],setup(t,{emit:e,slots:n}){const r=()=>{const{status:d,message:f}=t.item;if(d==="uploading"||d==="failed"){const m=d==="failed"?h(je,{name:"close",class:Ut("mask-icon")},null):h(cr,{class:Ut("loading")},null),g=it(f)&&f!=="";return h("div",{class:Ut("mask")},[m,g&&h("div",{class:Ut("mask-message")},[f])])}},i=d=>{const{name:f,item:m,index:g,beforeDelete:_}=t;d.stopPropagation(),Cs(_,{args:[m,{name:f,index:g}],done:()=>e("delete")})},s=()=>e("preview"),o=()=>e("reupload"),a=()=>{if(t.deletable&&t.item.status!=="uploading"){const d=n["preview-delete"];return h("div",{role:"button",class:Ut("preview-delete",{shadow:!d}),tabindex:0,"aria-label":D5("delete"),onClick:i},[d?d():h(je,{name:"cross",class:Ut("preview-delete-icon")},null)])}},l=()=>{if(n["preview-cover"]){const{index:d,item:f}=t;return h("div",{class:Ut("preview-cover")},[n["preview-cover"](ke({index:d},f))])}},c=()=>{const{item:d,lazyLoad:f,imageFit:m,previewSize:g,reupload:_}=t;return x1(d)?h(ch,{fit:m,src:d.objectUrl||d.content||d.url,class:Ut("preview-image"),width:Array.isArray(g)?g[0]:g,height:Array.isArray(g)?g[1]:g,lazyLoad:f,onClick:_?o:s},{default:l}):h("div",{class:Ut("file"),style:Pi(t.previewSize)},[h(je,{class:Ut("file-icon"),name:"description"},null),h("div",{class:[Ut("file-name"),"van-ellipsis"]},[d.file?d.file.name:d.url]),l()])};return()=>h("div",{class:Ut("preview")},[c(),r(),a()])}});const M5={name:we(""),accept:le("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:we(1/0),imageFit:le("cover"),resultType:le("dataUrl"),uploadIcon:le("photograph"),uploadText:String,deletable:Q,reupload:Boolean,afterRead:Function,showUpload:Q,modelValue:At(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:Q,previewOptions:Object,previewFullImage:Q,maxSize:{type:[Number,String,Function],default:1/0}};var F5=X({name:x5,props:M5,emits:["delete","oversize","clickUpload","closePreview","clickPreview","clickReupload","update:modelValue"],setup(t,{emit:e,slots:n}){const r=j(),i=[],s=j(-1),o=j(!1),a=(v=t.modelValue.length)=>({name:t.name,index:v}),l=()=>{r.value&&(r.value.value="")},c=v=>{if(l(),P1(v,t.maxSize))if(Array.isArray(v)){const I=O5(v,t.maxSize);if(v=I.valid,e("oversize",I.invalid,a()),!v.length)return}else{e("oversize",v,a());return}if(v=Ct(v),s.value>-1){const I=[...t.modelValue];I.splice(s.value,1,v),e("update:modelValue",I),s.value=-1}else e("update:modelValue",[...t.modelValue,...nd(v)]);t.afterRead&&t.afterRead(v,a())},d=v=>{const{maxCount:I,modelValue:k,resultType:E}=t;if(Array.isArray(v)){const S=+I-k.length;v.length>S&&(v=v.slice(0,S)),Promise.all(v.map(P=>Wb(P,E))).then(P=>{const re=v.map((fe,Y)=>{const de={file:fe,status:"",message:"",objectUrl:URL.createObjectURL(fe)};return P[Y]&&(de.content=P[Y]),de});c(re)})}else Wb(v,E).then(S=>{const P={file:v,status:"",message:"",objectUrl:URL.createObjectURL(v)};S&&(P.content=S),c(P)})},f=v=>{const{files:I}=v.target;if(t.disabled||!I||!I.length)return;const k=I.length===1?I[0]:[].slice.call(I);if(t.beforeRead){const E=t.beforeRead(k,a());if(!E){l();return}if(rp(E)){E.then(S=>{d(S||k)}).catch(l);return}}d(k)};let m;const g=()=>e("closePreview"),_=v=>{if(t.previewFullImage){const I=t.modelValue.filter(x1),k=I.map(E=>(E.objectUrl&&!E.url&&E.status!=="failed"&&(E.url=E.objectUrl,i.push(E.url)),E.url)).filter(Boolean);m=x3(ke({images:k,startPosition:I.indexOf(v),onClose:g},t.previewOptions))}},T=()=>{m&&m.close()},b=(v,I)=>{const k=t.modelValue.slice(0);k.splice(I,1),e("update:modelValue",k),e("delete",v,a(I))},C=v=>{o.value=!0,s.value=v,qe(()=>R())},y=()=>{o.value||(s.value=-1),o.value=!1},A=(v,I)=>{const k=["imageFit","deletable","reupload","previewSize","beforeDelete"],E=ke(lt(t,k),lt(v,k,!0));return h(N5,Qe({item:v,index:I,onClick:()=>e(t.reupload?"clickReupload":"clickPreview",v,a(I)),onDelete:()=>b(v,I),onPreview:()=>_(v),onReupload:()=>C(I)},lt(t,["name","lazyLoad"]),E),lt(n,["preview-cover","preview-delete"]))},D=()=>{if(t.previewImage)return t.modelValue.map(A)},x=v=>e("clickUpload",v),O=()=>{const v=t.modelValue.length<+t.maxCount,I=t.readonly?null:h("input",{ref:r,type:"file",class:Ut("input"),accept:t.accept,capture:t.capture,multiple:t.multiple&&s.value===-1,disabled:t.disabled,onChange:f,onClick:y},null);return n.default?Wt(h("div",{class:Ut("input-wrapper"),onClick:x},[n.default(),I]),[[rn,v]]):Wt(h("div",{class:Ut("upload",{readonly:t.readonly}),style:Pi(t.previewSize),onClick:x},[h(je,{name:t.uploadIcon,class:Ut("upload-icon")},null),t.uploadText&&h("span",{class:Ut("upload-text")},[t.uploadText]),I]),[[rn,t.showUpload&&v]])},R=()=>{r.value&&!t.disabled&&r.value.click()};return Kr(()=>{i.forEach(v=>URL.revokeObjectURL(v))}),Je({chooseFile:R,reuploadFile:C,closeImagePreview:T}),Is(()=>t.modelValue),()=>h("div",{class:Ut()},[h("div",{class:Ut("wrapper",{disabled:t.disabled})},[D(),O()])])}});const D1=oe(F5),[B5,Kb]=ee("watermark"),U5={gapX:Bt(0),gapY:Bt(0),image:String,width:Bt(100),height:Bt(100),rotate:we(-22),zIndex:ie,content:String,opacity:ie,fullPage:Q,textColor:le("#dcdee0")};var $5=X({name:B5,props:U5,setup(t,{slots:e}){const n=j(),r=j(""),i=j(""),s=()=>{const l={transformOrigin:"center",transform:`rotate(${t.rotate}deg)`},c=()=>t.image&&!e.content?h("image",{href:i.value,"xlink:href":i.value,x:"0",y:"0",width:t.width,height:t.height,style:l},null):h("foreignObject",{x:"0",y:"0",width:t.width,height:t.height},[h("div",{xmlns:"http://www.w3.org/1999/xhtml",style:l},[e.content?e.content():h("span",{style:{color:t.textColor}},[t.content])])]),d=t.width+t.gapX,f=t.height+t.gapY;return h("svg",{viewBox:`0 0 ${d} ${f}`,width:d,height:f,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",style:{padding:`0 ${t.gapX}px ${t.gapY}px 0`,opacity:t.opacity}},[c()])},o=l=>{const c=document.createElement("canvas"),d=new Image;d.crossOrigin="anonymous",d.referrerPolicy="no-referrer",d.onload=()=>{c.width=d.naturalWidth,c.height=d.naturalHeight;const f=c.getContext("2d");f==null||f.drawImage(d,0,0),i.value=c.toDataURL()},d.src=l},a=l=>{const c=new Blob([l],{type:"image/svg+xml"});return URL.createObjectURL(c)};return wa(()=>{t.image&&o(t.image)}),he(()=>[i.value,t.content,t.textColor,t.height,t.width,t.rotate,t.gapX,t.gapY],()=>{qe(()=>{n.value&&(r.value&&URL.revokeObjectURL(r.value),r.value=a(n.value.innerHTML))})},{immediate:!0}),ba(()=>{r.value&&URL.revokeObjectURL(r.value)}),()=>{const l=ke({backgroundImage:`url(${r.value})`},xi(t.zIndex));return h("div",{class:Kb({full:t.fullPage}),style:l},[h("div",{class:Kb("wrapper"),ref:n},[s()])])}}});const z5=oe($5),j5="4.9.15";function H5(t){[cp,sd,oC,cC,DC,FC,CC,ZU,vo,i$,Tn,HC,I$,R$,Rr,O$,lh,yp,B$,W$,X$,n4,r4,a4,d4,p4,T4,km,YC,XC,U4,ZC,e1,n3,r3,QC,_i,a3,r1,fp,m3,_3,T3,je,ch,D3,U3,$3,G3,cr,KI,Q3,e9,o9,m9,lC,_9,T9,gc,E9,wz,kr,Cz,xz,wp,_p,Nz,qz,Gz,Xz,s6,y1,b1,p6,w1,kp,T1,Pp,Ap,z6,G6,X6,n5,r5,pC,S1,rh,A1,ih,vp,ga,f5,v5,mc,ah,w5,S5,PC,P5,D1,z5].forEach(n=>{n.install?t.use(n):n.name&&t.component(n.name,n)})}var q5={install:H5,version:j5};function G5(){return O1().__VUE_DEVTOOLS_GLOBAL_HOOK__}function O1(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const W5=typeof Proxy=="function",K5="devtools-plugin:setup",Y5="plugin:settings:set";let Fo,Om;function Q5(){var t;return Fo!==void 0||(typeof window<"u"&&window.performance?(Fo=!0,Om=window.performance):typeof globalThis<"u"&&(!((t=globalThis.perf_hooks)===null||t===void 0)&&t.performance)?(Fo=!0,Om=globalThis.perf_hooks.performance):Fo=!1),Fo}function X5(){return Q5()?Om.now():Date.now()}class J5{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const r={};if(e.settings)for(const o in e.settings){const a=e.settings[o];r[o]=a.defaultValue}const i=`__vue-devtools-plugin-settings__${e.id}`;let s=Object.assign({},r);try{const o=localStorage.getItem(i),a=JSON.parse(o);Object.assign(s,a)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(i,JSON.stringify(o))}catch{}s=o},now(){return X5()}},n&&n.on(Y5,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function Z5(t,e){const n=t,r=O1(),i=G5(),s=W5&&n.enableEarlyProxy;if(i&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))i.emit(K5,t,e);else{const o=s?new J5(n,i):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Go=typeof document<"u";function V1(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function ej(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&V1(t.default)}const ht=Object.assign;function Af(t,e){const n={};for(const r in e){const i=e[r];n[r]=Sr(i)?i.map(t):t(i)}return n}const Al=()=>{},Sr=Array.isArray,L1=/#/g,tj=/&/g,nj=/\//g,rj=/=/g,ij=/\?/g,N1=/\+/g,sj=/%5B/g,oj=/%5D/g,M1=/%5E/g,aj=/%60/g,F1=/%7B/g,lj=/%7C/g,B1=/%7D/g,cj=/%20/g;function xp(t){return encodeURI(""+t).replace(lj,"|").replace(sj,"[").replace(oj,"]")}function uj(t){return xp(t).replace(F1,"{").replace(B1,"}").replace(M1,"^")}function Vm(t){return xp(t).replace(N1,"%2B").replace(cj,"+").replace(L1,"%23").replace(tj,"%26").replace(aj,"`").replace(F1,"{").replace(B1,"}").replace(M1,"^")}function dj(t){return Vm(t).replace(rj,"%3D")}function hj(t){return xp(t).replace(L1,"%23").replace(ij,"%3F")}function fj(t){return t==null?"":hj(t).replace(nj,"%2F")}function Yl(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const mj=/\/$/,gj=t=>t.replace(mj,"");function kf(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=yj(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:Yl(o)}}function pj(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Yb(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function vj(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&_a(e.matched[r],n.matched[i])&&U1(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function _a(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function U1(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!_j(t[n],e[n]))return!1;return!0}function _j(t,e){return Sr(t)?Qb(t,e):Sr(e)?Qb(e,t):t===e}function Qb(t,e){return Sr(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function yj(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const qi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ql;(function(t){t.pop="pop",t.push="push"})(Ql||(Ql={}));var kl;(function(t){t.back="back",t.forward="forward",t.unknown=""})(kl||(kl={}));function bj(t){if(!t)if(Go){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),gj(t)}const wj=/^[^#]+#/;function Tj(t,e){return t.replace(wj,"#")+e}function Ej(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const hh=()=>({left:window.scrollX,top:window.scrollY});function Ij(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=Ej(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Xb(t,e){return(history.state?history.state.position-e:-1)+t}const Lm=new Map;function Cj(t,e){Lm.set(t,e)}function Sj(t){const e=Lm.get(t);return Lm.delete(t),e}let Aj=()=>location.protocol+"//"+location.host;function $1(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),Yb(l,"")}return Yb(n,t)+r+i}function kj(t,e,n,r){let i=[],s=[],o=null;const a=({state:m})=>{const g=$1(t,location),_=n.value,T=e.value;let b=0;if(m){if(n.value=g,e.value=m,o&&o===_){o=null;return}b=T?m.position-T.position:0}else r(g);i.forEach(C=>{C(n.value,_,{delta:b,type:Ql.pop,direction:b?b>0?kl.forward:kl.back:kl.unknown})})};function l(){o=n.value}function c(m){i.push(m);const g=()=>{const _=i.indexOf(m);_>-1&&i.splice(_,1)};return s.push(g),g}function d(){const{history:m}=window;m.state&&m.replaceState(ht({},m.state,{scroll:hh()}),"")}function f(){for(const m of s)m();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function Jb(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?hh():null}}function Rj(t){const{history:e,location:n}=window,r={value:$1(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,d){const f=t.indexOf("#"),m=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+l:Aj()+t+l;try{e[d?"replaceState":"pushState"](c,"",m),i.value=c}catch(g){console.error(g),n[d?"replace":"assign"](m)}}function o(l,c){const d=ht({},e.state,Jb(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,d,!0),r.value=l}function a(l,c){const d=ht({},i.value,e.state,{forward:l,scroll:hh()});s(d.current,d,!0);const f=ht({},Jb(r.value,l,null),{position:d.position+1},c);s(l,f,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function Pj(t){t=bj(t);const e=Rj(t),n=kj(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=ht({location:"",base:t,go:r,createHref:Tj.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function xj(t){return typeof t=="string"||t&&typeof t=="object"}function z1(t){return typeof t=="string"||typeof t=="symbol"}const j1=Symbol("");var Zb;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Zb||(Zb={}));function ya(t,e){return ht(new Error,{type:t,[j1]:!0},e)}function ii(t,e){return t instanceof Error&&j1 in t&&(e==null||!!(t.type&e))}const ew="[^/]+?",Dj={sensitive:!1,strict:!1,start:!0,end:!0},Oj=/[.+*?^${}()[\]/\\]/g;function Vj(t,e){const n=ht({},Dj,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const d=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let f=0;f<c.length;f++){const m=c[f];let g=40+(n.sensitive?.25:0);if(m.type===0)f||(i+="/"),i+=m.value.replace(Oj,"\\$&"),g+=40;else if(m.type===1){const{value:_,repeatable:T,optional:b,regexp:C}=m;s.push({name:_,repeatable:T,optional:b});const y=C||ew;if(y!==ew){g+=10;try{new RegExp(`(${y})`)}catch(D){throw new Error(`Invalid custom RegExp for param "${_}" (${y}): `+D.message)}}let A=T?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(A=b&&c.length<2?`(?:/${A})`:"/"+A),b&&(A+="?"),i+=A,g+=20,b&&(g+=-8),T&&(g+=-20),y===".*"&&(g+=-50)}d.push(g)}r.push(d)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const d=c.match(o),f={};if(!d)return null;for(let m=1;m<d.length;m++){const g=d[m]||"",_=s[m-1];f[_.name]=g&&_.repeatable?g.split("/"):g}return f}function l(c){let d="",f=!1;for(const m of t){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const g of m)if(g.type===0)d+=g.value;else if(g.type===1){const{value:_,repeatable:T,optional:b}=g,C=_ in c?c[_]:"";if(Sr(C)&&!T)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const y=Sr(C)?C.join("/"):C;if(!y)if(b)m.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${_}"`);d+=y}}return d||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function Lj(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function H1(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=Lj(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(tw(r))return 1;if(tw(i))return-1}return i.length-r.length}function tw(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Nj={type:0,value:""},Mj=/[a-zA-Z0-9_]/;function Fj(t){if(!t)return[[]];if(t==="/")return[[Nj]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${c}": ${g}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",d="";function f(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function m(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),o()):l===":"?(f(),n=1):m();break;case 4:m(),n=r;break;case 1:l==="("?n=2:Mj.test(l)?m():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:n=3:d+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),f(),o(),i}function Bj(t,e,n){const r=Vj(Fj(t.path),n),i=ht(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function Uj(t,e){const n=[],r=new Map;e=sw({strict:!1,end:!0,sensitive:!1},e);function i(f){return r.get(f)}function s(f,m,g){const _=!g,T=rw(f);T.aliasOf=g&&g.record;const b=sw(e,f),C=[T];if("alias"in f){const D=typeof f.alias=="string"?[f.alias]:f.alias;for(const x of D)C.push(rw(ht({},T,{components:g?g.record.components:T.components,path:x,aliasOf:g?g.record:T})))}let y,A;for(const D of C){const{path:x}=D;if(m&&x[0]!=="/"){const O=m.record.path,R=O[O.length-1]==="/"?"":"/";D.path=m.record.path+(x&&R+x)}if(y=Bj(D,m,b),g?g.alias.push(y):(A=A||y,A!==y&&A.alias.push(y),_&&f.name&&!iw(y)&&o(f.name)),q1(y)&&l(y),T.children){const O=T.children;for(let R=0;R<O.length;R++)s(O[R],y,g&&g.children[R])}g=g||y}return A?()=>{o(A)}:Al}function o(f){if(z1(f)){const m=r.get(f);m&&(r.delete(f),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(f);m>-1&&(n.splice(m,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function l(f){const m=jj(f,n);n.splice(m,0,f),f.record.name&&!iw(f)&&r.set(f.record.name,f)}function c(f,m){let g,_={},T,b;if("name"in f&&f.name){if(g=r.get(f.name),!g)throw ya(1,{location:f});b=g.record.name,_=ht(nw(m.params,g.keys.filter(A=>!A.optional).concat(g.parent?g.parent.keys.filter(A=>A.optional):[]).map(A=>A.name)),f.params&&nw(f.params,g.keys.map(A=>A.name))),T=g.stringify(_)}else if(f.path!=null)T=f.path,g=n.find(A=>A.re.test(T)),g&&(_=g.parse(T),b=g.record.name);else{if(g=m.name?r.get(m.name):n.find(A=>A.re.test(m.path)),!g)throw ya(1,{location:f,currentLocation:m});b=g.record.name,_=ht({},m.params,f.params),T=g.stringify(_)}const C=[];let y=g;for(;y;)C.unshift(y.record),y=y.parent;return{name:b,path:T,params:_,matched:C,meta:zj(C)}}t.forEach(f=>s(f));function d(){n.length=0,r.clear()}return{addRoute:s,resolve:c,removeRoute:o,clearRoutes:d,getRoutes:a,getRecordMatcher:i}}function nw(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function rw(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:$j(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function $j(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function iw(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function zj(t){return t.reduce((e,n)=>ht(e,n.meta),{})}function sw(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function jj(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;H1(t,e[s])<0?r=s:n=s+1}const i=Hj(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function Hj(t){let e=t;for(;e=e.parent;)if(q1(e)&&H1(t,e)===0)return e}function q1({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function qj(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(N1," "),o=s.indexOf("="),a=Yl(o<0?s:s.slice(0,o)),l=o<0?null:Yl(s.slice(o+1));if(a in e){let c=e[a];Sr(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function ow(t){let e="";for(let n in t){const r=t[n];if(n=dj(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Sr(r)?r.map(s=>s&&Vm(s)):[r&&Vm(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function Gj(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Sr(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const Wj=Symbol(""),aw=Symbol(""),fh=Symbol(""),G1=Symbol(""),Nm=Symbol("");function nl(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Yi(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=m=>{m===!1?l(ya(4,{from:n,to:e})):m instanceof Error?l(m):xj(m)?l(ya(2,{from:e,to:m})):(o&&r.enterCallbacks[i]===o&&typeof m=="function"&&o.push(m),a())},d=s(()=>t.call(r&&r.instances[i],e,n,c));let f=Promise.resolve(d);t.length<3&&(f=f.then(c)),f.catch(m=>l(m))})}function Rf(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(V1(l)){const d=(l.__vccOpts||l)[e];d&&s.push(Yi(d,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=ej(d)?d.default:d;o.mods[a]=d,o.components[a]=f;const g=(f.__vccOpts||f)[e];return g&&Yi(g,n,r,o,a,i)()}))}}return s}function lw(t){const e=_n(fh),n=_n(G1),r=z(()=>{const l=yr(t.to);return e.resolve(l)}),i=z(()=>{const{matched:l}=r.value,{length:c}=l,d=l[c-1],f=n.matched;if(!d||!f.length)return-1;const m=f.findIndex(_a.bind(null,d));if(m>-1)return m;const g=cw(l[c-2]);return c>1&&cw(d)===g&&f[f.length-1].path!==g?f.findIndex(_a.bind(null,l[c-2])):m}),s=z(()=>i.value>-1&&Jj(n.params,r.value.params)),o=z(()=>i.value>-1&&i.value===n.matched.length-1&&U1(n.params,r.value.params));function a(l={}){if(Xj(l)){const c=e[yr(t.replace)?"replace":"push"](yr(t.to)).catch(Al);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:z(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function Kj(t){return t.length===1?t[0]:t}const Yj=X({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:lw,setup(t,{slots:e}){const n=Ct(lw(t)),{options:r}=_n(fh),i=z(()=>({[uw(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[uw(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&Kj(e.default(n));return t.custom?s:ng("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),Qj=Yj;function Xj(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Jj(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Sr(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function cw(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const uw=(t,e,n)=>t??e??n,Zj=X({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=_n(Nm),i=z(()=>t.route||r.value),s=_n(aw,0),o=z(()=>{let c=yr(s);const{matched:d}=i.value;let f;for(;(f=d[c])&&!f.components;)c++;return c}),a=z(()=>i.value.matched[o.value]);mi(aw,z(()=>o.value+1)),mi(Wj,a),mi(Nm,i);const l=j();return he(()=>[l.value,a.value,t.name],([c,d,f],[m,g,_])=>{d&&(d.instances[f]=c,g&&g!==d&&c&&c===m&&(d.leaveGuards.size||(d.leaveGuards=g.leaveGuards),d.updateGuards.size||(d.updateGuards=g.updateGuards))),c&&d&&(!g||!_a(d,g)||!m)&&(d.enterCallbacks[f]||[]).forEach(T=>T(c))},{flush:"post"}),()=>{const c=i.value,d=t.name,f=a.value,m=f&&f.components[d];if(!m)return dw(n.default,{Component:m,route:c});const g=f.props[d],_=g?g===!0?c.params:typeof g=="function"?g(c):g:null,b=ng(m,ht({},_,e,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(f.instances[d]=null)},ref:l}));return dw(n.default,{Component:b,route:c})||b}}});function dw(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const eH=Zj;function tH(t){const e=Uj(t.routes,t),n=t.parseQuery||qj,r=t.stringifyQuery||ow,i=t.history,s=nl(),o=nl(),a=nl(),l=uA(qi);let c=qi;Go&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Af.bind(null,L=>""+L),f=Af.bind(null,fj),m=Af.bind(null,Yl);function g(L,q){let G,ae;return z1(L)?(G=e.getRecordMatcher(L),ae=q):ae=L,e.addRoute(ae,G)}function _(L){const q=e.getRecordMatcher(L);q&&e.removeRoute(q)}function T(){return e.getRoutes().map(L=>L.record)}function b(L){return!!e.getRecordMatcher(L)}function C(L,q){if(q=ht({},q||l.value),typeof L=="string"){const U=kf(n,L,q.path),K=e.resolve({path:U.path},q),Z=i.createHref(U.fullPath);return ht(U,K,{params:m(K.params),hash:Yl(U.hash),redirectedFrom:void 0,href:Z})}let G;if(L.path!=null)G=ht({},L,{path:kf(n,L.path,q.path).path});else{const U=ht({},L.params);for(const K in U)U[K]==null&&delete U[K];G=ht({},L,{params:f(U)}),q.params=f(q.params)}const ae=e.resolve(G,q),Re=L.hash||"";ae.params=d(m(ae.params));const N=pj(r,ht({},L,{hash:uj(Re),path:ae.path})),M=i.createHref(N);return ht({fullPath:N,hash:Re,query:r===ow?Gj(L.query):L.query||{}},ae,{redirectedFrom:void 0,href:M})}function y(L){return typeof L=="string"?kf(n,L,l.value.path):ht({},L)}function A(L,q){if(c!==L)return ya(8,{from:q,to:L})}function D(L){return R(L)}function x(L){return D(ht(y(L),{replace:!0}))}function O(L){const q=L.matched[L.matched.length-1];if(q&&q.redirect){const{redirect:G}=q;let ae=typeof G=="function"?G(L):G;return typeof ae=="string"&&(ae=ae.includes("?")||ae.includes("#")?ae=y(ae):{path:ae},ae.params={}),ht({query:L.query,hash:L.hash,params:ae.path!=null?{}:L.params},ae)}}function R(L,q){const G=c=C(L),ae=l.value,Re=L.state,N=L.force,M=L.replace===!0,U=O(G);if(U)return R(ht(y(U),{state:typeof U=="object"?ht({},Re,U.state):Re,force:N,replace:M}),q||G);const K=G;K.redirectedFrom=q;let Z;return!N&&vj(r,ae,G)&&(Z=ya(16,{to:K,from:ae}),H(ae,ae,!0,!1)),(Z?Promise.resolve(Z):k(K,ae)).catch(J=>ii(J)?ii(J,2)?J:Xe(J):me(J,K,ae)).then(J=>{if(J){if(ii(J,2))return R(ht({replace:M},y(J.to),{state:typeof J.to=="object"?ht({},Re,J.to.state):Re,force:N}),q||K)}else J=S(K,ae,!0,M,Re);return E(K,ae,J),J})}function v(L,q){const G=A(L,q);return G?Promise.reject(G):Promise.resolve()}function I(L){const q=Ae.values().next().value;return q&&typeof q.runWithContext=="function"?q.runWithContext(L):L()}function k(L,q){let G;const[ae,Re,N]=nH(L,q);G=Rf(ae.reverse(),"beforeRouteLeave",L,q);for(const U of ae)U.leaveGuards.forEach(K=>{G.push(Yi(K,L,q))});const M=v.bind(null,L,q);return G.push(M),Ee(G).then(()=>{G=[];for(const U of s.list())G.push(Yi(U,L,q));return G.push(M),Ee(G)}).then(()=>{G=Rf(Re,"beforeRouteUpdate",L,q);for(const U of Re)U.updateGuards.forEach(K=>{G.push(Yi(K,L,q))});return G.push(M),Ee(G)}).then(()=>{G=[];for(const U of N)if(U.beforeEnter)if(Sr(U.beforeEnter))for(const K of U.beforeEnter)G.push(Yi(K,L,q));else G.push(Yi(U.beforeEnter,L,q));return G.push(M),Ee(G)}).then(()=>(L.matched.forEach(U=>U.enterCallbacks={}),G=Rf(N,"beforeRouteEnter",L,q,I),G.push(M),Ee(G))).then(()=>{G=[];for(const U of o.list())G.push(Yi(U,L,q));return G.push(M),Ee(G)}).catch(U=>ii(U,8)?U:Promise.reject(U))}function E(L,q,G){a.list().forEach(ae=>I(()=>ae(L,q,G)))}function S(L,q,G,ae,Re){const N=A(L,q);if(N)return N;const M=q===qi,U=Go?history.state:{};G&&(ae||M?i.replace(L.fullPath,ht({scroll:M&&U&&U.scroll},Re)):i.push(L.fullPath,Re)),l.value=L,H(L,q,G,M),Xe()}let P;function re(){P||(P=i.listen((L,q,G)=>{if(!ce.listening)return;const ae=C(L),Re=O(ae);if(Re){R(ht(Re,{replace:!0,force:!0}),ae).catch(Al);return}c=ae;const N=l.value;Go&&Cj(Xb(N.fullPath,G.delta),hh()),k(ae,N).catch(M=>ii(M,12)?M:ii(M,2)?(R(ht(y(M.to),{force:!0}),ae).then(U=>{ii(U,20)&&!G.delta&&G.type===Ql.pop&&i.go(-1,!1)}).catch(Al),Promise.reject()):(G.delta&&i.go(-G.delta,!1),me(M,ae,N))).then(M=>{M=M||S(ae,N,!1),M&&(G.delta&&!ii(M,8)?i.go(-G.delta,!1):G.type===Ql.pop&&ii(M,20)&&i.go(-1,!1)),E(ae,N,M)}).catch(Al)}))}let fe=nl(),Y=nl(),de;function me(L,q,G){Xe(L);const ae=Y.list();return ae.length?ae.forEach(Re=>Re(L,q,G)):console.error(L),Promise.reject(L)}function Ue(){return de&&l.value!==qi?Promise.resolve():new Promise((L,q)=>{fe.add([L,q])})}function Xe(L){return de||(de=!L,re(),fe.list().forEach(([q,G])=>L?G(L):q()),fe.reset()),L}function H(L,q,G,ae){const{scrollBehavior:Re}=t;if(!Go||!Re)return Promise.resolve();const N=!G&&Sj(Xb(L.fullPath,0))||(ae||!G)&&history.state&&history.state.scroll||null;return qe().then(()=>Re(L,q,N)).then(M=>M&&Ij(M)).catch(M=>me(M,L,q))}const te=L=>i.go(L);let ge;const Ae=new Set,ce={currentRoute:l,listening:!0,addRoute:g,removeRoute:_,clearRoutes:e.clearRoutes,hasRoute:b,getRoutes:T,resolve:C,options:t,push:D,replace:x,go:te,back:()=>te(-1),forward:()=>te(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:Y.add,isReady:Ue,install(L){const q=this;L.component("RouterLink",Qj),L.component("RouterView",eH),L.config.globalProperties.$router=q,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>yr(l)}),Go&&!ge&&l.value===qi&&(ge=!0,D(i.location).catch(Re=>{}));const G={};for(const Re in qi)Object.defineProperty(G,Re,{get:()=>l.value[Re],enumerable:!0});L.provide(fh,q),L.provide(G1,Fw(G)),L.provide(Nm,l);const ae=L.unmount;Ae.add(L),L.unmount=function(){Ae.delete(L),Ae.size<1&&(c=qi,P&&P(),P=null,l.value=qi,ge=!1,de=!1),ae()}}};function Ee(L){return L.reduce((q,G)=>q.then(()=>I(G)),Promise.resolve())}return ce}function nH(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>_a(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>_a(c,l))||i.push(l))}return[n,r,i]}function rH(){return _n(fh)}/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var W1="store";function iH(t){return t===void 0&&(t=null),_n(t!==null?t:W1)}function xa(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function K1(t){return t!==null&&typeof t=="object"}function sH(t){return t&&typeof t.then=="function"}function oH(t,e){return function(){return t(e)}}function Y1(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}function Q1(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;mh(t,n,[],t._modules.root,!0),Dp(t,n,e)}function Dp(t,e,n){var r=t._state,i=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var s=t._wrappedGetters,o={},a={},l=jS(!0);l.run(function(){xa(s,function(c,d){o[d]=oH(c,t),a[d]=z(function(){return o[d]()}),Object.defineProperty(t.getters,d,{get:function(){return a[d].value},enumerable:!0})})}),t._state=Ct({data:e}),t._scope=l,t.strict&&dH(t),r&&n&&t._withCommit(function(){r.data=null}),i&&i.stop()}function mh(t,e,n,r,i){var s=!n.length,o=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=r),!s&&!i){var a=Op(e,n.slice(0,-1)),l=n[n.length-1];t._withCommit(function(){a[l]=r.state})}var c=r.context=aH(t,o,n);r.forEachMutation(function(d,f){var m=o+f;lH(t,m,d,c)}),r.forEachAction(function(d,f){var m=d.root?f:o+f,g=d.handler||d;cH(t,m,g,c)}),r.forEachGetter(function(d,f){var m=o+f;uH(t,m,d,c)}),r.forEachChild(function(d,f){mh(t,e,n.concat(f),d,i)})}function aH(t,e,n){var r=e==="",i={dispatch:r?t.dispatch:function(s,o,a){var l=ud(s,o,a),c=l.payload,d=l.options,f=l.type;return(!d||!d.root)&&(f=e+f),t.dispatch(f,c)},commit:r?t.commit:function(s,o,a){var l=ud(s,o,a),c=l.payload,d=l.options,f=l.type;(!d||!d.root)&&(f=e+f),t.commit(f,c,d)}};return Object.defineProperties(i,{getters:{get:r?function(){return t.getters}:function(){return X1(t,e)}},state:{get:function(){return Op(t.state,n)}}}),i}function X1(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach(function(i){if(i.slice(0,r)===e){var s=i.slice(r);Object.defineProperty(n,s,{get:function(){return t.getters[i]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function lH(t,e,n,r){var i=t._mutations[e]||(t._mutations[e]=[]);i.push(function(o){n.call(t,r.state,o)})}function cH(t,e,n,r){var i=t._actions[e]||(t._actions[e]=[]);i.push(function(o){var a=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},o);return sH(a)||(a=Promise.resolve(a)),t._devtoolHook?a.catch(function(l){throw t._devtoolHook.emit("vuex:error",l),l}):a})}function uH(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(s){return n(r.state,r.getters,s.state,s.getters)})}function dH(t){he(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function Op(t,e){return e.reduce(function(n,r){return n[r]},t)}function ud(t,e,n){return K1(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var hH="vuex bindings",hw="vuex:mutations",Pf="vuex:actions",Bo="vuex",fH=0;function mH(t,e){Z5({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[hH]},function(n){n.addTimelineLayer({id:hw,label:"Vuex Mutations",color:fw}),n.addTimelineLayer({id:Pf,label:"Vuex Actions",color:fw}),n.addInspector({id:Bo,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===t&&r.inspectorId===Bo)if(r.filter){var i=[];tS(i,e._modules.root,r.filter,""),r.rootNodes=i}else r.rootNodes=[eS(e._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===t&&r.inspectorId===Bo){var i=r.nodeId;X1(e,i),r.state=vH(yH(e._modules,i),i==="root"?e.getters:e._makeLocalGettersCache,i)}}),n.on.editInspectorState(function(r){if(r.app===t&&r.inspectorId===Bo){var i=r.nodeId,s=r.path;i!=="root"&&(s=i.split("/").filter(Boolean).concat(s)),e._withCommit(function(){r.set(e._state.data,s,r.state.value)})}}),e.subscribe(function(r,i){var s={};r.payload&&(s.payload=r.payload),s.state=i,n.notifyComponentUpdate(),n.sendInspectorTree(Bo),n.sendInspectorState(Bo),n.addTimelineEvent({layerId:hw,event:{time:Date.now(),title:r.type,data:s}})}),e.subscribeAction({before:function(r,i){var s={};r.payload&&(s.payload=r.payload),r._id=fH++,r._time=Date.now(),s.state=i,n.addTimelineEvent({layerId:Pf,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:s}})},after:function(r,i){var s={},o=Date.now()-r._time;s.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},r.payload&&(s.payload=r.payload),s.state=i,n.addTimelineEvent({layerId:Pf,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:s}})}})})}var fw=8702998,gH=6710886,pH=16777215,J1={label:"namespaced",textColor:pH,backgroundColor:gH};function Z1(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function eS(t,e){return{id:e||"root",label:Z1(e),tags:t.namespaced?[J1]:[],children:Object.keys(t._children).map(function(n){return eS(t._children[n],e+n+"/")})}}function tS(t,e,n,r){r.includes(n)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[J1]:[]}),Object.keys(e._children).forEach(function(i){tS(t,e._children[i],n,r+i+"/")})}function vH(t,e,n){e=n==="root"?e:e[n];var r=Object.keys(e),i={state:Object.keys(t.state).map(function(o){return{key:o,editable:!0,value:t.state[o]}})};if(r.length){var s=_H(e);i.getters=Object.keys(s).map(function(o){return{key:o.endsWith("/")?Z1(o):o,editable:!1,value:Mm(function(){return s[o]})}})}return i}function _H(t){var e={};return Object.keys(t).forEach(function(n){var r=n.split("/");if(r.length>1){var i=e,s=r.pop();r.forEach(function(o){i[o]||(i[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),i=i[o]._custom.value}),i[s]=Mm(function(){return t[n]})}else e[n]=Mm(function(){return t[n]})}),e}function yH(t,e){var n=e.split("/").filter(function(r){return r});return n.reduce(function(r,i,s){var o=r[i];if(!o)throw new Error('Missing module "'+i+'" for path "'+e+'".');return s===n.length-1?o:o._children},e==="root"?t:t.root._children)}function Mm(t){try{return t()}catch(e){return e}}var xr=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=(typeof r=="function"?r():r)||{}},nS={namespaced:{configurable:!0}};nS.namespaced.get=function(){return!!this._rawModule.namespaced};xr.prototype.addChild=function(e,n){this._children[e]=n};xr.prototype.removeChild=function(e){delete this._children[e]};xr.prototype.getChild=function(e){return this._children[e]};xr.prototype.hasChild=function(e){return e in this._children};xr.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};xr.prototype.forEachChild=function(e){xa(this._children,e)};xr.prototype.forEachGetter=function(e){this._rawModule.getters&&xa(this._rawModule.getters,e)};xr.prototype.forEachAction=function(e){this._rawModule.actions&&xa(this._rawModule.actions,e)};xr.prototype.forEachMutation=function(e){this._rawModule.mutations&&xa(this._rawModule.mutations,e)};Object.defineProperties(xr.prototype,nS);var yo=function(e){this.register([],e,!1)};yo.prototype.get=function(e){return e.reduce(function(n,r){return n.getChild(r)},this.root)};yo.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(r,i){return n=n.getChild(i),r+(n.namespaced?i+"/":"")},"")};yo.prototype.update=function(e){rS([],this.root,e)};yo.prototype.register=function(e,n,r){var i=this;r===void 0&&(r=!0);var s=new xr(n,r);if(e.length===0)this.root=s;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],s)}n.modules&&xa(n.modules,function(a,l){i.register(e.concat(l),a,r)})};yo.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1],i=n.getChild(r);i&&i.runtime&&n.removeChild(r)};yo.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1];return n?n.hasChild(r):!1};function rS(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;rS(t.concat(r),e.getChild(r),n.modules[r])}}function bH(t){return new $n(t)}var $n=function(e){var n=this;e===void 0&&(e={});var r=e.plugins;r===void 0&&(r=[]);var i=e.strict;i===void 0&&(i=!1);var s=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new yo(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=s;var o=this,a=this,l=a.dispatch,c=a.commit;this.dispatch=function(m,g){return l.call(o,m,g)},this.commit=function(m,g,_){return c.call(o,m,g,_)},this.strict=i;var d=this._modules.root.state;mh(this,d,[],this._modules.root),Dp(this,d),r.forEach(function(f){return f(n)})},Vp={state:{configurable:!0}};$n.prototype.install=function(e,n){e.provide(n||W1,this),e.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&mH(e,this)};Vp.state.get=function(){return this._state.data};Vp.state.set=function(t){};$n.prototype.commit=function(e,n,r){var i=this,s=ud(e,n,r),o=s.type,a=s.payload,l={type:o,payload:a},c=this._mutations[o];c&&(this._withCommit(function(){c.forEach(function(f){f(a)})}),this._subscribers.slice().forEach(function(d){return d(l,i.state)}))};$n.prototype.dispatch=function(e,n){var r=this,i=ud(e,n),s=i.type,o=i.payload,a={type:s,payload:o},l=this._actions[s];if(l){try{this._actionSubscribers.slice().filter(function(d){return d.before}).forEach(function(d){return d.before(a,r.state)})}catch{}var c=l.length>1?Promise.all(l.map(function(d){return d(o)})):l[0](o);return new Promise(function(d,f){c.then(function(m){try{r._actionSubscribers.filter(function(g){return g.after}).forEach(function(g){return g.after(a,r.state)})}catch{}d(m)},function(m){try{r._actionSubscribers.filter(function(g){return g.error}).forEach(function(g){return g.error(a,r.state,m)})}catch{}f(m)})})}};$n.prototype.subscribe=function(e,n){return Y1(e,this._subscribers,n)};$n.prototype.subscribeAction=function(e,n){var r=typeof e=="function"?{before:e}:e;return Y1(r,this._actionSubscribers,n)};$n.prototype.watch=function(e,n,r){var i=this;return he(function(){return e(i.state,i.getters)},n,Object.assign({},r))};$n.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};$n.prototype.registerModule=function(e,n,r){r===void 0&&(r={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),mh(this,this.state,e,this._modules.get(e),r.preserveState),Dp(this,this.state)};$n.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=Op(n.state,e.slice(0,-1));delete r[e[e.length-1]]}),Q1(this)};$n.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};$n.prototype.hotUpdate=function(e){this._modules.update(e),Q1(this,!0)};$n.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties($n.prototype,Vp);var wH=Np(function(t,e){var n={};return Lp(e).forEach(function(r){var i=r.key,s=r.val;n[i]=function(){var a=this.$store.state,l=this.$store.getters;if(t){var c=Mp(this.$store,"mapState",t);if(!c)return;a=c.context.state,l=c.context.getters}return typeof s=="function"?s.call(this,a,l):a[s]},n[i].vuex=!0}),n}),TH=Np(function(t,e){var n={};return Lp(e).forEach(function(r){var i=r.key,s=r.val;n[i]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var c=this.$store.commit;if(t){var d=Mp(this.$store,"mapMutations",t);if(!d)return;c=d.context.commit}return typeof s=="function"?s.apply(this,[c].concat(a)):c.apply(this.$store,[s].concat(a))}}),n}),Oi=Np(function(t,e){var n={};return Lp(e).forEach(function(r){var i=r.key,s=r.val;s=t+s,n[i]=function(){if(!(t&&!Mp(this.$store,"mapGetters",t)))return this.$store.getters[s]},n[i].vuex=!0}),n});function Lp(t){return EH(t)?Array.isArray(t)?t.map(function(e){return{key:e,val:e}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}}):[]}function EH(t){return Array.isArray(t)||K1(t)}function Np(t){return function(e,n){return typeof e!="string"?(n=e,e=""):e.charAt(e.length-1)!=="/"&&(e+="/"),t(e,n)}}function Mp(t,e,n){var r=t._modulesNamespaceMap[n];return r}const IH="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='-3%200%20262%20262'%20xmlns='http://www.w3.org/2000/svg'%20preserveAspectRatio='xMidYMid'%3e%3cpath%20d='M255.878%20133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45%2012.04-9.283%2030.172-26.69%2042.356l-.244%201.622%2038.755%2030.023%202.685.268c24.659-22.774%2038.875-56.282%2038.875-96.027'%20fill='%234285F4'/%3e%3cpath%20d='M130.55%20261.1c35.248%200%2064.839-11.605%2086.453-31.622l-41.196-31.913c-11.024%207.688-25.82%2013.055-45.257%2013.055-34.523%200-63.824-22.773-74.269-54.25l-1.531.13-40.298%2031.187-.527%201.465C35.393%20231.798%2079.49%20261.1%20130.55%20261.1'%20fill='%2334A853'/%3e%3cpath%20d='M56.281%20156.37c-2.756-8.123-4.351-16.827-4.351-25.82%200-8.994%201.595-17.697%204.206-25.82l-.073-1.73L15.26%2071.312l-1.335.635C5.077%2089.644%200%20109.517%200%20130.55s5.077%2040.905%2013.925%2058.602l42.356-32.782'%20fill='%23FBBC05'/%3e%3cpath%20d='M130.55%2050.479c24.514%200%2041.05%2010.589%2050.479%2019.438l36.844-35.974C195.245%2012.91%20165.798%200%20130.55%200%2079.49%200%2035.393%2029.301%2013.925%2071.947l42.211%2032.783c10.59-31.477%2039.891-54.251%2074.414-54.251'%20fill='%23EB4335'/%3e%3c/svg%3e",CH={data(){return{email:"",password:"",showPassword:!1,isLogin:!1}},methods:{async loginWithGoogle(){try{const e=(await tD(qr,L2)).user;console.log("Google 登录成功：",e),this.$store.commit("auth/setUser",{uid:e.uid,displayName:e.displayName||"用户",email:e.email,photoURL:e.photoURL,role:"user"}),this.$emit("loginSuccess")}catch(t){console.error("Google 登录失败：",t.message),er({message:"Google 登录失败，请重试。"})}},togglePasswordVisibility(){this.showPassword=!this.showPassword},async login(){this.isLogin=!0;try{const t=await vT(qr,this.email,this.password),e=t.user;if(e){const n=await ts(mt(Ke,"users",e.uid)),r=n.exists()&&n.data().role||"user";this.$store.commit("auth/setUser",{uid:e.uid,displayName:e.displayName||"用户",email:e.email,photoURL:e.photoURL||"https://via.placeholder.com/80",role:r})}console.log("登录成功",t.user),this.$emit("loginSuccess")}catch(t){console.error("登录失败",t),t.code==="auth/invalid-credential"?er({message:"密码不正确，请重试。"}):t.code==="auth/invalid-email"?er({message:"邮箱不存在，请重试。"}):er({message:"登录失败，请重试。"})}finally{this.isLogin=!1}},toRegister(){this.$router.push({path:"/Register"})}}},SH={class:"login-page"},AH={class:"login-container"},kH={class:"button-container"},RH={class:"footer-text"};function PH(t,e,n,r,i,s){const o=B("van-nav-bar"),a=B("van-loading"),l=B("van-overlay"),c=B("van-field"),d=B("van-icon"),f=B("van-button"),m=B("van-form"),g=B("van-divider");return Se(),Ge("div",SH,[pe("div",AH,[h(o,{title:"登录",border:!1,style:{"margin-bottom":"10px"}}),h(l,{show:i.isLogin,"onUpdate:show":e[0]||(e[0]=_=>i.isLogin=_),"z-index":"2000"},{default:F(()=>[h(a,{color:"#1989fa",size:"30px",type:"spinner",vertical:""},{default:F(()=>e[4]||(e[4]=[Ie("登录中...")])),_:1})]),_:1},8,["show"]),h(m,{onSubmit:s.login},{default:F(()=>[h(c,{modelValue:i.email,"onUpdate:modelValue":e[1]||(e[1]=_=>i.email=_),name:"email",label:"邮箱",placeholder:"请输入邮箱",required:"",class:"form-field"},null,8,["modelValue"]),h(c,{modelValue:i.password,"onUpdate:modelValue":e[2]||(e[2]=_=>i.password=_),name:"password",label:"密码",placeholder:"请输入密码",type:i.showPassword?"text":"password",required:"",class:"form-field"},{"right-icon":F(()=>[h(d,{name:i.showPassword?"eye-o":"eye",onClick:s.togglePasswordVisibility},null,8,["name","onClick"])]),_:1},8,["modelValue","type"]),pe("div",kH,[h(f,{round:"",block:"",type:"primary","native-type":"submit"},{default:F(()=>e[5]||(e[5]=[Ie("登录")])),_:1})])]),_:1},8,["onSubmit"]),h(g,{"content-position":"center",style:{margin:"30px"}},{default:F(()=>e[6]||(e[6]=[Ie("或")])),_:1}),h(f,{type:"primary",round:"",block:"",onClick:s.loginWithGoogle,class:"google-login-button"},{default:F(()=>e[7]||(e[7]=[pe("div",{class:"google-content"},[pe("img",{src:IH,alt:"Google Logo",class:"google-logo"}),Ie(" 使用 Google 登录 ")],-1)])),_:1},8,["onClick"]),pe("p",RH,[e[8]||(e[8]=Ie(" 没有账号？ ")),pe("span",{onClick:e[3]||(e[3]=(..._)=>s.toRegister&&s.toRegister(..._)),class:"link"},"立即注册")])])])}const pc=Nt(CH,[["render",PH],["__scopeId","data-v-9a6ac281"]]),xH={name:"cart",data(){return{isDoning:!1,showLogin:!1,searchQuery:""}},components:{Login:pc},computed:{...wH(["cartGoods","checkGoods","checkCounter"]),...Oi("auth",["uid","isLogin"]),totalPrice(){return this.checkGoods.reduce((t,e)=>t+e.price*e.count,0)*100},isAllChecked(){return this.cartGoods.length>0&&this.cartGoods.every(t=>this.checkGoods.some(e=>e.id===t.id))},availableSearchResults(){if(!this.searchQuery)return this.availableGoods;const t=this.searchQuery.toLowerCase();return this.availableGoods.filter(e=>e.title.toLowerCase().includes(t))},availableGoods(){return this.cartGoods.filter(t=>t.isAvailable)},unavailableGoods(){return this.cartGoods.filter(t=>!t.isAvailable)}},methods:{...TH(["addGoodsToCheck","removeGoodsFromCheck","deleteGoodsFromCart","updateGoodsQuantity","refreshCartGoods"]),GoDetail(t){this.$router.push({path:"/GoodDetail",query:{items:JSON.stringify(t)}})},onCheckChange(t,e){e?this.addGoodsToCheck(t):this.removeGoodsFromCheck(t.id)},async onStepperChange(t){t.count===0?this.confirmDelete(t):await this.updateGoodsQuantity({itemId:t.id,count:t.count})},toggleAllCheck(t){t?this.cartGoods.forEach(e=>{this.checkGoods.some(n=>n.id===e.id)||this.addGoodsToCheck(e)}):this.cartGoods.forEach(e=>{this.removeGoodsFromCheck(e.id)})},async confirmDelete(t){_o({title:"确认删除商品吗？",message:"一旦删除商品，将不可回退操作。",confirmButtonText:"删除",cancelButtonText:"再想想"}).then(async()=>{const e=mt(Ke,"cart",this.uid),n=this.cartGoods.filter(r=>r.id!==t.id);this.isDoning=!0;try{await xn(e,{items:n}),this.deleteGoodsFromCart(t.id),this.$store.commit("refreshCart")}catch(r){console.log(r)}finally{this.isDoning=!1}}).catch(()=>{}).finally(()=>{this.isDoning=!1})},onClickCheckOut(){this.checkCounter===0?nt("请先选择商品"):this.$router.push({path:"/CheckOut",query:{selectedItems:JSON.stringify(this.checkGoods)}})},goBack(){this.$router.go(-1)},CartManage(){this.$router.push({path:"/CartManage"})},handleButtonClick(){this.isLogin?this.$router.push({path:"/Home"}):this.showLogin=!0},handleLoginSuccess(t){this.showLogin=!1}}},DH={class:"cart-background"},OH={class:"cart-content"},VH={class:"cart"},LH={key:1},NH={class:"dp-footer"};function MH(t,e,n,r,i,s){const o=B("van-nav-bar"),a=B("van-search"),l=B("van-divider"),c=B("van-button"),d=B("van-empty"),f=B("van-checkbox"),m=B("van-col"),g=B("van-tag"),_=B("van-stepper"),T=B("van-card"),b=B("van-swipe-cell"),C=B("van-row"),y=B("van-loading"),A=B("van-overlay"),D=B("Login"),x=B("van-popup"),O=B("van-submit-bar");return Se(),Ge("div",DH,[h(o,{title:"我的购物车",onClickLeft:s.goBack,class:"fix-custom-title"},null,8,["onClickLeft"]),pe("div",OH,[h(a,{modelValue:i.searchQuery,"onUpdate:modelValue":e[0]||(e[0]=R=>i.searchQuery=R),placeholder:"请输入购物车搜索关键词","show-action":"",shape:"round",onSearch:t.onSearch,onCancel:t.onCancel,background:"#e9e6de"},null,8,["modelValue","onSearch","onCancel"]),h(l,{"content-position":"center",style:{color:"",borderColor:"grey",padding:"0 16px",fontWeight:"bold"}},{default:F(()=>e[4]||(e[4]=[Ie(" 购物车商品 ")])),_:1}),!t.isLogin||s.availableSearchResults.length===0?(Se(),Tt(d,{key:0,description:"你还没有添加任何商品哦~"},{default:F(()=>[h(c,{round:"",type:"primary",class:"bottom-button",onClick:s.handleButtonClick},{default:F(()=>[Ie(Ye(t.isLogin?"挑选商品":"未登录，点击登录"),1)]),_:1},8,["onClick"])]),_:1})):(Se(!0),Ge(rt,{key:1},vn(s.availableSearchResults,R=>(Se(),Tt(C,{key:R.id,class:"cart-item"},{default:F(()=>[h(m,{span:"3"},{default:F(()=>[h(f,{"model-value":t.checkGoods.some(v=>v.id===R.id),"onUpdate:modelValue":v=>s.onCheckChange(R,v),class:"custom-checkbox","checked-color":"#ff5000"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),h(m,{span:"20"},{default:F(()=>[h(b,null,{right:F(()=>[h(c,{square:"",text:"删除",type:"danger",class:"delete-button",onClick:v=>s.confirmDelete(R)},null,8,["onClick"])]),default:F(()=>[h(T,{onClick:v=>s.GoDetail(R),title:R.title,thumb:R.images[0],desc:R.description,price:R.price*R.count},{tags:F(()=>[h(g,{type:"warning"},{default:F(()=>[Ie("单价：¥"+Ye(R.price),1)]),_:2},1024)]),footer:F(()=>[h(_,{modelValue:R.count,"onUpdate:modelValue":v=>R.count=v,theme:"round","button-size":"22",onChange:v=>s.onStepperChange(R),onClick:e[1]||(e[1]=tc(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["onClick","title","thumb","desc","price"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),h(A,{show:i.isDoning,"onUpdate:show":e[2]||(e[2]=R=>i.isDoning=R),"z-index":"2000"},{default:F(()=>[h(y,{color:"#1989fa",size:"30px",type:"spinner",vertical:""},{default:F(()=>e[5]||(e[5]=[Ie("加载中...")])),_:1})]),_:1},8,["show"]),h(x,{show:i.showLogin,"onUpdate:show":e[3]||(e[3]=R=>i.showLogin=R),style:{"border-radius":"24px"},closeable:"","close-icon":"cross","close-icon-position":"top-right"},{default:F(()=>[h(D,{onLoginSuccess:s.handleLoginSuccess},null,8,["onLoginSuccess"])]),_:1},8,["show"]),pe("div",VH,[s.unavailableGoods.length>0?(Se(),Tt(l,{key:0,style:{color:"white",borderColor:"white",padding:"0 16px",fontWeight:"bold"}},{default:F(()=>e[6]||(e[6]=[Ie("已下架商品")])),_:1})):Xs("",!0),s.unavailableGoods.length>0?(Se(),Ge("div",LH,[(Se(!0),Ge(rt,null,vn(s.unavailableGoods,R=>(Se(),Tt(C,{key:R.id,class:"cart-item cart-item-disabled"},{default:F(()=>[h(m,{span:"24"},{default:F(()=>[h(T,{title:R.title,thumb:R.images[0],desc:R.description,price:R.price*R.count,"is-link":""},{tags:F(()=>[h(g,{type:"danger"},{default:F(()=>e[7]||(e[7]=[Ie("已下架")])),_:1})]),_:2},1032,["title","thumb","desc","price"])]),_:2},1024)]),_:2},1024))),128))])):Xs("",!0)])]),pe("footer",NH,[h(O,{price:s.totalPrice,"button-disabled":t.checkCounter===0,"button-text":"结算","button-color":t.checkCounter===0?"#ccc":"#ff9900",onSubmit:s.onClickCheckOut},{tip:F(()=>[Ie(" 已选择 "+Ye(t.checkCounter)+" 件商品 ",1)]),default:F(()=>[h(f,{"model-value":s.isAllChecked,"onUpdate:modelValue":s.toggleAllCheck},{default:F(()=>e[8]||(e[8]=[Ie("全选")])),_:1},8,["model-value","onUpdate:modelValue"])]),_:1},8,["price","button-disabled","button-color","onSubmit"])])])}const iS=Nt(xH,[["render",MH]]),FH={name:"GoodDetail",data(){return{value:3,items:JSON.parse(this.$route.query.items||"[]"),images:[],isFavorite:!1}},async created(){await this.checkFavorite()},computed:{images(){return this.items.images},cartCounter(){return this.$store.state.cartCounter},goods(){return this.$route.query}},mounted(){this.refreshSwipe()},methods:{refreshSwipe(){qe(()=>{const t=this.$refs.swipe;t&&t.update&&t.update()})},goBack(){this.$router.go(-1)},addGoodsToCart(){this.items.isInCart?(this.$store.commit("addGoodsToCart",this.items.id),ar("添加购物车成功")):(this.$store.commit("addGoodsToCart",this.items),ar("添加购物车成功"))},updatedNavImg(){this.$store.state.cartCounter++,this.$store.state.cartCounter--},GoToCart(){this.$router.push({path:"/cart"})},async toggleFavorite(){var n,r;const t=(r=(n=this.$store.state.auth)==null?void 0:n.user)==null?void 0:r.uid;if(!t){nt("请先登录");return}const e=mt(Ke,`users/${t}/favorites`,this.items.id);try{if(this.isFavorite)await dc(e),this.isFavorite=!1,nt("已取消收藏");else{const i={productId:this.items.id,title:this.items.title,description:this.items.description,price:this.items.price,images:this.items.images,productDetailImages:this.items.productDetailImages,createdAt:new Date};await io(e,i),this.isFavorite=!0,nt("收藏成功")}}catch(i){console.error("收藏操作失败：",i)}},async checkFavorite(){var r,i;const t=(i=(r=this.$store.state.auth)==null?void 0:r.user)==null?void 0:i.uid;if(!t)return;const e=mt(Ke,`users/${t}/favorites`,this.items.id);(await ts(e)).exists()&&(this.isFavorite=!0)}}},BH={class:"goods-photo-row"},UH={style:{"font-weight":"bold","font-size":"24px",color:"whitesmoke"}},$H={style:{color:"whitesmoke"}},zH={style:{"font-weight":"bold","font-size":"18px"}},jH={style:{color:"#888","font-size":"14px"}},HH={style:{"margin-top":"8px"}},qH={style:{"margin-left":"8px"}},GH=["src"],WH={class:"gd-footer"};function KH(t,e,n,r,i,s){const o=B("van-nav-bar"),a=B("van-image"),l=B("van-swipe-item"),c=B("van-swipe"),d=B("van-row"),f=B("van-tag"),m=B("van-cell"),g=B("van-rate"),_=B("van-divider"),T=B("van-action-bar-icon"),b=B("van-action-bar-button"),C=B("van-action-bar");return Se(),Ge("div",null,[h(o,{title:"商品详情","left-text":"返回","left-arrow":"",onClickLeft:s.goBack,class:"custom-title"},null,8,["onClickLeft"]),pe("div",BH,[h(d,null,{default:F(()=>[h(c,{ref:"swipe",autoplay:3e3,class:""},{default:F(()=>[(Se(!0),Ge(rt,null,vn(s.images,y=>(Se(),Tt(l,{key:y,class:"detail-images"},{default:F(()=>[h(a,{src:y,class:"product-image",fit:"cover",width:"100%",height:"100%"},null,8,["src"])]),_:2},1024))),128))]),_:1},512)]),_:1}),h(m,{size:"large",style:{"background-color":"red"}},{title:F(()=>[e[1]||(e[1]=pe("span",{style:{"font-weight":"bold","font-size":"16px",color:"whitesmoke"}},"¥ ",-1)),pe("span",UH,Ye(i.items.price),1)]),value:F(()=>[pe("span",$H,"已售 "+Ye(i.items.sold||0),1)]),label:F(()=>[(Se(!0),Ge(rt,null,vn(i.items.coupons,y=>(Se(),Tt(f,{key:y.id,plain:"",type:"danger",size:"medium",style:{"margin-right":"6px","font-weight":"bold"}},{default:F(()=>[Ie(Ye(y.name),1)]),_:2},1024))),128))]),_:1}),h(m,{style:{margin:"10px 10px"},border:!1},{title:F(()=>[pe("span",zH,Ye(i.items.title),1)]),label:F(()=>[pe("span",jH,Ye(i.items.description),1),pe("div",HH,[h(g,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=y=>i.value=y),size:15,color:"#ffd21e","void-icon":"star","void-color":"#eee"},null,8,["modelValue"]),pe("span",qH,Ye(i.value)+".0",1)])]),_:1}),h(m,{icon:"logistics",border:!1,value:"修改地址","is-link":""},{title:F(()=>e[2]||(e[2]=[pe("span",{style:{"font-weight":"bold","font-size":"14px","margin-left":"6px",color:"green"}},"48小时内发货",-1)])),label:F(()=>e[3]||(e[3]=[pe("span",{style:{color:"#888","font-size":"14px","margin-left":"6px"}},"配送方式：免运费",-1)])),_:1}),h(m,{icon:"like-o",border:!1},{title:F(()=>e[4]||(e[4]=[pe("span",{style:{"font-size":"14px","margin-left":"6px"}},"100%正品保证｜假一赔四｜7天无理由退换货",-1)])),_:1}),h(_,null,{default:F(()=>e[5]||(e[5]=[Ie("商品详情")])),_:1}),h(d,{class:"detail-images"},{default:F(()=>[(Se(!0),Ge(rt,null,vn(i.items.productDetailImages,(y,A)=>(Se(),Ge("img",{key:A,src:y,class:"detail-image"},null,8,GH))),128))]),_:1}),h(_,{class:"footer"},{default:F(()=>e[6]||(e[6]=[Ie("没有更多了")])),_:1}),pe("footer",WH,[h(C,null,{default:F(()=>[h(T,{icon:"service-o",text:"客服",color:"#ee0a24"}),h(T,{icon:"cart-o",badge:s.cartCounter,onClick:s.GoToCart},{default:F(()=>e[7]||(e[7]=[Ie("购物车 ")])),_:1},8,["badge","onClick"]),h(T,{icon:i.isFavorite?"star":"star-o",text:i.isFavorite?"已收藏":"收藏",color:"#ff5000",onClick:s.toggleFavorite},null,8,["icon","text","onClick"]),h(b,{type:"warning",onClick:s.addGoodsToCart,text:"加入购物车"},null,8,["onClick"]),h(b,{type:"danger",text:"立即购买"})]),_:1})])])])}const YH=Nt(FH,[["render",KH]]),QH={name:"profile",components:{Login:pc},data(){return{avatarLoading:!0,defaultAvatar:"https://via.placeholder.com/80?text=未登录",showLogin:!1}},computed:{...Oi("auth",["username","isLogin"]),userAvatar(){return this.isLogin&&this.$store.state.auth.user.photoURL?this.$store.state.auth.user.photoURL:this.defaultAvatar},userRole(){const t=this.$store.state.auth;return console.log("authState:",t),t&&t.role?t.role:"user"}},methods:{onAvatarLoad(){this.avatarLoading=!1},checkLogin(){this.isLogin?console.log("已登录，点击无效"):this.showLogin=!0},handleNotification(){this.isLogin?this.$router.push({path:"Notification"}):this.showLogin=!0},handleOrder(){this.isLogin?this.$router.push({path:"/OrderList"}):qo("请先登录")},handleFavorite(){this.isLogin?this.$router.push({path:"/Like"}):qo("请先登录")},handleAddress(){this.isLogin?this.$router.push({path:"/Address"}):qo("请先登录")},handleSetting(){this.isLogin?this.$router.push({path:"/Settings"}):qo("请先登录")},handleLoginSuccess(t){this.showLogin=!1,console.log("头像 URL:",this.userAvatar),ar("登录成功")},goEditInfo(){this.isLogin?this.$router.push({path:"/EditInfo"}):(this.showDialog=!0,qo("请先登录"))},handleAdminUploadGoods(){this.$router.push({path:"/AdminUploadGoods"})},handleAdminEditGoods(){this.$router.push({path:"/AdminEditGoods"})},handleAdminCoupon(){this.$router.push({path:"/AdminCoupon"})},handleAbout(){er({title:"欢迎来到【RIIZE-B】！",message:`
      <p>我们是一个专注于RIIZE周边产品的购物平台，为所有喜爱RIIZE的粉丝提供最全面、最独特的商品。<br>无论您是新加入的粉丝还是多年忠实的支持者，这里都是您表达热爱和收藏心仪周边的最佳选择。</p>
    `,allowHtml:!0})},handleContact(){er({title:"联系我们",message:`
      <p><strong style="font-size: 16px;">官方 X: </strong><br>https://x.com/riize_official</p>
      <p><strong style="font-size: 16px;">官方 Instragram: </strong><br>https://www.instagram.com/riize_official/</p>
    `,allowHtml:!0,messageAlign:"left"})},handleHelp(){er({title:"联系我们寻求帮助",message:`
      <p><strong style="font-size: 16px;">email </strong><br>yyfbts@qq.com</p>
    `,allowHtml:!0,messageAlign:"left"})}}},XH={class:"profile"},JH={class:"username"},ZH={class:"profile-content"},e8={class:"section"},t8={key:0};function n8(t,e,n,r,i,s){const o=B("van-icon"),a=B("van-nav-bar"),l=B("van-image"),c=B("van-button"),d=B("Login"),f=B("van-popup"),m=B("van-col"),g=B("van-row"),_=B("van-cell"),T=B("van-cell-group"),b=B("van-divider");return Se(),Ge("div",XH,[h(a,{title:"个人中心"},{right:F(()=>[h(o,{name:"chat-o",badge:"9",onClick:s.handleNotification,style:{"font-size":"22px"}},null,8,["onClick"])]),_:1}),pe("div",{class:"profile-header",onClick:e[0]||(e[0]=(...C)=>s.checkLogin&&s.checkLogin(...C))},[h(l,{round:"",width:"80px",height:"80px",src:s.userAvatar},null,8,["src"]),pe("p",JH,Ye(t.username),1),h(c,{onClick:s.goEditInfo,size:"small",round:"",class:"edit-button"},{default:F(()=>e[2]||(e[2]=[Ie(" 修改个人信息 ")])),_:1},8,["onClick"])]),h(f,{show:i.showLogin,"onUpdate:show":e[1]||(e[1]=C=>i.showLogin=C),style:{"border-radius":"24px",width:"350px",height:"550px"},closeable:"","close-icon":"cross","close-icon-position":"top-right"},{default:F(()=>[h(d,{onLoginSuccess:s.handleLoginSuccess},null,8,["onLoginSuccess"])]),_:1},8,["show"]),pe("div",ZH,[pe("div",e8,[h(g,{class:"profile-row"},{default:F(()=>[h(m,{span:"8",onClick:s.handleOrder},{default:F(()=>[h(o,{name:"orders-o"}),e[3]||(e[3]=pe("p",null,"我的订单",-1))]),_:1},8,["onClick"]),h(m,{span:"8",onClick:s.handleFavorite},{default:F(()=>[h(o,{name:"star-o"}),e[4]||(e[4]=pe("p",null,"收藏夹",-1))]),_:1},8,["onClick"]),h(m,{span:"8",onClick:s.handleAddress},{default:F(()=>[h(o,{name:"location-o"}),e[5]||(e[5]=pe("p",null,"我的地址",-1))]),_:1},8,["onClick"])]),_:1})]),h(T,{inset:"",style:{"box-shadow":"0 2px 8px rgba(0, 0, 0, 0.1)",padding:"10px"}},{default:F(()=>[h(_,{title:"设置","is-link":"",onClick:s.handleSetting},{icon:F(()=>[h(o,{name:"setting-o",class:"cell-icon"})]),_:1},8,["onClick"]),h(_,{title:"关于","is-link":"",onClick:s.handleAbout},{icon:F(()=>[h(o,{name:"info-o",class:"cell-icon"})]),_:1},8,["onClick"]),h(_,{title:"联系我们","is-link":"",onClick:s.handleContact},{icon:F(()=>[h(o,{name:"phone-o",class:"cell-icon"})]),_:1},8,["onClick"]),h(_,{title:"帮助","is-link":"",onClick:s.handleHelp},{icon:F(()=>[h(o,{name:"question-o",class:"cell-icon"})]),_:1},8,["onClick"])]),_:1}),s.userRole==="admin"?(Se(),Ge("div",t8,[h(b,{style:{color:"white",borderColor:"white",padding:"0 16px",fontWeight:"bold"}},{default:F(()=>e[6]||(e[6]=[Ie(" 管理员功能 ")])),_:1}),h(T,{inset:"",style:{"box-shadow":"0 2px 8px rgba(0, 0, 0, 0.1)",background:"#fbffe3",padding:"10px","margin-top":"20px"}},{default:F(()=>[h(_,{title:"上传商品","is-link":"",onClick:s.handleAdminUploadGoods,style:{background:"#fbffe3"}},{icon:F(()=>[h(o,{name:"gift-o",class:"cell-icon"})]),_:1},8,["onClick"]),h(_,{title:"管理商品","is-link":"",onClick:s.handleAdminEditGoods,style:{background:"#fbffe3"}},{icon:F(()=>[h(o,{name:"edit",class:"cell-icon"})]),_:1},8,["onClick"]),h(_,{title:"优惠券设置","is-link":"",onClick:s.handleAdminCoupon,style:{background:"#fbffe3"}},{icon:F(()=>[h(o,{name:"coupon-o",class:"cell-icon"})]),_:1},8,["onClick"])]),_:1})])):Xs("",!0)])])}const sS=Nt(QH,[["render",n8],["__scopeId","data-v-207b16f1"]]),r8={name:"mainpage",computed:{...Oi("auth",["uid","isLogin"]),cartCounter(){return this.isLogin?(console.log("购物车数量："+this.$store.state.cartCounter),this.$store.state.cartCounter):0}},components:{Cart:iS,Profile:sS},data(){return{active:0,showNavbar:!0}},watch:{$route(t){this.showNavbar=t.meta.showNavbar!==!1,t.meta.active!==void 0&&(this.active=t.meta.active)}},methods:{cartImgOn(){console.log(this.$store.state.cartCounter)}},mounted(){this.showNavbar=this.$route.meta.showNavbar!==!1,this.$route.meta.active!==void 0&&(this.active=this.$route.meta.active)}},i8={class:"content"};function s8(t,e,n,r,i,s){const o=B("van-tabbar-item"),a=B("van-tabbar"),l=B("router-view");return Se(),Ge("div",null,[i.showNavbar?(Se(),Tt(a,{key:0,modelValue:i.active,"onUpdate:modelValue":e[0]||(e[0]=c=>i.active=c)},{default:F(()=>[h(o,{icon:this.active==0?"wap-home":"wap-home-o",to:"/home"},{default:F(()=>e[1]||(e[1]=[Ie("首页")])),_:1},8,["icon"]),h(o,{icon:this.active==1?"shopping-cart":"shopping-cart-o",badge:s.cartCounter,to:"/cart"},{default:F(()=>e[2]||(e[2]=[Ie(" 购物车")])),_:1},8,["icon","badge"]),h(o,{icon:this.active==2?"user":"user-o",to:"/profile"},{default:F(()=>e[3]||(e[3]=[Ie("我的")])),_:1},8,["icon"])]),_:1},8,["modelValue"])):Xs("",!0),pe("div",i8,[h(l)])])}const o8=Nt(r8,[["render",s8]]),a8={name:"home-header",props:{products:{type:Array,required:!0}},data(){return{goodsType:"ALL"}},methods:{onTabChange(t){this.goodsType=t.name,this.$emit("filterChanged",t)}}},l8={class:"home-header"},c8={class:"tap-menu",sticky:""};function u8(t,e,n,r,i,s){const o=B("van-tab"),a=B("van-tabs");return Se(),Ge("header",l8,[pe("div",c8,[h(a,{modelValue:i.goodsType,"onUpdate:modelValue":e[0]||(e[0]=l=>i.goodsType=l),active:"{{ active }}",onChange:s.onTabChange},{default:F(()=>[h(o,{title:"ALL",name:"ALL"}),h(o,{title:"MUSIC",name:"MUSIC"}),h(o,{title:"PHOTO",name:"PHOTO"}),h(o,{title:"CONCERT",name:"CONCERT"}),h(o,{title:"LIVING",name:"LIVING"}),h(o,{title:"STATIONARY",name:"STATIONARY"}),h(o,{title:"FASHION",name:"FASHION"})]),_:1},8,["modelValue","onChange"])])])}const d8=Nt(a8,[["render",u8]]),h8="/ShoppingDemo/assets/IMG_1012-oPt1lDGe.png",f8="/ShoppingDemo/assets/IMG_1013-MjAwqnFM.png",m8="/ShoppingDemo/assets/IMG_1014-D-C7h_7v.png",g8="/ShoppingDemo/assets/IMG_1015-CxMi7M3w.png",p8="/ShoppingDemo/assets/IMG_1016-DuLJ_Gda.png",v8={name:"home",data(){return{value:"",images:[h8,f8,m8,g8,p8],searchQuery:"",showPopupGoodDetail:!1,spinner:!1,products:[],showLogin:!1,filteredProducts:[],currentFilter:"ALL"}},computed:{...Oi("auth",["username","isLogin"]),cartCounter(){return this.$store.state.cartCounter}},async created(){await this.fetchProducts(),this.applyFilters()},components:{HomeColumn:d8,Login:pc},methods:{onFilterChanged(t){this.currentFilter=t,this.applyFilters()},applyFilters(){this.filteredProducts=this.products.filter(t=>{const e=this.currentFilter==="ALL"||t.category===this.currentFilter,n=!this.searchQuery||t.title.toLowerCase().includes(this.searchQuery.toLowerCase())||t.description.toLowerCase().includes(this.searchQuery.toLowerCase());return e&&n})},async fetchProducts(){try{const e=(await vr(Mn(Ke,"products"))).docs.map(n=>({id:n.id,...n.data()}));this.products=e.filter(n=>n.isAvailable).map(n=>({...n,images:n.images&&n.images.length?n.images:["https://via.placeholder.com/150"]})),this.spinner=!1}catch(t){console.error("获取商品失败：",t)}},onSearch(t){this.searchQuery=t,this.applyFilters()},onCancel(){this.searchQuery="",this.applyFilters()},GoDetail(t){this.$router.push({path:"/GoodDetail",query:{items:JSON.stringify(t)}})},onAddToCart(t){if(this.isLogin===!1){this.showLogin=!0;return}else t.isInCart?(this.$store.commit("addGoods",t.id),ar("添加购物车成功")):(this.$store.commit("addGoodsToCart",t),ar("添加购物车成功"))},handleLoginSuccess(t){this.showLogin=!1}},mounted(){this.spinner=!0}},_8={class:"home"},y8={class:"home-search"},b8=["src"],w8={style:{display:"flex","justify-content":"flex-end","align-items":"center"}};function T8(t,e,n,r,i,s){const o=B("van-nav-bar"),a=B("van-search"),l=B("van-swipe-item"),c=B("van-swipe"),d=B("HomeColumn"),f=B("van-row"),m=B("van-loading"),g=B("van-tag"),_=B("van-icon"),T=B("van-card"),b=B("Login"),C=B("van-popup");return Se(),Ge("div",_8,[h(o,{title:"RIIZE",class:"home-title"}),pe("div",y8,[h(a,{modelValue:i.searchQuery,"onUpdate:modelValue":e[0]||(e[0]=y=>i.searchQuery=y),placeholder:"请输入搜索关键词","show-action":"",shape:"round",onSearch:s.onSearch,onCancel:s.onCancel},null,8,["modelValue","onSearch","onCancel"]),h(c,{autoplay:3e3,"lazy-render":""},{default:F(()=>[(Se(!0),Ge(rt,null,vn(i.images,y=>(Se(),Tt(l,{key:y},{default:F(()=>[pe("img",{src:y,class:"swipe-image"},null,8,b8)]),_:2},1024))),128))]),_:1}),h(f,null,{default:F(()=>[h(d,{products:i.products,onFilterChanged:s.onFilterChanged},null,8,["products","onFilterChanged"])]),_:1}),i.spinner?(Se(),Tt(m,{key:0,type:"spinner",color:"#1890ff",style:{"text-align":"center",display:"flex","justify-content":"center","align-items":"center","margin-top":"50px"},vertical:""},{default:F(()=>e[2]||(e[2]=[Ie("加载中...")])),_:1})):Xs("",!0),(Se(!0),Ge(rt,null,vn(i.filteredProducts,(y,A)=>(Se(),Tt(T,{class:"card",key:A,title:y.title,onClick:D=>s.GoDetail(y),desc:y.description,price:y.price,tag:y.tag,thumb:y.images[0]},{tags:F(()=>[(Se(!0),Ge(rt,null,vn(y.coupons,D=>(Se(),Tt(g,{key:D,plain:"",type:"danger"},{default:F(()=>[Ie(Ye(D.name),1)]),_:2},1024))),128))]),footer:F(()=>[pe("div",w8,[h(_,{name:"cart-o",color:"#E65100",size:"20px",style:{border:"none",background:"transparent",padding:"5px",cursor:"pointer"},onClick:tc(D=>s.onAddToCart(y),["stop"])},null,8,["onClick"])])]),_:2},1032,["title","onClick","desc","price","tag","thumb"]))),128)),h(C,{modelValue:i.showLogin,"onUpdate:modelValue":e[1]||(e[1]=y=>i.showLogin=y),style:{"border-radius":"24px"},closeable:"","close-icon":"cross","close-icon-position":"top-right"},{default:F(()=>[h(b,{onLoginSuccess:s.handleLoginSuccess},null,8,["onLoginSuccess"])]),_:1},8,["modelValue"])])])}const E8=Nt(v8,[["render",T8]]),I8={name:"checkout",components:{Login:pc},data(){return{show:!1,actions:[{name:"顺丰普快"},{name:"顺丰特快"},{name:"次日达",subname:"购物专供"}],coupons:[],showList:!1,chosenCoupon:null,chosenCouponIndex:-1,showNavbar:!0,needPostage:!0,postage:12,postageFinal:0,selectedValue:"",showLogin:!1,showPay:!1,selectedPay:"",isPlacingOrder:!1,isPaying:!1,availableCoupons:[],disabledCoupons:[]}},computed:{...Oi("auth",["username","isLogin","uid"]),cartGoods(){return this.$store.state.checkGoods},address(){return this.$store.state.selectedAddress},amount(){let t=this.$store.state.checkGoods,e=0;return t.forEach(n=>{e+=n.price*n.count}),e*100},postageAmount(){return this.amount>=4900?0:this.postage*100},shippingTip(){return this.amount>=4900?"实际消费满49元免邮费，已包邮":`实际消费满49元免邮费，仍需消费 ¥${((4900-this.amount)/100).toFixed(2)}`},postageDisplay(){return`¥ ${(this.postageAmount/100).toFixed(2)}`}},methods:{pay(){let t=0;this.chosenCouponIndex!==-1&&(t=this.availableCoupons[this.chosenCouponIndex].valueDesc);let e=this.amount-t*100;return e+=this.postageAmount,Math.max(e,0)},getChosenCouponIndex(){if(!this.chosenCoupon||!this.chosenCoupon.id)return-1;const t=this.availableCoupons.findIndex(e=>e.id===this.chosenCoupon.id);this.chosenCouponIndex=t},formatTimestamp(t){const e=new Date(t),n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${n}.${r}.${i}`},getAvailableCoupons(){return this.cartGoods.map(t=>{const e=[],n=[];return this.coupons.forEach(r=>{r.startAt=Number(r.startAt),r.endAt=Number(r.endAt),t.price*t.count>=r.originCondition?e.push(r):n.push({...r,reason:`需消费满 ${r.originCondition} 元`})}),{...t,availableCoupons:e,disabledCoupons:n}})},openCouponPopup(){const t=new Map;this.cartGoods.forEach(n=>{n.coupons&&Array.isArray(n.coupons)&&n.coupons.forEach(r=>{t.has(r.id)||t.set(r.id,r)})});const e=Array.from(t.values());this.availableCoupons=e.filter(n=>Date.now()>=n.startAt&&Date.now()<=n.endAt&&this.amount/100>=n.originCondition),this.disabledCoupons=e.filter(n=>Date.now()>n.endAt||Date.now()<n.startAt||this.amount/100<n.originCondition),this.availableCoupons.forEach(n=>{n.startAt=Number(n.startAt),n.endAt=Number(n.endAt)}),this.disabledCoupons.forEach(n=>{n.startAt=Number(n.startAt),n.endAt=Number(n.endAt)}),console.log(this.availableCoupons),console.log(this.disabledCoupons),this.showList=!0},onChange(t){t===-1?this.chosenCouponIndex=-1:(this.getChosenCouponIndex(),this.chosenCouponIndex=t,console.log(this.chosenCoupon)),this.showList=!1},onExchange(t){const e={id:`new-${Date.now()}`,name:`兑换券-${t}`,originCondition:200,valueDesc:"20",unitDesc:"元",startAt:Date.now(),endAt:Date.now()+6048e5};this.coupons.push(e),this.openCouponPopup()},selectPay(t){this.selectedPay=t,this.showPay=!1},onClickLeft(){_o({title:"确定返回吗？",message:"返回后，当前选择将不被保存。",confirmButtonText:"返回",cancelButtonText:"再想想"}).then(()=>{this.$router.go(-1)}).catch(()=>{})},async onClickpay(){var t;if(this.address===null){nt("请选择地址");return}else if(this.selectedValue===""){nt("请选择配送方式");return}else if(this.selectedPay===""){nt("请选择支付方式");return}else if(!this.isLogin){nt("请先登录"),this.showLogin=!0;return}if(this.isPaying=!0,!this.isPlacingOrder){this.isPlacingOrder=!0;try{const e={createdAt:new Date,items:this.cartGoods,totalPrice:(this.amount/100).toFixed(2),discount:((t=this.coupons[this.chosenCoupon])==null?void 0:t.value)/100||0,shippingFee:this.postageAmount/100,finalAmount:(this.pay/100).toFixed(2),address:this.address,paymentMethod:this.selectedPay,shippingMethod:this.selectedValue},n=Mn(Ke,`users/${this.uid}/orders`),r=mt(n);await io(r,e);for(const s of this.cartGoods){const o=mt(Ke,"products",s.id);await xn(o,{quantity:s.quantity-s.count,sold:(s.sold||0)+s.count})}const i=r.id;nt("订单提交成功"),this.$router.push({path:`/OrderDetail/${i}`,query:{orderData:JSON.stringify(e)}})}catch(e){console.error("订单提交失败：",e),nt("订单提交失败，请稍后重试")}finally{this.isPlacingOrder=!1,this.isPaying=!1}}},GoToAddress(){this.$router.push({path:"/address"})},onSelect(t){this.selectedValue=t.name,this.show=!1}}},C8={class:"checkout"},S8={class:"address-container"},A8={style:{"font-weight":"bold"}},k8={style:{"font-weight":"bold"}},R8={style:{"font-weight":"bold"}},P8={class:"co-footer"},x8={style:{height:"100%","overflow-y":"auto",margin:"50px 20px"}},D8={class:"pay-line"},O8={class:"pay-line"},V8={class:"pay-line"};function L8(t,e,n,r,i,s){const o=B("van-nav-bar"),a=B("van-loading"),l=B("van-overlay"),c=B("van-divider"),d=B("van-cell"),f=B("van-cell-group"),m=B("van-tag"),g=B("van-card"),_=B("van-card-group"),T=B("van-action-sheet"),b=B("van-coupon-list"),C=B("van-popup"),y=B("van-submit-bar"),A=B("Login"),D=B("van-icon"),x=B("van-checkbox");return Se(),Ge("div",C8,[h(o,{title:"确认订单","left-text":"返回","left-arrow":"",class:"custom-title",onClickLeft:s.onClickLeft},null,8,["onClickLeft"]),h(l,{show:i.isPaying,"onUpdate:show":e[0]||(e[0]=O=>i.isPaying=O),"z-index":"2000"},{default:F(()=>[h(a,{size:"30px",type:"spinner",vertical:""},{default:F(()=>e[10]||(e[10]=[Ie("支付中...")])),_:1})]),_:1},8,["show"]),h(c),pe("div",S8,[h(f,{inset:"",class:"address-cell"},{default:F(()=>[h(d,{icon:"location-o",value:"所有地址","is-link":"",onClick:s.GoToAddress},{title:F(()=>[pe("span",A8,Ye(s.address?s.address.name+" "+s.address.tel:"请选择地址"),1)]),label:F(()=>[pe("span",k8,Ye(s.address?s.address.address:""),1)]),_:1},8,["onClick"])]),_:1}),h(_,null,{default:F(()=>[(Se(!0),Ge(rt,null,vn(s.cartGoods,O=>(Se(),Tt(g,{key:O.id,title:O.title,thumb:O.images[0],desc:O.description,price:O.price*O.count,num:O.count,class:"card"},{tags:F(()=>[h(m,{type:"default"},{default:F(()=>[Ie("单价：¥"+Ye(O.price),1)]),_:2},1024)]),_:2},1032,["title","thumb","desc","price","num"]))),128))]),_:1}),h(f,{inset:""},{default:F(()=>[h(d,{title:"商品总价"},{value:F(()=>[pe("span",R8,"¥ "+Ye(s.amount/100),1)]),_:1}),h(d,{title:"配送服务","is-link":"",value:i.selectedValue||"请选择",onClick:e[1]||(e[1]=O=>i.show=!0)},null,8,["value"]),h(T,{show:i.show,"onUpdate:show":e[2]||(e[2]=O=>i.show=O),actions:i.actions,"cancel-text":"取消",description:"配送方式","close-on-click-action":"",onSelect:s.onSelect},null,8,["show","actions","onSelect"]),h(d,{title:"运费（消费满49元包邮*）",value:s.postageDisplay},null,8,["value"]),h(d,{title:"优惠券","is-link":"",onClick:s.openCouponPopup},{value:F(()=>[Ie(Ye(i.chosenCouponIndex!==-1?`已选择：${i.availableCoupons[i.chosenCouponIndex].name}`:"未选择"),1)]),_:1},8,["onClick"])]),_:1}),h(f,{inset:"",style:{margin:"15px",padding:"10px"}},{default:F(()=>[h(d,{title:"支付方式","is-link":"",value:i.selectedPay||"请选择支付方式",onClick:e[3]||(e[3]=O=>i.showPay=!0)},null,8,["value"])]),_:1}),h(C,{show:i.showList,"onUpdate:show":e[4]||(e[4]=O=>i.showList=O),round:"",position:"bottom",style:{height:"90%","padding-top":"4px"}},{default:F(()=>[h(b,{coupons:i.availableCoupons.map(O=>({...O,originCondition:O.originCondition*100,startAt:O.startAt,endAt:O.endAt})),"disabled-coupons":i.disabledCoupons.map(O=>({...O,originCondition:O.originCondition*100,startAt:O.startAt,endAt:O.endAt})),"chosen-coupon":i.chosenCouponIndex,onChange:s.onChange,onExchange:s.onExchange},null,8,["coupons","disabled-coupons","chosen-coupon","onChange","onExchange"])]),_:1},8,["show"])]),pe("footer",P8,[h(y,{price:s.pay(),"button-text":"去支付",onSubmit:s.onClickpay,"tip-icon":"info-o"},{tip:F(()=>[Ie(Ye(s.shippingTip),1)]),_:1},8,["price","onSubmit"])]),h(C,{show:i.showLogin,"onUpdate:show":e[5]||(e[5]=O=>i.showLogin=O),style:{"border-radius":"24px"},closeable:"","close-icon":"cross","close-icon-position":"top-right"},{default:F(()=>[h(A,{onLoginSuccess:t.handleLoginSuccess},null,8,["onLoginSuccess"])]),_:1},8,["show"]),h(C,{show:i.showPay,"onUpdate:show":e[9]||(e[9]=O=>i.showPay=O),position:"bottom",style:{height:"50%"},closeable:"",onClickOverlay:t.onClickOverlay,onClickCloseIcon:t.onClickCloseIcon},{default:F(()=>[pe("div",x8,[h(f,{inset:""},{default:F(()=>[h(d,null,{title:F(()=>[pe("div",D8,[h(D,{name:"alipay",size:"24px"}),e[11]||(e[11]=pe("span",{style:{"font-weight":"bold"}},"支付宝",-1))])]),"right-icon":F(()=>[h(x,{checked:i.selectedPay==="支付宝",onClick:e[6]||(e[6]=O=>s.selectPay("支付宝"))},null,8,["checked"])]),_:1}),h(d,null,{title:F(()=>[pe("div",O8,[h(D,{name:"wechat-pay",size:"24px"}),e[12]||(e[12]=pe("span",{style:{"font-weight":"bold"}},"微信支付",-1))])]),"right-icon":F(()=>[h(x,{checked:i.selectedPay==="微信支付",onClick:e[7]||(e[7]=O=>s.selectPay("微信支付"))},null,8,["checked"])]),_:1}),h(d,null,{title:F(()=>[pe("div",V8,[h(D,{name:"card",size:"24px"}),e[13]||(e[13]=pe("span",{style:{"font-weight":"bold"}},"银行卡",-1))])]),"right-icon":F(()=>[h(x,{checked:i.selectedPay==="银行卡",onClick:e[8]||(e[8]=O=>s.selectPay("银行卡"))},null,8,["checked"])]),_:1})]),_:1})])]),_:1},8,["show","onClickOverlay","onClickCloseIcon"])])}const N8=Nt(I8,[["render",L8]]),M8={name:"Address",data(){return{showEdit:!1,showAdd:!1,isLoading:!1,isLoadingAdd:!1,address:{id:null,name:"",tel:"",province:"",city:"",county:"",address:"",isDefault:!1},addressList:[],areaList:{province_list:{11e4:"北京市",12e4:"天津市",44e4:"广东省",31e4:"上海市"},city_list:{110100:"北京市",120100:"天津市",440100:"广州市",310100:"上海市"},county_list:{110101:"东城区",110102:"西城区",110105:"朝阳区",110106:"丰台区",110107:"石景山区",110108:"海淀区",110109:"门头沟区",110111:"房山区",110112:"通州区",110113:"顺义区",110114:"昌平区",110115:"大兴区",110116:"怀柔区",110117:"平谷区",110118:"密云区",110119:"延庆区",440103:"荔湾区",440104:"越秀区",440105:"海珠区",440106:"天河区",440111:"白云区",440112:"黄埔区",440113:"番禺区",440114:"花都区",440115:"南沙区",440117:"从化区",440118:"增城区",310101:"黄浦区",310104:"徐汇区",310105:"长宁区",310106:"静安区",310107:"普陀区",310109:"虹口区",310110:"杨浦区",310112:"闵行区",310113:"宝山区",310114:"嘉定区",310115:"浦东新区",310116:"金山区",310117:"松江区",310118:"青浦区",310120:"奉贤区",310151:"崇明区"}},chosenAddressId:null}},setup(){const t=()=>showToast("Add"),e=()=>showToast("Edit"),n=iH(),r=rH();return{chosenAddressId:j(null),onAdd:t,onEdit:e,onSelect:o=>{console.log("选中的地址：",o),n.commit("setSelectedAddress",o),r.go(-1)}}},computed:{...Oi("auth",["username","uid"]),userId(){return this.uid}},methods:{async loadAddresses(){this.isLoading=!0;try{const t=Mn(Ke,"users",this.userId,"addresses"),e=await vr(t);this.addressList=e.docs.map(n=>({id:n.id,...n.data()})),this.isLoading=!1}catch(t){console.error("加载地址失败:",t)}},async onAdd(t){this.isLoadingAdd=!0;try{const e=Mn(Ke,"users",this.userId,"addresses");t.isDefault&&await this.clearDefaultAddress();const n=await bI(e,{...t,country:"中国",address:`${t.country} ${t.province} ${t.city} ${t.county} ${t.addressDetail}`});await xn(n,{id:n.id}),this.loadAddresses(),this.isLoadingAdd=!1,this.showAdd=!1}catch(e){console.error("新增地址失败:",e)}},async onSaveEdit(t){this.isLoadingAdd=!0;try{const e=mt(Ke,"users",this.userId,"addresses",t.id);t.isDefault&&await this.clearDefaultAddress(),await xn(e,t),this.loadAddresses(),this.isLoadingAdd=!1,this.showEdit=!1}catch(e){console.error("修改地址失败:",e)}},async onDelete(){try{if(await _o({title:"删除地址",message:"确定要删除此地址吗？",confirmButtonText:"删除",cancelButtonText:"再想想"})){this.isLoadingAdd=!0,console.log("删除地址:",this.address);const e=mt(Ke,"users",this.userId,"addresses",this.address.id);await dc(e),await this.loadAddresses(),this.showEdit=!1}}catch(t){console.error("删除地址失败:",t)}finally{this.isLoadingAdd=!1}},async clearDefaultAddress(){try{const t=Mn(Ke,"users",this.userId,"addresses");(await vr(t)).forEach(async n=>{n.data().isDefault&&await xn(n.ref,{isDefault:!1})})}catch(t){console.error("清除默认地址失败:",t)}},goBack(){this.$router.go(-1)},toAddAddressPage(){this.$router.push({path:"/Profile/AddAddressPage"})},onEdit(t){this.address={...t},this.showEdit=!0}},mounted(){this.loadAddresses()}},F8={class:"address"},B8={class:"address-list"};function U8(t,e,n,r,i,s){const o=B("van-nav-bar"),a=B("van-loading"),l=B("van-overlay"),c=B("van-empty"),d=B("van-address-list"),f=B("van-address-edit"),m=B("van-popup");return Se(),Ge("div",F8,[h(o,{title:"我的地址","left-text":"返回","left-arrow":"",onClickLeft:s.goBack,class:"custom-title"},null,8,["onClickLeft"]),h(l,{show:i.isLoading,"onUpdate:show":e[0]||(e[0]=g=>i.isLoading=g),"z-index":"2000"},{default:F(()=>[h(a,{size:"30px",type:"spinner",color:"#1989fa"})]),_:1},8,["show"]),pe("div",B8,[i.addressList.length===0?(Se(),Tt(c,{key:0,description:"暂无收货地址"})):Xs("",!0),h(d,{modelValue:r.chosenAddressId,"onUpdate:modelValue":e[1]||(e[1]=g=>r.chosenAddressId=g),list:i.addressList,switchable:!0,onEdit:s.onEdit,onAdd:e[2]||(e[2]=g=>this.showAdd=!0),onSelect:r.onSelect,"default-tag-text":"默认地址"},null,8,["modelValue","list","onEdit","onSelect"]),h(m,{show:i.showEdit,"onUpdate:show":e[4]||(e[4]=g=>i.showEdit=g),round:"",position:"bottom",style:{height:"80%","padding-top":"4px","background-color":"aliceblue"}},{default:F(()=>[h(o,{title:"修改地址",style:{"background-color":"aliceblue"}},{left:F(()=>[pe("span",{class:"button-text",onClick:e[3]||(e[3]=g=>this.showEdit=!1)},"取消")]),_:1}),h(f,{"area-list":i.areaList,"address-info":i.address,"show-set-default":"","show-delete":"",onSave:s.onSaveEdit,onCancel:t.onCancel,onDelete:s.onDelete,"area-columns-placeholder":["请选择省","请选择市","请选择区"]},null,8,["area-list","address-info","onSave","onCancel","onDelete"])]),_:1},8,["show"]),h(m,{show:i.showAdd,"onUpdate:show":e[7]||(e[7]=g=>i.showAdd=g),round:"",position:"bottom",style:{height:"80%","padding-top":"4px","background-color":"aliceblue"}},{default:F(()=>[h(l,{show:i.isLoadingAdd,"onUpdate:show":e[5]||(e[5]=g=>i.isLoadingAdd=g),"z-index":"2000"},{default:F(()=>[h(a,{size:"30px",type:"spinner",color:"#1989fa"})]),_:1},8,["show"]),h(o,{title:"新增地址",style:{"background-color":"aliceblue"}},{left:F(()=>[pe("span",{class:"button-text",onClick:e[6]||(e[6]=g=>this.showAdd=!1)},"取消")]),_:1}),h(f,{"area-list":i.areaList,"show-set-default":"",onSave:s.onAdd,onCancel:t.onCancel,"area-columns-placeholder":["请选择省","请选择市","请选择区"]},null,8,["area-list","onSave","onCancel"])]),_:1},8,["show"])])])}const $8=Nt(M8,[["render",U8]]),z8={data(){return{username:"",email:"",password:"",confirmPassword:"",usernameError:"",passwordError:"",confirmPasswordError:"",avatarFile:[],showPassword:!1,showPasswordCon:!1,isRegistering:!1}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},async validateUsername(t){return this.username=this.username.trim(),this.username?this.username.length<3||this.username.length>20?(this.usernameError=t?"用户名长度必须在3到20个字符之间":"",!1):/^[a-zA-Z0-9._]+$/.test(this.username)?(this.usernameError="",!0):(this.usernameError=t?"用户名只能包含字母、数字、下划线和点":"",!1):(this.usernameError=t?"用户名不能为空":"",!1)},validatePassword(t){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(this.password)?(this.passwordError="",!0):(this.passwordError=t?"密码至少包含8个字符，包括大小写字母和数字":"",!1)},validateConfirmPassword(t){return this.password!==this.confirmPassword?(this.confirmPasswordError=t?"两次输入的密码不一致":"",!1):(this.confirmPasswordError="",!0)},async register(){if(!(!await this.validateUsername(!0)||!this.validatePassword(!0)||!this.validateConfirmPassword(!0))){this.isRegistering=!0;try{const e=(await kx(qr,this.email,this.password)).user,n={contentType:this.avatarFile[0].type};let r=null;if(this.avatarFile.length>0){const s=this.avatarFile[0].file,o=fs(ms,`avatars/${e.uid}`),a={contentType:s.type};console.log("文件准备上传：",s);try{await ha(o,s,a),r=await fa(o),console.log("文件下载链接：",r),await Zf(e,{displayName:this.username,photoURL:r}),await io(mt(Ke,"users",e.uid),{uid:e.uid,username:this.username,email:this.email,photoURL:r,createdAt:new Date})}catch(l){console.error("文件上传失败：",l)}}await Zf(e,{displayName:this.username,photoURL:r}),await io(mt(Ke,"users",e.uid),{uid:e.uid,username:this.username,email:this.email,photoURL:r,createdAt:new Date}),this.$store.commit("auth/setUser",{uid:e.uid,displayName:this.username,email:this.email,photoURL:r});const i=await vT(qr,this.email,this.password);console.log("登录成功:",i.user),ar("注册成功！已自动登录。"),this.$router.go(-1)}catch(t){t.code==="auth/email-already-in-use"?er({message:"该邮箱已被注册，请使用其他邮箱。"}):(console.error("注册失败:",t),er({message:"注册失败，请稍后重试。"}))}finally{this.isRegistering=!1}}},beforeRead(t){return console.log("文件内容：",t),["image/jpeg","image/png","image/gif"].includes(t.type)?t.size>2*1024*1024?(this.$toast("文件大小不能超过 2MB"),!1):!0:(this.$toast("只支持 JPG、PNG 或 GIF 格式的图片"),!1)},goBack(){this.$router.go(-1)}}},j8={class:"register-page"},H8={class:"avatar-uploader"},q8={class:"button-container"};function G8(t,e,n,r,i,s){const o=B("van-nav-bar"),a=B("van-loading"),l=B("van-overlay"),c=B("van-col"),d=B("van-uploader"),f=B("van-row"),m=B("van-field"),g=B("van-icon"),_=B("van-button"),T=B("van-form");return Se(),Ge("div",null,[h(o,{"left-arrow":"",onClickLeft:s.goBack,border:!1},null,8,["onClickLeft"]),h(l,{show:i.isRegistering,"onUpdate:show":e[0]||(e[0]=b=>i.isRegistering=b),"z-index":"2000"},{default:F(()=>[h(a,{size:"30px",type:"spinner",vertical:""},{default:F(()=>e[13]||(e[13]=[Ie("注册中...")])),_:1})]),_:1},8,["show"]),pe("div",j8,[h(o,{title:"注册",border:!1,style:{"margin-bottom":"20px"}}),h(T,{onSubmit:s.register},{default:F(()=>[pe("div",H8,[h(f,{justify:"center"},{default:F(()=>[h(c,{span:"6"},{default:F(()=>e[14]||(e[14]=[pe("span",{class:"required-star"},"*",-1),pe("span",{class:"required-text"},"上传头像",-1)])),_:1}),h(c,{span:"18"},{default:F(()=>[h(d,{modelValue:i.avatarFile,"onUpdate:modelValue":e[1]||(e[1]=b=>i.avatarFile=b),"max-count":"1","preview-size":"80px",onOversize:t.handleOversize,"before-read":s.beforeRead},null,8,["modelValue","onOversize","before-read"])]),_:1})]),_:1})]),h(m,{modelValue:i.username,"onUpdate:modelValue":e[2]||(e[2]=b=>i.username=b),name:"username",label:"用户名",placeholder:"请输入用户名",required:"",class:"form-field","error-message":i.usernameError,onBlur:e[3]||(e[3]=()=>s.validateUsername(!0)),onInput:e[4]||(e[4]=()=>s.validateUsername(!1))},null,8,["modelValue","error-message"]),h(m,{modelValue:i.email,"onUpdate:modelValue":e[5]||(e[5]=b=>i.email=b),name:"email",label:"邮箱",placeholder:"请输入邮箱",required:"",class:"form-field","error-message":t.emailError},null,8,["modelValue","error-message"]),h(m,{modelValue:i.password,"onUpdate:modelValue":e[6]||(e[6]=b=>i.password=b),name:"password",label:"密码",placeholder:"请输入密码",type:i.showPassword?"text":"password",required:"",class:"form-field","error-message":i.passwordError,onBlur:e[7]||(e[7]=()=>s.validatePassword(!0)),onInput:e[8]||(e[8]=()=>s.validatePassword(!1))},{"right-icon":F(()=>[h(g,{name:i.showPassword?"eye-o":"eye",onClick:s.togglePasswordVisibility},null,8,["name","onClick"])]),_:1},8,["modelValue","type","error-message"]),h(m,{modelValue:i.confirmPassword,"onUpdate:modelValue":e[10]||(e[10]=b=>i.confirmPassword=b),name:"confirm-password",label:"确认密码",placeholder:"请再次输入密码",type:i.showPasswordCon?"text":"password",required:"",class:"form-field","error-message":i.confirmPasswordError,onBlur:e[11]||(e[11]=()=>s.validateConfirmPassword(!0)),onInput:e[12]||(e[12]=()=>s.validateConfirmPassword(!1))},{"right-icon":F(()=>[h(g,{name:i.showPasswordCon?"eye-o":"eye",onClick:e[9]||(e[9]=b=>i.showPasswordCon=!i.showPasswordCon)},null,8,["name"])]),_:1},8,["modelValue","type","error-message"]),pe("div",q8,[h(_,{round:"",block:"",type:"primary","native-type":"submit",style:{"margin-top":"50px"}},{default:F(()=>e[15]||(e[15]=[Ie("注册")])),_:1})])]),_:1},8,["onSubmit"])])])}const W8=Nt(z8,[["render",G8],["__scopeId","data-v-27023cf1"]]),K8={name:"Settings",data(){return{checked:!0}},methods:{goBack(){this.$router.go(-1)},goEditInfo(){this.$router.push({path:"/EditInfo"})},goChangePW(){this.$router.push({path:"/ChangePW"})},async handleLogout(){try{await _o({title:"确认退出登录",message:"确定要退出登录吗？"})&&(await Lx(qr),this.$store.commit("auth/clearUser"),this.$store.commit("cart/logout"),ar("退出登录成功"),this.$router.push({path:"/Profile"}))}catch(t){t!==void 0?console.log("用户取消退出登录"):(console.error("退出登录失败:",t),qo("退出登录失败，请重试"))}}}},Y8={class:"setting"};function Q8(t,e,n,r,i,s){const o=B("van-nav-bar"),a=B("van-divider"),l=B("van-cell"),c=B("van-cell-group"),d=B("van-switch"),f=B("van-button"),m=B("van-row");return Se(),Ge("div",Y8,[h(o,{title:"设置","left-text":"返回","left-arrow":"",onClickLeft:s.goBack,class:"custom-title"},null,8,["onClickLeft"]),h(a,null,{default:F(()=>e[3]||(e[3]=[Ie(" 账号设置 ")])),_:1}),h(c,{inset:""},{default:F(()=>[h(l,{title:"修改个人信息","is-link":"",onClick:s.goEditInfo},null,8,["onClick"]),h(l,{title:"修改密码","is-link":"",onClick:s.goChangePW,arrow:""},null,8,["onClick"])]),_:1}),h(a,null,{default:F(()=>e[4]||(e[4]=[Ie(" 消息通知 ")])),_:1}),h(c,{inset:""},{default:F(()=>[h(l,{center:"",title:"允许通知"},{"right-icon":F(()=>[h(d,{modelValue:i.checked,"onUpdate:modelValue":e[0]||(e[0]=g=>i.checked=g)},null,8,["modelValue"])]),label:F(()=>e[5]||(e[5]=[pe("span",{style:{color:"#1989fa"}},"开启后，App 未打开也能收到系统消息通知",-1)])),_:1}),h(l,{center:"",title:"震动"},{"right-icon":F(()=>[h(d,{modelValue:i.checked,"onUpdate:modelValue":e[1]||(e[1]=g=>i.checked=g)},null,8,["modelValue"])]),_:1}),h(l,{center:"",title:"声音"},{"right-icon":F(()=>[h(d,{modelValue:i.checked,"onUpdate:modelValue":e[2]||(e[2]=g=>i.checked=g)},null,8,["modelValue"])]),_:1})]),_:1}),h(a,null,{default:F(()=>e[6]||(e[6]=[Ie(" 通用 ")])),_:1}),h(c,{inset:""},{default:F(()=>[h(l,{title:"深色模式","is-link":"",value:"跟随系统"}),h(l,{title:"清除缓存",arrow:""},{label:F(()=>e[7]||(e[7]=[pe("span",{style:{color:"#1989fa"}},"包括图片、数据等",-1)])),_:1})]),_:1}),h(a),h(m,{style:{margin:"20px"}},{default:F(()=>[h(f,{round:"",block:"",type:"danger",onClick:s.handleLogout},{default:F(()=>e[8]||(e[8]=[Ie(" 退出登录 ")])),_:1},8,["onClick"])]),_:1})])}const X8=Nt(K8,[["render",Q8]]),J8={name:"Notification",data(){return{checked:!0}},methods:{goBack(){this.$router.go(-1)}}};function Z8(t,e,n,r,i,s){const o=B("van-nav-bar"),a=B("van-divider"),l=B("van-switch"),c=B("van-cell"),d=B("van-cell-group");return Se(),Ge("div",null,[h(o,{title:"消息通知","left-text":"返回","left-arrow":"",onClickLeft:s.goBack,class:"custom-title"},null,8,["onClickLeft"]),h(a,{style:{color:"#0c0c0c",borderColor:"#0c0c0c",padding:"0 16px"}},{default:F(()=>e[3]||(e[3]=[Ie(" 消息通知 ")])),_:1}),h(d,null,{default:F(()=>[h(c,{center:"",title:"允许通知"},{"right-icon":F(()=>[h(l,{modelValue:i.checked,"onUpdate:modelValue":e[0]||(e[0]=f=>i.checked=f)},null,8,["modelValue"])]),label:F(()=>e[4]||(e[4]=[pe("span",{style:{color:"#1989fa"}},"开启后，App 未打开也能收到系统消息通知",-1)])),_:1}),h(c,{center:"",title:"震动"},{"right-icon":F(()=>[h(l,{modelValue:i.checked,"onUpdate:modelValue":e[1]||(e[1]=f=>i.checked=f)},null,8,["modelValue"])]),_:1}),h(c,{center:"",title:"声音"},{"right-icon":F(()=>[h(l,{modelValue:i.checked,"onUpdate:modelValue":e[2]||(e[2]=f=>i.checked=f)},null,8,["modelValue"])]),_:1})]),_:1})])}const eq=Nt(J8,[["render",Z8]]),tq={data(){return{username:"",email:"",usernameError:"",avatarFile:[],showPassword:!1,showPasswordCon:!1,isUpdating:!1}},created(){const t=qr.currentUser;t&&(this.username=t.displayName||"",this.email=t.email||"")},methods:{async validateUsername(t){return this.username=this.username.trim(),this.username?this.username.length<3||this.username.length>20?(this.usernameError=t?"用户名长度必须在3到20个字符之间":"",!1):/^[a-zA-Z0-9._]+$/.test(this.username)?(this.usernameError="",!0):(this.usernameError=t?"用户名只能包含字母、数字、下划线和点":"",!1):(this.usernameError=t?"用户名不能为空":"",!1)},async updateInfo(){this.isUpdating=!0;try{const t=qr.currentUser;let e=t.photoURL;if(this.avatarFile.length>0){const n=this.avatarFile[0].file,r=fs(ms,`avatars/${t.uid}`),i={contentType:n.type};await ha(r,n,i),e=await fa(r)}await Zf(t,{displayName:this.username,photoURL:e}),await xn(mt(Ke,"users",t.uid),{username:this.username,photoURL:e}),this.$store.commit("auth/setUser",{uid:t.uid,displayName:this.username,email:this.email,photoURL:e}),ar("信息修改成功！"),this.$router.go(-1)}catch(t){console.error("信息修改失败:",t),er({message:"信息修改失败，请稍后重试。"})}finally{this.isUpdating=!1}},beforeRead(t){return["image/jpeg","image/png","image/gif"].includes(t.type)?t.size>2*1024*1024?(this.$toast("文件大小不能超过 2MB"),!1):!0:(this.$toast("只支持 JPG、PNG 或 GIF 格式的图片"),!1)},goBack(){this.$router.go(-1)}}},nq={class:"edit-info-page"},rq={class:"avatar-uploader"},iq={class:"button-container"};function sq(t,e,n,r,i,s){const o=B("van-nav-bar"),a=B("van-loading"),l=B("van-overlay"),c=B("van-col"),d=B("van-uploader"),f=B("van-row"),m=B("van-field"),g=B("van-button"),_=B("van-form");return Se(),Ge("div",null,[h(o,{"left-arrow":"",onClickLeft:s.goBack,border:!1,title:"修改信息"},null,8,["onClickLeft"]),h(l,{show:i.isUpdating,"onUpdate:show":e[0]||(e[0]=T=>i.isUpdating=T),"z-index":"2000"},{default:F(()=>[h(a,{size:"30px",type:"spinner",vertical:""},{default:F(()=>e[6]||(e[6]=[Ie("更新中...")])),_:1})]),_:1},8,["show"]),pe("div",nq,[h(_,{onSubmit:s.updateInfo},{default:F(()=>[pe("div",rq,[h(f,{justify:"center"},{default:F(()=>[h(c,{span:"6"},{default:F(()=>e[7]||(e[7]=[pe("span",{class:"required-text"},"修改头像",-1)])),_:1}),h(c,{span:"18"},{default:F(()=>[h(d,{modelValue:i.avatarFile,"onUpdate:modelValue":e[1]||(e[1]=T=>i.avatarFile=T),"max-count":"1","preview-size":"80px",onOversize:t.handleOversize,"before-read":s.beforeRead},null,8,["modelValue","onOversize","before-read"])]),_:1})]),_:1})]),h(m,{modelValue:i.username,"onUpdate:modelValue":e[2]||(e[2]=T=>i.username=T),name:"username",label:"用户名",placeholder:"请输入用户名",class:"form-field","error-message":i.usernameError,onBlur:e[3]||(e[3]=()=>s.validateUsername(!0)),onInput:e[4]||(e[4]=()=>s.validateUsername(!1))},null,8,["modelValue","error-message"]),h(m,{modelValue:i.email,"onUpdate:modelValue":e[5]||(e[5]=T=>i.email=T),name:"email",label:"邮箱",placeholder:"邮箱不可修改",disabled:"",class:"form-field"},null,8,["modelValue"]),pe("div",iq,[h(g,{round:"",block:"",type:"primary","native-type":"submit",style:{"margin-top":"50px"}},{default:F(()=>e[8]||(e[8]=[Ie("修改")])),_:1})])]),_:1},8,["onSubmit"])])])}const oq=Nt(tq,[["render",sq],["__scopeId","data-v-74ad36c2"]]);var Jt=[];for(var xf=0;xf<256;++xf)Jt.push((xf+256).toString(16).slice(1));function aq(t,e=0){return(Jt[t[e+0]]+Jt[t[e+1]]+Jt[t[e+2]]+Jt[t[e+3]]+"-"+Jt[t[e+4]]+Jt[t[e+5]]+"-"+Jt[t[e+6]]+Jt[t[e+7]]+"-"+Jt[t[e+8]]+Jt[t[e+9]]+"-"+Jt[t[e+10]]+Jt[t[e+11]]+Jt[t[e+12]]+Jt[t[e+13]]+Jt[t[e+14]]+Jt[t[e+15]]).toLowerCase()}var hu,lq=new Uint8Array(16);function cq(){if(!hu&&(hu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!hu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hu(lq)}var uq=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const mw={randomUUID:uq};function dq(t,e,n){if(mw.randomUUID&&!e&&!t)return mw.randomUUID();t=t||{};var r=t.random||(t.rng||cq)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,aq(r)}const hq={name:"AdminUploadGoods",data(){return{product:{id:"",title:"",description:"",price:0,quantity:0,tag:"热销",images:[],category:"",productDetailImages:[],isInCart:!1,count:0,isInCheck:!1,isAvailable:!0},categories:[{text:"MUSIC",value:"MUSIC"},{text:"PHOTO",value:"PHOTO"},{text:"CONCERT",value:"CONCERT"},{text:"LIVING",value:"LIVING"},{text:"STATIONARY",value:"STATIONARY"},{text:"FASHION",value:"FASHION"}],selectedCategoryText:"",selectedCategoryValue:"",showPicker:!1,imageFiles:[],detailImageFiles:[],isUploading:!1}},methods:{onConfirmCategory(t){console.log("用户选择的类别：",t),this.selectedCategoryText=t.selectedOptions[0].text,this.selectedCategoryValue=t.selectedOptions[0].value,this.showPicker=!1},handleImageRead(t){if(!["image/jpeg","image/png","image/gif"].includes(t.type))return nt("只支持 JPG、PNG 或 GIF 格式的图片"),!1;if(t.size>2*1024*1024)return nt("文件大小不能超过 2MB"),!1;this.imageFiles.push(t.file)},handleDetailImageRead(t){if(!["image/jpeg","image/png","image/gif"].includes(t.type))return nt("只支持 JPG、PNG 或 GIF 格式的图片"),!1;if(t.size>2*1024*1024)return nt("文件大小不能超过 2MB"),!1;this.detailImageFiles.push(t.file)},handleDetailOversize(){nt("最多上传 10 张详情图片")},handleOversize(){nt("最多上传 5 张图片")},async handleUpload(){if(!this.product.title||!this.product.description||!this.product.price||!this.product.quantity||this.imageFiles.length===0||this.detailImageFiles.length===0){nt("请填写完整商品信息");return}const t=dq(),e=[],n=[];this.isUploading=!0;try{for(let i=0;i<this.imageFiles.length;i++){const s=this.imageFiles[i].file,o=fs(ms,`products/${t}_${i}`),a={contentType:s.type};console.log("准备上传文件：",s),await ha(o,s,a);const l=await fa(o);console.log("图片上传成功，下载链接：",l),e.push(l)}for(let i=0;i<this.detailImageFiles.length;i++){const s=this.detailImageFiles[i].file,o=fs(ms,`products/${t}_detail_${i}`);await ha(o,s);const a=await fa(o);n.push(a)}const r={id:t,title:this.product.title,description:this.product.description,price:parseFloat(this.product.price),quantity:parseInt(this.product.quantity),tag:this.product.tag,images:e,category:this.selectedCategoryValue,productDetailImages:n,isInCart:!1,count:0,isInCheck:!1,createdAt:new Date,isAvailable:!0};await io(mt(Ke,"products",t),r),ar("商品上传成功"),this.$router.go(-1)}catch(r){console.error("商品上传失败:",r),nt("商品上传失败，请稍后重试")}finally{this.isUploading=!1}}}},fq={style:{"background-color":"beige","min-height":"100vh"}},mq={class:"upload-page"},gq={style:{"margin-top":"20px"}};function pq(t,e,n,r,i,s){const o=B("van-nav-bar"),a=B("van-loading"),l=B("van-overlay"),c=B("van-field"),d=B("van-stepper"),f=B("van-picker"),m=B("van-popup"),g=B("van-radio"),_=B("van-radio-group"),T=B("van-uploader"),b=B("van-button"),C=B("van-form");return Se(),Ge("div",fq,[h(o,{title:"上传商品","left-arrow":"",onClickLeft:e[0]||(e[0]=y=>t.$router.go(-1)),border:!1}),pe("div",mq,[h(l,{show:i.isUploading,"onUpdate:show":e[1]||(e[1]=y=>i.isUploading=y),"z-index":"2000"},{default:F(()=>[h(a,{size:"30px",type:"spinner",vertical:""},{default:F(()=>e[16]||(e[16]=[Ie("上传中...")])),_:1})]),_:1},8,["show"]),h(C,{onSubmit:s.handleUpload},{default:F(()=>[h(c,{modelValue:i.product.title,"onUpdate:modelValue":e[2]||(e[2]=y=>i.product.title=y),label:"商品名称",placeholder:"请输入商品名称",required:""},null,8,["modelValue"]),h(c,{modelValue:i.product.description,"onUpdate:modelValue":e[3]||(e[3]=y=>i.product.description=y),label:"商品描述",placeholder:"请输入商品描述",required:"",rows:"3",type:"textarea"},null,8,["modelValue"]),h(c,{modelValue:i.product.price,"onUpdate:modelValue":e[5]||(e[5]=y=>i.product.price=y),label:"商品价格（¥）",required:""},{input:F(()=>[h(d,{modelValue:i.product.price,"onUpdate:modelValue":e[4]||(e[4]=y=>i.product.price=y)},null,8,["modelValue"])]),_:1},8,["modelValue"]),h(c,{modelValue:i.product.quantity,"onUpdate:modelValue":e[7]||(e[7]=y=>i.product.quantity=y),label:"商品库存（个）",required:""},{input:F(()=>[h(d,{modelValue:i.product.quantity,"onUpdate:modelValue":e[6]||(e[6]=y=>i.product.quantity=y)},null,8,["modelValue"])]),_:1},8,["modelValue"]),h(c,{modelValue:i.selectedCategoryText,"onUpdate:modelValue":e[8]||(e[8]=y=>i.selectedCategoryText=y),"is-link":"",readonly:"",required:"",label:"商品类别",placeholder:"选择商品类别",onClick:e[9]||(e[9]=y=>i.showPicker=!0)},null,8,["modelValue"]),h(m,{show:i.showPicker,"onUpdate:show":e[11]||(e[11]=y=>i.showPicker=y),"destroy-on-close":"",round:"",position:"bottom"},{default:F(()=>[h(f,{title:"选择商品类别",columns:i.categories,onCancel:e[10]||(e[10]=y=>i.showPicker=!1),onConfirm:s.onConfirmCategory},null,8,["columns","onConfirm"])]),_:1},8,["show"]),h(c,{modelValue:i.product.tag,"onUpdate:modelValue":e[13]||(e[13]=y=>i.product.tag=y),label:"标签",required:""},{input:F(()=>[h(_,{modelValue:i.product.tag,"onUpdate:modelValue":e[12]||(e[12]=y=>i.product.tag=y),direction:"horizontal"},{default:F(()=>[h(g,{name:"热销"},{default:F(()=>e[17]||(e[17]=[Ie("热销")])),_:1}),h(g,{name:"新品"},{default:F(()=>e[18]||(e[18]=[Ie("新品")])),_:1}),h(g,{name:"推荐"},{default:F(()=>e[19]||(e[19]=[Ie("推荐")])),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),h(c,{label:"商品图片",required:""},{input:F(()=>[h(T,{modelValue:i.imageFiles,"onUpdate:modelValue":e[14]||(e[14]=y=>i.imageFiles=y),multiple:"","max-count":"5","after-read":s.handleImageRead,onOversize:s.handleOversize},null,8,["modelValue","after-read","onOversize"])]),_:1}),h(c,{label:"商品详情图片",required:""},{input:F(()=>[h(T,{modelValue:i.detailImageFiles,"onUpdate:modelValue":e[15]||(e[15]=y=>i.detailImageFiles=y),multiple:"","max-count":"10","after-read":s.handleDetailImageRead,onOversize:s.handleDetailOversize},null,8,["modelValue","after-read","onOversize"])]),_:1}),pe("div",gq,[h(b,{type:"primary",block:"","native-type":"submit"},{default:F(()=>e[20]||(e[20]=[Ie("上传商品")])),_:1})])]),_:1},8,["onSubmit"])])])}const vq=Nt(hq,[["render",pq],["__scopeId","data-v-dc4ce4c6"]]),_q={name:"AdminEditGoods",data(){return{checkGoods:[],products:[],selectedItems:[],isDoing:!1,activeTab:0,showCoupon:!1,coupons:[],selectedCoupons:[]}},computed:{...Oi("auth",["username","isLogin"]),availableProducts(){return this.products.filter(t=>t.isAvailable)},unavailableProducts(){return this.products.filter(t=>!t.isAvailable)}},async created(){await this.fetchProducts(),await this.fetchCoupons()},methods:{async fetchCoupons(){try{const t=await vr(Mn(Ke,"coupons"));this.coupons=t.docs.map(e=>({id:e.id,...e.data()}))}catch(t){console.error("获取优惠券失败：",t)}},GoDetail(t){console.log(t),this.$router.push({path:"/GoodDetail",query:{items:JSON.stringify(t)}})},async fetchProducts(){try{const e=(await vr(Mn(Ke,"products"))).docs.map(n=>({id:n.id,...n.data()}));this.products=e.map(n=>({...n,images:n.images&&n.images.length?n.images:["https://via.placeholder.com/150"]})),this.spinner=!1}catch(t){console.error("获取商品失败：",t)}},goBack(){this.$router.go(-1)},onCheckChange(){this.updateSelectedItems()},handleButtonClick(){this.$router.push({path:"/AdminUploadGoods"})},selectAll(){const t=this.products.every(e=>e.checked);this.products.forEach(e=>e.checked=!t),this.updateSelectedItems()},updateSelectedItems(){this.selectedItems=this.products.filter(t=>t.checked)},async deleteSelected(t){if(this.selectedItems.length===0){nt("请先选择至少一个商品");return}this.isDoing=!0;try{for(const e of this.selectedItems){const n=mt(Ke,"products",e.id);await xn(n,{isAvailable:t});const r=await vr(Mn(Ke,"cart"));for(const i of r.docs){const o=i.data().items.map(a=>a.id===e.id?{...a,isAvailable:t}:a);await xn(mt(Ke,"cart",i.id),{items:o})}}this.products=this.products.map(e=>(this.selectedItems.some(n=>n.id===e.id)&&(e.isAvailable=t),e)),this.updateSelectedItems(),nt(t?"商品已上架":"商品已下架")}catch(e){console.error(t?"上架商品失败：":"下架商品失败：",e)}finally{this.isDoing=!1,this.$store.commit("refreshCart")}},async deleteForever(){_o({title:"确认删除商品吗？",message:"一旦删除商品，将不可回退操作。",confirmButtonText:"删除",cancelButtonText:"再想想"}).then(async()=>{if(this.selectedItems.length===0){nt("请先选择至少一个商品");return}this.isDoing=!0;try{for(const t of this.selectedItems){await this.deleteProductImages(t);const e=mt(Ke,"products",t.id);await dc(e);const n=await vr(Mn(Ke,"cart"));for(const r of n.docs){const s=r.data().items.filter(o=>o.id!==t.id);await xn(mt(Ke,"cart",r.id),{items:s})}}this.products=this.products.filter(t=>!this.selectedItems.some(e=>e.id===t.id)),this.updateSelectedItems(),nt("商品已永久删除")}catch(t){console.error("永久删除商品失败：",t)}finally{this.isDoing=!1,this.$store.commit("refreshCart")}})},assignCoupons(){if(this.selectedCoupons.length===0){nt("请先选择至少一个优惠券");return}this.isDoing=!0,Promise.all(this.selectedItems.map(async t=>{const e=mt(Ke,"products",t.id),n=this.selectedCoupons.map(r=>this.coupons.find(i=>i.id===r));await xn(e,{coupons:n})})).then(()=>{nt("优惠券权限配置成功"),this.showCouponPopup=!1}).catch(t=>{console.error("优惠券权限配置失败：",t),nt("配置失败，请稍后重试")}).finally(()=>{this.isDoing=!1})},async deleteProductImages(t){try{if(t.images&&t.images.length>0)for(let e=0;e<t.images.length;e++){const n=t.images[e],r=fs(ms,decodeURIComponent(n.split("?")[0].split("/o/")[1]));try{await $y(r),console.log(`主图片删除成功: ${n}`)}catch(i){console.error(`删除主图片失败: ${n}`,i)}}if(t.productDetailImages&&t.productDetailImages.length>0)for(let e=0;e<t.productDetailImages.length;e++){const n=t.productDetailImages[e],r=fs(ms,decodeURIComponent(n.split("?")[0].split("/o/")[1]));try{await $y(r),console.log(`详情图片删除成功: ${n}`)}catch(i){console.error(`删除详情图片失败: ${n}`,i)}}}catch(e){console.error("删除商品图片时发生错误：",e)}},async updateSelected(){if(this.selectedItems.length!==1){nt("只能选择一个商品进行修改");return}const t=this.selectedItems[0];this.$router.push({path:"/AdminUpdateGoods",query:{item:JSON.stringify(t)}})}}},yq={class:"admin-edit-content"};function bq(t,e,n,r,i,s){const o=B("van-nav-bar"),a=B("van-loading"),l=B("van-overlay"),c=B("van-button"),d=B("van-empty"),f=B("van-checkbox"),m=B("van-col"),g=B("van-tag"),_=B("van-card"),T=B("van-row"),b=B("van-grid-item"),C=B("van-grid"),y=B("van-cell"),A=B("van-cell-group"),D=B("van-checkbox-group"),x=B("van-popup"),O=B("van-tab"),R=B("van-tabs");return Se(),Ge("div",null,[h(o,{title:"管理商品","left-text":"返回","right-text":"全选",onClickRight:s.selectAll,"left-arrow":"",onClickLeft:s.goBack,class:"custom-title"},null,8,["onClickRight","onClickLeft"]),h(l,{show:i.isDoing,"onUpdate:show":e[0]||(e[0]=v=>i.isDoing=v),"z-index":"9000"},{default:F(()=>[h(a,{color:"#1989fa",size:"30px",type:"spinner",vertical:""},{default:F(()=>e[9]||(e[9]=[Ie("加载中...")])),_:1})]),_:1},8,["show"]),pe("div",yq,[h(R,{modelValue:i.activeTab,"onUpdate:modelValue":e[8]||(e[8]=v=>i.activeTab=v),sticky:""},{default:F(()=>[h(O,{title:`已上架 (${s.availableProducts.length})`},{default:F(()=>[s.availableProducts.length===0?(Se(),Tt(d,{key:0,description:"暂无已上架商品"},{default:F(()=>[h(c,{round:"",type:"primary",class:"bottom-button",onClick:s.handleButtonClick},{default:F(()=>e[10]||(e[10]=[Ie(" 添加商品 ")])),_:1},8,["onClick"])]),_:1})):(Se(!0),Ge(rt,{key:1},vn(s.availableProducts,v=>(Se(),Tt(T,{key:v.id,class:"cart-item"},{default:F(()=>[h(m,{span:"3"},{default:F(()=>[h(f,{modelValue:v.checked,"onUpdate:modelValue":I=>v.checked=I,class:"item-checkbox",onChange:s.onCheckChange},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),h(m,{span:"20"},{default:F(()=>[h(_,{onClick:I=>s.GoDetail(v),title:v.title,thumb:v.images[0],desc:v.description,price:v.price,num:v.quantity},{tags:F(()=>[h(g,{type:"warning"},{default:F(()=>[Ie("单价：¥"+Ye(v.price),1)]),_:2},1024)]),_:2},1032,["onClick","title","thumb","desc","price","num"])]),_:2},1024)]),_:2},1024))),128)),h(C,{"column-num":"3",class:"admin-bottom-buttons",border:"false"},{default:F(()=>[h(b,{icon:"down",disabled:i.selectedItems.length===0,class:oi({disabled:i.selectedItems.length===0}),onClick:e[1]||(e[1]=v=>s.deleteSelected(!1)),text:"下架"},null,8,["disabled","class"]),h(b,{icon:"edit",disabled:i.selectedItems.length!==1,class:oi({disabled:i.selectedItems.length!==1}),onClick:s.updateSelected,text:"修改"},null,8,["disabled","class","onClick"]),h(b,{icon:"coupon-o",disabled:i.selectedItems.length===0,class:oi({disabled:i.selectedItems.length===0}),onClick:e[2]||(e[2]=v=>i.showCoupon=!0),text:"优惠券权限"},null,8,["disabled","class"])]),_:1}),h(x,{show:i.showCoupon,"onUpdate:show":e[6]||(e[6]=v=>i.showCoupon=v),round:"",position:"bottom",style:{height:"80%"}},{default:F(()=>[h(o,{title:"选择优惠券","left-arrow":"",onClickLeft:e[3]||(e[3]=v=>i.showCoupon=!1)}),h(D,{modelValue:i.selectedCoupons,"onUpdate:modelValue":e[5]||(e[5]=v=>i.selectedCoupons=v)},{default:F(()=>[h(A,{inset:""},{default:F(()=>[(Se(!0),Ge(rt,null,vn(i.coupons,v=>(Se(),Tt(y,{key:v.id,clickable:""},{title:F(()=>[pe("div",null,Ye(v.name)+" ("+Ye(v.valueDesc)+Ye(v.unitDesc)+")",1),h(g,{type:"primary"},{default:F(()=>[Ie("满 "+Ye(v.originCondition)+" "+Ye(v.unitDesc)+"可用",1)]),_:2},1024)]),label:F(()=>[pe("div",null,"开始时间："+Ye(v.startAtFormatted),1),pe("div",null,"结束时间："+Ye(v.endAtFormatted),1)]),"right-icon":F(()=>[h(f,{name:v.id,onClick:e[4]||(e[4]=tc(()=>{},["stop"]))},null,8,["name"])]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"]),h(c,{type:"primary",block:"",onClick:s.assignCoupons},{default:F(()=>e[11]||(e[11]=[Ie("配置")])),_:1},8,["onClick"])]),_:1},8,["show"])]),_:1},8,["title"]),h(O,{title:`下架商品 (${s.unavailableProducts.length})`},{default:F(()=>[s.unavailableProducts.length===0?(Se(),Tt(d,{key:0,description:"暂无下架商品"})):(Se(!0),Ge(rt,{key:1},vn(s.unavailableProducts,v=>(Se(),Tt(T,{key:v.id,class:"cart-item"},{default:F(()=>[h(m,{span:"3"},{default:F(()=>[h(f,{modelValue:v.checked,"onUpdate:modelValue":I=>v.checked=I,class:"item-checkbox",onChange:s.onCheckChange},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),h(m,{span:"20"},{default:F(()=>[h(_,{title:v.title,thumb:v.images[0],desc:v.description,price:v.price,num:v.quantity},{tags:F(()=>[h(g,{type:"danger"},{default:F(()=>e[12]||(e[12]=[Ie("下架商品")])),_:1})]),_:2},1032,["title","thumb","desc","price","num"])]),_:2},1024)]),_:2},1024))),128)),h(C,{"column-num":"2",class:"admin-bottom-buttons",border:"false"},{default:F(()=>[h(b,{icon:"back-top",disabled:i.selectedItems.length===0,class:oi({disabled:i.selectedItems.length===0}),onClick:e[7]||(e[7]=v=>s.deleteSelected(!0)),text:"上架"},null,8,["disabled","class"]),h(b,{icon:"delete",disabled:i.selectedItems.length===0,class:oi({disabled:i.selectedItems.length===0}),onClick:s.deleteForever,text:"永久删除"},null,8,["disabled","class","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])])])}const wq=Nt(_q,[["render",bq]]),Tq={data(){return{coupons:[],showPopup:!1,showStartCalendar:!1,showEndCalendar:!1,form:{name:"",valueDesc:"",unitDesc:"",originCondition:0,startAt:null,startAtFormatted:"",endAt:null,endAtFormatted:""},editIndex:null,isUploading:!1}},async created(){await this.fetchCoupons()},methods:{async fetchCoupons(){const t=await vr(Mn(Ke,"coupons"));this.coupons=t.docs.map(e=>({id:e.id,...e.data()}))},formatTimestamp(t){if(!t)return"-";const e=new Date(t),n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${n}-${r}-${i}`},addCoupon(){this.resetForm(),this.showPopup=!0},editCoupon(t){const e=this.coupons[t];this.form={...e},this.form.startAtFormatted=this.formatTimestamp(e.startAt),this.form.endAtFormatted=this.formatTimestamp(e.endAt),this.editIndex=t,this.showPopup=!0},async saveCoupon(){if(!this.form.name||!this.form.valueDesc||!this.form.unitDesc){this.$toast("请填写完整信息");return}const t={...this.form,startAt:new Date(this.form.startAtFormatted).getTime(),endAt:new Date(this.form.endAtFormatted).getTime()};if(this.editIndex!==null){const e=this.coupons[this.editIndex].id;await xn(mt(Ke,"coupons",e),t),this.coupons[this.editIndex]=t}else{this.isUploading=!0;const e=await bI(Mn(Ke,"coupons"),t);t.id=e.id,this.coupons.push(t),this.isUploading=!1}this.resetForm(),this.showPopup=!1,this.editIndex=null},async deleteCoupon(t){_o({title:"确认删除",message:"确定要删除此优惠券吗？"}).then(()=>{const e=this.coupons[t].id;dc(mt(Ke,"coupons",e)),this.coupons.splice(t,1),this.$toast("优惠券已删除")})},resetForm(){this.form={name:"",valueDesc:"",unitDesc:"",originCondition:0,startAt:null,startAtFormatted:"",endAt:null,endAtFormatted:""}},onStartConfirm(t){this.form.startAtFormatted=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`,this.showStartCalendar=!1},onEndConfirm(t){this.form.endAtFormatted=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`,this.showEndCalendar=!1}}},Eq={class:"coupon-content"},Iq={style:{padding:"20px"}};function Cq(t,e,n,r,i,s){const o=B("van-loading"),a=B("van-overlay"),l=B("van-nav-bar"),c=B("van-divider"),d=B("van-icon"),f=B("van-cell"),m=B("van-cell-group"),g=B("van-button"),_=B("van-field"),T=B("van-calendar"),b=B("van-popup");return Se(),Ge("div",Eq,[h(a,{show:i.isUploading,"onUpdate:show":e[0]||(e[0]=C=>i.isUploading=C),"z-index":"9000"},{default:F(()=>[h(o,{size:"30px",type:"spinner",vertical:""},{default:F(()=>e[16]||(e[16]=[Ie("上传中...")])),_:1})]),_:1},8,["show"]),h(l,{title:"优惠券管理","left-text":"返回","left-arrow":"",onClickLeft:e[1]||(e[1]=C=>t.$router.go(-1))}),h(c),h(m,{inset:""},{default:F(()=>[(Se(!0),Ge(rt,null,vn(i.coupons,(C,y)=>(Se(),Tt(f,{key:y,"is-link":""},{title:F(()=>[pe("div",null,Ye(C.name),1)]),label:F(()=>[pe("div",null,[pe("div",null,"开始时间: "+Ye(s.formatTimestamp(C.startAt)),1),pe("div",null,"结束时间: "+Ye(s.formatTimestamp(C.endAt)),1)])]),"right-icon":F(()=>[h(d,{name:"edit",onClick:A=>s.editCoupon(y),size:"23"},null,8,["onClick"]),h(d,{name:"delete",onClick:tc(A=>s.deleteCoupon(y),["stop"]),style:{"margin-left":"10px",color:"red"},size:"23"},null,8,["onClick"])]),_:2},1024))),128))]),_:1}),h(g,{type:"primary",block:"",onClick:s.addCoupon,class:"coupon-add-button"},{default:F(()=>e[17]||(e[17]=[Ie("添加优惠券")])),_:1},8,["onClick"]),h(b,{show:i.showPopup,"onUpdate:show":e[15]||(e[15]=C=>i.showPopup=C),round:"",position:"bottom",style:{height:"80%"}},{default:F(()=>[h(l,{title:"优惠券","left-arrow":"",onClickLeft:e[2]||(e[2]=C=>i.showPopup=!1)}),pe("div",Iq,[h(_,{modelValue:i.form.name,"onUpdate:modelValue":e[3]||(e[3]=C=>i.form.name=C),label:"优惠券名称",placeholder:"请输入名称",required:""},null,8,["modelValue"]),h(_,{modelValue:i.form.valueDesc,"onUpdate:modelValue":e[4]||(e[4]=C=>i.form.valueDesc=C),label:"优惠金额（¥）",placeholder:"例如 10",required:""},null,8,["modelValue"]),h(_,{modelValue:i.form.unitDesc,"onUpdate:modelValue":e[5]||(e[5]=C=>i.form.unitDesc=C),label:"单位",placeholder:"例如 元",required:""},null,8,["modelValue"]),h(_,{modelValue:i.form.originCondition,"onUpdate:modelValue":e[6]||(e[6]=C=>i.form.originCondition=C),label:"使用条件（¥）",placeholder:"满多少可用",required:""},null,8,["modelValue"]),h(_,{modelValue:i.form.startAtFormatted,"onUpdate:modelValue":e[7]||(e[7]=C=>i.form.startAtFormatted=C),label:"开始时间","is-link":"",readonly:"",placeholder:"选择开始时间",onClick:e[8]||(e[8]=C=>i.showStartCalendar=!0)},null,8,["modelValue"]),h(T,{show:i.showStartCalendar,"onUpdate:show":e[9]||(e[9]=C=>i.showStartCalendar=C),type:"single",title:"选择开始时间",onConfirm:s.onStartConfirm,onCancel:e[10]||(e[10]=C=>i.showStartCalendar=!1)},null,8,["show","onConfirm"]),h(_,{modelValue:i.form.endAtFormatted,"onUpdate:modelValue":e[11]||(e[11]=C=>i.form.endAtFormatted=C),label:"结束时间","is-link":"",readonly:"",placeholder:"选择结束时间",onClick:e[12]||(e[12]=C=>i.showEndCalendar=!0)},null,8,["modelValue"]),h(T,{show:i.showEndCalendar,"onUpdate:show":e[13]||(e[13]=C=>i.showEndCalendar=C),type:"single",title:"选择结束时间",onConfirm:s.onEndConfirm,onCancel:e[14]||(e[14]=C=>i.showEndCalendar=!1)},null,8,["show","onConfirm"]),h(g,{type:"primary",block:"",onClick:s.saveCoupon},{default:F(()=>e[18]||(e[18]=[Ie("保存")])),_:1},8,["onClick"])])]),_:1},8,["show"])])}const Sq=Nt(Tq,[["render",Cq],["__scopeId","data-v-b23d35ad"]]),Aq={data(){return{product:{title:"",description:"",price:0,category:"",quantity:0,tag:"热销",images:[],productDetailImages:[]},categories:[{text:"MUSIC",value:"MUSIC"},{text:"PHOTO",value:"PHOTO"},{text:"CONCERT",value:"CONCERT"},{text:"LIVING",value:"LIVING"},{text:"STATIONARY",value:"STATIONARY"},{text:"FASHION",value:"FASHION"}],selectedCategoryText:"",selectedCategoryValue:"",originalCategory:"",originalProduct:{},imageFiles:[],detailImageFiles:[],isUploading:!1,showPicker:!1}},created(){this.loadOriginalProductFromQuery(),console.log(this.originalProduct)},methods:{onConfirmCategory(t){console.log("用户选择的类别：",t),this.selectedCategoryText=t.selectedOptions[0].text,this.selectedCategoryValue=t.selectedOptions[0].value,this.showPicker=!1},loadOriginalProductFromQuery(){try{const t=JSON.parse(this.$route.query.item);this.originalProduct=t,this.originalCategory=t.category||"",this.product={title:t.title,description:t.description,price:t.price,quantity:t.quantity,category:t.category,tag:t.tag,images:[t.images],productDetailImages:[t.productDetailImages]}}catch(t){console.log(t)}},handleOversize(t){if(!["image/jpeg","image/png","image/gif"].includes(t.type))return nt("只支持 JPG、PNG 或 GIF 格式的图片"),!1;if(t.size>2*1024*1024)return nt("文件大小不能超过 2MB"),!1},handleImageRead(t){handleOversize(t),this.imageFiles.push(t.file)},handleDetailImageRead(t){handleOversize(t),this.detailImageFiles.push(t.file)},async handleUpdate(){if(!this.product.title||!this.product.description||!this.product.price||!this.product.quantity){nt("请填写完整商品信息");return}this.isUploading=!0;const t=this.originalProduct.id,e=[],n=[];try{for(let i=0;i<this.imageFiles.length;i++){const s=this.imageFiles[i].file,o=fs(ms,`products/${t}_${i}`);await ha(o,s);const a=await fa(o);e.push(a)}for(let i=0;i<this.detailImageFiles.length;i++){const s=this.detailImageFiles[i].file,o=fs(ms,`products/${t}_detail_${i}`);await ha(o,s);const a=await fa(o);n.push(a)}const r={...this.product,category:this.selectedCategoryValue||this.originalCategory,images:e.length>0?e:this.originalProduct.images,productDetailImages:n.length>0?n:this.originalProduct.productDetailImages};await xn(mt(Ke,"products",t),r),await this.updateCarts(t,r),ar("商品信息更新成功"),this.$router.go(-1)}catch(r){console.error("更新商品信息失败：",r),nt("更新失败，请稍后重试")}finally{this.isUploading=!1}},async updateCarts(t,e){try{const n=await vr(Mn(Ke,"cart"));for(const r of n.docs){const s=r.data().items.map(o=>o.id===t?{...o,title:e.title,description:e.description,price:e.price,category:e.category,images:e.images,productDetailImages:e.productDetailImages,tag:e.tag}:o);await xn(mt(Ke,"cart",r.id),{items:s}),console.log("购物车更新成功")}}catch(n){console.error("更新购物车商品信息失败：",n)}},goBack(){this.$router.go(-1)}}},kq={class:"update-container"},Rq={style:{"margin-top":"20px"}};function Pq(t,e,n,r,i,s){const o=B("van-nav-bar"),a=B("van-loading"),l=B("van-overlay"),c=B("van-field"),d=B("van-stepper"),f=B("van-picker"),m=B("van-popup"),g=B("van-radio"),_=B("van-radio-group"),T=B("van-uploader"),b=B("van-button"),C=B("van-form");return Se(),Ge("div",null,[h(o,{title:"修改商品","left-arrow":"","left-text":"返回",onClickLeft:s.goBack,class:"custom-title"},null,8,["onClickLeft"]),pe("div",kq,[i.isUploading?(Se(),Tt(l,{key:0},{default:F(()=>[h(a,{color:"#1989fa",size:"30px",type:"spinner",vertical:""},{default:F(()=>e[14]||(e[14]=[Ie("修改中...")])),_:1})]),_:1})):Xs("",!0),h(C,{onSubmit:s.handleUpdate},{default:F(()=>[h(c,{modelValue:i.product.title,"onUpdate:modelValue":e[0]||(e[0]=y=>i.product.title=y),label:"商品名称",placeholder:i.originalProduct.title,required:""},null,8,["modelValue","placeholder"]),h(c,{modelValue:i.product.description,"onUpdate:modelValue":e[1]||(e[1]=y=>i.product.description=y),label:"商品描述",placeholder:i.originalProduct.description,required:"",rows:"3",type:"textarea"},null,8,["modelValue","placeholder"]),h(c,{modelValue:i.product.price,"onUpdate:modelValue":e[3]||(e[3]=y=>i.product.price=y),label:"商品价格（¥）",required:""},{input:F(()=>[h(d,{modelValue:i.product.price,"onUpdate:modelValue":e[2]||(e[2]=y=>i.product.price=y)},null,8,["modelValue"])]),_:1},8,["modelValue"]),h(c,{modelValue:i.product.quantity,"onUpdate:modelValue":e[5]||(e[5]=y=>i.product.quantity=y),label:"商品库存（个）",required:""},{input:F(()=>[h(d,{modelValue:i.product.quantity,"onUpdate:modelValue":e[4]||(e[4]=y=>i.product.quantity=y)},null,8,["modelValue"])]),_:1},8,["modelValue"]),h(c,{modelValue:i.selectedCategoryText,"onUpdate:modelValue":e[6]||(e[6]=y=>i.selectedCategoryText=y),"is-link":"",readonly:"",required:"",label:"商品类别",placeholder:i.originalCategory||"选择商品类别",onClick:e[7]||(e[7]=y=>i.showPicker=!0)},null,8,["modelValue","placeholder"]),h(m,{show:i.showPicker,"onUpdate:show":e[9]||(e[9]=y=>i.showPicker=y),"destroy-on-close":"",round:"",position:"bottom"},{default:F(()=>[h(f,{title:"选择商品类别",columns:i.categories,onCancel:e[8]||(e[8]=y=>i.showPicker=!1),onConfirm:s.onConfirmCategory},null,8,["columns","onConfirm"])]),_:1},8,["show"]),h(c,{modelValue:i.product.tag,"onUpdate:modelValue":e[11]||(e[11]=y=>i.product.tag=y),label:"标签"},{input:F(()=>[h(_,{modelValue:i.product.tag,"onUpdate:modelValue":e[10]||(e[10]=y=>i.product.tag=y),direction:"horizontal"},{default:F(()=>[h(g,{name:"热销"},{default:F(()=>e[15]||(e[15]=[Ie("热销")])),_:1}),h(g,{name:"新品"},{default:F(()=>e[16]||(e[16]=[Ie("新品")])),_:1}),h(g,{name:"推荐"},{default:F(()=>e[17]||(e[17]=[Ie("推荐")])),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),h(c,{label:"商品图片"},{input:F(()=>[h(T,{modelValue:i.imageFiles,"onUpdate:modelValue":e[12]||(e[12]=y=>i.imageFiles=y),multiple:"","max-count":"5","file-list":i.originalProduct.images.map(y=>({url:y})),"after-read":s.handleImageRead,onOversize:s.handleOversize},null,8,["modelValue","file-list","after-read","onOversize"])]),_:1}),h(c,{label:"商品详情图片"},{input:F(()=>[h(T,{modelValue:i.detailImageFiles,"onUpdate:modelValue":e[13]||(e[13]=y=>i.detailImageFiles=y),multiple:"","file-list":i.originalProduct.productDetailImages.map(y=>({url:y})),"max-count":"5","after-read":s.handleDetailImageRead,onOversize:s.handleOversize},null,8,["modelValue","file-list","after-read","onOversize"])]),_:1}),pe("div",Rq,[h(b,{type:"primary",block:"","native-type":"submit"},{default:F(()=>e[18]||(e[18]=[Ie("更新商品")])),_:1})])]),_:1},8,["onSubmit"])])])}const xq=Nt(Aq,[["render",Pq]]),Dq={data(){return{likes:[]}},methods:{goBack(){this.$router.go(-1)},async loadLikes(){try{const t=Mn(Ke,"users",this.userId,"favorites"),e=await vr(t);this.likes=e.docs.map(n=>({...n.data()})),console.log("收藏夹数据:",this.likes)}catch(t){console.error("获取收藏夹数据失败:",t)}},removeFromLikes(t){_o({title:"确认移除",message:"您确定要从收藏夹移除这个商品吗？",confirmButtonText:"移除",cancelButtonText:"取消"}).then(async()=>{const e=mt(Ke,`users/${this.userId}/favorites`,t.productId);try{dc(e),this.likes=this.likes.filter(n=>n.productId!==t.productId)}catch(n){console.error("删除收藏失败:",n)}this.loadLikes()})},GoDetail(t){this.$router.push({path:"/GoodDetail",query:{items:JSON.stringify(t)}})}},computed:{...Oi("auth",["username","uid"]),userId(){return this.uid}},mounted(){this.loadLikes()}},Oq={class:"like-content"},Vq={key:0},Lq={key:1};function Nq(t,e,n,r,i,s){const o=B("van-nav-bar"),a=B("van-button"),l=B("van-card"),c=B("van-card-group"),d=B("van-empty");return Se(),Ge("div",null,[h(o,{title:"收藏夹","left-text":"返回","left-arrow":"",onClickLeft:s.goBack,class:"custom-title"},null,8,["onClickLeft"]),pe("div",Oq,[i.likes.length>0?(Se(),Ge("div",Vq,[h(c,null,{default:F(()=>[(Se(!0),Ge(rt,null,vn(i.likes,f=>(Se(),Tt(l,{key:f.id,title:f.title,thumb:f.images[0],desc:f.description,price:f.price,num:f.count,class:"card",onClick:m=>s.GoDetail(f)},{footer:F(()=>[h(a,{type:"danger",size:"small",onClick:tc(m=>s.removeFromLikes(f),["stop"])},{default:F(()=>e[0]||(e[0]=[Ie("移除")])),_:2},1032,["onClick"])]),_:2},1032,["title","thumb","desc","price","num","onClick"]))),128))]),_:1})])):(Se(),Ge("div",Lq,[h(d,{description:"您还没有收藏任何商品"})]))])])}const Mq=Nt(Dq,[["render",Nq]]),Fq={data(){return{username:"",email:"",password:"",confirmPassword:"",usernameError:"",passwordError:"",confirmPasswordError:"",avatarFile:[],showPassword:!1,showPasswordCon:!1,isUpdating:!1}},created(){const t=qr.currentUser;t&&(this.username=t.displayName||"",this.email=t.email||"")},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},validatePassword(t){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(this.password)?(this.passwordError="",!0):(this.passwordError=t?"密码至少包含8个字符，包括大小写字母和数字":"",!1)},validateConfirmPassword(t){return this.password!==this.confirmPassword?(this.confirmPasswordError=t?"两次输入的密码不一致":"",!1):(this.confirmPasswordError="",!0)},async updateInfo(){if(!(!this.validatePassword(!0)||!this.validateConfirmPassword(!0))){this.isUpdating=!0;try{const t=qr.currentUser,e=uo.credential(t.email,this.currentPassword);await Px(t,this.password),ar("密码修改成功！"),this.$router.push("/Profile")}catch(t){console.error("密码修改失败:",t),er({message:"密码修改失败，请稍后重试。"})}finally{this.isUpdating=!1}}},goBack(){this.$router.go(-1)}}},Bq={class:"edit-info-page"},Uq={class:"button-container"};function $q(t,e,n,r,i,s){const o=B("van-nav-bar"),a=B("van-loading"),l=B("van-overlay"),c=B("van-icon"),d=B("van-field"),f=B("van-button"),m=B("van-form");return Se(),Ge("div",null,[h(o,{"left-arrow":"",onClickLeft:s.goBack,border:!1,title:"修改密码"},null,8,["onClickLeft"]),h(l,{show:i.isUpdating,"onUpdate:show":e[0]||(e[0]=g=>i.isUpdating=g),"z-index":"2000"},{default:F(()=>[h(a,{size:"30px",type:"spinner",vertical:""},{default:F(()=>e[8]||(e[8]=[Ie("更新中...")])),_:1})]),_:1},8,["show"]),pe("div",Bq,[h(m,{onSubmit:s.updateInfo},{default:F(()=>[h(d,{modelValue:i.password,"onUpdate:modelValue":e[1]||(e[1]=g=>i.password=g),name:"password",label:"新密码",placeholder:"请输入新密码",type:i.showPassword?"text":"password",class:"form-field","error-message":i.passwordError,onBlur:e[2]||(e[2]=()=>s.validatePassword(!0)),onInput:e[3]||(e[3]=()=>s.validatePassword(!1))},{"right-icon":F(()=>[h(c,{name:i.showPassword?"eye-o":"eye",onClick:s.togglePasswordVisibility},null,8,["name","onClick"])]),_:1},8,["modelValue","type","error-message"]),h(d,{modelValue:i.confirmPassword,"onUpdate:modelValue":e[5]||(e[5]=g=>i.confirmPassword=g),name:"confirm-password",label:"确认新密码",placeholder:"请再次输入新密码",type:i.showPasswordCon?"text":"password",class:"form-field","error-message":i.confirmPasswordError,onBlur:e[6]||(e[6]=()=>s.validateConfirmPassword(!0)),onInput:e[7]||(e[7]=()=>s.validateConfirmPassword(!1))},{"right-icon":F(()=>[h(c,{name:i.showPasswordCon?"eye-o":"eye",onClick:e[4]||(e[4]=g=>i.showPasswordCon=!i.showPasswordCon)},null,8,["name"])]),_:1},8,["modelValue","type","error-message"]),pe("div",Uq,[h(f,{round:"",block:"",type:"primary","native-type":"submit",style:{"margin-top":"50px"}},{default:F(()=>e[9]||(e[9]=[Ie("修改")])),_:1})])]),_:1},8,["onSubmit"])])])}const zq=Nt(Fq,[["render",$q],["__scopeId","data-v-dc9d08c9"]]),jq={name:"OrderDetail",props:{orderData:{type:Object,default:null}},data(){var t;return{order:this.orderData||null,orderId:this.$route.params.orderId||((t=this.orderData)==null?void 0:t.id)||""}},async created(){!this.order&&this.orderId&&await this.fetchOrderDetail()},computed:{...Oi("auth",["username","isLogin","uid"])},methods:{async fetchOrderDetail(){try{const t=this.uid,e=mt(Ke,`users/${t}/orders/${this.orderId}`),n=await ts(e);n.exists()?this.order=n.data():this.$router.push("/404")}catch(t){console.error("获取订单详情失败：",t),this.$router.push("/error")}}}},Hq={style:{"margin-top":"40px","background-color":"beige","min-height":"100vh"}},qq={class:"order-content"},Gq={style:{"font-weight":"bold"}},Wq={class:"order-content"},Kq={class:"order-content"},Yq={class:"order-items"};function Qq(t,e,n,r,i,s){var g;const o=B("van-nav-bar"),a=B("van-divider"),l=B("van-icon"),c=B("van-cell"),d=B("van-cell-group"),f=B("van-tag"),m=B("van-card");return Se(),Ge("div",Hq,[h(o,{title:"订单详情","left-arrow":"",onClickLeft:e[0]||(e[0]=_=>this.$router.push({path:"/home"})),class:"custom-title"}),h(a),pe("div",qq,[h(d,{inset:""},{default:F(()=>[h(c,null,{title:F(()=>{var _,T;return[h(l,{name:"location-o",style:{"margin-right":"8px"},size:"18px"}),pe("span",Gq,Ye((_=i.order)==null?void 0:_.address.name)+" "+Ye((T=i.order)==null?void 0:T.address.address),1)]}),label:F(()=>{var _;return[pe("span",null,Ye((_=i.order)==null?void 0:_.address.tel),1)]}),_:1})]),_:1})]),pe("div",Wq,[h(d,{inset:""},{default:F(()=>[h(c,{title:"订单编号"},{value:F(()=>[Ie(Ye(i.orderId),1)]),_:1}),h(c,{title:"创建时间"},{value:F(()=>{var _;return[Ie(Ye((_=i.order)==null?void 0:_.createdAt.toDate().toLocaleString()),1)]}),_:1}),h(c,{title:"支付方式"},{value:F(()=>{var _;return[Ie(Ye((_=i.order)==null?void 0:_.paymentMethod),1)]}),_:1}),h(c,{title:"配送方式"},{value:F(()=>{var _;return[Ie(Ye((_=i.order)==null?void 0:_.shippingMethod),1)]}),_:1})]),_:1})]),pe("div",Kq,[pe("div",Yq,[(Se(!0),Ge(rt,null,vn((g=i.order)==null?void 0:g.items,(_,T)=>(Se(),Tt(m,{key:T,title:_.title,thumb:_.images[0],desc:_.description,price:_.price*_.count,num:_.count,class:"card"},{tags:F(()=>[h(f,{type:"default"},{default:F(()=>[Ie("单价：¥"+Ye(_.price),1)]),_:2},1024)]),_:2},1032,["title","thumb","desc","price","num"]))),128))]),h(d,{inset:""},{default:F(()=>[h(c,{title:"商品总价"},{value:F(()=>{var _;return[Ie("¥ "+Ye((_=i.order)==null?void 0:_.totalPrice),1)]}),_:1}),h(c,{title:"优惠金额"},{value:F(()=>{var _;return[Ie("¥ "+Ye((_=i.order)==null?void 0:_.discount),1)]}),_:1}),h(c,{title:"运费"},{value:F(()=>{var _;return[Ie("¥ "+Ye((_=i.order)==null?void 0:_.shippingFee),1)]}),_:1}),h(c,{title:"合计金额"},{value:F(()=>{var _;return[Ie("¥ "+Ye((_=i.order)==null?void 0:_.finalAmount),1)]}),_:1})]),_:1})]),h(a)])}const Xq=Nt(jq,[["render",Qq]]),Jq={name:"OrderList",data(){return{orders:[]}},async created(){await this.fetchOrders()},methods:{async fetchOrders(){try{const t=this.$store.state.auth.user.uid,e=Mn(Ke,`users/${t}/orders`),n=await vr(e);this.orders=n.docs.map(r=>({id:r.id,...r.data()}))}catch(t){console.error("获取订单列表失败：",t)}},goToOrderDetail(t){this.$router.push({path:`/OrderDetail/${t.id}`,query:{orderData:JSON.stringify(t)}})}}},Zq={class:"order-list"};function eG(t,e,n,r,i,s){const o=B("van-nav-bar"),a=B("van-tag"),l=B("van-card");return Se(),Ge("div",null,[h(o,{title:"我的订单","left-arrow":"",onClickLeft:e[0]||(e[0]=c=>t.$router.go(-1))}),pe("div",Zq,[(Se(!0),Ge(rt,null,vn(i.orders,(c,d)=>{var f;return Se(),Tt(l,{key:d,title:"订单编号: "+c.id,thumb:(f=c.items[0])==null?void 0:f.images[0],desc:"支付方式: "+c.paymentMethod,price:"总价: ¥"+c.finalAmount,class:"card",onClick:m=>s.goToOrderDetail(c)},{tags:F(()=>[h(a,{type:"success"},{default:F(()=>e[1]||(e[1]=[Ie("支付成功")])),_:1})]),_:2},1032,["title","thumb","desc","price","onClick"])}),128))])])}const tG=Nt(Jq,[["render",eG]]),nG=[{path:"/",component:o8,meta:{showNavbar:!0},children:[{path:"",redirect:"/home"},{path:"home",component:E8,meta:{active:0}},{path:"cart",component:iS,meta:{active:1}},{path:"profile",component:sS,meta:{active:2}}]},{path:"/GoodDetail",component:YH,meta:{showNavbar:!1},props:!0},{path:"/CheckOut",component:N8,meta:{showNavbar:!1},props:!0},{path:"/Address",component:$8,meta:{showNavbar:!1},props:!0},{path:"/Login",component:pc,meta:{showNavbar:!1},props:!0},{path:"/Register",component:W8,meta:{showNavbar:!1},props:!0},{path:"/Settings",component:X8,meta:{showNavbar:!1},props:!0},{path:"/Notification",component:eq,meta:{showNavbar:!1},props:!0},{path:"/EditInfo",component:oq,meta:{showNavbar:!1},props:!0},{path:"/AdminUploadGoods",component:vq,meta:{showNavbar:!1},props:!0},{path:"/AdminEditGoods",component:wq,meta:{showNavbar:!1},props:!0},{path:"/AdminCoupon",component:Sq,meta:{showNavbar:!1},props:!0},{path:"/AdminUpdateGoods",component:xq,meta:{showNavbar:!1},props:!0},{path:"/Like",component:Mq,meta:{showNavbar:!1},props:!0},{path:"/ChangePW",component:zq,meta:{showNavbar:!1},props:!0},{path:"/OrderDetail/:orderId",component:Xq,meta:{showNavbar:!1},props:!0},{path:"/OrderList",component:tG,meta:{showNavbar:!1},props:!0}],rG=tH({history:Pj(),routes:nG}),iG={namespaced:!0,state:{user:null,role:null},mutations:{setUser(t,e){t.user=e,t.role=e.role||"user"},clearUser(t){t.user=null,t.role="user"}},getters:{username(t){var e;return((e=t.user)==null?void 0:e.displayName)||"未登录，请点击登录"},uid(t){var e;return((e=t.user)==null?void 0:e.uid)||null},isLogin(t){return!!t.user},isAdmin(t){return t.role==="admin"}}},sG=bH({state(){return{isLogin:!1,userAvatar:"",addresses:[],cartGoods:[],cartCounter:0,GoodsCurrentSelKind:0,checkGoods:[],checkCounter:0,selectedAddress:null,favorites:[]}},mutations:{async refreshCart(t){var i,s;const e=(s=(i=t.auth)==null?void 0:i.user)==null?void 0:s.uid;if(!e){console.error("未登录，无法加载购物车");return}const n=mt(Ke,"cart",e),r=await ts(n);r.exists()?(t.cartGoods=r.data().items,t.cartCounter=t.cartGoods.reduce((o,a)=>o+a.count,0)):(t.cartGoods=[],t.cartCounter=0)},async addGoodsToCart(t,e){var o,a;const n=(a=(o=t.auth)==null?void 0:o.user)==null?void 0:a.uid;if(!n){console.error("未登录，无法添加商品到购物车");return}const r=mt(Ke,"cart",n),i=await ts(r),s={...e,count:1};if(i.exists()){const l=i.data(),c=l.items.find(d=>d.id===e.id);c?c.count+=1:l.items.push(s),await xn(r,{items:l.items}),t.cartGoods=l.items}else{const l={uid:n,items:[s]};await io(r,l),t.cartGoods=l.items}t.cartCounter=t.cartGoods.reduce((l,c)=>l+c.count,0)},setSelectedAddress(t,e){t.selectedAddress=e},addGoodsToCheck(t,e){e.isInCheck=!0,t.checkGoods.push(e),t.checkCounter++},removeGoodsFromCheck(t,e){const n=t.checkGoods.findIndex(r=>r.id===e);n!==-1&&(t.checkCounter-=t.checkGoods[n].count,t.checkGoods.splice(n,1))},async deleteGoodsFromCart(t,e){var s,o;const n=(o=(s=t.auth)==null?void 0:s.user)==null?void 0:o.uid;if(!n){console.error("未登录，无法删除购物车商品");return}const r=mt(Ke,"cart",n),i=await ts(r);if(i.exists()){const a=i.data();a.items=a.items.filter(l=>l.id!==e),await xn(r,{items:a.items}),t.cartGoods=a.items,t.cartCounter=t.cartGoods.reduce((l,c)=>l+c.count,0)}this.commit("removeGoodsFromCheck",e)},async updateGoodsQuantity(t,{itemId:e,count:n}){var o,a;const r=(a=(o=t.auth)==null?void 0:o.user)==null?void 0:a.uid;if(!r){console.error("未登录，无法更新商品数量");return}const i=mt(Ke,"cart",r),s=t.cartGoods.findIndex(l=>l.id===e);s!==-1&&(t.cartGoods[s].count=n,await io(i,{items:t.cartGoods}),t.cartCounter=t.cartGoods.reduce((l,c)=>l+c.count,0))},async initializeCart(t){var i,s;const e=(s=(i=t.auth)==null?void 0:i.user)==null?void 0:s.uid;if(!e){console.error("未登录，无法加载购物车");return}const n=mt(Ke,"cart",e),r=await ts(n);r.exists()?(t.cartGoods=r.data().items,t.cartCounter=t.cartGoods.reduce((o,a)=>o+a.count,0)):(t.cartGoods=[],t.cartCounter=0)},addGoods(t,e){const n=t.cartGoods.find(r=>r.id===e);n&&(n.count++,t.cartCounter++)},addChecks(t,e){const n=t.checkGoods.find(r=>r.id===e);n&&(n.count++,t.checkCounter++)},reduceGoods(t,e){const n=t.cartGoods.find(r=>r.id===e);n&&n.count>0&&(n.count--,t.cartCounter--)},changeCurrentSelKind(t,e){t.GoodsCurrentSelKind=e},login(t,e){t.username=e,t.isLogin=!0},logout(t){t.isLogin=!1,t.username=null,t.cartGoods=[],t.cartCounter=0,t.checkGoods=[],t.checkCounter=0,console.log("已退出登录"+t.cartCounter)}},modules:{auth:iG}});(function(e,n){var r=n.documentElement,i=e.devicePixelRatio||1;function s(){n.body?n.body.style.fontSize=12*i+"px":n.addEventListener("DOMContentLoaded",s)}s();function o(){var c=r.clientWidth/10;r.style.fontSize=c+"px"}if(o(),e.addEventListener("resize",o),e.addEventListener("pageshow",function(c){c.persisted&&o()}),i>=2){var a=n.createElement("body"),l=n.createElement("div");l.style.border=".5px solid transparent",a.appendChild(l),r.appendChild(a),l.offsetHeight===1&&r.classList.add("hairlines"),r.removeChild(a)}})(window,document);const st=P0(U2);st.use(rG);st.use(sG);st.use(q5);st.use(S1);st.use(cp);st.use(oC);st.use(sd);st.use(rh);st.use(ih);st.use(nt);st.use(lh);st.use(yp);st.use(PC);st.use(A1);st.use(ZC);st.use(XC);st.use(YC);st.use(e1);st.use(cC);st.use(FC);st.use(DC);st.use(D1);st.use(cr);st.use(w1);st.use(Ap);st.use(T1);st.use(kp);st.use(Pp);st.use(ar);st.use(r1);st.use(ga);st.use(mc);st.use(gc);st.use(HC);st.mount("#app");
